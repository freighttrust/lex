var bundle_ce8d2a9eee16db3f8f1d85dad30bfa64=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};e[o].call(i.exports,i,i.exports,n);i.l=!0;return i.exports}n.m=e;n.c=t;n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})};n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};n.t=function(e,t){1&t&&(e=n(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);n.r(o);Object.defineProperty(o,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o};n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";Object.defineProperty(n,"p",{get:function(){try{if("string"!=typeof __WEBPACK_PUBLIC_PATH__)throw new Error("WebpackRequireFrom: '__WEBPACK_PUBLIC_PATH__' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return __WEBPACK_PUBLIC_PATH__}catch(e){console.error(e);return""}}});return n(n.s=0)}({"+3n1BQpy":function(e,t,n){e.exports=n("jzsWUI8o")("+3n1BQpy")},"/5D1hk9E":function(e,t,n){e.exports=n("kTWnU3g/")("/5D1hk9E")},"/BuhnsSZ":function(e,t,n){e.exports=n("jzsWUI8o")("/BuhnsSZ")},"/Mj9r7UK":function(e,t,n){e.exports=n("kTWnU3g/")("/Mj9r7UK")},"/TrPklgp":function(e,t,n){e.exports=n("Hvh/Xooh")("/TrPklgp")},0:function(e,t,n){e.exports=n},"077jYPqM":function(e,t,n){e.exports=n("Hvh/Xooh")("077jYPqM")},"0xLFo+iU":function(e,t,n){e.exports=n("kTWnU3g/")("0xLFo+iU")},"1RwRpBM3":function(e,t,n){e.exports=n("jzsWUI8o")("1RwRpBM3")},"1ZvnjlSQ":function(e,t,n){e.exports=n("kTWnU3g/")("1ZvnjlSQ")},"1r9wmanl":function(e,t,n){e.exports=n("kTWnU3g/")("1r9wmanl")},"2UegGszP":function(e,t,n){e.exports=n("kTWnU3g/")("2UegGszP")},"3Ev9oom1":function(e,t,n){e.exports=n("jzsWUI8o")("3Ev9oom1")},"3HgpF6br":function(e,t,n){e.exports=n("jzsWUI8o")("3HgpF6br")},"3YR3iXos":function(e,t){e.exports='<div ng-show="showLoading" class="co_loading">\r\n    \x3c!--\r\n     @file newSnippetForm template\r\n    --\x3e\r\n</div>\r\n\r\n<div ng-show="!showLoading && parameters.allowedToAddSnippet">\r\n    <div class="co_redlineLightbox_newSnippetForm">\r\n        <form name="newSnippetForm">\r\n            <div class="co_overlayBox_left">\r\n                <div class="co_overlayBox_right">\r\n                    <div class="co_overlayBox_content">\r\n                        <div class="co_redlineLightbox_newSnippetInfo">\r\n                            <div><label for="itemName" class="co_bold">{{snippetNameLabelText}}</label></div>\r\n                            <p ng-show="newSnippetForm.itemName.$invalid && newSnippetForm.itemName.$dirty" class="co_redStatus">{{invalidFieldWarningMessageText}}</p>\r\n                            <input type="text" ng-model="snippet.itemName" name="itemName" id="itemName" aria-required="true" required />\r\n                        </div>\r\n                        <div ng-if="showTextEditorToolbar" id="toolbar">\r\n                            <a data-wysihtml5-action="change_view">{{showHtmlText}}</a>\r\n                        </div>\r\n                        <div class="co_redlineLightbox_newSnippetInfo">\r\n                            <div><label for="itemText" class="co_bold">{{copyPasteSnippetLabelText}}</label></div>\r\n                            <p ng-show="snippet.text == \'\'" class="co_redStatus">{{invalidFieldWarningMessageText}}</p>\r\n                            <textarea text-editor options="textEditorOptions" interaction-event="updateSnippetTextFromTextEditor" parent-element="redlineToolLightbox" ng-model="snippet.text" name="itemText" id="itemText" aria-required="true" required></textarea>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="co_overlayBox_optionsBottomLeft">\r\n                <div class="co_overlayBox_optionsBottomRight">\r\n                    <div class="co_overlayBox_optionsBottom">\r\n                        <div id="coid_redlineLightbox_newSnippetFooter">\r\n                            <ul id="coid_redlineLightbox_newSnippetFooterButtons">\r\n                                <li>\r\n                                    <input type="button" class="co_primaryBtn" value="{{saveButtonText}}" ng-click="saveNewSnippet(snippet, newSnippetForm)" ng-class="{co_disabled: newSnippetForm.$invalid}">\r\n                                <li>\r\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" ng-click="cancelNewSnippetForm(newSnippetForm)">{{cancelButtonText}}</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n<div ng-show="!showLoading && !parameters.allowedToAddSnippet">\r\n    <div class="co_redlineLightbox_notifications">{{parameters.notAllowedMessage}}</div>\r\n    <div class="co_overlayBox_optionsBottomLeft">\r\n        <div class="co_overlayBox_optionsBottomRight">\r\n            <div class="co_overlayBox_optionsBottom">\r\n                <div id="coid_redlineLightbox_newSnippetFooter">\r\n                    <ul id="coid_redlineLightbox_newSnippetFooterButtons">\r\n                        <li>\r\n                            <input type="button" class="co_primaryBtn" value="{{confirmButtonText}}" ng-click="cancelNewSnippetForm()">\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"3j4fOEoY":function(e,t,n){e.exports=n("kTWnU3g/")("3j4fOEoY")},"4+5Xg13e":function(e,t,n){e.exports=n("kTWnU3g/")("4+5Xg13e")},"4D5HjWqR":function(e,t,n){e.exports=n("jzsWUI8o")("4D5HjWqR")},"4J0n6L5+":function(e,t,n){e.exports=n("jzsWUI8o")("4J0n6L5+")},"4Xl6rFd5":function(e,t,n){e.exports=n("kTWnU3g/")("4Xl6rFd5")},"5chxY23a":function(e,t,n){e.exports=n("kTWnU3g/")("5chxY23a")},"6OT0SkNi":function(e,t,n){e.exports=n("kTWnU3g/")("6OT0SkNi")},"6SLFWtq5":function(e,t,n){e.exports=n("jzsWUI8o")("6SLFWtq5")},"6Soq1Eop":function(e,t,n){e.exports=n("kTWnU3g/")("6Soq1Eop")},"7EyuijQN":function(e,t){
e.exports='<div class="co_redlineLightbox_comparisonTab">\r\n    \x3c!--\r\n     @file comparisonItemsTab template\r\n    --\x3e\r\n    <div ng-if="!comparisonItemsLoaded" class="co_loading"></div>\r\n    <div ng-if="comparisonItemsLoaded">\r\n        <h4 id="coid_redlineLightbox_countMessage" class="co_bold">\r\n            <span id="coid_redlineLightbox_itemCount">{{countOfComparisonItemsText}}</span>\r\n        </h4>\r\n\r\n        <div class="co_redlineLightbox_notifications"><span class="co_bold" ng-if="showInformationMessage" ng-class="{co_redStatus: informationMessage.type==\'error\', co_greenStatus: informationMessage.type==\'success\'}">{{informationMessage.text}}</span></div>\r\n      \r\n          <div class="co_redlineLightbox_notifications">\r\n            <p ng-if="listOfComparisonItems.length > 1" id="coid_redlineLightbox_instruction">{{selectTwoSnippetsToCompareMessageText}}</p>\r\n        </div>\r\n        \r\n        <div class="co_redlineLightbox_notifications">\r\n            <div ng-if="listOfComparisonItems.length == 0">{{noSelectionsMessageText}}</div>\r\n            <div ng-if="listOfComparisonItems.length == 1">{{addOneMoreItemMessageText}}</div>\r\n            <div ng-if="notAddedComparisonItem" not-added-comparison-item></div>\r\n        </div>\r\n\r\n\r\n        <ul ng-if="listOfComparisonItems.length > 0" class="co_redlineLightbox_tabItemsList">\r\n            <li ng-repeat="item in listOfComparisonItems" comparison-item></li>\r\n        </ul>\r\n\r\n        <div class="co_overlayBox_optionsBottomLeft">\r\n            <div class="co_overlayBox_optionsBottomRight">\r\n                <div class="co_overlayBox_optionsBottom">\r\n                    <div id="coid_redlineLightbox_footer">\r\n                        <ul id="coid_redlineLightbox_footerButtons">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<input type="button" class="co_primaryBtn" ng-class="{co_disabled : listOfComparisonItems.length < 2 || !compareButtonEnable}" value="{{startCompareButtonText}}" ng-click="startCompare()">\r\n\t\t\t\t\t\t\t</li>\r\n                            <li>\r\n                                <a href="javascript:void(0);" ng-click="$emit(\'closeRedlineToolLightbox\')">{{closeButtonText}}</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"7JGRqHyH":function(e,t,n){e.exports=n("jzsWUI8o")("7JGRqHyH")},"7qMMF/e5":function(e,t,n){e.exports=n("jzsWUI8o")("7qMMF/e5")},"88X6RTIu":function(e,t,n){e.exports=n("jzsWUI8o")("88X6RTIu")},"8CnfOw+t":function(e,t,n){e.exports=n("jzsWUI8o")("8CnfOw+t")},"9/ryOT6E":function(e,t){e.exports='<ul>\r\n\t<li>\r\n\t\t<input type="button" class="co_primaryBtn" id="co_pageFeedbackSubmit" value="<%=submitText%>" />\r\n\t</li>\r\n\t<li>\r\n\t\t<a href="javascript:void(0);" id="co_pageFeedbackCancel"><%=cancelText%></a>\r\n\t</li>\r\n</ul>\r\n'},"9RA8qIzU":function(e,t,n){e.exports=n("kTWnU3g/")("9RA8qIzU")},A0baXm0S:function(e,t){e.exports="<div class='<%=dropdownBoxExpandedClass%>'>\r\n\t\x3c!-- toggle between co_dropDownBoxCollapsed and co_dropdownBoxExpanded to show/hide --\x3e\r\n\t<div class='<%=dropdownBoxHeaderClass%>'></div>\r\n\t<div class='<%=dropdownBoxContentClass%>'>\r\n\t\t<button id='<%=modalContainerCloseId%>' class='<%=widgetCloseIconClass%>' href='javascript:void(0);'>Close</button>\r\n\t\t<div class='<%=dropdownBoxContentRightClass%>'>\r\n\t\t\t<ul>\r\n\t\t\t\t\x3c!-- co_active when it is the selected element --\x3e\r\n\t\t\t\t<li id='<%=ShowAllItemsOptionsModalId%>'<% if (activeItemsOptionsModalId == ShowAllItemsOptionsModalId) { %> class='<%=activeClass%>'<% } %>><a href='javascript:void(0)'><%=expandDraftingNotesModalLabel%></a></li>\r\n\t\t\t\t<li id='<%=HideAllItemsOptionsModalId%>'<% if (activeItemsOptionsModalId == HideAllItemsOptionsModalId) { %> class='<%=activeClass%>'<% } %>><a href='javascript:void(0)'><%=collapseDraftingNotesModalLabel%></a></li>\r\n\t\t\t\t<li id='<%=ShowOnlyItemsOptionsModalId%>'<% if (activeItemsOptionsModalId == ShowOnlyItemsOptionsModalId) { %> class='<%=activeClass%>'<% } %>><a href='javascript:void(0)'><%=showOnlyDraftingNotesModalLabel%></a></li>\r\n\t\t\t</ul>\r\n\t\t\t<div class='<%=clearClass%>'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='<%=dropdownBoxFooterClass%>'></div>\r\n</div>\r\n"},AHULqEA8:function(e,t,n){e.exports=n("jzsWUI8o")("AHULqEA8")},AN91zA3h:function(e,t,n){e.exports=n("kTWnU3g/")("AN91zA3h")},"B8+jQc17":function(e,t,n){e.exports=n("jzsWUI8o")("B8+jQc17")},Bx16oQjF:function(e,t,n){e.exports=n("jzsWUI8o")("Bx16oQjF")},"By2jxn+X":function(e,t,n){e.exports=n("jzsWUI8o")("By2jxn+X")},CCuXZRWj:function(e,t,n){e.exports=n("jzsWUI8o")("CCuXZRWj")},CRJvDv3C:function(e,t,n){e.exports=n("kTWnU3g/")("CRJvDv3C")},CYSsrNyy:function(e,t,n){e.exports=n("kTWnU3g/")("CYSsrNyy")},Ci3UP7Ia:function(e,t,n){e.exports=n("kTWnU3g/")("Ci3UP7Ia")},"Cxq17/Nd":function(e,t,n){e.exports=n("jzsWUI8o")("Cxq17/Nd")},DOxHd27Z:function(e,t,n){e.exports=n("jzsWUI8o")("DOxHd27Z")},DZmxAQuD:function(e,t,n){e.exports=n("Hvh/Xooh")("DZmxAQuD")},"E/7qjUa+":function(e,t,n){e.exports=n("jzsWUI8o")("E/7qjUa+")},"ECuP/agU":function(e,t,n){e.exports=n("Hvh/Xooh")("ECuP/agU")},Ewrjn0pW:function(e,t){e.exports='<li class="co_redlineLightbox_tabItem">\r\n    \x3c!--\r\n     @file reportItem template\r\n    --\x3e\r\n    <div ng-if="!report.isProcessed" name="reportForm" ng-form>\r\n        <div class="co_redlineLightbox_tabItem_itemData co_floatLeft">\r\n            <p ng-if="!report.editMode" class="co_redlineLightbox_tabItem_itemName co_bold">\r\n                <a class="co_redlineLightbox_tabItem_reportLink" ng-href="{{getReportUrl(report.itemGuid)}}" href="{{getReportUrl(report.itemGuid)}}" title="{{report.itemName}}">{{report.itemName}}</a>\r\n            </p>\r\n            <div ng-if="report.editMode">\r\n                <input type="text" name="newItemName" ng-model="report.newItemName" required />\r\n                <p ng-show="reportForm.newItemName.$invalid" class="co_redStatus">{{invalidFieldWarningMessageText}}</p>\r\n            </div>\r\n            <p class="co_redlineLightbox_tabItem_savedDate co_italic">{{report.modifiedDate | renderDate}}</p>\r\n        </div>\r\n\r\n        <div class="co_redlineLightbox_tabItem_itemEdit co_floatRight co_textRight">\r\n            <a ng-if="!report.editMode" class="co_redlineLightbox_tabItem_editButton" title="{{editButtonText}}" ng-click="editReport(report)" href="javascript:void(0);">{{editButtonText}}</a>\r\n            <a ng-if="!report.editMode" class="co_redlineLightbox_tabItem_deleteButton" title="{{deleteButtonText}}" ng-click="deleteReport(report)" href="javascript:void(0);">{{deleteButtonText}}</a>\r\n            <a ng-if="report.editMode" ng-class="{co_disabled: reportForm.$invalid}" class="co_redlineLightbox_tabItem_editSaveButton" title="{{saveButtonText}}" ng-click="updateReport(report)" href="javascript:void(0);">{{saveButtonText}}</a>\r\n            <a ng-if="report.editMode" class="co_redlineLightbox_tabItem_editCancelButton" title="{{cancelButtonText}}" ng-click="exitFromEditMode(report)" href="javascript:void(0);">{{cancelButtonText}}</a>\r\n            <p class="co_redlineLightbox_tabItem_notAddedMessage co_hideState">{{notAddedStatusText}}</p>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="report.isProcessed" class="co_progressIndicator">\r\n        <img ng-src="{{spinnerSrc}}">\r\n    </div>\r\n\r\n    <div class="co_clear"></div>\r\n</li>\r\n'},FSlep2dZ:function(e,t,n){e.exports=n("jzsWUI8o")("FSlep2dZ")},FUXVrSqe:function(e,t,n){e.exports=n("kTWnU3g/")("FUXVrSqe")},FjCF9LDG:function(e,t,n){e.exports=n("kTWnU3g/")("FjCF9LDG")},Fn4GUS89:function(e,t,n){e.exports=n("kTWnU3g/")("Fn4GUS89")},G1hdlbJ8:function(e,t,n){e.exports=n("jzsWUI8o")("G1hdlbJ8")},GDM5NzMC:function(e,t,n){e.exports=n("Hvh/Xooh")("GDM5NzMC")},GEMZhLWf:function(e,t,n){e.exports=n("kTWnU3g/")("GEMZhLWf")},GQm0BCpH:function(e,t,n){e.exports=n("jzsWUI8o")("GQm0BCpH")},Gqr5pQzq:function(e,t,n){e.exports=n("jzsWUI8o")("Gqr5pQzq")},GvJ62DCo:function(e,t,n){
e.exports=n("kTWnU3g/")("GvJ62DCo")},Gz42JICz:function(e,t,n){e.exports=n("kTWnU3g/")("Gz42JICz")},H773KgNT:function(e,t){e.exports='<div class="co_overlayBox_content">\r\n\t<div class="co_feedbackForm_content">\r\n\t\t<label for="co_pageSurveyComment"><%=descriptionText%></label>\r\n\t\t<div class="co_clear"></div>\r\n\t\t<textarea id="co_pageSurveyComment" rows="3" cols="10" maxlength="1000" aria-required="true" aria-invalid="false" aria-describedby="co_warning" required></textarea>\r\n\t\t<div id="co_warning" class="InlineError-message co_hideState" role="alert" aria-live="assertive"></div>\r\n\t</div>\r\n\t<div id="co_feedbackForm_footerText"><%=text%></div>\r\n</div>'},"Hvh/Xooh":function(e,t){e.exports=bundle_0eb42460e9ae6f5ddde887c1728b98c0},HyBIgqjG:function(e,t,n){e.exports=n("Hvh/Xooh")("HyBIgqjG")},IiNtJFjh:function(e,t,n){e.exports=n("jzsWUI8o")("IiNtJFjh")},Kv5vPWtp:function(e,t){e.exports='<div id="<%=containerId%>">\r\n\t<% if (IacA11yDraftingNotes) {%>\r\n\t\t<button id="<%=anchorId%>" title="<%=toolTip%>"></button>\r\n\t<% } else {%>\r\n\t\t<a id="<%=anchorId%>" href="javascript:void(0)" class="kh_icon icon-remove-notepad" title="<%=toolTip%>">\r\n\t\t\t<span id="<%=anchorSpanId%>"><%=anchorSpanText%></span>\r\n\t\t</a>\r\n\t\t<div id="<%=modalContainerId%>">\r\n\t\t\t<div id="<%=modalContainerInnerId%>"></div>\r\n\t\t</div>\r\n\t<% } %>\r\n</div>\r\n'},L0cfzpXt:function(e,t,n){e.exports=n("jzsWUI8o")("L0cfzpXt")},LT1bhBfT:function(e,t,n){e.exports=n("kTWnU3g/")("LT1bhBfT")},LUcJ47Td:function(e,t,n){e.exports=n("jzsWUI8o")("LUcJ47Td")},LfLoflzY:function(e,t,n){e.exports=n("jzsWUI8o")("LfLoflzY")},LvDlAkAJ:function(e,t,n){e.exports=n("jzsWUI8o")("LvDlAkAJ")},M4pqUJYX:function(e,t,n){e.exports=n("kTWnU3g/")("M4pqUJYX")},M9ntRK8r:function(e,t,n){e.exports=n("Hvh/Xooh")("M9ntRK8r")},MzrF7Ugc:function(e,t,n){e.exports=n("kTWnU3g/")("MzrF7Ugc")},"N/yI5EfV":function(e,t,n){e.exports=n("jzsWUI8o")("N/yI5EfV")},N3Z774cZ:function(e,t,n){e.exports=n("jzsWUI8o")("N3Z774cZ")},NVwz6vXo:function(e,t,n){e.exports=n("kTWnU3g/")("NVwz6vXo")},NfoyK8jb:function(e,t,n){e.exports=n("kTWnU3g/")("NfoyK8jb")},OFRWjO3K:function(e,t,n){e.exports=n("jzsWUI8o")("OFRWjO3K")},POx4U1CN:function(e,t,n){(function(e,t,n,o,i){var a,r,s={version:"0.5.5",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",INVISIBLE_SPACE_REG_EXP:/\uFEFF/g,VOID_ELEMENTS:"area, base, br, col, embed, hr, img, input, keygen, link, meta, param, source, track, wbr",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,TAB_KEY:9,DELETE_KEY:46};s.polyfills=function(e,t){String.prototype.trim||(n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(n,"")});var n,o;(function(){var n="addEventListener",o="removeEventListener";if(t[n])return;e.Element.prototype[n]=e[n]=t[n]=function(t,n,o){return(o=this).attachEvent("on"+t,function(t){(t=t||e.event).target=t.target||t.srcElement;t.preventDefault=t.preventDefault||function(){t.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0};t.which=t.button?2===t.button?3:4===t.button?2:t.button:t.keyCode;n.call(o,t)})};e.Element.prototype[o]=e[o]=t[o]=function(e,t){return this.detachEvent("on"+e,t)}})();Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(e.Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(e.Element.prototype,"textContent").get&&(o=Object.getOwnPropertyDescriptor(e.Element.prototype,"innerText"),Object.defineProperty(e.Element.prototype,"textContent",{get:function(){return o.get.call(this)},set:function(e){return o.set.call(this,e)}}));Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this.length,o=-1,i=t>>>0;~(n-i);o=this[--n]===e?n:o);return o});Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};o.prototype=this.prototype;i.prototype=new o;return i});(function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;while(t[n]&&t[n]!==this)++n;return!!t[n]};e.closest=e.closest||function(e){var t=this;while(t){if(t.matches(e))break;t=t.parentElement}return t}})(Element.prototype);"document"in e&&("classList"in t.createElement("_")?"DOMTokenList"in e&&function(){"use strict";var n=t.createElement("_");n.classList.add("c1","c2");if(!n.classList.contains("c2")){var o=function(t){var n=e.DOMTokenList.prototype[t];e.DOMTokenList.prototype[t]=function(e){var t,o=arguments.length;for(t=0;t<o;t++){e=arguments[t];n.call(this,e)}}};o("add");o("remove")}n.classList.toggle("c3",!1);if(n.classList.contains("c3")){var i=e.DOMTokenList.prototype.toggle;e.DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:i.call(this,e)}}n=null}():function(e){"use strict";if(!("Element"in e))return;var t=e.Element["prototype"],n=Object,o=String["prototype"].trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array["prototype"].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e;this.code=DOMException[e];this.message=t},r=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(e,t)},s=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,a=n.length;i<a;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s["prototype"]=[],d=function(){return new s(this)};a["prototype"]=Error["prototype"];l.item=function(e){return this[e]||null};l.contains=function(e){return-1!==r(this,e+="")};l.add=function(){var e,t=arguments,n=0,o=t.length,i=!1;do{e=t[n]+"";if(-1===r(this,e)){this.push(e);i=!0}}while(++n<o);i&&this._updateClassName()};l.remove=function(){var e,t,n=arguments,o=0,i=n.length,a=!1;do{e=n[o]+"";t=r(this,e);while(-1!==t){this.splice(t,1);a=!0;t=r(this,e)}}while(++o<i);a&&this._updateClassName()};l.toggle=function(e,t){e+="";var n=this.contains(e),o=n?!0!==t&&"remove":!1!==t&&"add";o&&this[o](e);return!0===t||!1===t?t:!n};l.toString=function(){return this.join(" ")};if(n.defineProperty){var c={get:d,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",c)}catch(e){if(-2146823252===e.number){c.enumerable=!1;n.defineProperty(t,"classList",c)}}}else n["prototype"].__defineGetter__&&t.__defineGetter__("classList",d)}(e));var i=function(e){var t=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t.push(e):t=t.concat(i(e));return t},a=function(){window.removeEventListener("load",a);"Node"in window&&"normalize"in Node.prototype&&function(){if("createRange"in document&&"getSelection"in window){var e,t,n=document.createElement("div"),o=document.createTextNode("a"),i=document.createTextNode("a"),a=document.createTextNode("a"),r=document.createRange();n.setAttribute("contenteditable","true");n.appendChild(o);n.appendChild(i);n.appendChild(a);document.body.appendChild(n);r.setStart(i,1);r.setEnd(i,1);(e=window.getSelection()).removeAllRanges();e.addRange(r);n.normalize();e=window.getSelection();t=1!==n.childNodes.length||e.anchorNode!==n.firstChild||2!==e.anchorOffset;n.parentNode.removeChild(n);e.removeAllRanges();return t}}()&&function(){Node.prototype.normalize;Node.prototype.normalize=function(){
var e=i(this),t=this.ownerDocument.defaultView.getSelection(),n=t.anchorNode,o=t.anchorOffset,a=n&&1===n.nodeType&&n.childNodes.length>0?n.childNodes[o]:void 0,r=t.focusNode,s=t.focusOffset,l=r&&1===r.nodeType&&s>0?r.childNodes[s-1]:void 0,d=this.ownerDocument.createRange(),c=e.shift(),u=c?e.shift():null;if(l&&3===l.nodeType){r=l;s=l.nodeValue.length;l=void 0}if(a&&3===a.nodeType){n=a;o=0;a=void 0}if(n===r&&s<o||n!==r&&n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING&&!(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINS)){r=[n,n=r][0];s=[o,o=s][0]}while(c&&u)if(u.previousSibling&&u.previousSibling===c){if(n===u){n=c;o=c.nodeValue.length+o}if(r===u){r=c;s=c.nodeValue.length+s}c.nodeValue=c.nodeValue+u.nodeValue;u.parentNode.removeChild(u);u=e.shift()}else{c=u;u=e.shift()}l&&(s=Array.prototype.indexOf.call(l.parentNode.childNodes,l)+1);a&&(o=Array.prototype.indexOf.call(a.parentNode.childNodes,a));if(function(e){var t=e.ownerDocument,n=e;do{if(n===t)return!0;n=n.parentNode}while(n);return!1}(this)&&n&&n.parentNode&&r&&r.parentNode){d.setStart(n,o);d.setEnd(r,s);t.removeAllRanges();t.addRange(d)}}}()};"complete"!==t.readyState?window.addEventListener("load",a):a();var r=function(){try{var e=new CustomEvent("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}();(function(){if(!r&&"CustomEvent"in window){function n(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var o=t.createEvent("CustomEvent");o.initCustomEvent(e,n.bubbles,n.cancelable,n.detail);return o}n.prototype=e.Event.prototype;e.CustomEvent=n;r=!0}})()};s.polyfills(window,document);a=function(){var e="object",t="function",n="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],a=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],r=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function s(n,o){var i=typeof n[o];return i==t||!(i!=e||!n[o])||"unknown"==i}function l(t,n){return!(typeof t[n]!=e||!t[n])}function d(e,t){return typeof e[t]!=n}function c(e){return function(t,n){var o=n.length;while(o--)if(!e(t,n[o]))return!1;return!0}}var u=c(s),f=c(l),h=c(d);function p(e){return e&&u(e,r)&&h(e,a)}function m(e){return l(e,"body")?e.body:e.getElementsByTagName("body")[0]}var g,v,C={},_=typeof window!=n&&typeof document!=n,b={isHostMethod:s,isHostObject:l,isHostProperty:d,areHostMethods:u,areHostObjects:f,areHostProperties:h,isTextRange:p,getBody:m,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,o=e.length;n<o;++n)t(e[n],n)}},y={version:"1.3.0",initialized:!1,isBrowser:_,supported:!0,util:b,features:{},modules:C,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function S(e){typeof console!=n&&s(console,"log")&&console.log(e)}function D(e,t){_&&t?alert(e):S(e)}function T(e){y.initialized=!0;y.supported=!1;D("Rangy is not supported in this environment. Reason: "+e,y.config.alertOnFail)}y.fail=T;y.warn=function(e){D("Rangy warning: "+e,y.config.alertOnWarn)};if({}.hasOwnProperty){b.extend=g=function(e,t,n){var o,i;for(var a in t)if(t.hasOwnProperty(a)){o=e[a];i=t[a];n&&null!==o&&"object"==typeof o&&null!==i&&"object"==typeof i&&g(o,i,!0);e[a]=i}t.hasOwnProperty("toString")&&(e.toString=t.toString);return e};b.createOptions=function(e,t){var n={};g(n,t);e&&g(n,e);return n}}else T("hasOwnProperty not supported");_||T("Rangy can only run in a browser");(function(){var e;if(_){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,o=e.length;n<o;++n)t[n]=e[n];return t});b.toArray=e})();if(_){s(document,"addEventListener")?v=function(e,t,n){e.addEventListener(t,n,!1)}:s(document,"attachEvent")?v=function(e,t,n){e.attachEvent("on"+t,n)}:T("Document does not have required addEventListener or attachEvent method");b.addListener=v}var w=[];function I(e){return e.message||e.description||String(e)}function E(){if(!_||y.initialized)return;var e,t=!1,n=!1;if(s(document,"createRange")){e=document.createRange();u(e,i)&&h(e,o)&&(t=!0)}var a,r,l=m(document);if(!l||"body"!=l.nodeName.toLowerCase()){T("No body element found");return}l&&s(l,"createTextRange")&&p(e=l.createTextRange())&&(n=!0);if(!t&&!n){T("Neither Range nor TextRange are available");return}y.initialized=!0;y.features={implementsDomRange:t,implementsTextRange:n};for(var d in C)(a=C[d])instanceof A&&a.init(a,y);for(var c=0,f=w.length;c<f;++c)try{w[c](y)}catch(e){S(r="Rangy init listener threw an exception. Continuing. Detail: "+I(e))}}function x(e,t,n){n&&(e+=" in module "+n.name);y.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function N(e,t,n,o){e[t]=function(){x(t,n,o);return e[n].apply(e,b.toArray(arguments))}}b.deprecationNotice=x;b.createAliasForDeprecatedMethod=N;y.init=E;y.addInitListener=function(e){y.initialized?e(y):w.push(e)};var k=[];y.addShimListener=function(e){k.push(e)};if(_){y.shim=y.createMissingNativeApi=function(e){e=e||window;E();for(var t=0,n=k.length;t<n;++t)k[t](e)};N(y,"createMissingNativeApi","shim")}function A(e,t,n){this.name=e;this.dependencies=t;this.initialized=!1;this.supported=!1;this.initializer=n}A.prototype={init:function(){for(var e,t,n=this.dependencies||[],o=0,i=n.length;o<i;++o){t=n[o];if(!((e=C[t])&&e instanceof A))throw new Error("required module '"+t+"' not found");e.init();if(!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){this.initialized=!0;this.supported=!1;throw new Error(e)},warn:function(e){y.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){y.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}};function R(e,t,n){var o=new A(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(y,t);t.supported=!0}catch(t){S("Module '"+e+"' failed to load: "+I(t));t.stack&&S(t.stack)}}});C[e]=o;return o}y.createModule=function(e){var t,n;if(2==arguments.length){t=arguments[1];n=[]}else{t=arguments[2];n=arguments[1]}var o=R(e,n,t);y.initialized&&y.supported&&o.init()};y.createCoreModule=function(e,t,n){R(e,t,n)};function P(){}y.RangePrototype=P;y.rangePrototype=new P;y.selectionPrototype=new function(){};y.createCoreModule("DomUtil",[],function(e,t){var n="undefined",o=e.util,i=o.getBody;o.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method");o.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var a=document.createElement("div");o.areHostMethods(a,["insertBefore","appendChild","cloneNode"]||!1)||t.fail("Incomplete Element implementation");o.isHostProperty(a,"innerHTML")||t.fail("Element is missing innerHTML property");var r=document.createTextNode("test");o.areHostMethods(r,["splitText","deleteData","insertData","appendData","cloneNode"]||!1)||t.fail("Incomplete Text Node implementation");var s=function(e,t){var n=e.length;while(n--)if(e[n]===t)return!0;return!1};function l(e){var t=0;while(e=e.previousSibling)++t;return t}function d(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(s(o,n))return n;return null}function c(e,t,n){var o=n?t:t.parentNode;while(o){if(o===e)return!0;o=o.parentNode}return!1}function u(e,t,n){var o,i=n?e:e.parentNode;while(i){if((o=i.parentNode)===t)return i;i=o}return null}function f(e){var t=e.nodeType;return 3==t||4==t||8==t}function h(e,t){var n=t.nextSibling,o=t.parentNode;n?o.insertBefore(e,n):o.appendChild(e);return e}function p(e){
if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function m(e){var o=p(e);if(typeof o.defaultView!=n)return o.defaultView;if(typeof o.parentWindow!=n)return o.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){return e&&o.isHostMethod(e,"setTimeout")&&o.isHostObject(e,"document")}var C,_=!1;function b(e){var t;try{t=e.parentNode;return!1}catch(e){return!0}}(function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />";_=b(n);e.features.crashyTextNodes=_})();function y(e){if(!e)return"[No node]";if(_&&b(e))return"[Broken node]";if(f(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+l(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}typeof window.getComputedStyle!=n?C=function(e,t){return m(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?C=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found");function S(e){this.root=e;this._next=e}S.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{t=null;while(n!==this.root&&!(t=n.nextSibling))n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}};function D(e,t){this.node=e;this.offset=t}D.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+y(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function T(e){this.code=this[e];this.codeName=e;this.message="DOMException: "+this.codeName}T.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};T.prototype.toString=function(){return this.message};e.dom={arrayContains:s,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:l,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:d,isAncestorOf:c,isOrIsAncestorOf:function(e,t){return c(e,t,!0)},getClosestAncestorIn:u,isCharacterDataNode:f,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:h,splitDataNode:function(e,t,n){var o=e.cloneNode(!1);o.deleteData(0,t);e.deleteData(t,e.length-t);h(o,e);if(n)for(var i,a=0;i=n[a++];)if(i.node==e&&i.offset>t){i.node=o;i.offset-=t}else i.node==e.parentNode&&i.offset>l(e)&&++i.offset;return o},getDocument:p,getWindow:m,getIframeWindow:function(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:g,getBody:i,isWindow:v,getContentDocument:function(e,t,n){var i;e?o.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):p(e):v(e)&&(i=e.document):i=document;if(!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i},getRootContainer:function(e){var t;while(t=e.parentNode)e=t;return e},comparePoints:function(e,n,o,i){var a,r,s,c,f;if(e==o)return n===i?0:n<i?-1:1;if(a=u(o,e,!0))return n<=l(a)?-1:1;if(a=u(e,o,!0))return l(a)<i?-1:1;if(!(r=d(e,o)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===r?r:u(e,r,!0))===(c=o===r?r:u(o,r,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");f=r.firstChild;while(f){if(f===s)return-1;if(f===c)return 1;f=f.nextSibling}},isBrokenNode:b,inspectNode:y,getComputedStyleProperty:C,createTestElement:function(e,t,n){var o=i(e),a=e.createElement("div");a.contentEditable=""+!!n;t&&(a.innerHTML=t);var r=o.firstChild;r?o.insertBefore(a,r):o.appendChild(a);return a},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){var t,n=p(e).createDocumentFragment();while(t=e.firstChild)n.appendChild(t);return n},createIterator:function(e){return new S(e)},DomPosition:D};e.DOMException=T});y.createCoreModule("DomRange",["DomUtil"],function(e,t){var n=e.dom,o=e.util,i=n.DomPosition,a=e.DOMException,r=n.isCharacterDataNode,s=n.getNodeIndex,l=n.isOrIsAncestorOf,d=n.getDocument,c=n.comparePoints,u=n.splitDataNode,f=n.getClosestAncestorIn,h=n.getNodeLength,p=n.arrayContains,m=n.getRootContainer,g=e.features.crashyTextNodes,v=n.removeNode;function C(e,t){return 3!=e.nodeType&&(l(e,t.startContainer)||l(e,t.endContainer))}function _(e){return e.document||d(e.startContainer)}function b(e){return new i(e.parentNode,s(e))}function y(e){return new i(e.parentNode,s(e)+1)}function S(e,t,o){var i=11==e.nodeType?e.firstChild:e;r(t)?o==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==o?t:u(t,o)):o>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[o]);return i}function D(e,t,n){q(e);q(t);if(_(t)!=_(e))throw new a("WRONG_DOCUMENT_ERR");var o=c(e.startContainer,e.startOffset,t.endContainer,t.endOffset),i=c(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&i>=0:o<0&&i>0}function T(e,t,o){var i,a,r,s;o=o||{stop:!1};for(;r=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(r)){o.stop=!0;return}T(s=e.getSubtreeIterator(),t,o);s.detach();if(o.stop)return}else{i=n.createIterator(r);while(a=i.next())if(!1===t(a)){o.stop=!0;return}}}function w(e){var t;while(e.next())if(e.isPartiallySelectedSubtree()){w(t=e.getSubtreeIterator());t.detach()}else e.remove()}function I(e){for(var t,n,o=_(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()){t=t.cloneNode(!1);n=e.getSubtreeIterator();t.appendChild(I(n));n.detach()}else e.remove();if(10==t.nodeType)throw new a("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function E(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function x(e,t){this.range=e;this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer;this.so=e.startOffset;this.ec=e.endContainer;this.eo=e.endOffset;var n=e.commonAncestorContainer;if(this.sc===this.ec&&r(this.sc)){this.isSingleCharacterDataNode=!0;this._first=this._last=this._next=this.sc}else{this._first=this._next=this.sc!==n||r(this.sc)?f(this.sc,n,!0):this.sc.childNodes[this.so];this._last=this.ec!==n||r(this.ec)?f(this.ec,n,!0):this.ec.childNodes[this.eo-1]}}}x.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;if(e){this._next=e!==this._last?e.nextSibling:null;if(r(e)&&this.clonePartiallySelectedTextNodes){e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo);this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so)}}return e},remove:function(){var e,t,n=this._current;!r(n)||n!==this.sc&&n!==this.ec?n.parentNode&&v(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return C(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new fe(_(this.range));var t=this._current,n=t,o=0,i=t,a=h(t);if(l(t,this.sc)){n=this.sc;o=this.so}if(l(t,this.ec)){
i=this.ec;a=this.eo}ue(e,n,o,i,a)}return new x(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var N=[1,3,4,5,7,8,10],k=[2,9,11],A=[1,3,4,5,7,8,10,11],R=[1,3,4,5,7,8];function P(e){return function(t,n){var o,i=n?t:t.parentNode;while(i){o=i.nodeType;if(p(e,o))return i;i=i.parentNode}return null}}var B=P([9,11]),L=P([5,6,10,12]),O=P([6,10,12]);function M(e,t){if(O(e,t))throw new a("INVALID_NODE_TYPE_ERR")}function W(e,t){if(!p(t,e.nodeType))throw new a("INVALID_NODE_TYPE_ERR")}function F(e,t){if(t<0||t>(r(e)?e.length:e.childNodes.length))throw new a("INDEX_SIZE_ERR")}function H(e,t){if(B(e,!0)!==B(t,!0))throw new a("WRONG_DOCUMENT_ERR")}function G(e){if(L(e,!0))throw new a("NO_MODIFICATION_ALLOWED_ERR")}function U(e,t){if(!e)throw new a(t)}function V(e,t){return t<=(r(e)?e.length:e.childNodes.length)}function j(e){return!!e.startContainer&&!!e.endContainer&&!(g&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&m(e.startContainer)==m(e.endContainer)&&V(e.startContainer,e.startOffset)&&V(e.endContainer,e.endOffset)}function q(e){if(!j(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var K=document.createElement("style"),z=!1;try{K.innerHTML="<b>x</b>";z=3==K.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=z;var Q=z?function(e){var t=this.startContainer,o=d(t);if(!t)throw new a("INVALID_STATE_ERR");var i=null;1==t.nodeType?i=t:r(t)&&(i=n.parentElement(t));(i=null===i||"HTML"==i.nodeName&&n.isHtmlNamespace(d(i).documentElement)&&n.isHtmlNamespace(i)?o.createElement("body"):i.cloneNode(!1)).innerHTML=e;return n.fragmentFromNodeChildren(i)}:function(e){var t=_(this).createElement("body");t.innerHTML=e;return n.fragmentFromNodeChildren(t)};function $(e,t){q(e);var n=e.startContainer,o=e.startOffset,i=e.endContainer,a=e.endOffset,l=n===i;r(i)&&a>0&&a<i.length&&u(i,a,t);if(r(n)&&o>0&&o<n.length){n=u(n,o,t);if(l){a-=o;i=n}else i==n.parentNode&&a>=s(n)&&a++;o=0}e.setStartAndEnd(n,o,i,a)}function J(e){q(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);t.appendChild(e.cloneContents());return t.innerHTML}var Y=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],X=0,Z=1,ee=2,te=3,ne=0,oe=1,ie=2,ae=3;o.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){q(this);H(this.startContainer,t.startContainer);var n,o,i,a,r=e==te||e==X?"start":"end",s=e==Z||e==X?"start":"end";n=this[r+"Container"];o=this[r+"Offset"];i=t[s+"Container"];a=t[s+"Offset"];return c(n,o,i,a)},insertNode:function(e){q(this);W(e,A);G(this.startContainer);if(l(e,this.startContainer))throw new a("HIERARCHY_REQUEST_ERR");var t=S(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){q(this);var e,t;if(this.collapsed)return _(this).createDocumentFragment();if(this.startContainer===this.endContainer&&r(this.startContainer)){(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset);(t=_(this).createDocumentFragment()).appendChild(e);return t}var n=new x(this,!0);e=function e(t){for(var n,o,i,r=_(t.range).createDocumentFragment();o=t.next();){n=t.isPartiallySelectedSubtree();o=o.cloneNode(!n);if(n){i=t.getSubtreeIterator();o.appendChild(e(i));i.detach()}if(10==o.nodeType)throw new a("HIERARCHY_REQUEST_ERR");r.appendChild(o)}return r}(n);n.detach();return e},canSurroundContents:function(){q(this);G(this.startContainer);G(this.endContainer);var e=new x(this,!0),t=e._first&&C(e._first,this)||e._last&&C(e._last,this);e.detach();return!t},surroundContents:function(e){W(e,R);if(!this.canSurroundContents())throw new a("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())while(e.lastChild)e.removeChild(e.lastChild);S(e,this.startContainer,this.startOffset);e.appendChild(t);this.selectNode(e)},cloneRange:function(){q(this);var e,t=new fe(_(this)),n=Y.length;while(n--)t[e=Y[n]]=this[e];return t},toString:function(){q(this);var e=this.startContainer;if(e===this.endContainer&&r(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new x(this,!0);T(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)});n.detach();return t.join("")},compareNode:function(e){q(this);var t=e.parentNode,n=s(e);if(!t)throw new a("NOT_FOUND_ERR");var o=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return o<0?i>0?ie:ne:i>0?oe:ae},comparePoint:function(e,t){q(this);U(e,"HIERARCHY_REQUEST_ERR");H(e,this.startContainer);if(c(e,t,this.startContainer,this.startOffset)<0)return-1;if(c(e,t,this.endContainer,this.endOffset)>0)return 1;return 0},createContextualFragment:Q,toHtml:function(){return J(this)},intersectsNode:function(e,t){q(this);if(m(e)!=m((n=this).startContainer))return!1;var n,o=e.parentNode,i=s(e);if(!o)return!0;var a=c(o,i,this.endContainer,this.endOffset),r=c(o,i+1,this.startContainer,this.startOffset);return t?a<=0&&r>=0:a<0&&r>0},isPointInRange:function(e,t){q(this);U(e,"HIERARCHY_REQUEST_ERR");H(e,this.startContainer);return c(e,t,this.startContainer,this.startOffset)>=0&&c(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return D(this,e,!1)},intersectsOrTouchesRange:function(e){return D(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=c(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=c(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();-1==t&&o.setStart(e.startContainer,e.startOffset);1==n&&o.setEnd(e.endContainer,e.endOffset);return o}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();-1==c(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset);1==c(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset);return t}throw new a("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ae},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,h(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var o=n.pop();t.setEnd(o,o.length);return this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){q(this);return function(e,t,n){var o,i=!(!t||!t.length),a=!!n;i&&(o=new RegExp("^("+t.join("|")+")$"));var s=[];T(new x(e,!1),function(t){if(i&&!o.test(t.nodeType))return;if(a&&!n(t))return;var l=e.startContainer;if(t==l&&r(l)&&e.startOffset==l.length)return;var d=e.endContainer;if(t==d&&r(d)&&0==e.endOffset)return;s.push(t)});return s}(this,e,t)},getDocument:function(){return _(this)},collapseBefore:function(e){this.setEndBefore(e);this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e);this.collapse(!0)},getBookmark:function(t){var o=_(this),i=e.createRange(o);t=t||n.getBody(o);i.selectNodeContents(t);var a=this.intersection(i),r=0,s=0;if(a){i.setEnd(a.startContainer,a.startOffset);s=(r=i.toString().length)+a.toString().length}return{start:r,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0);this.collapse(!0);var o,i,a,r,s=[t],l=!1,d=!1;while(!d&&(o=s.pop()))if(3==o.nodeType){i=n+o.length;if(!l&&e.start>=n&&e.start<=i){this.setStart(o,e.start-n);l=!0}if(l&&e.end>=n&&e.end<=i){this.setEnd(o,e.end-n);d=!0}n=i}else{a=(r=o.childNodes).length;while(a--)s.push(r[a])}},getName:function(){return"DomRange"},equals:function(e){return fe.rangesEqual(this,e)},isValid:function(){return j(this)},inspect:function(){return E(this)},detach:function(){}});function re(e){e.START_TO_START=X;e.START_TO_END=Z;e.END_TO_END=ee;e.END_TO_START=te;e.NODE_BEFORE=ne;e.NODE_AFTER=oe;e.NODE_BEFORE_AND_AFTER=ie;e.NODE_INSIDE=ae}function se(e){re(e);re(e.prototype)}function le(e,t){return function(){q(this)
;var n,o,i=this.startContainer,a=this.startOffset,r=this.commonAncestorContainer,s=new x(this,!0);if(i!==r){i=(o=y(n=f(i,r,!0))).node;a=o.offset}T(s,G);s.reset();var l=e(s);s.detach();t(this,i,a,i,a);return l}}function de(t,n){function i(e,t){return function(n){W(n,N);W(m(n),k);var o=(e?b:y)(n);(t?a:l)(this,o.node,o.offset)}}function a(e,t,o){var i=e.endContainer,a=e.endOffset;if(t!==e.startContainer||o!==e.startOffset){if(m(t)!=m(i)||1==c(t,o,i,a)){i=t;a=o}n(e,t,o,i,a)}}function l(e,t,o){var i=e.startContainer,a=e.startOffset;if(t!==e.endContainer||o!==e.endOffset){if(m(t)!=m(i)||-1==c(t,o,i,a)){i=t;a=o}n(e,i,a,t,o)}}var d=function(){};d.prototype=e.rangePrototype;t.prototype=new d;o.extend(t.prototype,{setStart:function(e,t){M(e,!0);F(e,t);a(this,e,t)},setEnd:function(e,t){M(e,!0);F(e,t);l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],o=e[1],i=t,a=o;switch(e.length){case 3:a=e[2];break;case 4:i=e[2];a=e[3]}n(this,t,o,i,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:i(!0,!0),setStartAfter:i(!1,!0),setEndBefore:i(!0,!1),setEndAfter:i(!1,!1),collapse:function(e){q(this);e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){M(e,!0);n(this,e,0,e,h(e))},selectNode:function(e){M(e,!1);W(e,N);var t=b(e),o=y(e);n(this,t.node,t.offset,o.node,o.offset)},extractContents:le(I,n),deleteContents:le(w,n),canSurroundContents:function(){q(this);G(this.startContainer);G(this.endContainer);var e=new x(this,!0),t=e._first&&C(e._first,this)||e._last&&C(e._last,this);e.detach();return!t},splitBoundaries:function(){$(this)},splitBoundariesPreservingPositions:function(e){$(this,e)},normalizeBoundaries:function(){q(this);var e,t=this.startContainer,o=this.startOffset,i=this.endContainer,a=this.endOffset,l=function(e){var t=e.nextSibling;if(t&&t.nodeType==e.nodeType){i=e;a=e.length;e.appendData(t.data);v(t)}},d=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var r=e.length;o=n.length;e.insertData(0,n.data);v(n);if(t==i){a+=o;i=t}else if(i==e.parentNode){var l=s(e);if(a==l){i=e;a=r}else a>l&&a--}}},c=!0;if(r(i)){if(a==i.length)l(i);else if(0==a&&(e=i.previousSibling)&&e.nodeType==i.nodeType){a=e.length;t==i&&(c=!1);e.appendData(i.data);v(i);i=e}}else{if(a>0){var u=i.childNodes[a-1];u&&r(u)&&l(u)}c=!this.collapsed}if(c){if(r(t)){if(0==o)d(t);else if(o==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType){if(i==e){i=t;a+=t.length}t.appendData(e.data);v(e)}}else if(o<t.childNodes.length){var f=t.childNodes[o];f&&r(f)&&d(f)}}else{t=i;o=a}n(this,t,o,i,a)},collapseToPoint:function(e,t){M(e,!0);F(e,t);this.setStartAndEnd(e,t)}});se(t)}function ce(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset;e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ue(e,t,o,i,a){e.startContainer=t;e.startOffset=o;e.endContainer=i;e.endOffset=a;e.document=n.getDocument(t);ce(e)}function fe(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this.document=e;ce(this)}de(fe,ue);o.extend(fe,{rangeProperties:Y,RangeIterator:x,copyComparisonConstants:se,createPrototypeRange:de,inspect:E,toHtml:J,getRangeDocument:_,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}});e.DomRange=fe});y.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,o,i=e.dom,a=e.util,r=i.DomPosition,s=e.DomRange,l=i.getBody,d=i.getContentDocument,c=i.isCharacterDataNode;e.features.implementsDomRange&&function(){var o,r,c=s.rangeProperties;function u(e){var t,n=c.length;while(n--)e[t=c[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e;u(this)};s.createPrototypeRange(n,function(e,t,n,o,i){var a=e.startContainer!==t||e.startOffset!=n,r=e.endContainer!==o||e.endOffset!=i,s=!e.equals(e.nativeRange);if(a||r||s){e.setEnd(o,i);e.setStart(t,n)}});(o=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e);u(this)};o.cloneContents=function(){return this.nativeRange.cloneContents()};o.surroundContents=function(e){this.nativeRange.surroundContents(e);u(this)};o.collapse=function(e){this.nativeRange.collapse(e);u(this)};o.cloneRange=function(){return new n(this.nativeRange.cloneRange())};o.refresh=function(){u(this)};o.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");l(document).appendChild(f);var h=document.createRange();h.setStart(f,0);h.setEnd(f,0);try{h.setStart(f,1);o.setStart=function(e,t){this.nativeRange.setStart(e,t);u(this)};o.setEnd=function(e,t){this.nativeRange.setEnd(e,t);u(this)};r=function(e){return function(t){this.nativeRange[e](t);u(this)}}}catch(e){o.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t);this.nativeRange.setStart(e,t)}u(this)};o.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t);this.nativeRange.setEnd(e,t)}u(this)};r=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[t](n);this.nativeRange[e](n)}u(this)}}}o.setStartBefore=r("setStartBefore","setEndBefore");o.setStartAfter=r("setStartAfter","setEndAfter");o.setEndBefore=r("setEndBefore","setStartBefore");o.setEndAfter=r("setEndAfter","setStartAfter");o.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))};h.selectNodeContents(f);h.setEnd(f,3);var p=document.createRange();p.selectNodeContents(f);p.setEnd(f,4);p.setStart(f,2);-1==h.compareBoundaryPoints(h.START_TO_END,p)&&1==h.compareBoundaryPoints(h.END_TO_START,p)?o.compareBoundaryPoints=function(e,t){e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END);return this.nativeRange.compareBoundaryPoints(e,t)}:o.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var g=m.firstChild,v=l(document);v.appendChild(m);h.setStart(g,1);h.setEnd(g,2);h.deleteContents();if("13"==g.data){o.deleteContents=function(){this.nativeRange.deleteContents();u(this)};o.extractContents=function(){var e=this.nativeRange.extractContents();u(this);return e}}v.removeChild(m);v=null;a.isHostMethod(h,"createContextualFragment")&&(o.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)});l(document).removeChild(f);o.getName=function(){return"WrappedRange"};e.WrappedRange=n;e.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}();if(e.features.implementsTextRange){var u=function(e,t,n,o,a){var s=e.duplicate();s.collapse(n);var l=s.parentElement();i.isOrIsAncestorOf(t,l)||(l=t);if(!l.canHaveHTML){var d=new r(l.parentNode,i.getNodeIndex(l));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=i.getDocument(l).createElement("span");u.parentNode&&i.removeNode(u);var f,h,p,m,g,v=n?"StartToStart":"StartToEnd",C=a&&a.containerElement==l?a.nodeIndex:0,_=l.childNodes.length,b=_,y=b;while(1){y==_?l.appendChild(u):l.insertBefore(u,l.childNodes[y]);s.moveToElementText(u);if(0==(f=s.compareEndPoints(v,e))||C==b)break;if(-1==f){if(b==C+1)break;C=y}else b=b==C+1?C:y;y=Math.floor((C+b)/2);l.removeChild(u)}g=u.nextSibling;if(-1==f&&g&&c(g)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var S;if(/[\r\n]/.test(g.data)){var D=s.duplicate(),T=D.text.replace(/\r\n/g,"\r").length;S=D.moveStart("character",T);while(-1==(f=D.compareEndPoints("StartToEnd",D))){S++;D.moveStart("character",1)}}else S=s.text.length;m=new r(g,S)}else{h=(o||!n)&&u.previousSibling;m=(p=(o||n)&&u.nextSibling)&&c(p)?new r(p,0):h&&c(h)?new r(h,h.data.length):new r(l,i.getNodeIndex(u))}i.removeNode(u);return{boundaryPosition:m,nodeInfo:{nodeIndex:y,containerElement:l}}},f=function(e,t){var n,o,a,r,s=e.offset,d=i.getDocument(e.node),u=l(d).createTextRange(),f=c(e.node)
;if(f)o=(n=e.node).parentNode;else{n=s<(r=e.node.childNodes).length?r[s]:null;o=e.node}(a=d.createElement("span")).innerHTML="&#feff;";n?o.insertBefore(a,n):o.appendChild(a);u.moveToElementText(a);u.collapse(!t);o.removeChild(a);f&&u[t?"moveStart":"moveEnd"]("character",s);return u};(o=function(e){this.textRange=e;this.refresh()}).prototype=new s(document);o.prototype.refresh=function(){var e,t,n,o,a=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var o=n.parentElement();(n=e.duplicate()).collapse(!1);var a=n.parentElement(),r=o==a?o:i.getCommonAncestor(o,a);return r==t?r:i.getCommonAncestor(t,r)}(this.textRange);if(0==(o=this.textRange).compareEndPoints("StartToEnd",o))t=e=u(this.textRange,a,!0,!0).boundaryPosition;else{e=(n=u(this.textRange,a,!0,!1)).boundaryPosition;t=u(this.textRange,a,!1,!1,n.nodeInfo).boundaryPosition}this.setStart(e.node,e.offset);this.setEnd(t.node,t.offset)};o.prototype.getName=function(){return"WrappedTextRange"};s.copyComparisonConstants(o);var h=function(e){if(e.collapsed)return f(new r(e.startContainer,e.startOffset),!0);var t=f(new r(e.startContainer,e.startOffset),!0),n=f(new r(e.endContainer,e.endOffset),!1),o=l(s.getRangeDocument(e)).createTextRange();o.setEndPoint("StartToStart",t);o.setEndPoint("EndToEnd",n);return o};o.rangeToTextRange=h;o.prototype.toTextRange=function(){return h(this)};e.WrappedTextRange=o;if(!e.features.implementsDomRange||e.config.preferTextRange){var p=Function("return this;")();void 0===p.Range&&(p.Range=o);e.createNativeRange=function(e){e=d(e,t,"createNativeRange");return l(e).createTextRange()};e.WrappedRange=o}}e.createRange=function(n){n=d(n,t,"createRange");return new e.WrappedRange(e.createNativeRange(n))};e.createRangyRange=function(e){e=d(e,t,"createRangyRange");return new s(e)};a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange");a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange");e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)});n=t=null})});y.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){e.config.checkSelectionRanges=!0;var n,o,i=e.dom,a=e.util,r=a.isHostMethod,s=e.DomRange,l=e.WrappedRange,d=e.DOMException,c=i.DomPosition,u=e.features,f=i.getDocument,h=i.getBody,p=s.rangesEqual;function m(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function g(e,n){if(e){if(i.isWindow(e))return e;if(e instanceof U)return e.win;var o=i.getContentDocument(e,t,n);return i.getWindow(o)}return window}function v(e){return g(e,"getDocSelection").document.selection}function C(e){var t=!1;e.anchorNode&&(t=1==i.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset));return t}var _=r(window,"getSelection"),b=a.isHostObject(document,"selection");u.implementsWinGetSelection=_;u.implementsDocSelection=b;var y=b&&(!_||e.config.preferTextRange);if(y){n=v;e.isSelectionValid=function(e){var t=g(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||f(n.createRange().parentElement())==t}}else{if(!_){t.fail("Neither document.selection or window.getSelection() detected.");return!1}n=function(e){return g(e,"getWinSelection").getSelection()};e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var S=n();if(!S){t.fail("Native selection was null (possibly issue 138?)");return!1}var D=e.createNativeRange(document),T=h(document),w=a.areHostProperties(S,["anchorNode","focusNode","anchorOffset","focusOffset"]);u.selectionHasAnchorAndFocus=w;var I=r(S,"extend");u.selectionHasExtend=I;var E="number"==typeof S.rangeCount;u.selectionHasRangeCount=E;var x=!1,N=!0,k=I?function(t,n){var o=s.getRangeDocument(n),i=e.createRange(o);i.collapseToPoint(n.endContainer,n.endOffset);t.addRange(O(i));t.extend(n.startContainer,n.startOffset)}:null;a.areHostMethods(S,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof S.rangeCount&&u.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,o=n>1,a=[],r=C(t),s=0;s<n;++s)a[s]=t.getRangeAt(s);var l=i.createTestElement(document,"",!1),d=l.appendChild(document.createTextNode("   ")),c=document.createRange();c.setStart(d,1);c.collapse(!0);t.removeAllRanges();t.addRange(c);N=1==t.rangeCount;t.removeAllRanges();if(!o){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)x=!1;else{var f=c.cloneRange();c.setStart(d,0);f.setEnd(d,3);f.setStart(d,2);t.addRange(c);t.addRange(f);x=2==t.rangeCount}}i.removeNode(l);t.removeAllRanges();for(s=0;s<n;++s)if(0==s&&r)if(k)k(t,a[s]);else{e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend");t.addRange(a[s])}else t.addRange(a[s])}}();u.selectionSupportsMultipleRanges=x;u.collapsedNonEditableSelectionsSupported=N;var A,R,P=!1;if(T&&r(T,"createControlRange")){A=T.createControlRange();a.areHostProperties(A,["item","add"])&&(P=!0)}u.implementsControlRange=P;o=w?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};function B(e,t,n){var o=n?"end":"start",i=n?"start":"end";e.anchorNode=t[o+"Container"];e.anchorOffset=t[o+"Offset"];e.focusNode=t[i+"Container"];e.focusOffset=t[i+"Offset"]}function L(e){e.anchorNode=e.focusNode=null;e.anchorOffset=e.focusOffset=0;e.rangeCount=0;e.isCollapsed=!0;e._ranges.length=0}function O(t){var n;if(t instanceof s){(n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset);n.setStart(t.startContainer,t.startOffset)}else t instanceof l?n=t.nativeRange:u.implementsDomRange&&t instanceof i.getWindow(t.startContainer).Range&&(n=t);return n}function M(e){var n=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!i.isAncestorOf(e[0],e[t]))return!1;return!0}(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function W(e){return!!e&&void 0!==e.text}function F(e,t){var n=new l(t);e._ranges=[n];B(e,n,!1);e.rangeCount=1;e.isCollapsed=n.collapsed}function H(t){t._ranges.length=0;if("None"==t.docSelection.type)L(t);else{var n=t.docSelection.createRange();if(W(n))F(t,n);else{t.rangeCount=n.length;for(var o,i=f(n.item(0)),a=0;a<t.rangeCount;++a){(o=e.createRange(i)).selectNode(n.item(a));t._ranges.push(o)}t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed;B(t,t._ranges[t.rangeCount-1],!1)}}}function G(e,n){for(var o=e.docSelection.createRange(),i=M(n),a=f(o.item(0)),r=h(a).createControlRange(),s=0,l=o.length;s<l;++s)r.add(o.item(s));try{r.add(i)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select();H(e)}r(S,"getRangeAt")?R=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:w&&(R=function(t){var n=f(t.anchorNode),o=e.createRange(n);o.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset);o.collapsed!==this.isCollapsed&&o.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset);return o});function U(e,t,n){this.nativeSelection=e;this.docSelection=t;this._ranges=[];this.win=n;this.refresh()}U.prototype=e.selectionPrototype;function V(e){e.win=e.anchorNode=e.focusNode=e._ranges=null;e.rangeCount=e.anchorOffset=e.focusOffset=0;e.detached=!0}var j=[];function q(e,t){var n,o,i=j.length;while(i--){o=(n=j[i]).selection;if("deleteAll"==t)V(o);else if(n.win==e){if("delete"==t){j.splice(i,1);return!0}return o}}"deleteAll"==t&&(j.length=0);return null}var K=function(e){if(e&&e instanceof U){e.refresh();return e}var t=q(e=g(e,"getNativeSelection")),o=n(e),i=b?v(e):null;if(t){t.nativeSelection=o;t.docSelection=i;t.refresh()}else{t=new U(o,i,e);j.push({win:e,selection:t})}return t};e.getSelection=K;a.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var z,Q=U.prototype;function $(e,n){for(var o,i=f(n[0].startContainer),a=h(i).createControlRange(),r=0,s=n.length;r<s;++r){o=M(n[r]);try{a.add(o)}catch(e){
throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select();H(e)}if(!y&&w&&a.areHostMethods(S,["removeAllRanges","addRange"])){Q.removeAllRanges=function(){this.nativeSelection.removeAllRanges();L(this)};var J=function(e,t){k(e.nativeSelection,t);e.refresh()};Q.addRange=E?function(t,n){if(P&&b&&"Control"==this.docSelection.type)G(this,t);else if(m(n)&&I)J(this,t);else{var i;if(x)i=this.rangeCount;else{this.removeAllRanges();i=0}var a=O(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==i+1){if(e.config.checkSelectionRanges){var r=R(this.nativeSelection,this.rangeCount-1);r&&!p(r,t)&&(t=new l(r))}this._ranges[this.rangeCount-1]=t;B(this,t,Y(this.nativeSelection));this.isCollapsed=o(this)}else this.refresh()}}:function(e,t){if(m(t)&&I)J(this,e);else{this.nativeSelection.addRange(O(e));this.refresh()}};Q.setRanges=function(e){if(P&&b&&e.length>1)$(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(r(S,"empty")&&r(D,"select")&&P&&y)){t.fail("No means of selecting a Range or TextRange was found");return!1}Q.removeAllRanges=function(){try{this.docSelection.empty();if("None"!=this.docSelection.type){var e;if(this.anchorNode)e=f(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=f(t.item(0)))}if(e){h(e).createTextRange().select();this.docSelection.empty()}}}catch(e){}L(this)};Q.addRange=function(t){if("Control"==this.docSelection.type)G(this,t);else{e.WrappedTextRange.rangeToTextRange(t).select();this._ranges[0]=t;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;B(this,t,!1)}};Q.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?$(this,e):t&&this.addRange(e[0])}}Q.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new d("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};if(y)z=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=h(t.win.document).createTextRange()).collapse(!0);"Control"==t.docSelection.type?H(t):W(n)?F(t,n):L(t)};else if(r(S,"getRangeAt")&&"number"==typeof S.rangeCount)z=function(t){if(P&&b&&"Control"==t.docSelection.type)H(t);else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,i=t.rangeCount;n<i;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));B(t,t._ranges[t.rangeCount-1],Y(t.nativeSelection));t.isCollapsed=o(t)}else L(t)}};else{if(!w||"boolean"!=typeof S.isCollapsed||"boolean"!=typeof D.collapsed||!u.implementsDomRange){t.fail("No means of obtaining a Range or TextRange from the user's selection was found");return!1}z=function(e){var t,n=e.nativeSelection;if(n.anchorNode){t=R(n,0);e._ranges=[t];e.rangeCount=1;(function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode;e.anchorOffset=t.anchorOffset;e.focusNode=t.focusNode;e.focusOffset=t.focusOffset})(e);e.isCollapsed=o(e)}else L(e)}}Q.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;z(this);if(e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;while(i--)if(!p(t[i],this._ranges[i]))return!0;return!1}};var Y,X=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,i=n.length;o<i;++o)p(t,n[o])||e.addRange(n[o]);e.rangeCount||L(e)};Q.removeRange=P&&b?function(e){if("Control"==this.docSelection.type){for(var t,n=this.docSelection.createRange(),o=M(e),i=f(n.item(0)),a=h(i).createControlRange(),r=!1,s=0,l=n.length;s<l;++s)(t=n.item(s))!==o||r?a.add(n.item(s)):r=!0;a.select();H(this)}else X(this,e)}:function(e){X(this,e)};if(!y&&w&&u.implementsDomRange){Y=C;Q.isBackward=function(){return Y(this)}}else Y=Q.isBackward=function(){return!1};Q.isBackwards=Q.isBackward;Q.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")};function Z(e,t){if(e.win.document!=f(t))throw new d("WRONG_DOCUMENT_ERR")}Q.collapse=function(t,n){Z(this,t);var o=e.createRange(t);o.collapseToPoint(t,n);this.setSingleRange(o);this.isCollapsed=!0};Q.collapseToStart=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)};Q.collapseToEnd=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)};Q.selectAllChildren=function(t){Z(this,t);var n=e.createRange(t);n.selectNodeContents(t);this.setSingleRange(n)};Q.deleteFromDocument=function(){if(P&&b&&"Control"==this.docSelection.type){var e,t=this.docSelection.createRange();while(t.length){e=t.item(0);t.remove(e);i.removeNode(e)}this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var o=0,a=n.length;o<a;++o)n[o].deleteContents();this.addRange(n[a-1])}}};Q.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t};Q.getAllRanges=function(){var e=[];this.eachRange(function(t){e.push(t)});return e};Q.setSingleRange=function(e,t){this.removeAllRanges();this.addRange(e,t)};Q.callMethodOnEachRange=function(e,t){var n=[];this.eachRange(function(o){n.push(o[e].apply(o,t||[]))});return n};function ee(t){return function(n,o){var i;this.rangeCount?(i=this.getRangeAt(0))["set"+(t?"Start":"End")](n,o):(i=e.createRange(this.win.document)).setStartAndEnd(n,o);this.setSingleRange(i,this.isBackward())}}Q.setStart=ee(!0);Q.setEnd=ee(!1);e.rangePrototype.select=function(e){K(this.getDocument()).setSingleRange(this,e)};Q.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n);t.push(n)});this.removeAllRanges();n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)};Q.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1};Q.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}};Q.moveToBookmark=function(t){for(var n,o,i=[],a=0;n=t.rangeBookmarks[a++];){(o=e.createRange(this.win)).moveToBookmark(n);i.push(o)}t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)};Q.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}};Q.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)};Q.toHtml=function(){var e=[];this.eachRange(function(t){e.push(s.toHtml(t))});return e.join("")};u.implementsTextRange&&(Q.getNativeTextRange=function(){var n;if(n=this.docSelection){var o=n.createRange();if(W(o))return o;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")});function te(e){var t=[],n=new c(e.anchorNode,e.anchorOffset),o=new c(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,r=e.rangeCount;a<r;++a)t[a]=s.inspect(e.getRangeAt(a));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}Q.getName=function(){return"WrappedSelection"};Q.inspect=function(){return te(this)};Q.detach=function(){q(this.win,"delete");V(this)};U.detachAll=function(){q(null,"deleteAll")};U.inspect=te;U.isDirectionBackward=m;e.Selection=U;e.selectionPrototype=Q;e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return K(e)});e=null})});var B=!1,L=function(e){if(!B){B=!0;!y.initialized&&y.config.autoInitialize&&E()}};if(_)if("complete"==document.readyState)L();else{s(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",L,!1);v(window,"load",L)}return y},r=this,"function"==typeof i&&i.amd?i(a):void 0!==t&&"object"==typeof n?t.exports=a():r.rangy=a();(function(e,a){"function"==typeof i&&i.amd?i(["./rangy-core"],e):void 0!==t&&"object"==typeof n?t.exports=e(o("rangy")):e(a.rangy)})(function(e){
e.createModule("TextRange",["WrappedSelection"],function(e,t){var n="undefined",o="character",i="word",a=e.dom,r=e.util,s=r.extend,l=r.createOptions,d=a.getBody,c=/^[ \t\f\r\n]+$/,u=/^[ \t\f\r]+$/,f=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,h=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,p="en",m=e.Selection.isDirectionBackward,g=!1,v=!1,C=!1;(function(){var t=a.createTestElement(document,"<p>1 </p><p></p>",!0),n=t.firstChild,o=e.getSelection();o.collapse(n.lastChild,2);o.setStart(n.firstChild,0);g=1==(""+o).length;t.innerHTML="1 <br />";o.collapse(t,2);o.setStart(t.firstChild,0);v=1==(""+o).length;t.innerHTML="1 <p>1</p>";o.collapse(t,2);o.setStart(t.firstChild,0);C=1==(""+o).length;a.removeNode(t);o.removeAllRanges()})();function _(e,t){for(var n=e.slice(t.start,t.end),o={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,a=n.length;i<a;++i)n[i].token=o;return o}function b(e,t,n){for(var o,i=n(e,t),a=[],r=0;o=i[r++];)a.push(_(e,o));return a}var y={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};var S={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!v,includeSpaceBeforeBlock:!C,includePreLineTrailingSpace:!0},D={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:function(e,t){var n,o=e.join(""),i=[];function a(e,t,n){i.push({start:e,end:t,isWord:n})}var r,s,l=0;while(n=t.wordRegex.exec(o)){s=(r=n.index)+n[0].length;r>l&&a(l,r,!1);if(t.includeTrailingSpace)while(h.test(e[s]))++s;a(r,s,!0);l=s}l<e.length&&a(l,e.length,!1);return i}}},T={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},w={wordOptions:null,characterOptions:null},I={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},E={wordOptions:null,characterOptions:null,direction:"forward"};function x(e,t){var n=l(e,t);t.hasOwnProperty("wordOptions")&&(n.wordOptions=function(e){var t,n;if(e){t=e.language||p;s(n={},D[t]||D[p]);s(n,e);return n}return D[p]}(n.wordOptions));t.hasOwnProperty("characterOptions")&&(n.characterOptions=l(n.characterOptions,y));return n}var N,k=a.getComputedStyleProperty;(function(){var e=document.createElement("table"),t=d(document);t.appendChild(e);N="block"==k(e,"display");t.removeChild(e)})();var A={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function R(e,t){var n=k(e,"display",t),o=e.tagName.toLowerCase();return"block"==n&&N&&A.hasOwnProperty(o)?A[o]:n}function P(e){for(var t=function(e){return function(e){var t=[];while(e.parentNode){t.unshift(e.parentNode);e=e.parentNode}return t}(e).concat([e])}(e),n=0,o=t.length;n<o;++n)if(1==t[n].nodeType&&"none"==R(t[n]))return!0;return!1}function B(e,t){if(!t&&e.hasChildNodes())return e.firstChild;return function(e){while(e&&!e.nextSibling)e=e.parentNode;if(!e)return null;return e.nextSibling}(e)}function L(e){var t=e.previousSibling;if(t){e=t;while(e.hasChildNodes())e=e.lastChild;return e}var n=e.parentNode;if(n&&1==n.nodeType)return n;return null}function O(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var o=k(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(o)||/^[\t\r ]+$/.test(t)&&"pre-line"==o}function M(e){if(""===e.data)return!0;if(!O(e))return!1;if(!e.parentNode)return!0;if(P(e))return!0;return!1}function W(e){var t,n,o=e.nodeType;return 7==o||8==o||P(e)||/^(script|style)$/i.test(e.nodeName)||3==(t=e).nodeType&&(n=t.parentNode)&&"hidden"==k(n,"visibility")||M(e)}function F(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==R(e,t)}function H(){this.store={}}H.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var G=0,U=0;function V(e,t,n){return function(o){var i=this.cache;if(i.hasOwnProperty(e)){G++;return i[e]}U++;var a=t.call(this,n?this[n]:this,o);i[e]=a;return a}}function j(e,t){this.node=e;this.session=t;this.cache=new H;this.positions=new H}var q={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new K(this,e))},toString:function(){return"[NodeWrapper("+a.inspectNode(this.node)+")]"}};j.prototype=q;s(q,{isCharacterDataNode:V("isCharacterDataNode",a.isCharacterDataNode,"node"),getNodeIndex:V("nodeIndex",a.getNodeIndex,"node"),getLength:V("nodeLength",a.getNodeLength,"node"),containsPositions:V("containsPositions",function(e){return a.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)},"node"),isWhitespace:V("isWhitespace",O,"node"),isCollapsedWhitespace:V("isCollapsedWhitespace",M,"node"),getComputedDisplay:V("computedDisplay",R,"node"),isCollapsed:V("collapsed",W,"node"),isIgnored:V("ignored",F,"node"),next:V("nextPos",B,"node"),previous:V("previous",L,"node"),getTextNodeInfo:V("textNodeInfo",function(e){var t=null,n=!1,o=k(e.parentNode,"whiteSpace"),i="pre-line"==o;if(i){t=u;n=!0}else if("normal"==o||"nowrap"==o){t=c;n=!0}return{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:V("hasInnerText",function(e,t){var n=this.session,o=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),a=t?o:i,r=t?i:o;while(a!==r){a.prepopulateChar();if(a.isDefinitelyNonEmpty())return!0;a=t?a.previousVisible():a.nextVisible()}return!1},"node"),isRenderedBlock:V("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,o=t.length;n<o;++n)if(!W(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:V("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":var t=e.lastChild;while(t){if(!F(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:V("leadingSpace",function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});function K(e,t){this.offset=t;this.nodeWrapper=e;this.node=e.node;this.session=e.session;this.cache=new H}var z={character:"",characterType:"EMPTY",isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,o="",i="EMPTY",a=!1;if(n>0)if(3==t.nodeType){var r=t.data,s=r.charAt(n-1),l=e.nodeWrapper.getTextNodeInfo(),d=l.spaceRegex;if(l.collapseSpaces)if(d.test(s))if(n>1&&d.test(r.charAt(n-2)));else if(l.preLine&&"\n"===r.charAt(n)){o=" ";i="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK"}else{o=" ";i="COLLAPSIBLE_SPACE"}else{o=s;i="NON_SPACE";a=!0}else{o=s;i="UNCOLLAPSIBLE_SPACE";a=!0}}else{var c=t.childNodes[n-1];if(c&&1==c.nodeType&&!W(c))if("br"==c.tagName.toLowerCase()){o="\n";e.isBr=!0;i="COLLAPSIBLE_SPACE";a=!1}else e.checkForTrailingSpace=!0;if(!o){var u=t.childNodes[n];u&&1==u.nodeType&&!W(u)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0;e.character=o;e.characterType=i;e.isCharInvariant=a}},isDefinitelyNonEmpty:function(){var e=this.characterType;return"NON_SPACE"==e||"UNCOLLAPSIBLE_SPACE"==e},resolveLeadingAndTrailingSpaces:function(){this.prepopulatedChar||this.prepopulateChar();if(this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();if(e){this.isTrailingSpace=!0;this.character=e;this.characterType="COLLAPSIBLE_SPACE"}this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();if(t){this.isLeadingSpace=!0;this.character=t;this.characterType="COLLAPSIBLE_SPACE"}this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){
var t,n=this;while(n=n.previousVisible())if(""!==(t=n.getCharacter(e)))return n;return null},getCharacter:function(e){this.resolveLeadingAndTrailingSpaces();var t,n=this.character,o=function(e){var t=e||"",n="string"==typeof t?t.split(""):t;n.sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)});return n.join("").replace(/(.)\1+/g,"$1")}(e.ignoreCharacters),i=""!==n&&o.indexOf(n)>-1;if(this.isCharInvariant)return t=i?"":n;var a=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,o].join("_"),r=this.cache.get(a);if(null!==r)return r;var s,l,d="",c=!1,u=this;function f(){if(!c){l=u.getPrecedingUncollapsedPosition(e);c=!0}return l}if("COLLAPSIBLE_SPACE"==this.characterType)if("INCLUDED_TRAILING_LINE_BREAK_AFTER_BR"==this.type)d="\n";else if(" "==n&&(!f()||l.isTrailingSpace||"\n"==l.character||" "==l.character&&"COLLAPSIBLE_SPACE"==l.characterType));else if("\n"==n&&this.isLeadingSpace)f()&&"\n"!=l.character&&(d="\n");else if(s=this.nextUncollapsed()){s.isBr?this.type="TRAILING_SPACE_BEFORE_BR":s.isTrailingSpace&&"\n"==s.character?this.type="TRAILING_SPACE_IN_BLOCK":s.isLeadingSpace&&"\n"==s.character&&(this.type="TRAILING_SPACE_BEFORE_BLOCK");if("\n"==s.character)if("TRAILING_SPACE_BEFORE_BR"!=this.type||e.includeSpaceBeforeBr)if("TRAILING_SPACE_BEFORE_BLOCK"!=this.type||e.includeSpaceBeforeBlock)if("TRAILING_SPACE_IN_BLOCK"==this.type&&s.isTrailingSpace&&!e.includeBlockContentTrailingSpace);else if("PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK"!=this.type||"NON_SPACE"!=s.type||e.includePreLineTrailingSpace)if("\n"==n)if(s.isTrailingSpace){if(this.isTrailingSpace);else if(this.isBr){s.type="TRAILING_LINE_BREAK_AFTER_BR";f()&&l.isLeadingSpace&&!l.isTrailingSpace&&"\n"==l.character?s.character="":s.type="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR"}}else d="\n";else" "==n&&(d=" ");else;else;else;else d=n}o.indexOf(d)>-1&&(d="");this.cache.set(a,d);return d},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:function(){return"[Position("+a.inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.character}};K.prototype=z;s(z,{next:V("nextPos",function(e){var t,n,o,i=e.nodeWrapper,a=e.node,r=e.offset,s=i.session;if(!a)return null;if(r==i.getLength())n=(t=a.parentNode)?i.getNodeIndex()+1:0;else if(i.isCharacterDataNode()){t=a;n=r+1}else{o=a.childNodes[r];if(s.getNodeWrapper(o).containsPositions()){t=o;n=0}else{t=a;n=r+1}}return t?s.getPosition(t,n):null}),previous:V("previous",function(e){var t,n,o,i=e.nodeWrapper,r=e.node,s=e.offset,l=i.session;if(0==s)n=(t=r.parentNode)?i.getNodeIndex():0;else if(i.isCharacterDataNode()){t=r;n=s-1}else{o=r.childNodes[s-1];if(l.getNodeWrapper(o).containsPositions()){t=o;n=a.getNodeLength(o)}else{t=r;n=s-1}}return t?l.getPosition(t,n):null}),nextVisible:V("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,o=t.node,i=t;n.isCollapsed()&&(i=n.session.getPosition(o.parentNode,n.getNodeIndex()+1));return i}),nextUncollapsed:V("nextUncollapsed",function(e){var t=e;while(t=t.nextVisible()){t.resolveLeadingAndTrailingSpaces();if(""!==t.character)return t}return null}),previousVisible:V("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,o=t.node,i=t;n.isCollapsed()&&(i=n.session.getPosition(o.parentNode,n.getNodeIndex()));return i})});var Q=null,$=function(){function e(e){var t=new H;return{get:function(n){var o=t.get(n[e]);if(o)for(var i,a=0;i=o[a++];)if(i.node===n)return i;return null},set:function(n){var o=n.node[e];(t.get(o)||t.set(o,[])).push(n)}}}var t=r.isHostProperty(document.documentElement,"uniqueID");function n(){this.initCaches()}n.prototype={initCaches:function(){this.elementCache=t?(n=new H,{get:function(e){return n.get(e.uniqueID)},set:function(e){n.set(e.node.uniqueID,e)}}):e("tagName");var n;this.textNodeCache=e("data");this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);if(!n){n=new j(e,this);t.set(n)}return n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}};return n}();function J(){return Q||function(){Y();return Q=new $}()}function Y(){Q&&Q.detach();Q=null}s(a,{nextNode:B,previousNode:L});function X(e,n,o,i){o&&(n?W(o.node)&&(o=e.previousVisible()):W(o.node)&&(o=o.nextVisible()));var a=e,r=!1;function s(){var e=null;if(n){e=a;if(!r){a=a.previousVisible();r=!a||o&&a.equals(o)}}else if(!r){e=a=a.nextVisible();r=!a||o&&a.equals(o)}r&&(a=null);return e}var l,d=!1;return{next:function(){if(d){d=!1;return l}var e,t;while(e=s())if(t=e.getCharacter(i)){l=e;return e}return null},rewind:function(){if(!l)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");d=!0},dispose:function(){e=o=null}}}var Z=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n]===t)return n;return-1};function ee(e,t,n){var o=X(e,!1,null,t),i=X(e,!0,null,t),a=n.tokenizer;function r(e){var t,n,a=[],r=e?o:i,s=!1,l=!1;while(t=r.next()){n=t.character;if(f.test(n)){if(l){l=!1;s=!0}}else{if(s){r.rewind();break}l=!0}a.push(t)}return a}var s=r(!0),l=r(!1).reverse(),d=b(l.concat(s),n,a),c=s.length?d.slice(Z(d,s[0].token)):[],u=l.length?d.slice(0,Z(d,l.pop().token)+1):[];return{nextEndToken:function(){var e,t;while(1==c.length&&!(e=c[0]).isWord&&(t=r(!0)).length>0)c=b(e.chars.concat(t),n,a);return c.shift()},previousStartToken:function(){var e,t;while(1==u.length&&!(e=u[0]).isWord&&(t=r(!1)).length>0)u=b(t.reverse().concat(e.chars),n,a);return u.pop()},dispose:function(){o.dispose();i.dispose();c=u=null}}}function te(e,t,n,o){var i=e.getRangeBoundaryPosition(t,!0),a=e.getRangeBoundaryPosition(t,!1);return X(o?a:i,!!o,o?i:a,n)}function ne(t,n,o,i,a){var r,s,l,d,c,u,f=m(a.direction),h=X(t,f,t.session.getRangeBoundaryPosition(i,f),a.characterOptions),p="",g=[],v=null;function C(t,n){var o=g[t].previousVisible(),i=g[n-1];return{startPos:o,endPos:i,valid:!a.wholeWordsOnly||function(t,n,o){var i=e.createRange(t.node);i.setStartAndEnd(t.node,t.offset,n.node,n.offset);return!i.expand("word",{wordOptions:o})}(o,i,a.wordOptions)}}while(r=h.next()){s=r.character;o||a.caseSensitive||(s=s.toLowerCase());if(f){g.unshift(r);p=s+p}else{g.push(r);p+=s}if(o){if(c=n.exec(p)){d=(l=c.index)+c[0].length;if(u){if(!f&&d<p.length||f&&l>0){v=C(l,d);break}}else u=!0}}else if(-1!=(l=p.indexOf(n))){v=C(l,l+n.length);break}}u&&(v=C(l,d));h.dispose();return v}function oe(e){return function(){var t=!!Q,n=[J()].concat(r.toArray(arguments)),o=e.apply(this,n);t||Y();return o}}function ie(e,t){return oe(function(a,r,s,l){if(typeof s==n){s=r;r=o}l=x(l,w);var d=e;if(t){d=s>=0;this.collapse(!d)}var c=function(e,t,n,a,r){var s,l,d,c,u=0,f=e,h=Math.abs(n);if(0!==n){var p=n<0;switch(t){case o:l=X(e,p,null,a);while((s=l.next())&&u<h){++u;f=s}d=s;l.dispose();break;case i:var m=ee(e,a,r),g=p?m.previousStartToken:m.nextEndToken;while((c=g())&&u<h)if(c.isWord){++u;f=p?c.chars[0]:c.chars[c.chars.length-1]}break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}if(p){f=f.previousVisible();u=-u}else if(f&&f.isLeadingSpace&&!f.isTrailingSpace){if(t==i){d=(l=X(e,!1,null,a)).next();l.dispose()}d&&(f=d.previousVisible())}}return{position:f,unitsMoved:u}}(a.getRangeBoundaryPosition(this,d),r,s,l.characterOptions,l.wordOptions),u=c.position;this[d?"setStart":"setEnd"](u.node,u.offset);return c.unitsMoved})}function ae(e){return oe(function(t,n){var o,i=te(t,this,n=l(n,y),!e),a=0;while((o=i.next())&&f.test(o.character))++a;i.dispose();var r=a>0;r&&this[e?"moveStart":"moveEnd"]("character",e?a:-a,{characterOptions:n});return r})}s(e.rangePrototype,{moveStart:ie(!0,!1),moveEnd:ie(!1,!1),move:ie(!0,!0),trimStart:ae(!0),trimEnd:ae(!1),trim:oe(function(e,t){var n=this.trimStart(t),o=this.trimEnd(t);return n||o}),expand:oe(function(e,t,n){
var a=!1,r=(n=x(n,I)).characterOptions;t||(t=o);if(t==i){var s,l,d=n.wordOptions,c=e.getRangeBoundaryPosition(this,!0),u=e.getRangeBoundaryPosition(this,!1),f=ee(c,r,d).nextEndToken(),h=f.chars[0].previousVisible();if(this.collapsed)s=f;else{s=ee(u,r,d).previousStartToken()}l=s.chars[s.chars.length-1];if(!h.equals(c)){this.setStart(h.node,h.offset);a=!0}if(l&&!l.equals(u)){this.setEnd(l.node,l.offset);a=!0}if(n.trim){n.trimStart&&(a=this.trimStart(r)||a);n.trimEnd&&(a=this.trimEnd(r)||a)}return a}return this.moveEnd(o,1,n)}),text:oe(function(e,t){return this.collapsed?"":function(e,t,n){var o,i=[],a=te(e,t,n);while(o=a.next())i.push(o);a.dispose();return i}(e,this,l(t,y)).join("")}),selectCharacters:oe(function(e,t,n,o,i){var a={characterOptions:i};t||(t=d(this.getDocument()));this.selectNodeContents(t);this.collapse(!0);this.moveStart("character",n,a);this.collapse(!0);this.moveEnd("character",o-n,a)}),toCharacterRange:oe(function(e,t,n){t||(t=d(this.getDocument()));var o,i,r=t.parentNode,s=a.getNodeIndex(t),l=-1==a.comparePoints(this.startContainer,this.endContainer,r,s),c=this.cloneRange();if(l){c.setStartAndEnd(this.startContainer,this.startOffset,r,s);o=-c.text(n).length}else{c.setStartAndEnd(r,s,this.startContainer,this.startOffset);o=c.text(n).length}return{start:o,end:i=o+this.text(n).length}}),findText:oe(function(t,n,o){(o=x(o,T)).wholeWordsOnly&&(o.wordOptions.includeTrailingSpace=!1);var i=m(o.direction),a=o.withinRange;a||(a=e.createRange()).selectNodeContents(this.getDocument());var r=n,s=!1;"string"==typeof r?o.caseSensitive||(r=r.toLowerCase()):s=!0;var l=t.getRangeBoundaryPosition(this,!i),d=a.comparePoint(l.node,l.offset);-1===d?l=t.getRangeBoundaryPosition(a,!0):1===d&&(l=t.getRangeBoundaryPosition(a,!1));var c,u=l,f=!1;while(1)if(c=ne(u,r,s,a,o)){if(c.valid){this.setStartAndEnd(c.startPos.node,c.startPos.offset,c.endPos.node,c.endPos.offset);return!0}u=i?c.startPos:c.endPos}else{if(!o.wrap||f)return!1;a=a.cloneRange();u=t.getRangeBoundaryPosition(a,!i);a.setBoundary(l.node,l.offset,i);f=!0}}),pasteHtml:function(e){this.deleteContents();if(e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t);this.collapseAfter(n)}}});function re(e){return oe(function(t,n){var o=!1;this.changeEachRange(function(t){o=t[e](n)||o});return o})}s(e.selectionPrototype,{expand:oe(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:oe(function(e,t,n,o){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var a=this.getRangeAt(0);o||(o={});o.characterOptions=l(o.characterOptions,S);i=a.move(t,n,o);this.setSingleRange(a)}return i}),trimStart:re("trimStart"),trimEnd:re("trimEnd"),trim:re("trim"),selectCharacters:oe(function(t,n,o,i,a,r){var s=e.createRange(n);s.selectCharacters(n,o,i,r);this.setSingleRange(s,a)}),saveCharacterRanges:oe(function(e,t,n){for(var o=this.getAllRanges(),i=[],a=1==o.length&&this.isBackward(),r=0,s=o.length;r<s;++r)i[r]={characterRange:o[r].toCharacterRange(t,n),backward:a,characterOptions:n};return i}),restoreCharacterRanges:oe(function(t,n,o){this.removeAllRanges();for(var i,a,r,s=0,l=o.length;s<l;++s){r=(a=o[s]).characterRange;(i=e.createRange(n)).selectCharacters(n,r.start,r.end,a.characterOptions);this.addRange(i,a.backward)}}),text:oe(function(e,t){for(var n=[],o=0,i=this.rangeCount;o<i;++o)n[o]=this.getRangeAt(o).text(t);return n.join("")})});e.innerText=function(t,n){var o=e.createRange(t);o.selectNodeContents(t);return o.text(n)};e.createWordIterator=function(e,t,n){var o=J();n=x(n,E);var i=ee(o.getPosition(e,t),n.characterOptions,n.wordOptions),a=m(n.direction);return{next:function(){return a?i.previousStartToken():i.nextEndToken()},dispose:function(){i.dispose();this.next=function(){}}}};e.noMutation=function(e){e(J());Y()};e.noMutation.createEntryPointFunction=oe;e.textRange={isBlockNode:function(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(R(e))||9==e.nodeType||11==e.nodeType)},isCollapsedWhitespaceNode:M,createPosition:oe(function(e,t,n){return e.getPosition(t,n)})}});return e},this);(function(e,a){"function"==typeof i&&i.amd?i(["./rangy-core"],e):void 0!==t&&"object"==typeof n?t.exports=e(o("rangy")):e(a.rangy)})(function(e){e.createModule("SaveRestore",["WrappedRange"],function(e,t){var n=e.dom,o=n.removeNode,i=e.Selection.isDirectionBackward,a="\ufeff";function r(e,t){return(t||document).getElementById(e)}function s(e,t){var o,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),r=n.getDocument(e.startContainer),s=e.cloneRange();s.collapse(t);(o=r.createElement("span")).id=i;o.style.lineHeight="0";o.style.display="none";o.className="rangySelectionBoundary";o.appendChild(r.createTextNode(a));s.insertNode(o);return o}function l(e,n,i,a){var s=r(i,e);if(s){n[a?"setStartBefore":"setEndBefore"](s);o(s)}else t.warn("Marker element has been removed. Cannot restore selection.")}function d(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function c(t,n){var o,a,r=e.DomRange.getRangeDocument(t),l=t.toString(),d=i(n);if(t.collapsed)return{document:r,markerId:(a=s(t,!1)).id,collapsed:!0};a=s(t,!1);return{document:r,startMarkerId:(o=s(t,!0)).id,endMarkerId:a.id,collapsed:!1,backward:d,toString:function(){return"original text: '"+l+"', new text: '"+t.toString()+"'"}}}function u(n,i){var a=n.document;void 0===i&&(i=!0);var s=e.createRange(a);if(n.collapsed){var d=r(n.markerId,a);if(d){d.style.display="inline";var c=d.previousSibling;if(c&&3==c.nodeType){o(d);s.collapseToPoint(c,c.length)}else{s.collapseBefore(d);o(d)}}else t.warn("Marker element has been removed. Cannot restore selection.")}else{l(a,s,n.startMarkerId,!0);l(a,s,n.endMarkerId,!1)}i&&s.normalizeBoundaries();return s}function f(t,n){var o,a,s=[],l=i(n);(t=t.slice(0)).sort(d);for(var u=0,f=t.length;u<f;++u)s[u]=c(t[u],l);for(u=f-1;u>=0;--u){o=t[u];a=e.DomRange.getRangeDocument(o);if(o.collapsed)o.collapseAfter(r(s[u].markerId,a));else{o.setEndBefore(r(s[u].endMarkerId,a));o.setStartAfter(r(s[u].startMarkerId,a))}}return s}function h(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=u(e[n],!0);return t}function p(e,t){var n=r(t,e);n&&o(n)}e.util.extend(e,{saveRange:c,restoreRange:u,saveRanges:f,restoreRanges:h,saveSelection:function(n){if(!e.isSelectionValid(n)){t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");return null}var o=e.getSelection(n),i=o.getAllRanges(),a=1==i.length&&o.isBackward(),r=f(i,a);a?o.setSingleRange(i[0],a):o.setRanges(i);return{win:n,rangeInfos:r,restored:!1}},restoreSelection:function(t,n){if(!t.restored){var o=t.rangeInfos,i=e.getSelection(t.win),a=h(o);if(1==o.length&&n&&e.features.selectionHasExtend&&o[0].backward){i.removeAllRanges();i.addRange(a[0],!0)}else i.setRanges(a);t.restored=!0}},removeMarkerElement:p,removeMarkers:function(e){for(var t,n=e.rangeInfos,o=0,i=n.length;o<i;++o)if((t=n[o]).collapsed)p(e.doc,t.markerId);else{p(e.doc,t.startMarkerId);p(e.doc,t.endMarkerId)}}})});return e},this);var l,d,u,f,h,p,m,g,v,C,_=function(){};_.extend=function(e,t){var n=_.prototype.extend;_._prototyping=!0;var o=new this;n.call(o,e);o.base=function(){};delete _._prototyping;var i=o.constructor,a=o.constructor=function(){if(!_._prototyping)if(this._constructing||this.constructor==a){this._constructing=!0;i.apply(this,arguments);delete this._constructing}else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],o)};a.ancestor=this;a.extend=this.extend;a.forEach=this.forEach;a.implement=this.implement;a.prototype=o;a.toString=this.toString;a.valueOf=function(e){return"object"==e?a:i.valueOf()};n.call(a,t);"function"==typeof a.init&&a.init();return a};_.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var o=t.valueOf();(t=function(){var e=this.base||_.prototype.base;this.base=n;var t=o.apply(this,arguments);this.base=e;return t}).valueOf=function(e){return"object"==e?t:o};t.toString=_.toString}this[e]=t}else if(e){var i=_.prototype.extend;_._prototyping||"function"==typeof this||(i=this.extend||i);var a={toSource:null
},r=["constructor","toString","valueOf"],s=_._prototyping?0:1;while(l=r[s++])e[l]!=a[l]&&i.call(this,l,e[l]);for(var l in e)a[l]||i.call(this,l,e[l])}return this}};_=_.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var o in e)void 0===this.prototype[o]&&t.call(n,e[o],o,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}});s.browser=function(){var e,t,n=navigator.userAgent,o=document.createElement("div"),i=-1!==n.indexOf("Gecko")&&-1===n.indexOf("KHTML")&&!l(),a=-1!==n.indexOf("AppleWebKit/")&&!l(),r=-1!==n.indexOf("Chrome/")&&!l(),s=-1!==n.indexOf("Opera/")&&!l();function l(e,t){var n,o=-1;"Microsoft Internet Explorer"==navigator.appName?n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(navigator.userAgent.indexOf("Trident")>-1?n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/(\d+)./i.test(navigator.userAgent)&&(n=/Edge\/(\d+)./i));n&&null!=n.exec(navigator.userAgent)&&(o=parseFloat(RegExp.$1));if(-1===o)return!1;if(!e)return!0;if(!t)return e===o;if("<"===t)return e<o;if(">"===t)return e>o;if("<="===t)return e<=o;if(">="===t)return e>=o}return{USER_AGENT:n,supported:function(){var e=this.USER_AGENT.toLowerCase(),t="contentEditable"in o,n=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,i=document.querySelector&&document.querySelectorAll,a=this.isIos()&&function(e){return+(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}(e)<5||this.isAndroid()&&function(e){return+(e.match(/android (\d+)/)||[void 0,0])[1]}(e)<4||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return t&&n&&i&&!a},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return l()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return l(12,">")},hasCurrentStyleProperty:function(){return"currentStyle"in o},insertsLineBreaksOnReturn:function(){return i},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in o||function(){o.setAttribute("on"+e,"return;");return"function"==typeof o["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!s},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";t.innerHTML=n;return t.innerHTML.toLowerCase()===n},supportsCommand:(e={formatBlock:l(10,"<="),insertUnorderedList:l(),insertOrderedList:l()},t={insertHTML:i},function(n,o){if(!e[o]){try{return n.queryCommandSupported(o)}catch(e){}try{return n.queryCommandEnabled(o)}catch(e){return!!t[o]}}return!1}),doesAutoLinkingInContentEditable:function(){return l()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return i||s||a},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return i||l()||s},autoScrollsToCaret:function(){return!a},autoClosesUnclosedTags:function(){var e,t,n=o.cloneNode(!1);n.innerHTML="<p><div></div>";t=n.innerHTML.toLowerCase();e="<p></p><div></div>"===t||"<p><div></div></p>"===t;this.autoClosesUnclosedTags=function(){return e};return e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return s},supportsSpeechApiOn:function(e){return(n.match(/Chrome\/(\d+)/)||[void 0,0])[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return l(9)&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return l(12,">")},hasProblemsSettingCaretAfterImg:function(){return l()},hasLiDeletingProblem:function(){return l()},hasUndoInContextMenu:function(){return i||r||s},hasInsertNodeIssue:function(){return s},hasIframeFocusIssue:function(){return l()},createsNestedInvalidMarkupAfterPaste:function(){return a},hasCaretBlockElementIssue:function(){return a},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModernPaste:function(){return!l()},fixStyleKey:function(e){if("cssFloat"===e)return"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat";return e},usesControlRanges:function(){return document.body&&"createControlRange"in document.body}}}();s.lang.array=function(e){return{contains:function(t){if(Array.isArray(t)){for(var n=t.length;n--;)if(-1!==s.lang.array(e).indexOf(t[n]))return!0;return!1}return-1!==s.lang.array(e).indexOf(t)},indexOf:function(t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},without:function(t){t=s.lang.array(t);for(var n=[],o=0,i=e.length;o<i;o++)t.contains(e[o])||n.push(e[o]);return n},get:function(){for(var t=0,n=e.length,o=[];t<n;t++)o.push(e[t]);return o},map:function(t,n){if(Array.prototype.map)return e.map(t,n);for(var o=e.length>>>0,i=new Array(o),a=0;a<o;a++)i[a]=t.call(n,e[a],a,e);return i},unique:function(){var t=[],n=e.length,o=0;while(o<n){s.lang.array(t).contains(e[o])||t.push(e[o]);o++}return t}}};s.lang.Dispatcher=_.extend({on:function(e,t){this.events=this.events||{};this.events[e]=this.events[e]||[];this.events[e].push(t);return this},off:function(e,t){this.events=this.events||{};var n,o,i=0;if(e){n=this.events[e]||[],o=[];for(;i<n.length;i++)n[i]!==t&&t&&o.push(n[i]);this.events[e]=o}else this.events={};return this},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],o=0;o<n.length;o++)n[o].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}});s.lang.object=function(e){return{merge:function(t,n){for(var o in t)n&&s.lang.object(t[o]).isPlainObject()&&(void 0===e[o]||s.lang.object(e[o]).isPlainObject())?void 0===e[o]?e[o]=s.lang.object(t[o]).clone(!0):s.lang.object(e[o]).merge(s.lang.object(t[o]).clone(!0)):e[o]=s.lang.object(t[o]).isPlainObject()?s.lang.object(t[o]).clone(!0):t[o];return this},difference:function(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(n[o]=e[o]));for(var i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)&&e[i]===t[i]||(n[0]=e[0]));return n},get:function(){return e},clone:function(t){var n,o={};if(null===e||!s.lang.object(e).isPlainObject())return e;for(n in e)e.hasOwnProperty(n)&&(o[n]=t?s.lang.object(e[n]).clone(t):e[n]);return o},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(e)},isPlainObject:function(){return e&&"[object Object]"===Object.prototype.toString.call(e)&&!("Node"in window?e instanceof Node:e instanceof Element||e instanceof Text)},isEmpty:function(){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}};l=/^\s+/,d=/\s+$/,u=/[&<>\t"]/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "},s.lang.string=function(e){e=String(e);return{trim:function(){return e.replace(l,"").replace(d,"")},interpolate:function(t){for(var n in t)e=this.replace("#{"+n+"}").by(t[n]);return e},replace:function(t){return{by:function(n){return e.split(t).join(n)}}},escapeHTML:function(t,n){var o=e.replace(u,function(e){return f[e]});t&&(o=o.replace(/(?:\r\n|\r|\n)/g,"<br />"));n&&(o=o.replace(/  /gi,"&nbsp; "));return o}}};(function(e){var t=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),n=/((https?:\/\/|www\.)[^\s<]{3,})/gi,o=/([^\w\/\-](,?))$/i,i=100,a={")":"(","]":"[","}":"{"};e.dom.autoLink=function(r,s){if(function(n,o){var i;while(n.parentNode){n=n.parentNode;i=n.nodeName
;if(n.className&&e.lang.array(n.className.split(" ")).contains(o))return!0;if(t.contains(i))return!0;if("body"===i)return!1}return!1}(r,s))return r;r===r.ownerDocument.documentElement&&(r=r.ownerDocument.body);return function r(s,l){if(t.contains(s.nodeName))return;if(s.className&&e.lang.array(s.className.split(" ")).contains(l))return;if(s.nodeType===e.TEXT_NODE&&s.data.match(n)){(function(t){var r,s=t.parentNode,l=e.lang.string(t.data).escapeHTML(),d=function(e){var t=e._wysihtml5_tempElement;t||(t=e._wysihtml5_tempElement=e.createElement("div"));return t}(s.ownerDocument);d.innerHTML="<span></span>"+(r=l).replace(n,function(e,t){var n=(t.match(o)||[])[1]||"",r=a[n];if((t=t.replace(o,"")).split(r).length>t.split(n).length){t+=n;n=""}var s=t,l=t;t.length>i&&(l=l.substr(0,i)+"...");"www."===s.substr(0,4)&&(s="http://"+s);return'<a href="'+s+'">'+l+"</a>"+n});d.removeChild(d.firstChild);while(d.firstChild)s.insertBefore(d.firstChild,t);s.removeChild(t)})(s);return}for(var d=e.lang.array(s.childNodes).get(),c=d.length,u=0;u<c;u++)r(d[u],l);return s}(r,s)};e.dom.autoLink.URL_REG_EXP=n})(s);(function(e){var t=e.dom;t.addClass=function(e,n){var o=e.classList;if(o)return o.add(n);if(t.hasClass(e,n))return;e.className+=" "+n};t.removeClass=function(e,t){var n=e.classList;if(n)return n.remove(t);e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")};t.hasClass=function(e,t){var n=e.classList;if(n)return n.contains(t);var o=e.className;return o.length>0&&(o==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(o))}})(s);s.dom.contains=function(){var e=document.documentElement;if(e.contains)return function(e,t){if(t.nodeType!==s.ELEMENT_NODE){if(t.parentNode===e)return!0;t=t.parentNode}return e!==t&&e.contains(t)};if(e.compareDocumentPosition)return function(e,t){return!!(16&e.compareDocumentPosition(t))}}();s.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");t.appendChild(n);return n}return function(t,n,o){if("UL"===t.nodeName||"OL"===t.nodeName||"MENU"===t.nodeName)return t;var i,a,r,l,d,c,u,f,h,p=t.ownerDocument,m=function(e,t){return e.createElement(t)}(p,n),g=t.querySelectorAll("br"),v=g.length;for(h=0;h<v;h++){l=g[h];while((d=l.parentNode)&&d!==t&&d.lastChild===l){if("block"===s.dom.getStyle("display").from(d)){d.removeChild(l);break}s.dom.insert(l).after(l.parentNode)}}a=(i=s.lang.array(t.childNodes).get()).length;for(h=0;h<a;h++){f=f||e(p,m);r=i[h];c="block"===s.dom.getStyle("display").from(r);u="BR"===r.nodeName;if(c&&(!o||!s.dom.hasClass(r,o))){(f=f.firstChild?e(p,m):f).appendChild(r);f=null;continue}if(u){f=f.firstChild?null:f;continue}f.appendChild(r)}0===i.length&&e(p,m);t.parentNode.replaceChild(m,t);return m}}();s.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var o,i=0,a=e.length;i<a;i++){o=e[i];void 0!==t[o]&&""!==t[o]&&(n[o]=t[o])}return{andTo:arguments.callee}}}}}};h=s.dom,p=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],m=function(e){for(var t=0,n=p.length;t<n;t++)if("border-box"===h.getStyle(p[t]).from(e))return p[t]},h.copyStyles=function(e){return{from:function(t){(function(e){if(m(e))return parseInt(h.getStyle("width").from(e),10)<e.offsetWidth;return!1})(t)&&(e=s.lang.array(e).without(p));for(var n,o="",i=e.length,a=0;a<i;a++){n=e[a];o+=n+":"+h.getStyle(n).from(t)+";"}return{to:function(e){h.setStyles(o).on(e);return{andTo:arguments.callee}}}}}};(function(e){e.dom.delegate=function(e,t,n,o){var i=function(n){for(var i=n.target,a=3===i.nodeType?i.parentNode:i,r=e.querySelectorAll(t),s=0,l=r.length;s<l;s++)r[s].contains(a)&&o.call(r[s],n)};e.addEventListener(n,i,!1);return{stop:function(){e.removeEventListener(n,i,!1)}}}})(s);(function(e){function t(e,t){var n=[e],o=e;while(t&&o&&o!==t||!t&&o){n.unshift(o);o=o.parentNode}return n}e.dom.domNode=function(n){var o=[e.ELEMENT_NODE,e.TEXT_NODE];return{is:{emptyTextNode:function(t){var o=t?/^\s*$/g:/^[\r\n]*$/g;return n&&n.nodeType===e.TEXT_NODE&&o.test(n.data)},rangyBookmark:function(){return n&&1===n.nodeType&&n.classList.contains("rangySelectionBoundary")},visible:function(){var t=!/^\s*$/g.test(e.dom.getTextContent(n));t||1===n.nodeType&&n.querySelector("img, br, hr, object, embed, canvas, input, textarea")&&(t=!0);return t},lineBreak:function(){return n&&1===n.nodeType&&"BR"===n.nodeName},block:function(){return n&&1===n.nodeType&&"block"===n.ownerDocument.defaultView.getComputedStyle(n).display},voidElement:function(){return e.dom.domNode(n).test({query:e.VOID_ELEMENTS})}},prev:function(t){var i=n.previousSibling,a=t&&t.nodeTypes?t.nodeTypes:o;if(!i)return null;if(e.dom.domNode(i).is.rangyBookmark()||!e.lang.array(a).contains(i.nodeType)||t&&t.ignoreBlankTexts&&e.dom.domNode(i).is.emptyTextNode(!0))return e.dom.domNode(i).prev(t);return i},next:function(t){var i=n.nextSibling,a=t&&t.nodeTypes?t.nodeTypes:o;if(!i)return null;if(e.dom.domNode(i).is.rangyBookmark()||!e.lang.array(a).contains(i.nodeType)||t&&t.ignoreBlankTexts&&e.dom.domNode(i).is.emptyTextNode(!0))return e.dom.domNode(i).next(t);return i},commonAncestor:function(e,o){var i=t(n,o),a=t(e,o);if(i[0]!=a[0])return null;for(var r=0;r<i.length;r++)if(i[r]!=a[r])return i[r-1];return null},lastLeafNode:function(t){var o;if(1!==n.nodeType)return n;if(!(o=n.lastChild))return n;if(t&&t.leafClasses)for(var i=t.leafClasses.length;i--;)if(e.dom.hasClass(n,t.leafClasses[i]))return n;return e.dom.domNode(o).lastLeafNode(t)},escapeParent:function(t,o){var i,a,r,s=n;if(!e.dom.contains(t,n))throw new Error("Child is not a descendant of node.");do{a=(i=s.parentNode).cloneNode(!1);while(i.lastChild&&i.lastChild!==s)a.insertBefore(i.lastChild,a.firstChild);if(i!==t){(r=i.cloneNode(!1)).appendChild(s);s=r}i.parentNode.insertBefore(s,i.nextSibling);if(""!==a.innerHTML)if(/^\s+$/.test(a.innerHTML))while(a.lastChild)i.parentNode.insertBefore(a.lastChild,s.nextSibling);else i.parentNode.insertBefore(a,s.nextSibling);if(""===i.innerHTML)i.parentNode.removeChild(i);else if(/^\s+$/.test(i.innerHTML)){while(i.firstChild)i.parentNode.insertBefore(i.firstChild,i);i.parentNode.removeChild(i)}}while(i&&i!==t);if(o&&s){s.parentNode.insertBefore(o,s);o.appendChild(s)}},transferContentTo:function(t,o){if(1===n.nodeType){if(e.dom.domNode(t).is.voidElement()||3===t.nodeType)while(n.lastChild)t.parentNode.insertBefore(n.lastChild,t.nextSibling);else while(n.firstChild)t.appendChild(n.firstChild);o&&n.parentNode.removeChild(n)}else 3!==n.nodeType&&8!==n.nodeType||(e.dom.domNode(t).is.voidElement()?t.parentNode.insertBefore(n,t.nextSibling):t.appendChild(n))},test:function(t){var o;if(!t)return!1;if(1!==n.nodeType)return!1;if(t.query&&!n.matches(t.query))return!1;if(t.nodeName&&n.nodeName.toLowerCase()!==t.nodeName.toLowerCase())return!1;if(t.className&&!n.classList.contains(t.className))return!1;if(t.classRegExp){if(0===((n.className||"").match(t.classRegExp)||[]).length)return!1}if(t.styleProperty&&t.styleProperty.length>0)for(var i=!1,a=Array.isArray(t.styleProperty)?t.styleProperty:[t.styleProperty],r=0,s=a.length;r<s;r++){o=e.browser.fixStyleKey(a[r]);if(n.style[o]){if(!t.styleValue){i=!0;break}if(t.styleValue instanceof RegExp){if(n.style[o].trim().match(t.styleValue).length>0){i=!0;break}}else if(Array.isArray(t.styleValue)){if(t.styleValue.indexOf(n.style[o].trim())){i=!0;break}}else if(t.styleValue===n.style[o].trim().replace(/, /g,",")){i=!0;break}}if(!i)return!1}if(t.attribute){var l=e.dom.getAttributes(n),d=[],c=!1;Array.isArray(t.attribute)?d=t.attribute:d[t.attribute]=t.attributeValue;for(var u in d)if(d.hasOwnProperty(u))if(void 0===d[u]){if(void 0!==l[u]){c=!0;break}}else if(l[u]===d[u]){c=!0;break}if(!c)return!1}return!0}}}})(s);s.dom.getAsDom=(g=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"],function(e,t){t=t||document;var n;if("object"==typeof e&&e.nodeType)(n=t.createElement("div")).appendChild(e);else if(s.browser.supportsHTML5Tags(t))(n=t.createElement("div")).innerHTML=e;else{(function(e){if(e._wysihtml5_supportsHTML5Tags)return
;for(var t=0,n=g.length;t<n;t++)e.createElement(g[t]);e._wysihtml5_supportsHTML5Tags=!0})(t);n=function(e,t){var n=t.createElement("div");n.style.display="none";t.body.appendChild(n);try{n.innerHTML=e}catch(e){}t.body.removeChild(n);return n}(e,t)}return n});s.dom.getParentElement=function(e,t,n,o){n=n||50;while(n--&&e&&"BODY"!==e.nodeName&&(!o||e!==o)){if(s.dom.domNode(e).test(t))return e;e=e.parentNode}return null};s.dom.getStyle=function(){var e={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},t=/\-[a-z]/g;return function(n){return{from:function(o){if(o.nodeType!==s.ELEMENT_NODE)return;var i,a=o.ownerDocument,r=e[n]||(i=n).replace(t,function(e){return e.charAt(1).toUpperCase()}),l=o.style,d=o.currentStyle,c=l[r];if(c)return c;if(d)try{return d[r]}catch(e){}var u,f,h=a.defaultView||a.parentWindow,p=("height"===n||"width"===n)&&"TEXTAREA"===o.nodeName;if(h.getComputedStyle){if(p){u=l.overflow;l.overflow="hidden"}f=h.getComputedStyle(o,null).getPropertyValue(n);p&&(l.overflow=u||"");return f}}}}}();s.dom.getTextNodes=function(e,t){var n=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t&&/^\s*$/.test(e.innerText||e.textContent)||n.push(e):n=n.concat(s.dom.getTextNodes(e,t));return n};s.dom.hasElementWithTagName=function(){var e={},t=1;return function(n,o){var i=function(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)}(n)+":"+o,a=e[i];a||(a=e[i]=n.getElementsByTagName(o));return a.length>0}}();(function(e){var t={},n=1;e.dom.hasElementWithClassName=function(o,i){if(!e.browser.supportsNativeGetElementsByClassName())return!!o.querySelector("."+i);var a=function(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}(o)+":"+i,r=t[a];r||(r=t[a]=o.getElementsByClassName(i));return r.length>0}})(s);s.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}};s.dom.insertCSS=function(e){e=e.join("\n");return{into:function(t){var n=t.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e));var o=t.querySelector("head link");if(o){o.parentNode.insertBefore(n,o);return}var i=t.querySelector("head");i&&i.appendChild(n)}}};(function(e){e.dom.lineBreaks=function(t){function n(e){return"BR"===e.nodeName}function o(t){if(n(t))return!0;if("block"===e.dom.getStyle("display").from(t))return!0;return!1}return{add:function(n){var i=t.ownerDocument,a=e.dom.domNode(t).next({ignoreBlankTexts:!0}),r=e.dom.domNode(t).prev({ignoreBlankTexts:!0});a&&!o(a)&&e.dom.insert(i.createElement("br")).after(t);r&&!o(r)&&e.dom.insert(i.createElement("br")).before(t)},remove:function(o){var i=e.dom.domNode(t).next({ignoreBlankTexts:!0}),a=e.dom.domNode(t).prev({ignoreBlankTexts:!0});i&&n(i)&&i.parentNode.removeChild(i);a&&n(a)&&a.parentNode.removeChild(a)}}}})(s);s.dom.observe=function(e,t,n){for(var o,i,a=0,r=(t="string"==typeof t?[t]:t).length;a<r;a++){i=t[a];if(e.addEventListener)e.addEventListener(i,n,!1);else{o=function(t){"target"in t||(t.target=t.srcElement);t.preventDefault=t.preventDefault||function(){this.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0};n.call(e,t)};e.attachEvent("on"+i,o)}}return{stop:function(){for(var i,a=0,r=t.length;a<r;a++){i=t[a];e.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent("on"+i,o)}}}};s.dom.parse=function(e,t){var n={1:function(e,t){var n,a,l,d=r.tags,h=e.nodeName.toLowerCase(),p=e.scopeName;if(e._wysihtml5)return null;e._wysihtml5=1;if("wysihtml5-temp"===e.className)return null;p&&"HTML"!=p&&(h=p+":"+h);"outerHTML"in e&&(s.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(h="div"));if(h in d){if(!(n=d[h])||n.remove)return null;if(n.unwrap)return!1;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:o}}if(n.one_of_type&&!function(e,t,n,o){var i,a;if("SPAN"===e.nodeName&&!o&&("_wysihtml5-temp-placeholder"===e.className||"rangySelectionBoundary"===e.className))return!0;for(a in n)if(n.hasOwnProperty(a)&&t.type_definitions&&t.type_definitions[a]){i=t.type_definitions[a];if(c(e,i))return!0}return!1}(e,r,n.one_of_type,t)){if(!n.remove_action)return null;if("unwrap"===n.remove_action)return!1;if("rename"!==n.remove_action)return null;l=n.remove_action_rename_to||o}a=e.ownerDocument.createElement(l||n.rename_tag||h);(function(e,t,n,o){var a,l,d,c,h,p={},m=n.set_class,g=n.add_class,v=n.add_style,b=n.set_attributes,y=r.classes,S=0,D=[],T=[],w=[],I=[];b&&(p=s.lang.object(b).clone());p=s.lang.object(p).merge(function(e,t){var n,o,i,a=s.lang.object(r.attributes||{}).clone(),l=s.lang.object(a).merge(s.lang.object(t||{}).clone()).get(),d={},c=s.dom.getAttributes(e);for(n in l)if(/\*$/.test(n))for(var h=0,p=(i=u(n.slice(0,-1),c)).length;h<p;h++)!1!==(o=f(i[h],c[i[h]],l[n],e.nodeName))&&(d[i[h]]=o);else!1!==(o=f(n,c[n],l[n],e.nodeName))&&(d[n]=o);return d}(e,n.check_attributes)).get();m&&D.push(m);if(g)for(c in g){if(!(h=_[g[c]]))continue;"string"==typeof(d=h(s.dom.getAttribute(e,c)))&&D.push(d)}if(v)for(c in v){if(!(h=C[v[c]]))continue;newStyle=h(s.dom.getAttribute(e,c));"string"==typeof newStyle&&T.push(newStyle)}if("string"==typeof y&&"any"===y)if(e.getAttribute("class"))if(r.classes_blacklist){(I=e.getAttribute("class"))&&(D=D.concat(I.split(i)));a=D.length;for(;S<a;S++){l=D[S];r.classes_blacklist[l]||w.push(l)}w.length&&(p["class"]=s.lang.array(w).unique().join(" "))}else p["class"]=e.getAttribute("class");else D&&D.length>0&&(p["class"]=s.lang.array(D).unique().join(" "));else{if(!o){y["_wysihtml5-temp-placeholder"]=1;y["_rangySelectionBoundary"]=1;y["wysiwyg-tmp-selected-cell"]=1}(I=e.getAttribute("class"))&&(D=D.concat(I.split(i)));a=D.length;for(;S<a;S++){l=D[S];y[l]&&w.push(l)}w.length&&(p["class"]=s.lang.array(w).unique().join(" "))}if(p["class"]&&o){p["class"]=p["class"].replace("wysiwyg-tmp-selected-cell","");/^\s*$/g.test(p["class"])&&delete p["class"]}T.length&&(p["style"]=s.lang.array(T).unique().join(" "));for(c in p)try{t.setAttribute(c,p[c])}catch(e){}if(p.src){void 0!==p.width&&t.setAttribute("width",p.width);void 0!==p.height&&t.setAttribute("height",p.height)}})(e,a,n,t);(function(e,t,n){var o,i;if(n&&n.keep_styles)for(o in n.keep_styles)if(n.keep_styles.hasOwnProperty(o)){i="float"===o?e.style.styleFloat||e.style.cssFloat:e.style[o];if(n.keep_styles[o]instanceof RegExp&&!n.keep_styles[o].test(i))continue;"float"===o?t.style[e.style.styleFloat?"styleFloat":"cssFloat"]=i:e.style[o]&&(t.style[o]=i)}})(e,a,n);e=null;a.normalize&&a.normalize();return a},3:function(e){var t=e.nextSibling;if(!t||t.nodeType!==s.TEXT_NODE){var n=e.data.replace(s.INVISIBLE_SPACE_REG_EXP,"");return e.ownerDocument.createTextNode(n)}t.data=e.data.replace(s.INVISIBLE_SPACE_REG_EXP,"")+t.data.replace(s.INVISIBLE_SPACE_REG_EXP,"")},8:function(e){if(r.comments)return e.ownerDocument.createComment(e.nodeValue)}},o="span",i=/\s+/,a={tags:{},classes:{}},r={},l=["ADDRESS","BLOCKQUOTE","CENTER","DIR","DIV","DL","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","ISINDEX","MENU","NOFRAMES","NOSCRIPT","OL","P","PRE","TABLE","UL"];function d(e,t,i,a){var r,c,u,f,h=e.nodeType,p=e.childNodes,m=p.length,g=n[h],v=0;if(a&&1===h&&s.dom.hasClass(e,a))return e;if(!(c=g&&g(e,i))){if(!1===c){r=e.ownerDocument.createDocumentFragment();for(v=m;v--;)if(p[v]&&(u=d(p[v],t,i,a))){p[v]===u&&v--;r.insertBefore(u,r.firstChild)}""===(f=s.dom.getStyle("display").from(e))&&(f=s.lang.array(l).contains(e.tagName)?"block":"");s.lang.array(["block","flex","table"]).contains(f)&&r.appendChild(e.ownerDocument.createElement("br"));s.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(e.nodeName.toLowerCase())&&e.parentNode.lastChild!==e&&(e.nextSibling&&3===e.nextSibling.nodeType&&/^\s/.test(e.nextSibling.nodeValue)||r.appendChild(e.ownerDocument.createTextNode(" ")));r.normalize&&r.normalize();return r}return null}for(v=0;v<m;v++)if(p[v]&&(u=d(p[v],t,i,a))){p[v]===u&&v--;c.appendChild(u)}
if(t&&c.nodeName.toLowerCase()===o&&(!c.childNodes.length||/^\s*$/gi.test(c.innerHTML)&&(i||"_wysihtml5-temp-placeholder"!==e.className&&"rangySelectionBoundary"!==e.className)||!c.attributes.length)){r=c.ownerDocument.createDocumentFragment();while(c.firstChild)r.appendChild(c.firstChild);r.normalize&&r.normalize();return r}c.normalize&&c.normalize();return c}function c(e,t){var n,o,a,r,l,d=e.getAttribute("class"),c=e.getAttribute("style");if(t.methods)for(var u in t.methods)if(t.methods.hasOwnProperty(u)&&b[u]&&b[u](e))return!0;if(d&&t.classes){n=(d=d.replace(/^\s+/g,"").replace(/\s+$/g,"").split(i)).length;for(var f=0;f<n;f++)if(t.classes[d[f]])return!0}if(c&&t.styles){c=c.split(";");for(o in t.styles)if(t.styles.hasOwnProperty(o))for(var h=c.length;h--;)if((l=c[h].split(":"))[0].replace(/\s/g,"").toLowerCase()===o&&(!0===t.styles[o]||1===t.styles[o]||s.lang.array(t.styles[o]).contains(l[1].replace(/\s/g,"").toLowerCase())))return!0}if(t.attrs)for(a in t.attrs)if(t.attrs.hasOwnProperty(a)&&"string"==typeof(r=s.dom.getAttribute(e,a))&&r.search(t.attrs[a])>-1)return!0;return!1}function u(e,t){var n=[];for(var o in t)t.hasOwnProperty(o)&&0===o.indexOf(e)&&n.push(o);return n}function f(e,t,n,o){var i,a=s.lang.object(n).isFunction()?n:v[n];if(a&&"string"==typeof(i=a(t,o)))return i;return!1}var h,p,m,g,v={url:(h=/^https?:\/\//i,function(e){if(!e||!e.match(h))return null;return e.replace(h,function(e){return e.toLowerCase()})}),src:function(){var e=/^(\/|https?:\/\/)/i;return function(t){if(!t||!t.match(e))return null;return t.replace(e,function(e){return e.toLowerCase()})}}(),href:function(){var e=/^(#|\/|https?:\/\/|mailto:|tel:)/i;return function(t){if(!t||!t.match(e))return null;return t.replace(e,function(e){return e.toLowerCase()})}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t,n){if(!t)return"IMG"===n?"":null;return t.replace(e,"")}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}(),dimension:function(){var e=/\D*(\d+)(\.\d+)?\s?(%)?\D*/;return function(t){return(t=(t||"").replace(e,"$1$2$3"))||null}}(),any:function(e){if(!e)return null;return e}},C={align_text:(p={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"},function(e){return p[String(e).toLowerCase()]})},_={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()},b={has_visible_contet:(g=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"],function(e){if((m=(e.innerText||e.textContent).replace(/\s/g,""))&&m.length>0)return!0;for(var t=g.length;t--;)if(e.querySelector(g[t]))return!0;if(e.offsetWidth&&e.offsetWidth>0&&e.offsetHeight&&e.offsetHeight>0)return!0;return!1})},y={unwrap:function(e){s.dom.unwrap(e)},remove:function(e){e.parentNode.removeChild(e)}};return function(e,t){s.lang.object(r).merge(a).merge(t.rules).get();var n,o,i,l=t.context||e.ownerDocument||document,c=l.createDocumentFragment(),u="string"==typeof e,f=!1;!0===t.clearInternals&&(f=!0);n=u?s.dom.getAsDom(e,l):e;r.selectors&&function(e,t){var n,o,i;for(n in t)if(t.hasOwnProperty(n)){s.lang.object(t[n]).isFunction()?o=t[n]:"string"==typeof t[n]&&y[t[n]]&&(o=y[t[n]]);for(var a=(i=e.querySelectorAll(n)).length;a--;)o(i[a])}}(n,r.selectors);while(n.firstChild){(o=d(i=n.firstChild,t.cleanUp,f,t.uneditableClass))&&c.appendChild(o);i!==o&&n.removeChild(i)}if(t.unjoinNbsps)for(var h=s.dom.getTextNodes(c),p=h.length;p--;)h[p].nodeValue=h[p].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");n.innerHTML="";n.appendChild(c);return u?s.quirks.getCorrectInnerHTML(n):n}(e,t)};s.dom.removeEmptyTextNodes=function(e){for(var t,n=s.lang.array(e.childNodes).get(),o=n.length,i=0;i<o;i++)(t=n[i]).nodeType===s.TEXT_NODE&&/^[\n\r]*$/.test(t.data)&&t.parentNode.removeChild(t)};s.dom.renameElement=function(e,t){var n,o=e.ownerDocument.createElement(t);while(n=e.firstChild)o.appendChild(n);s.dom.copyAttributes(["align","className"]).from(e).to(o);e.parentNode&&e.parentNode.replaceChild(o,e);return o};s.dom.replaceWithChildNodes=function(e){if(!e.parentNode)return;while(e.firstChild)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)};(function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function o(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}e.resolveList=function(e,i){if(!e.nodeName.match(/^(MENU|UL|OL)$/))return;var a,r,l,d,c,u,f,h=e.ownerDocument,p=h.createDocumentFragment(),m=s.dom.domNode(e).prev({ignoreBlankTexts:!0}),g=s.dom.domNode(e).next({ignoreBlankTexts:!0}),v=e.lastElementChild||e.lastChild;if(i){!m||t(m)||n(m)||o(p);while(u=e.firstElementChild||e.firstChild){r=u.lastChild;f=u===v;while(a=u.firstChild){l=a===r;d=(!f||g&&!t(g))&&l&&!t(a)&&!n(a);p.appendChild(a);d&&o(p)}u.parentNode.removeChild(u)}}else while(u=e.firstElementChild||e.firstChild){if(u.querySelector&&u.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))while(a=u.firstChild)p.appendChild(a);else{c=h.createElement("p");while(a=u.firstChild)c.appendChild(a);p.appendChild(c)}u.parentNode.removeChild(u)}e.parentNode.replaceChild(p,e)}})(s.dom);(function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],o=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],i=["referrer","write","open","close"];e.dom.Sandbox=_.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION;this.config=e.lang.object({}).merge(n).get();this.config.className||(this.config.className="wysihtml5-sandbox");this.editableArea=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e));e.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,o=t.createElement("iframe");o.className=this.config.className;e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(o);e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(o.src="javascript:'<html></html>'");o.onload=function(){o.onreadystatechange=o.onload=null;n._onLoadIframe(o)};o.onreadystatechange=function(){if(/loaded|complete/.test(o.readyState)){o.onreadystatechange=o.onload=null;n._onLoadIframe(o)}};return o},_onLoadIframe:function(a){if(!e.dom.contains(t.documentElement,a))return;var r=this,s=a.contentWindow,l=a.contentWindow.document,d=t.characterSet||t.charset||"utf-8",c=this._getHtml({charset:d,stylesheets:this.config.stylesheets});l.open("text/html","replace");l.write(c);l.close();this.getWindow=function(){return a.contentWindow};this.getDocument=function(){return a.contentWindow.document};s.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)};if(!e.browser.supportsSandboxedIframes()){var u,f;for(u=0,f=n.length;u<f;u++)this._unset(s,n[u]);for(u=0,f=o.length;u<f;u++)this._unset(s,o[u],e.EMPTY_FUNCTION);for(u=0,
f=i.length;u<f;u++)this._unset(l,i[u]);this._unset(l,"cookie","",!0)}e.polyfills&&e.polyfills(s,l);this.loaded=!0;setTimeout(function(){r.callback(r)},0)},_getHtml:function(t){var n,o=t.stylesheets,i="",a=0;if(o="string"==typeof o?[o]:o){n=o.length;for(;a<n;a++)i+='<link rel="stylesheet" href="'+o[a]+'">'}t.stylesheets=i;return e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,o,i){try{t[n]=o}catch(e){}try{t.__defineGetter__(n,function(){return o})}catch(e){}if(i)try{t.__defineSetter__(n,function(){})}catch(e){}if(!e.browser.crashesWhenDefineProperty(n))try{var a={get:function(){return o}};i&&(a.set=function(){});Object.defineProperty(t,n,a)}catch(e){}}})})(s);(function(e){var t=document;e.dom.ContentEditableArea=_.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView||this.element.ownerDocument.parentWindow},getDocument:function(){return this.element.ownerDocument},constructor:function(t,n,o){this.callback=t||e.EMPTY_FUNCTION;this.config=e.lang.object({}).merge(n).get();this.config.className||(this.config.className="wysihtml5-sandbox");this.element=o?this._bindElement(o):this._createElement()},destroy:function(){},_createElement:function(){var e=t.createElement("div");e.className=this.config.className;this._loadElement(e);return e},_bindElement:function(e){e.className=e.className?e.className+" wysihtml5-sandbox":"wysihtml5-sandbox";this._loadElement(e,!0);return e},_loadElement:function(e,t){var n=this;if(!t){var o=this._getHtml();e.innerHTML=o}this.loaded=!0;setTimeout(function(){n.callback(n)},0)},_getHtml:function(e){return""}})})(s);v={className:"class"},s.dom.setAttributes=function(e){return{on:function(t){for(var n in e)t.setAttribute(v[n]||n,e[n])}}};s.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"==typeof e){n.cssText+=";"+e;return}for(var o in e)if("float"===o){n.cssFloat=e[o];n.styleFloat=e[o]}else n[o]=e[o]}}};(function(e){e.simulatePlaceholder=function(t,n,o,i){var a=i||"wysihtml5-placeholder",r=function(){var t=n.element.offsetWidth>0&&n.element.offsetHeight>0;if(n.hasPlaceholderSet()){n.clear();n.element.focus();t&&setTimeout(function(){var e=n.selection.getSelection();e.focusNode&&e.anchorNode||n.selection.selectNode(n.element.firstChild||n.element)},0)}n.placeholderSet=!1;e.removeClass(n.element,a)},s=function(){if(n.isEmpty()&&!n.placeholderSet){n.placeholderSet=!0;n.setValue(o,!1);e.addClass(n.element,a)}};t.on("set_placeholder",s).on("unset_placeholder",r).on("focus:composer",r).on("paste:composer",r).on("blur:composer",s);s()}})(s.dom);(function(e){var t=document.documentElement;if("textContent"in t){e.setTextContent=function(e,t){e.textContent=t};e.getTextContent=function(e){return e.textContent}}else if("innerText"in t){e.setTextContent=function(e,t){e.innerText=t};e.getTextContent=function(e){return e.innerText}}else{e.setTextContent=function(e,t){e.nodeValue=t};e.getTextContent=function(e){return e.nodeValue}}})(s.dom);s.dom.getAttribute=function(e,t){var n=!s.browser.supportsGetAttributeCorrectly();t=t.toLowerCase();if("IMG"==e.nodeName&&"src"==t&&!0===s.dom.isLoadedImage(e))return e.src;if(n&&"outerHTML"in e){return-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null}return e.getAttribute(t)};s.dom.getAttributes=function(e){var t,n=!s.browser.supportsGetAttributeCorrectly(),o=e.nodeName,i=[];for(t in e.attributes)(e.attributes.hasOwnProperty&&e.attributes.hasOwnProperty(t)||!e.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e.attributes,t))&&e.attributes[t].specified&&("IMG"==o&&"src"==e.attributes[t].name.toLowerCase()&&!0===s.dom.isLoadedImage(e)?i["src"]=e.src:s.lang.array(["rowspan","colspan"]).contains(e.attributes[t].name.toLowerCase())&&n?1!==e.attributes[t].value&&(i[e.attributes[t].name]=e.attributes[t].value):i[e.attributes[t].name]=e.attributes[t].value);return i};s.dom.isLoadedImage=function(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}};(function(e){var t=e.dom,n=function(e){this.el=e;this.isColspan=!1;this.isRowspan=!1;this.firstCol=!0;this.lastCol=!0;this.firstRow=!0;this.lastRow=!0;this.isReal=!0;this.spanCollection=[];this.modified=!1},o=function(e,n){if(e){this.cell=e;this.table=t.getParentElement(e,{query:"table"})}else if(n){this.table=n;this.cell=this.table.querySelectorAll("th, td")[0]}};function i(e,t){for(var n,o=[],i=0,a=e.length;i<a;i++)if(n=e[i].querySelectorAll(t))for(var r=n.length;r--;o.unshift(n[r]));return o}function a(e){e.parentNode.removeChild(e)}function r(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function s(e,t){var n=e.nextSibling;while(1!=n.nodeType){n=n.nextSibling;if(!t||t==n.tagName.toLowerCase())return n}return null}o.prototype={addSpannedCellToMap:function(e,t,o,i,a,r){for(var s=[],l=o+(r?parseInt(r,10)-1:0),d=i+(a?parseInt(a,10)-1:0),c=o;c<=l;c++){void 0===t[c]&&(t[c]=[]);for(var u=i;u<=d;u++){t[c][u]=new n(e);t[c][u].isColspan=a&&parseInt(a,10)>1;t[c][u].isRowspan=r&&parseInt(r,10)>1;t[c][u].firstCol=u==i;t[c][u].lastCol=u==d;t[c][u].firstRow=c==o;t[c][u].lastRow=c==l;t[c][u].isReal=u==i&&c==o;t[c][u].spanCollection=s;s.push(t[c][u])}}},setCellAsModified:function(e){e.modified=!0;if(e.spanCollection.length>0)for(var t=0,n=e.spanCollection.length;t<n;t++)e.spanCollection[t].modified=!0},setTableMap:function(){var e,o,i,a,r,s,l,d,c=[],u=this.getTableRows();for(e=0;e<u.length;e++){o=u[e];i=this.getRowCells(o);s=0;void 0===c[e]&&(c[e]=[]);for(a=0;a<i.length;a++){r=i[a];while(void 0!==c[e][s])s++;l=t.getAttribute(r,"colspan");d=t.getAttribute(r,"rowspan");if(l||d){this.addSpannedCellToMap(r,c,e,s,l,d);s+=l?parseInt(l,10):1}else{c[e][s]=new n(r);s++}}}this.map=c;return c},getRowCells:function(t){var n=this.table.querySelectorAll("table"),o=n?i(n,"th, td"):[],a=t.querySelectorAll("th, td");return o.length>0?e.lang.array(a).without(o):a},getTableRows:function(){var t=this.table.querySelectorAll("table"),n=t?i(t,"tr"):[],o=this.table.querySelectorAll("tr");return n.length>0?e.lang.array(o).without(n):o},getMapIndex:function(e){for(var t=this.map.length,n=this.map&&this.map[0]?this.map[0].length:0,o=0;o<t;o++)for(var i=0;i<n;i++)if(this.map[o][i].el===e)return{row:o,col:i};return!1},getElementAtIndex:function(e){this.setTableMap();if(this.map[e.row]&&this.map[e.row][e.col]&&this.map[e.row][e.col].el)return this.map[e.row][e.col].el;return null},getMapElsTo:function(e){var t=[];this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(e);if(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var n=this.idx_start;this.idx_start=this.idx_end;this.idx_end=n}if(this.idx_start.col>this.idx_end.col){var o=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=o}if(null!=this.idx_start&&null!=this.idx_end)for(var i=this.idx_start.row,a=this.idx_end.row;i<=a;i++)for(var r=this.idx_start.col,s=this.idx_end.col;r<=s;r++)t.push(this.map[i][r].el);return t},orderSelectionEnds:function(e){this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(e);if(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var t=this.idx_start;this.idx_start=this.idx_end;this.idx_end=t}if(this.idx_start.col>this.idx_end.col){var n=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=n}return{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(e,t,n){for(var o,i=this.table.ownerDocument,a=i.createDocumentFragment(),r=0;r<t;r++){o=i.createElement(e);if(n)for(var s in n)n.hasOwnProperty(s)&&o.setAttribute(s,n[s]);o.appendChild(document.createTextNode(" "));a.appendChild(o)}return a},correctColIndexForUnreals:function(e,t){for(var n=this.map[t],o=-1,i=0;i<e;i++)n[i].isReal&&o++;return o},getLastNewCellOnRow:function(e,t){for(var n,o,i=this.getRowCells(e),a=0,r=i.length;a<r;a++){n=i[a]
;if(!1===(o=this.getMapIndex(n))||void 0!==t&&o.row!=t)return n}return null},removeEmptyTable:function(){var e=this.table.querySelectorAll("td, th");if(e&&0!=e.length)return!1;a(this.table);return!0},splitRowToCells:function(e){if(e.isColspan){var n=parseInt(t.getAttribute(e.el,"colspan")||1,10),o=e.el.tagName.toLowerCase();if(n>1){var i=this.createCells(o,n-1);r(e.el,i)}e.el.removeAttribute("colspan")}},getRealRowEl:function(e,n){var o=null,i=null;n=n||this.idx;for(var a=0,r=this.map[n.row].length;a<r;a++)if((i=this.map[n.row][a]).isReal&&(o=t.getParentElement(i.el,{query:"tr"})))return o;null===o&&e&&(o=t.getParentElement(this.map[n.row][n.col].el,{query:"tr"})||null);return o},injectRowAt:function(e,n,o,i,a){var s=this.getRealRowEl(!1,{row:e,col:n}),l=this.createCells(i,o);if(s){var d=this.correctColIndexForUnreals(n,e);d>=0?r(this.getRowCells(s)[d],l):s.insertBefore(l,s.firstChild)}else{var c=this.table.ownerDocument.createElement("tr");c.appendChild(l);r(t.getParentElement(a.el,{query:"tr"}),c)}},canMerge:function(e){this.to=e;this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(this.to);if(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var t=this.idx_start;this.idx_start=this.idx_end;this.idx_end=t}if(this.idx_start.col>this.idx_end.col){var n=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=n}for(var o=this.idx_start.row,i=this.idx_end.row;o<=i;o++)for(var a=this.idx_start.col,r=this.idx_end.col;a<=r;a++)if(this.map[o][a].isColspan||this.map[o][a].isRowspan)return!1;return!0},decreaseCellSpan:function(e,n){var o=parseInt(t.getAttribute(e.el,n),10)-1;if(o>=1)e.el.setAttribute(n,o);else{e.el.removeAttribute(n);"colspan"==n&&(e.isColspan=!1);"rowspan"==n&&(e.isRowspan=!1);e.firstCol=!0;e.lastCol=!0;e.firstRow=!0;e.lastRow=!0;e.isReal=!0}},removeSurplusLines:function(){var e,n,o,i,r,s,l;this.setTableMap();if(this.map){o=0;i=this.map.length;for(;o<i;o++){e=this.map[o];l=!0;r=0;s=e.length;for(;r<s;r++){n=e[r];if(!(t.getAttribute(n.el,"rowspan")&&parseInt(t.getAttribute(n.el,"rowspan"),10)>1&&!0!==n.firstRow)){l=!1;break}}if(l){r=0;for(;r<s;r++)this.decreaseCellSpan(e[r],"rowspan")}}var d=this.getTableRows();o=0;i=d.length;for(;o<i;o++)0==(e=d[o]).childNodes.length&&/^\s*$/.test(e.textContent||e.innerText)&&a(e)}},fillMissingCells:function(){var e=0,t=0,o=null;this.setTableMap();if(this.map){e=this.map.length;for(var i=0;i<e;i++)this.map[i].length>t&&(t=this.map[i].length);for(var a=0;a<e;a++)for(var s=0;s<t;s++)if(this.map[a]&&!this.map[a][s]&&s>0){this.map[a][s]=new n(this.createCells("td",1));(o=this.map[a][s-1])&&o.el&&o.el.parent&&r(this.map[a][s-1].el,this.map[a][s].el)}}},rectify:function(){if(this.removeEmptyTable())return!1;this.removeSurplusLines();this.fillMissingCells();return!0},unmerge:function(){if(this.rectify()){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx){var e=this.map[this.idx.row][this.idx.col],n=t.getAttribute(e.el,"colspan")?parseInt(t.getAttribute(e.el,"colspan"),10):1,o=e.el.tagName.toLowerCase();if(e.isRowspan){var i=parseInt(t.getAttribute(e.el,"rowspan"),10);if(i>1)for(var a=1,r=i-1;a<=r;a++)this.injectRowAt(this.idx.row+a,this.idx.col,n,o,e);e.el.removeAttribute("rowspan")}this.splitRowToCells(e)}}},merge:function(e){if(this.rectify())if(this.canMerge(e)){for(var t=this.idx_end.row-this.idx_start.row+1,n=this.idx_end.col-this.idx_start.col+1,o=this.idx_start.row,i=this.idx_end.row;o<=i;o++)for(var r=this.idx_start.col,s=this.idx_end.col;r<=s;r++)if(o==this.idx_start.row&&r==this.idx_start.col){t>1&&this.map[o][r].el.setAttribute("rowspan",t);n>1&&this.map[o][r].el.setAttribute("colspan",n)}else{/^\s*<br\/?>\s*$/.test(this.map[o][r].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[o][r].el.innerHTML);a(this.map[o][r].el)}this.rectify()}else window.console&&console.log("Do not know how to merge allready merged cells.")},collapseCellToNextRow:function(e){var n=this.getMapIndex(e.el),o=n.row+1,i={row:o,col:n.col};if(o<this.map.length){var a=this.getRealRowEl(!1,i);if(null!==a){var s=this.correctColIndexForUnreals(i.col,i.row);if(s>=0)r(this.getRowCells(a)[s],e.el);else{var l=this.getLastNewCellOnRow(a,o);null!==l?r(l,e.el):a.insertBefore(e.el,a.firstChild)}parseInt(t.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(t.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan")}}},removeRowCell:function(e){e.isReal?e.isRowspan?this.collapseCellToNextRow(e):a(e.el):parseInt(t.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(t.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var e=[];this.setTableMap();this.idx=this.getMapIndex(this.cell);if(!1!==this.idx)for(var t=this.map[this.idx.row],n=0,o=t.length;n<o;n++)t[n].isReal&&e.push(t[n].el);return e},getColumnElementsByCell:function(){var e=[];this.setTableMap();this.idx=this.getMapIndex(this.cell);if(!1!==this.idx)for(var t=0,n=this.map.length;t<n;t++)this.map[t][this.idx.col]&&this.map[t][this.idx.col].isReal&&e.push(this.map[t][this.idx.col].el);return e},removeRow:function(){var e=t.getParentElement(this.cell,{query:"tr"});if(e){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(!1!==this.idx)for(var n=this.map[this.idx.row],o=0,i=n.length;o<i;o++)if(!n[o].modified){this.setCellAsModified(n[o]);this.removeRowCell(n[o])}a(e)}},removeColCell:function(e){e.isColspan?parseInt(t.getAttribute(e.el,"colspan"),10)>2?e.el.setAttribute("colspan",parseInt(t.getAttribute(e.el,"colspan"),10)-1):e.el.removeAttribute("colspan"):e.isReal&&a(e.el)},removeColumn:function(){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(!1!==this.idx)for(var e=0,t=this.map.length;e<t;e++)if(!this.map[e][this.idx.col].modified){this.setCellAsModified(this.map[e][this.idx.col]);this.removeColCell(this.map[e][this.idx.col])}},remove:function(e){if(this.rectify()){switch(e){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(e){var n=this.table.ownerDocument;this.setTableMap();this.idx=this.getMapIndex(this.cell);"below"==e&&t.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(t.getAttribute(this.cell,"rowspan"),10)-1);if(!1!==this.idx){for(var o=this.map[this.idx.row],i=n.createElement("tr"),a=0,s=o.length;a<s;a++)if(!o[a].modified){this.setCellAsModified(o[a]);this.addRowCell(o[a],i,e)}switch(e){case"below":r(this.getRealRowEl(!0),i);break;case"above":var l=t.getParentElement(this.map[this.idx.row][this.idx.col].el,{query:"tr"});l&&l.parentNode.insertBefore(i,l)}}},addRowCell:function(e,n,o){var i=e.isColspan?{colspan:t.getAttribute(e.el,"colspan")}:null;e.isReal?"above"!=o&&e.isRowspan?e.el.setAttribute("rowspan",parseInt(t.getAttribute(e.el,"rowspan"),10)+1):n.appendChild(this.createCells("td",1,i)):"above"!=o&&e.isRowspan&&e.lastRow?n.appendChild(this.createCells("td",1,i)):c.isRowspan&&e.el.attr("rowspan",parseInt(t.getAttribute(e.el,"rowspan"),10)+1)},add:function(e){if(this.rectify()){"below"!=e&&"above"!=e||this.addRow(e);"before"!=e&&"after"!=e||this.addColumn(e)}},addColCell:function(e,n,o){var i,a=e.el.tagName.toLowerCase();switch(o){case"before":i=!e.isColspan||e.firstCol;break;case"after":i=!e.isColspan||e.lastCol||e.isColspan&&c.el==this.cell}if(i){switch(o){case"before":e.el.parentNode.insertBefore(this.createCells(a,1),e.el);break;case"after":r(e.el,this.createCells(a,1))}e.isRowspan&&this.handleCellAddWithRowspan(e,n+1,o)}else e.el.setAttribute("colspan",parseInt(t.getAttribute(e.el,"colspan"),10)+1)},addColumn:function(e){var n,o;this.setTableMap();this.idx=this.getMapIndex(this.cell);"after"==e&&t.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(t.getAttribute(this.cell,"colspan"),10)-1);if(!1!==this.idx)for(var i=0,a=this.map.length;i<a;i++)if((n=this.map[i])[this.idx.col]&&!(o=n[this.idx.col]).modified){this.setCellAsModified(o);this.addColCell(o,i,e)}},handleCellAddWithRowspan:function(e,n,o){
for(var i,a,l,d=parseInt(t.getAttribute(this.cell,"rowspan"),10)-1,c=t.getParentElement(e.el,{query:"tr"}),u=e.el.tagName.toLowerCase(),f=this.table.ownerDocument,h=0;h<d;h++){i=this.correctColIndexForUnreals(this.idx.col,n+h);if(c=s(c,"tr"))if(i>0)switch(o){case"before":a=this.getRowCells(c);i>0&&this.map[n+h][this.idx.col].el!=a[i]&&i==a.length-1?r(a[i],this.createCells(u,1)):a[i].parentNode.insertBefore(this.createCells(u,1),a[i]);break;case"after":r(this.getRowCells(c)[i],this.createCells(u,1))}else c.insertBefore(this.createCells(u,1),c.firstChild);else{(l=f.createElement("tr")).appendChild(this.createCells(u,1));this.table.appendChild(l)}}}};t.table={getCellsBetween:function(e,t){return new o(e).getMapElsTo(t)},addCells:function(e,t){new o(e).add(t)},removeCells:function(e,t){new o(e).remove(t)},mergeCellsBetween:function(e,t){new o(e).merge(t)},unmergeCell:function(e){new o(e).unmerge()},orderSelectionEnds:function(e,t){return new o(e).orderSelectionEnds(t)},indexOf:function(e){var t=new o(e);t.setTableMap();return t.getMapIndex(e)},findCell:function(e,t){return new o(null,e).getElementAtIndex(t)},findRowByCell:function(e){return new o(e).getRowElementsByCell()},findColumnByCell:function(e){return new o(e).getColumnElementsByCell()},canMerge:function(e,t){return new o(e).canMerge(t)}}})(s);s.dom.query=function(e,t){var n,o=[];e.nodeType&&(e=[e]);for(var i=0,a=e.length;i<a;i++)if(n=e[i].querySelectorAll(t))for(var r=n.length;r--;o.unshift(n[r]));return o};s.dom.compareDocumentPosition=document.documentElement.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)}:function(e,t){var n,o;n=9===e.nodeType?e:e.ownerDocument;o=9===t.nodeType?t:t.ownerDocument;if(e===t)return 0;if(e===t.ownerDocument)return 20;if(e.ownerDocument===t)return 10;if(n!==o)return 1;if(2===e.nodeType&&e.childNodes&&-1!==s.lang.array(e.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==s.lang.array(t.childNodes).indexOf(e))return 10;var i=e,a=[],r=null;while(i){if(i==t)return 10;a.push(i);i=i.parentNode}i=t;r=null;while(i){if(i==e)return 20;var l=s.lang.array(a).indexOf(i);if(-1!==l){var d=a[l];return s.lang.array(d.childNodes).indexOf(a[l-1])>s.lang.array(d.childNodes).indexOf(r)?2:4}r=i;i=i.parentNode}return 1};s.dom.unwrap=function(e){var t=[];if(e.parentNode){while(e.lastChild){t.unshift(e.lastChild);s.dom.insert(e.lastChild).after(e)}e.parentNode.removeChild(e)}return t};s.dom.getPastedHtml=function(e){var t;s.browser.supportsModernPaste()&&e.clipboardData&&(s.lang.array(e.clipboardData.types).contains("text/html")?t=e.clipboardData.getData("text/html"):s.lang.array(e.clipboardData.types).contains("text/plain")&&(t=s.lang.string(e.clipboardData.getData("text/plain")).escapeHTML(!0,!0)));return t};s.dom.getPastedHtmlWithDiv=function(e,t){var n=e.selection.getBookmark(),o=e.element.ownerDocument,i=o.createElement("DIV"),a=e.getScrollPos();o.body.appendChild(i);i.style.width="1px";i.style.height="1px";i.style.overflow="hidden";i.style.position="absolute";i.style.top=a.y+"px";i.style.left=a.x+"px";i.setAttribute("contenteditable","true");i.focus();setTimeout(function(){var o;e.selection.setBookmark(n);(o=i.innerHTML)&&/^<br\/?>$/i.test(o.trim())&&(o=!1);t(o);i.parentNode.removeChild(i)},0)};s.dom.removeInvisibleSpaces=function(e){for(var t=s.dom.getTextNodes(e),n=t.length;n--;)t[n].nodeValue=t[n].nodeValue.replace(s.INVISIBLE_SPACE_REG_EXP,"")};s.quirks.cleanPastedHTML=function(e,t){var n,o={color:s.dom.getStyle("color").from(t.referenceNode),fontSize:s.dom.getStyle("font-size").from(t.referenceNode)},i=function(e,t){var n,o,i,a,r=s.lang.object(e).clone(!0);for(n in r.tags)if(r.tags.hasOwnProperty(n)&&r.tags[n].keep_styles)for(o in r.tags[n].keep_styles)r.tags[n].keep_styles.hasOwnProperty(o)&&t[o]&&(r.tags[n].keep_styles[o]=(i=t[o],a=void 0,a=s.lang.string(i).trim().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),new RegExp("^((?!^"+a+"$).)*$","i")));return r}(function(e,t){var n;if(!e)return null;for(var o=0,i=e.length;o<i;o++){e[o].condition||(n=e[o].set);if(e[o].condition&&e[o].condition.test(t))return e[o].set}return n}(t.rules,e)||{},o);return n=s.dom.parse(e,{rules:i,cleanUp:!0,context:t.referenceNode.ownerDocument,uneditableClass:t.uneditableClass,clearInternals:!0,unjoinNbsps:!0})};s.quirks.ensureProperClearing=(C=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();"<p>&nbsp;</p>"!=t&&"<p>&nbsp;</p><p>&nbsp;</p>"!=t||(e.innerHTML="")},0)},function(e){s.dom.observe(e.element,["cut","keydown"],C)});(function(e){e.quirks.getCorrectInnerHTML=function(t){var n=t.innerHTML;if(-1===n.indexOf("%7E"))return n;var o,i,a,r,s=t.querySelectorAll("[href*='~'], [src*='~']");for(r=0,a=s.length;r<a;r++){o=s[r].href||s[r].src;i=e.lang.string(o).replace("~").by("%7E");n=e.lang.string(n).replace(i).by(o)}return n}})(s);(function(e){e.quirks.redraw=function(t){e.dom.addClass(t,"wysihtml5-quirks-redraw");e.dom.removeClass(t,"wysihtml5-quirks-redraw");try{var n=t.ownerDocument;n.execCommand("italic",!1,null);n.execCommand("italic",!1,null)}catch(e){}}})(s);s.quirks.tableCellsSelection=function(e,t){var n=s.dom,o={table:null,start:null,end:null,cells:null,select:function(i,a){o.start=i;o.end=a;o.table=n.getParentElement(o.start,{query:"table"},!1,e);selectedCells=n.table.getCellsBetween(o.start,o.end);l(selectedCells);f();t.fire("tableselect").fire("tableselect:composer")}},i="wysiwyg-tmp-selected-cell";var a=function(a){var l=s.dom.getParentElement(a.target,{query:"td, th"},!1,e);l&&function(a){o.start=a;o.end=a;o.cells=[a];o.table=n.getParentElement(o.start,{query:"table"},!1,e);if(o.table){r();n.addClass(a,i);e.addEventListener("mousemove",d);e.addEventListener("mouseup",c);t.fire("tableselectstart").fire("tableselectstart:composer")}}(l)};function r(){if(e){var t=e.querySelectorAll("."+i);if(t.length>0)for(var o=0;o<t.length;o++)n.removeClass(t[o],i)}}function l(e){for(var t=0;t<e.length;t++)n.addClass(e[t],i)}function d(i){var a,s=null,d=n.getParentElement(i.target,{query:"td, th"},!1,e);if(d&&o.table&&o.start&&(s=n.getParentElement(d,{query:"table"},!1,e))&&s===o.table){r();a=o.end;o.end=d;o.cells=n.table.getCellsBetween(o.start,d);o.cells.length>1&&t.composer.selection.deselect();l(o.cells);o.end!==a&&t.fire("tableselectchange").fire("tableselectchange:composer")}}function c(n){e.removeEventListener("mousemove",d);e.removeEventListener("mouseup",c);t.fire("tableselect").fire("tableselect:composer");setTimeout(function(){f()},0)}var u=function(i){e.ownerDocument.removeEventListener("click",u);if(n.getParentElement(i.target,{query:"table"},!1,e)!=o.table){r();o.table=null;o.start=null;o.end=null;t.fire("tableunselect").fire("tableunselect:composer")}};function f(){e.ownerDocument.addEventListener("click",u)}return function(){e.addEventListener("mousedown",a);return o}()};(function(e){var t={rgba:{regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,name:"rgba"},rgb:{regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,name:"rgb"},hex6:{regex:/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,name:"hex",radix:16},hex3:{regex:/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,name:"hex",radix:16}},n=function(e){return new RegExp("(^|\\s|;)"+e+"\\s*:\\s*[^;$]+","gi")};function o(e){var n,o;for(n in t){if(!t.hasOwnProperty(n))continue;if((o=t[n]).regex.test(e))return o}}e.quirks.styleParser={getColorParseMethod:o,getColorFormat:function(e){var t=o(e);return t?t.name:void 0},parseColor:function(i,a){var r,s,l,d,c,u=i;if(a){r=n(a);if(!(s=i.match(r)))return!1;s=s.pop().split(":")[1];u=e.lang.string(s).trim()}if(!(l=o(u)))return!1;if(!(d=u.match(l.regex)))return!1;c=l.radix||10;if(l===t.hex3){d.shift();d.push(1);return e.lang.array(d).map(function(e,t){return t<3?parseInt(e,c)*c+parseInt(e,c):parseFloat(e)})}d.shift();d[3]||d.push(1);return e.lang.array(d).map(function(e,t){return t<3?parseInt(e,c):parseFloat(e)})},unparseColor:function(e,t){if("hex"===t)return(e[0].toString(16)+e[1].toString(16)+e[2].toString(16)).toUpperCase();if("hash"===t)return"#"+(e[0].toString(16)+e[1].toString(16)+e[2].toString(16)).toUpperCase();if("rgb"===t)return"rgb("+e[0]+","+e[1]+","+e[2]+")"
;if("rgba"===t)return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")";if("csv"===t)return e[0]+","+e[1]+","+e[2]+","+e[3];return e[3]&&1!==e[3]?"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")":"rgb("+e[0]+","+e[1]+","+e[2]+")"},parseFontSize:function(t){var o=t.match(n("font-size"));if(o)return e.lang.string(o[o.length-1].split(":")[1]).trim();return!1}}})(s);(function(e){var t=e.dom;function n(e,t){var n=0;while(t!==e){n++;if(!(t=t.parentNode))throw new Error("not a descendant of ancestor!")}return n}function o(e,t){return 3===e.nodeType?e:e.childNodes[t]||e}function i(t){var n=document.createElement("span"),o=function(e){t.removeEventListener("mouseup",o);t.removeEventListener("keydown",o);t.removeEventListener("touchstart",o);t.removeEventListener("focus",o);t.removeEventListener("blur",o);t.removeEventListener("paste",i);t.removeEventListener("drop",i);t.removeEventListener("beforepaste",i);n&&n.parentNode&&n.parentNode.removeChild(n)},i=function(e){n&&n.parentNode&&setTimeout(o,0)};n.appendChild(t.ownerDocument.createTextNode(e.INVISIBLE_SPACE));n.className="_wysihtml5-temp-caret-fix";n.style.display="block";n.style.minWidth="1px";n.style.height="0px";t.addEventListener("mouseup",o);t.addEventListener("keydown",o);t.addEventListener("touchstart",o);t.addEventListener("focus",o);t.addEventListener("blur",o);t.addEventListener("paste",i);t.addEventListener("drop",i);t.addEventListener("beforepaste",i);return n}e.Selection=_.extend({constructor:function(e,t,n){rangy.init();this.editor=e;this.composer=e.composer;this.doc=this.composer.doc;this.win=this.composer.win;this.contain=t;this.unselectableClass=n||!1},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){if(!e)return;this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);t.setStartBefore(e);t.setEndBefore(e);return this.setSelection(t)},createTemporaryCaretSpaceAfter:function(t){var n=this.doc.createElement("span"),o=this.doc.createTextNode(e.INVISIBLE_SPACE),i=function(t){var o;this.contain.removeEventListener("mouseup",i);this.contain.removeEventListener("keydown",r);this.contain.removeEventListener("touchstart",i);this.contain.removeEventListener("focus",i);this.contain.removeEventListener("blur",i);this.contain.removeEventListener("paste",a);this.contain.removeEventListener("drop",a);this.contain.removeEventListener("beforepaste",a);if(n&&n.parentNode){n.innerHTML=n.innerHTML.replace(e.INVISIBLE_SPACE_REG_EXP,"");if(/[^\s]+/.test(n.innerHTML)){o=n.lastChild;e.dom.unwrap(n);this.setAfter(o)}else n.parentNode.removeChild(n)}}.bind(this),a=function(e){n&&n.parentNode&&setTimeout(i,0)},r=function(e){8===e.which||91===e.which||17===e.which||86===e.which&&(e.ctrlKey||e.metaKey)||i()};n.className="_wysihtml5-temp-caret-fix";n.style.position="absolute";n.style.display="block";n.style.minWidth="1px";n.style.zIndex="99999";n.appendChild(o);t.parentNode.insertBefore(n,t.nextSibling);this.setBefore(o);this.contain.addEventListener("mouseup",i);this.contain.addEventListener("keydown",r);this.contain.addEventListener("touchstart",i);this.contain.addEventListener("focus",i);this.contain.addEventListener("blur",i);this.contain.addEventListener("paste",a);this.contain.addEventListener("drop",a);this.contain.addEventListener("beforepaste",a);return n},setAfter:function(t,n,o){var i,a=this.win,r=rangy.createRange(this.doc),s=function(){var o=t.parentNode,r=o?o.childNodes[o.childNodes.length-1]:null;if(!i||r===t&&1===t.nodeType&&"block"===a.getComputedStyle(t).display)if(n){var s=this.doc.createTextNode(e.INVISIBLE_SPACE);t.parentNode.insertBefore(s,t.nextSibling);this.selectNode(s);setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s)},0)}else this.createTemporaryCaretSpaceAfter(t)}.bind(this);r.setStartAfter(t);r.setEndAfter(t);if(document.activeElement&&document.activeElement===this.composer.element){i=this.setSelection(r);s();o&&o(i)}else{var l=this.composer.getScrollPos();this.composer.element.focus();this.composer.setScrollPos(l);setTimeout(function(){i=this.setSelection(r);s();o&&o(i)}.bind(this),0)}},selectNode:function(n,o){var i=rangy.createRange(this.doc),a=n.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in n?n.canHaveHTML:"IMG"!==n.nodeName,s=a?n.innerHTML:n.data,l=""===s||s===e.INVISIBLE_SPACE,d=t.getStyle("display").from(n),c="block"===d||"list-item"===d;if(l&&a&&r&&!o)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}r?i.selectNodeContents(n):i.selectNode(n);if(r&&l&&a)i.collapse(c);else if(r&&l){i.setStartAfter(n);i.setEndAfter(n)}this.setSelection(i)},getSelectedNode:function(e){var t,n;if(e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange())&&n.length)return n.item(0);return(t=this.getSelection(this.doc)).focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc))?n.commonAncestorContainer:this.doc.body},fixSelBorders:function(){var e=this.getRange();(function(e){if(e.canSurroundContents())return;var t=e.commonAncestorContainer,o=n(t,e.startContainer),i=n(t,e.endContainer);while(!e.canSurroundContents())if(o>i){e.setStartBefore(e.startContainer);o=n(t,e.startContainer)}else{e.setEndAfter(e.endContainer);i=n(t,e.endContainer)}})(e);this.setSelection(e)},getSelectedOwnNodes:function(e){for(var t=this.getOwnRanges(),n=[],o=0,i=t.length;o<i;o++)n.push(t[o].commonAncestorContainer||this.doc.body);return n},findNodesInSelection:function(t){for(var n,o=this.getOwnRanges(),i=[],a=0,r=o.length;a<r;a++){n=o[a].getNodes([1],function(n){return e.lang.array(t).contains(n.nodeName)});i=i.concat(n)}return i},filterElements:function(e){for(var t,n=this.getOwnRanges(),o=[],i=0,a=n.length;i<a;i++){t=n[i].getNodes([1],function(t){return e(t,n[i])});o=o.concat(t)}return o},containsUneditable:function(){for(var e=this.getOwnUneditables(),t=this.getSelection(),n=0,o=e.length;n<o;n++)if(t.containsNode(e[n]))return!0;return!1},deleteContents:function(){var e=this.getRange();this.deleteRangeContents(e);this.setSelection(e)},deleteRangeContents:function(t){var n,o,i,a;if(this.unselectableClass){(n=e.dom.getParentElement(t.startContainer,{query:"."+this.unselectableClass},!1,this.contain))&&t.setStartBefore(n);(o=e.dom.getParentElement(t.endContainer,{query:"."+this.unselectableClass},!1,this.contain))&&t.setEndAfter(o);for(var r=(i=t.getNodes([1],function(t){return e.dom.hasClass(t,this.unselectableClass)}.bind(this))).length;r--;)try{a=new CustomEvent("wysihtml5:uneditable:delete");i[r].dispatchEvent(a)}catch(e){}}t.deleteContents()},getCaretNode:function(){var e=this.getSelection();return e&&e.anchorNode?o(e.anchorNode,e.anchorOffset):null},getPreviousNode:function(t,n){var i;if(!t){var a=this.getSelection();t=a&&a.anchorNode?o(a.anchorNode,a.anchorOffset):null}if(t===this.contain)return!1;var r,s=t.previousSibling;if(s===this.contain)return!1;if(s&&3!==s.nodeType&&1!==s.nodeType)s=this.getPreviousNode(s,n);else if(s&&3===s.nodeType&&/^\s*$/.test(s.textContent))s=this.getPreviousNode(s,n);else if(n&&s&&1===s.nodeType){i=e.dom.getStyle("display").from(s);e.lang.array(["BR","HR","IMG"]).contains(s.nodeName)||e.lang.array(["block","inline-block","flex","list-item","table"]).contains(i)||!/^[\s]*$/.test(s.innerHTML)||(s=this.getPreviousNode(s,n))}else s||t===this.contain||(r=t.parentNode)!==this.contain&&(s=this.getPreviousNode(r,n));return s!==this.contain&&s},getNodesNearCaret:function(){if(!this.isCollapsed())throw"Selection must be caret when using selection.getNodesNearCaret()";var e,t,n,o,i=this.getOwnRanges();if(i&&i.length>0){if(1===i[0].startContainer.nodeType)if((e=i[0].startContainer.childNodes[i[0].startOffset-1])||0!==i[0].startOffset){if(e){t=e.previousSibling;n=e.nextSibling}}else n=i[0].startContainer.childNodes[0];else{if(0===i[0].startOffset&&i[0].startContainer.previousSibling)3===(e=i[0].startContainer.previousSibling).nodeType&&(o=e.data.length);else{e=i[0].startContainer;o=i[0].startOffset}t=e.previousSibling;n=e.nextSibling}return{caretNode:e,prevNode:t,nextNode:n,textOffset:o}}return null},getSelectionParentsByTag:function(t){for(var n,o=this.getSelectedOwnNodes(),i=[],a=0,r=o.length;a<r;a++)(n=o[a].nodeName&&"LI"===o[a].nodeName?o[a]:e.dom.getParentElement(o[a],{query:"li"
},!1,this.contain))&&i.push(n);return i.length?i:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var e=this.getRange(),t=e.startContainer,n=e.startOffset,o=rangy.createRange(this.doc);o.selectNodeContents(t);o.setStart(t,n);return o}},caretIsLastInSelection:function(){rangy.createRange(this.doc),this.getSelection();var e=this.getRangeToNodeEnd().cloneContents().textContent;return/^\s*$/.test(e)},caretIsFirstInSelection:function(t){var n=rangy.createRange(this.doc),i=this.getSelection(),a=this.getRange(),r=o(a.startContainer,a.startOffset);if(r){if(r.nodeType===e.TEXT_NODE){if(!r.parentNode)return!1;if(!this.isCollapsed()||r.parentNode.firstChild!==r&&!e.dom.domNode(r.previousSibling).is.block())return!1;var s=this.win.getComputedStyle(r.parentNode).whiteSpace;return"pre"===s||"pre-wrap"===s?0===a.startOffset:/^\s*$/.test(r.data.substr(0,a.startOffset))}if(t&&e.dom.domNode(r).is.lineBreak())return!0;n.selectNodeContents(this.getRange().commonAncestorContainer);n.collapse(!0);return this.isCollapsed()&&(n.startContainer===i.anchorNode||n.endContainer===i.anchorNode)&&n.startOffset===i.anchorOffset}},caretIsInTheBeginnig:function(t){var n=this.getSelection(),o=n.anchorNode,i=n.anchorOffset;if(t&&o)return 0===i&&(o.nodeName&&o.nodeName===t.toUpperCase()||e.dom.getParentElement(o.parentNode,{query:t},1));if(o)return 0===i&&!this.getPreviousNode(o,!0)},getBeforeSelection:function(t){var n,o,i=this.getSelection(),a=i.isBackwards()?i.focusNode:i.anchorNode,r=i.isBackwards()?i.focusOffset:i.anchorOffset,s=this.createRange();a&&3===a.nodeType&&/^\s*$/.test(a.data.slice(0,r))&&(r=0);if(o=e.dom.getParentElement(a,{query:"._wysihtml5-temp-caret-fix"},1)){a=o.parentNode;r=Array.prototype.indexOf.call(a.childNodes,o)}if(a){if(r>0){if(3===a.nodeType){s.setStart(a,0);s.setEnd(a,r);return{type:"text",range:s,offset:r,node:a}}s.setStartBefore(a.childNodes[0]);n=a.childNodes[r-1];s.setEndAfter(n);return{type:"element",range:s,offset:r,node:n}}s.setStartAndEnd(a,0);if(t){var l=this.getPreviousNode(a,!0),d=null;l&&(d=1===l.nodeType&&e.dom.hasClass(l,this.unselectableClass)?l:e.dom.domNode(l).lastLeafNode());if(d)return{type:"leafnode",range:s,offset:r,node:d}}return{type:"none",range:s,offset:r,node:a}}return null},executeAndRestoreRangy:function(e,t){var n=rangy.saveSelection(this.win);if(n)try{e()}catch(e){setTimeout(function(){throw e},0)}else e();rangy.restoreSelection(n)},executeAndRestore:function(n,o){var i,a,r,s,l,d,c,u,f=this.doc.body,h=o&&f.scrollTop,p=o&&f.scrollLeft,m="_wysihtml5-temp-placeholder",g='<span class="'+m+'">'+e.INVISIBLE_SPACE+"</span>",v=this.getRange(!0);if(!v){n(f,f);return}if(!v.collapsed){d=(c=v.cloneRange()).createContextualFragment(g);c.collapse(!1);c.insertNode(d);c.detach()}l=v.createContextualFragment(g);v.insertNode(l);if(d){i=this.contain.querySelectorAll("."+m);v.setStartBefore(i[0]);v.setEndAfter(i[i.length-1])}this.setSelection(v);try{n(v.startContainer,v.endContainer)}catch(e){setTimeout(function(){throw e},0)}if((i=this.contain.querySelectorAll("."+m))&&i.length){u=rangy.createRange(this.doc);r=i[0].nextSibling;i.length>1&&(s=i[i.length-1].previousSibling);if(s&&r){u.setStartBefore(r);u.setEndAfter(s)}else{a=this.doc.createTextNode(e.INVISIBLE_SPACE);t.insert(a).after(i[0]);u.setStartBefore(a);u.setEndAfter(a)}this.setSelection(u);for(var C=i.length;C--;)i[C].parentNode.removeChild(i[C])}else this.contain.focus();if(o){f.scrollTop=h;f.scrollLeft=p}try{i.parentNode.removeChild(i)}catch(e){}},set:function(e,t){var n=rangy.createRange(this.doc);n.setStart(e,t||0);this.setSelection(n)},insertHTML:function(e){var t,n,o=this.getRange(),i=this.doc.createElement("DIV"),a=this.doc.createDocumentFragment();if(o){o.deleteContents();i.innerHTML=e;t=i.lastChild;while(i.firstChild)a.appendChild(i.firstChild);o.insertNode(a);n=this.contain.lastChild;while(n&&3===n.nodeType&&n.previousSibling&&/^\s*$/.test(n.data))n=n.previousSibling;if(t){n&&t===n&&1===t.nodeType&&this.contain.appendChild(this.doc.createElement("br"));this.setAfter(t)}}},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},canAppendChild:function(e){var t,n,o=this.getRange();(t=e||o.startContainer)&&(n=(t.tagName||t.nodeName).toLowerCase());return-1===["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(n)},splitElementAtCaret:function(t,n){var o,i,a,r,s,l=this.getSelection();if(l.rangeCount>0){(o=l.getRangeAt(0).cloneRange()).setEndAfter(t);for(var d=(s=(i=o.extractContents()).childNodes).length;d--;)e.dom.domNode(s[d]).is.visible()||i.removeChild(s[d]);t.parentNode.insertBefore(i,t.nextSibling);if(n){a=n.firstChild||n;r=n.lastChild||n;t.parentNode.insertBefore(n,t.nextSibling);if(a&&r){o.setStartBefore(a);o.setEndAfter(r);this.setSelection(o)}}else{o.setStartAfter(t);o.setEndAfter(t)}e.dom.domNode(t).is.visible()||(""===e.dom.getTextContent(t)?t.parentNode.removeChild(t):t.parentNode.replaceChild(this.doc.createTextNode(" "),t))}},surround:function(e){var t,n=this.getOwnRanges(),o=[];if(0==n.length)return o;for(var i=n.length;i--;){t=this.doc.createElement(e.nodeName);o.push(t);e.className&&(t.className=e.className);e.cssStyle&&t.setAttribute("style",e.cssStyle);try{n[i].surroundContents(t);this.selectNode(t)}catch(e){t.appendChild(n[i].extractContents());n[i].insertNode(t)}}return o},scrollIntoView:function(){var t,n=this.doc,o=n.documentElement.scrollHeight>n.documentElement.offsetHeight,i=n._wysihtml5ScrollIntoViewElement=n._wysihtml5ScrollIntoViewElement||function(){var t=n.createElement("span");t.innerHTML=e.INVISIBLE_SPACE;return t}();if(o){this.insertNode(i);t=function(e){var t=0;if(e.parentNode)do{t+=e.offsetTop||0;e=e.offsetParent}while(e);return t}(i);i.parentNode.removeChild(i);t>=n.body.scrollTop+n.documentElement.offsetHeight-5&&(n.body.scrollTop=t)}},selectLine:function(){var t=rangy.createRange();e.browser.supportsSelectionModify()?this._selectLine_W3C():t.nativeRange&&t.nativeRange.getBoundingClientRect&&this._selectLineUniversal()},includeRangyRangeHelpers:function(){var e,t=this.getSelection(),n=t.getRangeAt(0),o=function(e){return e&&1===e.nodeType&&e.classList.contains("rangySelectionBoundary")},i=1===t.anchorNode.nodeType?t.anchorNode.childNodes[t.anchorOffset]:t.anchorNode,a=1===t.focusNode.nodeType?t.focusNode.childNodes[t.focusOffset]:t.focusNode;a&&t.focusOffset===(1===(e=a).nodeType?e.childNodes&&e.childNodes.length||0:e.data&&e.data.length||0)&&a.nextSibling&&o(a.nextSibling)&&n.setEndAfter(a.nextSibling);i&&0===t.anchorOffset&&i.previousSibling&&o(i.previousSibling)&&n.setStartBefore(i.previousSibling);n.select()},_selectLine_W3C:function(){var e=this.win.getSelection(),t=[e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset];e.modify("move","left","lineboundary");e.modify("extend","right","lineboundary");e.anchorNode===t[0]&&e.anchorOffset===t[1]&&e.focusNode===t[2]&&e.focusOffset===t[3]?this._selectLineUniversal():this.includeRangyRangeHelpers()},toLineBoundary:function(t,n){n=void 0!==n&&n;if(e.browser.supportsSelectionModify()){var o=this.win.getSelection();o.modify("extend",t,"lineboundary");n&&("left"===t?o.collapseToStart():"right"===t&&o.collapseToEnd())}},getRangeRect:function(e){this.doc.createTextNode("i");var t,n=this.doc.createTextNode("i");if(e.collapsed){e.insertNode(n);e.selectNode(n);t=e.nativeRange.getBoundingClientRect();e.deleteContents()}else t=e.nativeRange.getBoundingClientRect();return t},_selectLineUniversal:function(){var t,n,o,i,a,r,s,l=this.getSelection().getRangeAt(0),d=0,c=this;n=l.cloneRange();o=l.cloneRange();l.collapsed&&(3===l.startContainer.nodeType&&l.startOffset<l.startContainer.data.length?l.moveEnd("character",1):1===l.startContainer.nodeType&&l.startContainer.childNodes[l.startOffset]&&3===l.startContainer.childNodes[l.startOffset].nodeType&&l.startContainer.childNodes[l.startOffset].data.length>0?l.moveEnd("character",1):l.startOffset>0&&(3===l.startContainer.nodeType||1===l.startContainer.nodeType&&!(s=function(e){var t=e;if(t)while(t&&(1===t.nodeType&&t.classList.contains("rangySelectionBoundary")||3===t.nodeType&&/^\s*$/.test(t.data)))t=t.previousSibling;return t
}(l.startContainer.childNodes[l.startOffset-1]),s&&1===s.nodeType&&("block"===c.win.getComputedStyle(s).display||e.lang.array(["BR","HR"]).contains(s.nodeName))))&&l.moveStart("character",-1));l.collapsed||l.insertNode(this.doc.createTextNode(e.INVISIBLE_SPACE));t=l.nativeRange.getBoundingClientRect();do{i=l.moveStart("character",-1);if(!(a=l.nativeRange.getBoundingClientRect())||Math.floor(a.top)!==Math.floor(t.top)){l.moveStart("character",1);r=!0}d++}while(0!==i&&!r&&d<2e3);d=0;r=!1;t=l.nativeRange.getBoundingClientRect();if(l.endContainer!==this.contain||this.contain.lastChild&&this.contain.childNodes[l.endOffset]!==this.contain.lastChild)do{i=l.moveEnd("character",1);if(!(a=l.nativeRange.getBoundingClientRect())||Math.floor(a.bottom)!==Math.floor(t.bottom)){l.moveEnd("character",-1);l.endContainer&&1===l.endContainer.nodeType&&l.endContainer.childNodes[l.endOffset]&&1===l.endContainer.childNodes[l.endOffset].nodeType&&"BR"===l.endContainer.childNodes[l.endOffset].nodeName&&l.endContainer.childNodes[l.endOffset].previousSibling&&(1===l.endContainer.childNodes[l.endOffset].previousSibling.nodeType?l.setEnd(l.endContainer.childNodes[l.endOffset].previousSibling,l.endContainer.childNodes[l.endOffset].previousSibling.childNodes.length):3===l.endContainer.childNodes[l.endOffset].previousSibling.nodeType&&l.setEnd(l.endContainer.childNodes[l.endOffset].previousSibling,l.endContainer.childNodes[l.endOffset].previousSibling.data.length));r=!0}d++}while(0!==i&&!r&&d<2e3);l.select();this.includeRangyRangeHelpers()},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes(Array.isArray(e)?e:[e],t):[]},getOwnNodes:function(e,t,n){for(var o=this.getOwnRanges(),i=[],a=0,r=o.length;a<r;a++)if(o[a]){n&&o[a].splitBoundaries();i=i.concat(o[a].getNodes(Array.isArray(e)?e:[e],t))}return i},fixRangeOverflow:function(e){if(this.contain&&this.contain.firstChild&&e){var t=e.compareNode(this.contain);if(2!==t){1===t&&e.setStartBefore(this.contain.firstChild);0===t&&e.setEndAfter(this.contain.lastChild);if(3===t){e.setStartBefore(this.contain.firstChild);e.setEndAfter(this.contain.lastChild)}}else if(this._detectInlineRangeProblems(e)){var n=e.endContainer.previousElementSibling;n&&e.setEnd(n,this._endOffsetForNode(n))}}},_endOffsetForNode:function(e){var t=document.createRange();t.selectNodeContents(e);return t.endOffset},_detectInlineRangeProblems:function(e){var n=t.compareDocumentPosition(e.startContainer,e.endContainer);return 0==e.endOffset&&4&n},getRange:function(e){var t=this.getSelection(),n=t&&t.rangeCount&&t.getRangeAt(0);!0!==e&&this.fixRangeOverflow(n);return n},getOwnUneditables:function(){var n=t.query(this.contain,"."+this.unselectableClass),o=t.query(n,"."+this.unselectableClass);return e.lang.array(n).without(o)},getOwnRanges:function(){var e,t=[],n=this.getRange();n&&t.push(n);if(this.unselectableClass&&this.contain&&n){var o,i=this.getOwnUneditables();if(i.length>0)for(var a=0,r=i.length;a<r;a++){e=[];for(var s=0,l=t.length;s<l;s++){if(t[s])switch(t[s].compareNode(i[a])){case 2:break;case 3:(o=t[s].cloneRange()).setEndBefore(i[a]);e.push(o);(o=t[s].cloneRange()).setStartAfter(i[a]);e.push(o);break;default:e.push(t[s])}t=e}}}return t},getSelection:function(){return rangy.getSelection(this.win)},setSelection:function(e){var t=rangy.getSelection(this.win);t.setSingleRange(e);return t&&t.anchorNode&&t.focusNode?t:null},selectAll:function(){var t,n=this.createRange(),o=this.composer,a=this,r=i(this.composer.element),s=i(this.composer.element),l=function(){n.setStart(o.element,0);n.setEnd(o.element,o.element.childNodes.length);t=a.setSelection(n)},d=function(){return!t||t.nativeSelection&&t.nativeSelection.type&&("Caret"===t.nativeSelection.type||"None"===t.nativeSelection.type)};e.dom.removeInvisibleSpaces(this.composer.element);l();if(this.composer.element.firstChild&&d()){this.composer.element.appendChild(r);l();if(d()){r.parentNode.removeChild(r);this.composer.element.insertBefore(s,this.composer.element.firstChild);l();if(d()){this.composer.element.appendChild(r);l()}}}},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},getPlainText:function(){return this.getSelection().toString()},isEndToEndInNode:function(t){var n=this.getRange(),o=n.commonAncestorContainer,i=n.startContainer,a=n.endContainer;o.nodeType===e.TEXT_NODE&&(o=o.parentNode);if(i.nodeType===e.TEXT_NODE&&!/^\s*$/.test(i.data.substr(n.startOffset)))return!1;if(a.nodeType===e.TEXT_NODE&&!/^\s*$/.test(a.data.substr(n.endOffset)))return!1;while(i&&i!==o){if(i.nodeType!==e.TEXT_NODE&&!e.dom.contains(o,i))return!1;if(e.dom.domNode(i).prev({ignoreBlankTexts:!0}))return!1;i=i.parentNode}while(a&&a!==o){if(a.nodeType!==e.TEXT_NODE&&!e.dom.contains(o,a))return!1;if(e.dom.domNode(a).next({ignoreBlankTexts:!0}))return!1;a=a.parentNode}return!!e.lang.array(t).contains(o.nodeName)&&o},isInThisEditable:function(){var t=this.getSelection(),n=t.focusNode,o=t.anchorNode;n&&1!==n.nodeType&&(n=n.parentNode);o&&1!==o.nodeType&&(o=o.parentNode);return o&&n&&(e.dom.contains(this.composer.element,n)||this.composer.element===n)&&(e.dom.contains(this.composer.element,o)||this.composer.element===o)},deselect:function(){var e=this.getSelection();e&&e.removeAllRanges()}})})(s);(function(e,t){var n="span",o=/\s+/g;function i(e,t,n){if(!e.className)return!1;var o=e.className.match(n)||[];return o[o.length-1]===t}function a(e,t){if(!e.getAttribute||!e.getAttribute("style"))return!1;e.getAttribute("style").match(t);return!!e.getAttribute("style").match(t)}function r(e,t,n){if(e.getAttribute("style")){l(e,n);e.getAttribute("style")&&!/^\s*$/.test(e.getAttribute("style"))?e.setAttribute("style",t+";"+e.getAttribute("style")):e.setAttribute("style",t)}else e.setAttribute("style",t)}function s(e,t){e.className&&(e.className=e.className.replace(t,""))}function l(e,t){var n,o=[];if(e.getAttribute("style")){for(var i=(n=e.getAttribute("style").split(";")).length;i--;)n[i].match(t)||/^\s*$/.test(n[i])||o.push(n[i]);o.length?e.setAttribute("style",o.join(";")):e.removeAttribute("style")}}function d(e,t){var n=[],o=t.split(";"),i=e.getAttribute("style");if(i){i=i.replace(/\s/gi,"").toLowerCase();n.push(new RegExp("(^|\\s|;)"+t.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var a=o.length;a-- >0;)/^\s*$/.test(o[a])||n.push(new RegExp("(^|\\s|;)"+o[a].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var r=0,s=n.length;r<s;r++)if(i.match(n[r]))return n[r]}return!1}function c(n,o,i,a){return i?d(n,i):a?e.dom.hasClass(n,a):t.dom.arrayContains(o,n.tagName.toLowerCase())}function u(e,t,n,o){for(var i=e.length;i--;)if(!c(e[i],t,n,o))return!1;return!!e.length}function f(e,n){if(t.dom.isCharacterDataNode(e))return 0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling;return n>0&&n<e.childNodes.length}function h(e,n,o,i){var a;if(t.dom.isCharacterDataNode(n))if(0==o){o=t.dom.getNodeIndex(n);n=n.parentNode}else if(o==n.length){o=t.dom.getNodeIndex(n)+1;n=n.parentNode}else a=t.dom.splitDataNode(n,o);if(!(a||i&&n===i)){(a=n.cloneNode(!1)).id&&a.removeAttribute("id");var r;while(r=n.childNodes[o])a.appendChild(r);t.dom.insertAfter(a,n)}return n==e?a:h(e,a.parentNode,t.dom.getNodeIndex(a),i)}function p(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE;this.firstTextNode=this.isElementMerge?t.lastChild:t;this.textNodes=[this.firstTextNode]}p.prototype={doMerge:function(){for(var e,t,n,o=[],i=0,a=this.textNodes.length;i<a;++i){t=(e=this.textNodes[i]).parentNode;o[i]=e.data;if(i){t.removeChild(e);t.hasChildNodes()||t.parentNode.removeChild(t)}}this.firstTextNode.data=n=o.join("");return n},getLength:function(){var e=this.textNodes.length,t=0;while(e--)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;t<n;++t)e[t]="'"+this.textNodes[t].data+"'"
;return"[Merge("+e.join(",")+")]"}};function m(e,t,o,i,a,r,s){this.tagNames=e||[n];this.cssClass=t||!1!==t&&"";this.similarClassRegExp=o;this.cssStyle=a||"";this.similarStyleRegExp=r;this.normalize=i;this.applyToAnyTagName=!1;this.container=s}m.prototype={getAncestorWithClass:function(n){var o;while(n){o=this.cssClass?i(n,this.cssClass,this.similarClassRegExp):""===this.cssStyle;if(n.nodeType==e.ELEMENT_NODE&&"false"!=n.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&o)return n;n=n.parentNode}return!1},getAncestorWithStyle:function(n){var o;while(n){o=!!this.cssStyle&&a(n,this.similarStyleRegExp);if(n.nodeType==e.ELEMENT_NODE&&"false"!=n.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&o)return n;n=n.parentNode}return!1},getMatchingAncestor:function(e){var t=this.getAncestorWithClass(e),n=!1;t?this.cssStyle&&(n="class"):(t=this.getAncestorWithStyle(e))&&(n="style");return{element:t,type:n}},postApply:function(e,t){for(var n,o,i,a=e[0],r=e[e.length-1],s=[],l=a,d=r,c=0,u=r.length,f=0,h=e.length;f<h;++f){o=e[f];i=null;o&&o.parentNode&&(i=this.getAdjacentMergeableTextNode(o.parentNode,!1));if(i){if(!n){n=new p(i);s.push(n)}n.textNodes.push(o);o===a&&(c=(l=n.firstTextNode).length);if(o===r){d=n.firstTextNode;u=n.getLength()}}else n=null}if(r&&r.parentNode){var m=this.getAdjacentMergeableTextNode(r.parentNode,!0);if(m){if(!n){n=new p(r);s.push(n)}n.textNodes.push(m)}}if(s.length){for(f=0,h=s.length;f<h;++f)s[f].doMerge();t.setStart(l,c);t.setEnd(d,u)}},getAdjacentMergeableTextNode:function(t,n){var o,i=t.nodeType==e.TEXT_NODE,a=i?t.parentNode:t,r=n?"nextSibling":"previousSibling";if(i){if((o=t[r])&&o.nodeType==e.TEXT_NODE)return o}else if((o=a[r])&&this.areElementsMergeable(t,o))return o[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&function(e,t){return e.className.replace(o," ")==t.className.replace(o," ")}(e,n)&&function(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,o,i,a=0,r=e.attributes.length;a<r;++a)if("class"!=(i=(n=e.attributes[a]).name)){o=t.attributes.getNamedItem(i);if(n.specified!=o.specified)return!1;if(n.specified&&n.nodeValue!==o.nodeValue)return!1}return!0}(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);this.cssClass&&(t.className=this.cssClass);this.cssStyle&&t.setAttribute("style",this.cssStyle);return t},applyToTextNode:function(e){var n=e.parentNode;if(1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())){this.cssClass&&function(e,t,n){if(e.className){s(e,n);e.className+=" "+t}else e.className=t}(n,this.cssClass,this.similarClassRegExp);this.cssStyle&&r(n,this.cssStyle,this.similarStyleRegExp)}else{var o=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(o,e);o.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&""===e.lang.string(n.className).trim()&&(!n.getAttribute("style")||""===e.lang.string(n.getAttribute("style")).trim())},undoToTextNode:function(e,t,n,o){var i=!n,a=n||o,c=!1;if(!t.containsNode(a)){var u=t.cloneRange();u.selectNode(a);if(u.isPointInRange(t.endContainer,t.endOffset)&&f(t.endContainer,t.endOffset)){h(a,t.endContainer,t.endOffset,this.container);t.setEndAfter(a)}u.isPointInRange(t.startContainer,t.startOffset)&&f(t.startContainer,t.startOffset)&&(a=h(a,t.startContainer,t.startOffset,this.container))}!i&&this.similarClassRegExp&&s(a,this.similarClassRegExp);i&&this.similarStyleRegExp&&(c="change"===function(e,t,n){var o=d(e,t);if(o){l(e,o);return"remove"}r(e,t,n);return"change"}(a,this.cssStyle,this.similarStyleRegExp));this.isRemovable(a)&&!c&&function(e){var t=e.parentNode;while(e.firstChild)t.insertBefore(e.firstChild,e);t.removeChild(e)}(a)},applyToRange:function(t){for(var n,o=t.length;o--;){if(!(n=t[o].getNodes([e.TEXT_NODE])).length)try{var i=this.createContainer(t[o].endContainer.ownerDocument);t[o].surroundContents(i);this.selectNode(t[o],i);return}catch(e){}t[o].splitBoundaries();if((n=t[o].getNodes([e.TEXT_NODE])).length){for(var a,r=0,s=n.length;r<s;++r){a=n[r];this.getMatchingAncestor(a).element||this.applyToTextNode(a)}t[o].setStart(n[0],0);a=n[n.length-1];t[o].setEnd(a,a.length);this.normalize&&this.postApply(n,t[o])}}},undoToRange:function(t){for(var n,o,i,a=t.length;a--;){if((n=t[a].getNodes([e.TEXT_NODE])).length){t[a].splitBoundaries();n=t[a].getNodes([e.TEXT_NODE])}else{var r=t[a].endContainer.ownerDocument.createTextNode(e.INVISIBLE_SPACE);t[a].insertNode(r);t[a].selectNode(r);n=[r]}for(var s=0,l=n.length;s<l;++s)if(t[a].isValid()){o=n[s];"style"===(i=this.getMatchingAncestor(o)).type?this.undoToTextNode(o,t[a],!1,i.element):i.element&&this.undoToTextNode(o,t[a],i.element)}if(1==l)this.selectNode(t[a],n[0]);else{t[a].setStart(n[0],0);o=n[n.length-1];t[a].setEnd(o,o.length);this.normalize&&this.postApply(n,t[a])}}},selectNode:function(t,n){var o=n.nodeType===e.ELEMENT_NODE,i=!("canHaveHTML"in n)||n.canHaveHTML,a=o?n.innerHTML:n.data,r=""===a||a===e.INVISIBLE_SPACE;if(r&&o&&i)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}t.selectNodeContents(n);if(r&&o)t.collapse(!1);else if(r){t.setStartAfter(n);t.setEndAfter(n)}},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var o=n.intersection(t),i=o?o.toString():"";n.detach();return i},isAppliedToRange:function(t){for(var n,o,i=[],a="full",r=t.length;r--;){if(!(o=t[r].getNodes([e.TEXT_NODE])).length)return!!(n=this.getMatchingAncestor(t[r].startContainer).element)&&{elements:[n],coverage:a};for(var s,l=0,d=o.length;l<d;++l){s=this.getTextSelectedByRange(o[l],t[r]);if((n=this.getMatchingAncestor(o[l]).element)&&""!=s){i.push(n);1===e.dom.getTextNodes(n,!0).length?a="full":"full"===a&&(a="inline")}else n||(a="partial")}}return!!i.length&&{elements:i,coverage:a}},toggleRange:function(e){var t,n=this.isAppliedToRange(e);if(n)if("full"===n.coverage)this.undoToRange(e);else if("inline"===n.coverage){t=u(n.elements,this.tagNames,this.cssStyle,this.cssClass);this.undoToRange(e);t||this.applyToRange(e)}else{u(n.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(e);this.applyToRange(e)}else this.applyToRange(e)}};e.selection.HTMLApplier=m})(s,rangy);s.Commands=_.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},support:function(e){return s.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=s.commands[e],o=s.lang.array(arguments).get(),i=n&&n.exec,a=null;if(this.composer.hasPlaceholderSet()&&!s.lang.array(["styleWithCSS","enableObjectResizing","enableInlineTableEditing"]).contains(e)){this.composer.element.innerHTML="";this.composer.selection.selectNode(this.composer.element)}this.editor.fire("beforecommand:composer");if(i){o.unshift(this.composer);a=i.apply(n,o)}else try{a=this.doc.execCommand(e,!1,t)}catch(e){}this.editor.fire("aftercommand:composer");return a},remove:function(e,t){var n=s.commands[e],o=s.lang.array(arguments).get(),i=n&&n.remove;if(i){o.unshift(this.composer);return i.apply(n,o)}},state:function(e,t){var n=s.commands[e],o=s.lang.array(arguments).get(),i=n&&n.state;if(i){o.unshift(this.composer);return i.apply(n,o)}try{return this.doc.queryCommandState(e)}catch(e){return!1}},stateValue:function(e){var t=s.commands[e],n=s.lang.array(arguments).get(),o=t&&t.stateValue;if(o){n.unshift(this.composer);return o.apply(t,n)}return!1}});(function(e){var t={nodeName:"B",toggle:!0};e.commands.bold={exec:function(n,o){e.commands.formatInline.exec(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){var t={nodeName:"A",toggle:!1};e.commands.createLink={exec:function(n,o,i){var a=function(n){return e.lang.object({}).merge(t).merge({attribute:n}).get()}(i);if(n.selection.isCollapsed()&&!this.state(n,o)){var r=n.doc.createTextNode(a.attribute.href);n.selection.insertNode(r);n.selection.selectNode(r)}e.commands.formatInline.exec(n,o,a)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}
})(s);(function(e){var t={nodeName:"A"};e.commands.removeLink={exec:function(n,o){e.commands.formatInline.remove(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){var t=/wysiwyg-font-size-[0-9a-z\-]+/g;e.commands.fontSize={exec:function(n,o,i){e.commands.formatInline.exec(n,o,{className:"wysiwyg-font-size-"+i,classRegExp:t,toggle:!0})},state:function(t,n,o){return e.commands.formatInline.state(t,n,{className:"wysiwyg-font-size-"+o})}}})(s);(function(e){e.commands.fontSizeStyle={exec:function(t,n,o){o=o.size||o;/^\s*$/.test(o)||e.commands.formatInline.exec(t,n,{styleProperty:"fontSize",styleValue:o,toggle:!1})},state:function(t,n,o){return e.commands.formatInline.state(t,n,{styleProperty:"fontSize",styleValue:o||void 0})},remove:function(t,n){return e.commands.formatInline.remove(t,n,{styleProperty:"fontSize"})},stateValue:function(t,n){var o,i=this.state(t,n);i&&e.lang.object(i).isArray()&&(i=i[0]);if(i&&(o=i.getAttribute("style")))return e.quirks.styleParser.parseFontSize(o);return!1}}})(s);(function(e){var t=/wysiwyg-color-[0-9a-z]+/g;e.commands.foreColor={exec:function(n,o,i){e.commands.formatInline.exec(n,o,{className:"wysiwyg-color-"+i,classRegExp:t,toggle:!0})},state:function(t,n,o){return e.commands.formatInline.state(t,n,{className:"wysiwyg-color-"+o})}}})(s);(function(e){e.commands.foreColorStyle={exec:function(t,n,o){var i,a;if(!o)return;if(i=e.quirks.styleParser.parseColor("color:"+(o.color||o),"color")){a=(1===i[3]?"rgb("+[i[0],i[1],i[2]].join(", "):"rgba("+i.join(", "))+")";e.commands.formatInline.exec(t,n,{styleProperty:"color",styleValue:a})}},state:function(t,n,o){var i,a=o?e.quirks.styleParser.parseColor("color:"+(o.color||o),"color"):null;a&&(i=(1===a[3]?"rgb("+[a[0],a[1],a[2]].join(", "):"rgba("+a.join(", "))+")");return e.commands.formatInline.state(t,n,{styleProperty:"color",styleValue:i})},remove:function(t,n){return e.commands.formatInline.remove(t,n,{styleProperty:"color"})},stateValue:function(t,n,o){var i,a=this.state(t,n),r=!1;a&&e.lang.object(a).isArray()&&(a=a[0]);if(a&&(i=a.getAttribute("style"))){r=e.quirks.styleParser.parseColor(i,"color");return e.quirks.styleParser.unparseColor(r,o)}return!1}}})(s);(function(e){e.commands.bgColorStyle={exec:function(t,n,o){var i,a=e.quirks.styleParser.parseColor("background-color:"+(o.color||o),"background-color");if(a){i=(1===a[3]?"rgb("+[a[0],a[1],a[2]].join(", "):"rgba("+a.join(", "))+")";e.commands.formatInline.exec(t,n,{styleProperty:"backgroundColor",styleValue:i})}},state:function(t,n,o){var i,a=o?e.quirks.styleParser.parseColor("background-color:"+(o.color||o),"background-color"):null;a&&(i=(1===a[3]?"rgb("+[a[0],a[1],a[2]].join(", "):"rgba("+a.join(", "))+")");return e.commands.formatInline.state(t,n,{styleProperty:"backgroundColor",styleValue:i})},remove:function(t,n){return e.commands.formatInline.remove(t,n,{styleProperty:"backgroundColor"})},stateValue:function(t,n,o){var i,a=this.state(t,n),r=!1;a&&e.lang.object(a).isArray()&&(a=a[0]);if(a&&(i=a.getAttribute("style"))){r=e.quirks.styleParser.parseColor(i,"background-color");return e.quirks.styleParser.unparseColor(r,o)}return!1}}})(s);(function(e){var t=e.dom,n="h1, h2, h3, h4, h5, h6, p, pre",o="h1, h2, h3, h4, h5, h6, p, pre, div, blockquote",i="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u";function a(e,t){return 3===e.nodeType?e:e.childNodes[t]||e}function r(e){return e&&1===e.nodeType&&"BR"===e.nodeName}function s(e){return e&&1===e.nodeType&&e.classList.contains("rangySelectionBoundary")}function l(e,t){return r(e)||function(e,t){return e&&1===e.nodeType&&"block"===t.win.getComputedStyle(e).display}(e,t)}function d(t,n){e.dom.removeInvisibleSpaces(t.element);for(var i,a=t.element,r=a.querySelectorAll(o),s=t.config.classNames.uneditableContainer+[""].concat(o.split(",")).join(", "+t.config.classNames.uneditableContainer+" "),l=a.querySelectorAll(s),d=e.lang.array(r).without(l),c=d.length;c--;)if(""===d[c].innerHTML.replace(/[\uFEFF]/g,"")&&(0===n.length||d[c]!==n[n.length-1])){(i=e.lang.array(n).indexOf(d[c]))>-1&&n.splice(i,1);d[c].parentNode.removeChild(d[c])}return n}function c(e){return e.config.useLineBreaks?"DIV":"P"}function u(e,t,i){var a=e,r=null;while(a&&t&&a!==t){1===a.nodeType&&a.matches(i?o:n)&&(r=a);a=a.parentNode}return r}function f(n,o,i){n||(n=i.doc.createElement(o.nodeName||c(i))).appendChild(i.doc.createTextNode(e.INVISIBLE_SPACE));o.nodeName&&n.nodeName!==o.nodeName&&(n=t.renameElement(n,o.nodeName));o.classRegExp&&(n.className=n.className.replace(o.classRegExp,""));o.className&&n.classList.add(o.className);o.styleProperty&&void 0!==o.styleValue&&(n.style[e.browser.fixStyleKey(o.styleProperty)]=o.styleValue);return n}function h(n,o,i){var a,l=n.previousSibling,d=n.nextSibling,u=!1;o.styleProperty&&(n.style[e.browser.fixStyleKey(o.styleProperty)]="");o.className&&n.classList.remove(o.className);o.classRegExp&&(n.className=n.className.replace(o.classRegExp,""));null!==n.getAttribute("class")&&""===n.getAttribute("class").trim()&&n.removeAttribute("class");if(o.nodeName&&n.nodeName.toLowerCase()===o.nodeName.toLowerCase())if((a=n.getAttribute("style"))&&""!==a.trim())n=t.renameElement(n,c(i));else{t.unwrap(n);u=!0}null!==n.getAttribute("style")&&""===n.getAttribute("style").trim()&&n.removeAttribute("style");u&&function(e,t,n){var o;e&&s(e)&&(e=e.previousSibling);t&&s(t)&&(t=t.nextSibling);o=e&&e.previousSibling;e&&(1!==e.nodeType||"block"!==n.win.getComputedStyle(e).display&&!r(e))&&e.parentNode&&e.parentNode.insertBefore(n.doc.createElement("br"),e.nextSibling);t&&(1!==t.nodeType||"block"!==n.win.getComputedStyle(t).display)&&t.parentNode&&t.parentNode.insertBefore(n.doc.createElement("br"),t)}(l,d,i)}function p(t){for(var n,i,a=t.querySelectorAll(o)||[],r=a.length;r--;){n=e.dom.domNode(a[r]).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),i=e.dom.domNode(a[r]).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});n&&1!==n.nodeType&&"BR"!==n.nodeName&&""!==(a[r].innerHTML||a[r].nodeValue||"").trim()&&a[r].parentNode.insertBefore(a[r].ownerDocument.createElement("BR"),n);n&&1!==n.nodeType&&"BR"!==n.nodeName&&""!==(a[r].innerHTML||a[r].nodeValue||"").trim()&&a[r].parentNode.insertBefore(a[r].ownerDocument.createElement("BR"),n);e.dom.unwrap(a[r])}}function m(e,t){var n,o=e.startContainer,i=e.endContainer;if(o&&1===o.nodeType&&o===i){if(o.firstChild===o.lastChild&&1===e.endOffset&&o!==t.element&&"LI"!==o.nodeName&&"TD"!==o.nodeName){e.setStartBefore(o);e.setEndAfter(i)}return}if(o&&1===o.nodeType&&3===i.nodeType){o.firstChild===i&&e.endOffset===i.data.length&&o!==t.element&&"LI"!==o.nodeName&&"TD"!==o.nodeName&&e.setEndAfter(o);return}if(i&&1===i.nodeType&&3===o.nodeType){i.firstChild===o&&0===e.startOffset&&i!==t.element&&"LI"!==i.nodeName&&"TD"!==i.nodeName&&e.setStartBefore(i);return}if(o&&3===o.nodeType&&o===i&&1===o.parentNode.childNodes.length){if(e.endOffset==i.data.length&&0===e.startOffset&&(n=o.parentNode)!==t.element&&"LI"!==n.nodeName&&"TD"!==n.nodeName){e.setStartBefore(n);e.setEndAfter(n)}return}}function g(t,n,o){var i=t?e.lang.object(t).clone(!0):null;i&&(i.nodeName=i.nodeName||n||c(o));return i}function v(t,n,o,a){var r,s,d,c,f,h=n.startContainer;if(a=a||u(h,o.element,!0)){s=t.firstChild;d=t.lastChild;o.selection.splitElementAtCaret(a,t);f=e.dom.domNode(d).next({nodeTypes:[1,3],ignoreBlankTexts:!0});c=e.dom.domNode(s).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});s&&!l(s,o)&&c&&!l(c,o)&&s.parentNode.insertBefore(o.doc.createElement("br"),s);d&&!l(d,o)&&f&&!l(f,o)&&f.parentNode.insertBefore(o.doc.createElement("br"),f)}else if((r=function(e,t){var n,o,a,r=e,s=null;while(r&&t&&r!==t){if(1===r.nodeType&&r.matches(i)){o=r;if(null===s)n=s=r.cloneNode(!1);else{(a=r.cloneNode(!1)).appendChild(s);s=a}}r=r.parentNode}return{parent:o,outerNode:s,innerNode:n}}(h,o.element)).outerNode&&r.innerNode&&r.parent){if(1===t.childNodes.length){while(t.firstChild.firstChild)r.innerNode.appendChild(t.firstChild.firstChild);t.firstChild.appendChild(r.outerNode)}o.selection.splitElementAtCaret(r.parent,t)}else{var p=t.firstChild,m=t.lastChild;n.insertNode(t)
;n.setStartBefore(p);n.setEndAfter(m)}}function C(t,n,i){var r,s,d=t.cloneRange(),c=a(d.startContainer,d.startOffset).previousSibling,u=a(d.endContainer,d.endOffset).nextSibling,f=d.extractContents(),h=i.doc.createDocumentFragment(),m=!0;while(f.firstChild){if(1===f.firstChild.nodeType&&f.firstChild.matches(o)){p(f.firstChild);(r=e.dom.unwrap(f.firstChild)).length>0&&(h.lastChild&&(1!==h.lastChild.nodeType||!l(h.lastChild,i))||!h.lastChild&&c&&(1!==c.nodeType||l(c,i)))&&h.appendChild(i.doc.createElement("BR"));for(var g=0,C=r.length;g<C;g++)h.appendChild(r[g]);r.length>0&&(1===h.lastChild.nodeType&&l(h.lastChild,i)||(u||h.lastChild!==f.lastChild)&&h.appendChild(i.doc.createElement("BR")))}else h.appendChild(f.firstChild);m=!1}s=e.lang.array(h.childNodes).get();v(h,d,i);return s}var _=function(e,t){var n=e.data?e.data.slice(0,t):"";return/^\s*$/.test(n)},b=function(e,t){var n=e.data?e.data.slice(t):"";return/^\s*$/.test(n)},y=function(e){if(e){while(e.firstChild&&3===e.firstChild.nodeType&&/^\s*$/.test(e.firstChild.data)&&e.lastChild!==e.firstChild)e.removeChild(e.firstChild);while(e.lastChild&&3===e.lastChild.nodeType&&/^\s*$/.test(e.lastChild.data)&&e.lastChild!==e.firstChild)e.removeChild(e.lastChild);e.firstChild&&1===e.firstChild.nodeType&&"BR"===e.firstChild.nodeName&&e.lastChild!==e.firstChild&&e.removeChild(e.firstChild);e.lastChild&&1===e.lastChild.nodeType&&"BR"===e.lastChild.nodeName&&e.lastChild!==e.firstChild&&e.removeChild(e.lastChild)}};function S(t,i,s,l){var d,c,h=i?function(e){return{nodeName:e.nodeName||null,className:e.classRegExp?null:e.className||null,classRegExp:e.classRegExp||null,styleProperty:e.styleProperty||null}}(i):null,m=t.cloneRange(),C=m.startContainer,S=a(m.startContainer,m.startOffset),D=a(m.endContainer,m.endOffset),T=m.startContainer!==S||3!==S.nodeType||_(S,m.startOffset)?e.dom.domNode(S).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}):S,w=1===m.endContainer.nodeType&&m.endContainer.childNodes[m.endOffset]===D&&(1===D.nodeType||!b(D,m.endOffset)&&!e.dom.domNode(D).is.rangyBookmark())||m.endContainer===D&&3===D.nodeType&&!b(D,m.endOffset)?D:e.dom.domNode(D).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),I=m.extractContents(),E=l.doc.createDocumentFragment(),x=h?e.dom.getParentElement(C,h,null,l.element):null,N=!s||!i||"BLOCKQUOTE"===i.nodeName&&"BLOCKQUOTE"===s,k=x||u(C,l.element,N);e.dom.domNode(w).is.rangyBookmark()&&(w=(D=w).nextSibling);y(I);if(i&&"BLOCKQUOTE"===i.nodeName){var A=f(null,i,l);A.appendChild(I);E.appendChild(A);c=[A]}else{if(I.firstChild)while(I.firstChild)if(1==I.firstChild.nodeType&&I.firstChild.matches(o)){f(I.firstChild,i,l);I.firstChild.matches(n)&&p(I.firstChild);E.appendChild(I.firstChild)}else{d=f(null,g(i,s,l),l);while(I.firstChild&&(1!==I.firstChild.nodeType||!I.firstChild.matches(o))){1==I.firstChild.nodeType&&d.matches(n)&&p(I.firstChild);d.appendChild(I.firstChild)}E.appendChild(d)}else E.appendChild(f(null,i,l));c=e.lang.array(E.childNodes).get()}v(E,m,l,k);(function(t,n,o){var i=t&&e.dom.domNode(t).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});r(n)&&n.parentNode.removeChild(n);!r(t)||i&&1===i.nodeType&&"block"===o.win.getComputedStyle(i).display||t.parentNode.removeChild(t)})(T,w,l);c.length>0&&(void 0===c[c.length-1].lastChild||e.dom.domNode(c[c.length-1].lastChild).is.rangyBookmark())&&c[c.length-1].appendChild(l.doc.createElement("br"));return c}function D(t,n){var i=e.dom.getParentElement(t,{query:o},null,n.element);return i?i.nodeName:null}function T(t,o){var i,a=e.dom.getParentElement(t.selection.getOwnRanges()[0].startContainer,{query:n+", "+(o?o.toLowerCase():"div")},null,t.element);if(a){(i=t.selection.createRange()).selectNode(a);t.selection.setSelection(i)}else t.isEmpty()||t.selection.selectLine()}function w(e,t){var n=t.selection.createRange(),o=e[e.length-1],i=1===o.nodeType&&o.childNodes?0|o.childNodes.length:o.length||0;n.setStart(e[0],0);n.setEnd(o,i);n.select()}function I(t,n,o){for(var i,a=n.selection.getOwnRanges(),r=[],s=(a=function(t){for(var n,o,i,a,r,s,l=[],d=0,c=t.length;d<c;d++){1===t[d].startContainer.nodeType&&t[d].startContainer.matches("ul, ol")&&t[d].setStart(t[d].startContainer.childNodes[t[d].startOffset],0);1===t[d].endContainer.nodeType&&t[d].endContainer.matches("ul, ol")&&(s=t[d].endContainer.childNodes[Math.max(t[d].endOffset-1,0)]).childNodes&&t[d].setEnd(s,s.childNodes.length);if((n=t[d].getNodes([1],function(e){return"LI"===e.nodeName})).length>0){for(o=0,i=n.length;o<i;o++){if((r=t[d].compareNode(n[o]))===t[d].NODE_AFTER||r===t[d].NODE_INSIDE){a=t[d].cloneRange();(s=e.dom.domNode(n[o]).prev({nodeTypes:[1]}))?a.setEnd(s,s.childNodes.length):n[o].closest("ul, ol")?a.setEndBefore(n[o].closest("ul, ol")):a.setEndBefore(n[o]);l.push(a);t[d].setStart(n[o],0)}if(r===t[d].NODE_BEFORE||r===t[d].NODE_INSIDE){(a=t[d].cloneRange()).setEnd(n[o],n[o].childNodes.length);l.push(a);(s=e.dom.domNode(n[o]).next({nodeTypes:[1]}))?t[d].setStart(s,0):n[o].closest("ul, ol")?t[d].setStartAfter(n[o].closest("ul, ol")):t[d].setStartAfter(n[o])}}l.push(t[d])}else l.push(t[d])}return l}(a)).length;s--;){m(a[s],n);i=D(a[s].startContainer,n);r="remove"===t?r.concat(C(a[s],0,n)):r.concat(S(a[s],o,i,n))}return r}function E(e){"string"==typeof e&&(e={nodeName:e.toUpperCase()});return e}e.commands.formatBlock={exec:function(t,n,o){var i,a,r=[];(o=E(o))&&o.toggle&&(a=this.state(t,n,o));if(a){i=rangy.saveSelection(t.win);for(var s=0,l=a.length;s<l;s++)h(a[s],o,t)}else{if(t.selection.isCollapsed()){i=rangy.saveSelection(t.win);!function(t){var n;if(t.selection.isCollapsed()&&(n=t.selection.getNodesNearCaret())&&n.caretNode&&(e.dom.domNode(n.caretNode).is.lineBreak()||3===n.caretNode.nodeType&&0===n.textOffset&&(!n.prevNode||e.dom.domNode(n.prevNode).is.lineBreak())||1===n.caretNode.nodeType&&n.caretNode.classList.contains("rangySelectionBoundary")&&(!n.prevNode||e.dom.domNode(n.prevNode).is.lineBreak()||e.dom.domNode(n.prevNode).is.block())&&(!n.nextNode||e.dom.domNode(n.nextNode).is.lineBreak()||e.dom.domNode(n.nextNode).is.block())))return!0;return!1}(t)?T(t,o&&o.nodeName?o.nodeName.toUpperCase():void 0):t.selection.selectLine()}r=o?I("apply",t,o):I("remove",t)}r=d(t,r);i?rangy.restoreSelection(i):w(r,t)},remove:function(e,t,n){n=E(n);var o,i;if(e.selection.isCollapsed()){i=rangy.saveSelection(e.win);T(e,n&&n.nodeName?n.nodeName.toUpperCase():void 0)}o=d(e,o=I("remove",e));i?rangy.restoreSelection(i):w(o,e)},state:function(n,i,a){a=E(a);for(var r,s=n.selection.filterElements(function(t){return e.dom.domNode(t).test(a||{query:o})}.bind(this)),l=n.selection.getSelectedOwnNodes(),d=0,c=l.length;d<c;d++)(r=t.getParentElement(l[d],a||{query:o},null,n.element))&&-1===s.indexOf(r)&&s.push(r);return 0!==s.length&&s}}})(s);(function(e){e.commands.formatCode={exec:function(t,n,o){var i,a,r,s=this.state(t)[0];if(s)t.selection.executeAndRestore(function(){i=s.querySelector("code");e.dom.replaceWithChildNodes(s);i&&e.dom.replaceWithChildNodes(i)});else{r=(a=t.selection.getRange()).extractContents();s=t.doc.createElement("pre");i=t.doc.createElement("code");o&&(i.className=o);s.appendChild(i);i.appendChild(r);a.insertNode(s);t.selection.selectNode(s)}},state:function(t){var n,o=t.selection.getSelectedNode();return o&&o.nodeName&&"PRE"==o.nodeName&&o.firstChild&&o.firstChild.nodeName&&"CODE"==o.firstChild.nodeName?[o]:!!(n=e.dom.getParentElement(o,{query:"pre code"}))&&[n.parentNode]}}})(s);(function(e){var t="SPAN",n="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u",o={b:"b, strong",strong:"b, strong",em:"em, i",i:"em, i"};function i(e){return/^\s*$/.test(e.className)}function a(e){return!e.getAttribute("style")||/^\s*$/.test(e.getAttribute("style"))}function r(t,n){var o,i,a,r;if(1!==t.nodeType||1!==n.nodeType)return!1;if(t.nodeName!==n.nodeName)return!1;o=t.className.trim().replace(/\s+/g," ").split(" ");i=n.className.trim().replace(/\s+/g," ").split(" ");if(e.lang.array(o).without(i).length>0)return!1;a=e.dom.getAttributes(t);r=e.dom.getAttributes(n);if(a.length!==r.length||!e.lang.object(e.lang.object(a).difference(r)).isEmpty())return!1;return!0}function s(n,o){
var i=o&&o.nodeName||t,a=n.ownerDocument.createElement(i);o.classRegExp&&(a.className=a.className.replace(o.classRegExp,""));o.className&&a.classList.add(o.className);o.styleProperty&&void 0!==o.styleValue&&(a.style[e.browser.fixStyleKey(o.styleProperty)]=o.styleValue);if(o.attribute)if("object"==typeof o.attribute)for(var r in o.attribute)o.attribute.hasOwnProperty(r)&&a.setAttribute(r,o.attribute[r]);else void 0!==o.attributeValue&&a.setAttribute(o.attribute,o.attributeValue);return a}function l(n,r){var s,l,d;if(r.className){if(!1!==r.toggle&&n.classList.contains(r.className))n.classList.remove(r.className);else{r.classRegExp&&(n.className=n.className.replace(r.classRegExp,""));n.classList.add(r.className)}i(n)&&n.removeAttribute("class")}r.styleProperty&&(!1!==r.toggle&&n.style[e.browser.fixStyleKey(r.styleProperty)].trim().replace(/, /g,",")===r.styleValue?n.style[e.browser.fixStyleKey(r.styleProperty)]="":n.style[e.browser.fixStyleKey(r.styleProperty)]=r.styleValue);a(n)&&n.removeAttribute("style");if(r.attribute){"object"==typeof r.attribute?s=r.attribute:(s={})[r.attribute]=r.attributeValue||"";(function(t,n,o){var i,a=e.dom.getAttributes(t),r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&(void 0===typeof t[n]||t[n]!==e[n]))return!1;return!0}(n,a);e.lang.object(a).difference(n);if(r&&!1!==o)for(i in n)n.hasOwnProperty(i)&&t.removeAttribute(i);else for(i in n)n.hasOwnProperty(i)&&t.setAttribute(i,n[i])})(n,s,r.toggle)}d=!!(l=r.nodeName?o[r.nodeName.toLowerCase()]||r.nodeName.toLowerCase():null)&&e.dom.domNode(n).test({query:l});r.nodeName&&r.nodeName!==t&&!d||(!1!==r.toggle&&d||!r.nodeName&&n.nodeName===t)&&i(n)&&a(n)&&function(t){var n=e.dom.getAttributes(t);return e.lang.object(n).isEmpty()}(n)&&e.dom.unwrap(n)}function d(t,n){var o=[];t.isCollapsed()||(o=o.concat(t.getOwnNodes([3],function(t){return!e.dom.domNode(t).is.emptyTextNode()},n)));return o}function c(e,t,n,o){var i=e,a=o?t:function(e){return{nodeName:e.nodeName||null,className:e.classRegExp?null:e.className||null,classRegExp:e.classRegExp||null,styleProperty:e.styleProperty||null}}(t);do{if(1===i.nodeType&&u(i,a))return i;i=i.parentNode}while(i&&i!==n);return null}function u(t,i){var a;if(i.nodeName){var r=o[i.nodeName.toLowerCase()]||i.nodeName.toLowerCase();return e.dom.domNode(t).test({query:r})}(a=e.lang.object(i).clone()).query=n;return e.dom.domNode(t).test(a)}function f(t,n){var o=document.documentElement||document.body,i=o.scrollTop,a=o.scrollLeft;rangy.getSelection(t.win);rangy.getSelection(t.win).removeAllRanges();try{rangy.getSelection(t.win).addRange(n)}catch(e){}if(!t.doc.activeElement||!e.dom.contains(t.element,t.doc.activeElement)){t.element.focus();o.scrollTop=i;o.scrollLeft=a;rangy.getSelection(t.win).addRange(n)}}function h(e,t){var n=rangy.createRange(t.doc),o=e[e.length-1];if(e[0]&&o){n.setStart(e[0],0);n.setEnd(o,o.length);f(t,n)}}function p(e,t,n,o){var i=rangy.createRange(e.doc);if(t){i.setStart(t,n);i.setEnd(t,void 0!==o?o:n);f(e,i)}}function m(e,t,n){var o,i,a,r=d(e.selection),s=[],l=!1;if(e.selection.isInThisEditable()){if(0===r.length&&e.selection.isCollapsed()){if(!(a=e.selection.getSelection().anchorNode))return{nodes:[],partial:!1};3===a.nodeType&&(r=[a])}r.length||(i=e.selection.getOwnRanges()[0])&&(r=[i.endContainer]);for(var u=0,f=r.length;u<f;u++)(o=c(r[u],t,e.element,n))?s.push(o):l=!0}return{nodes:s,partial:l}}function g(e){var t,n,o,i;if(e){t=e.anchorNode;n=e.anchorOffset;if(t&&3===t.nodeType&&n>0&&n<t.data.length){o=t.data[n-1];i=t.data[n];return/\w/.test(o)&&/\w/.test(i)}}return!1}function v(t){var n,o,i,a,r,s,l=[];if(t){n=t.anchorNode;o=r=s=t.anchorOffset;i=n.ownerDocument;a=rangy.createRange(i);if(n&&3===n.nodeType){while(r>0&&/\w/.test(n.data[r-1]))r--;while(s<n.data.length&&/\w/.test(n.data[s]))s++;a.setStartAndEnd(n,r,s);a.splitBoundaries();return{wordOffset:o-r,range:a,textNode:(l=a.getNodes([3],function(t){return!e.dom.domNode(t).is.emptyTextNode()}))[0]}}}return!1}function C(e,t){while(t.firstChild)e.appendChild(t.firstChild);t.parentNode.removeChild(t)}function _(e){for(var t=e.length;t--;)if(e[t]&&e[t].parentNode){e[t].nextSibling&&r(e[t],e[t].nextSibling)&&C(e[t],e[t].nextSibling);e[t].previousSibling&&r(e[t],e[t].previousSibling)&&C(e[t].previousSibling,e[t])}}function b(e,t,n){t.length>0&&h(t,e);_(m(e,n).nodes);t.length>0&&h(t,e)}function y(e,t,n,o){p(e,t,n);_(m(e,o).nodes);p(e,t,n)}function S(e,t){var n=s(e,t);e.parentNode.insertBefore(n,e);n.appendChild(e)}function D(t,n,o){var i,a=c(t,o,n.element);if(a){i=a.cloneNode(!1);e.dom.domNode(t).escapeParent(a,i);l(i,o)}}function T(t,n,o){var i=c(t,o,n.element);i&&e.dom.domNode(t).escapeParent(i)}function w(e,t,n){var o,i,a=e.selection.getSelection();if(t.length){for(i=t.length;i--;)S(t[i],n);b(e,t,n)}else if(g(a)){S((o=v(a)).textNode,n);y(e,o.textNode,o.wordOffset,n)}else{var r=e.selection.getOwnRanges()[0];r&&function(e,t,n){var o=s(e.endContainer,n);e.surroundContents(o);t.selection.selectNode(o)}(r,e,n)}}function I(e){(e="string"==typeof e?{nodeName:e}:e).nodeName&&(e.nodeName=e.nodeName.toUpperCase());return e}e.commands.formatInline={exec:function(t,n,o){o=I(o);t.element.normalize();var i=d(t.selection,!0),a=m(t,o);a.nodes.length>0?function(t,n,o,i){var a,r,s,d,u=m(t,i,!0),f=t.selection.getSelection();if(n.length){if(u.partial||!1===i.toggle)for(d=n.length;d--;){c(n[d],i,t.element)&&D(n[d],t,i);c(n[d],i,t.element)||S(n[d],i)}else for(d=n.length;d--;)D(n[d],t,i);b(t,n,i)}else if(!1!==i.toggle)if(g(f)){r=(a=v(f)).textNode;D(a.textNode,t,i);y(t,a.textNode,a.wordOffset,i)}else{r=t.doc.createTextNode(e.INVISIBLE_SPACE);(s=o.nodes[0].cloneNode(!1)).appendChild(r);t.selection.splitElementAtCaret(o.nodes[0],s);l(s,i);b(t,[r],i);var h=t.selection.getSelection();if(h.anchorNode&&h.focusNode)try{h.collapseToEnd()}catch(e){}}else for(d=o.nodes.length;d--;)l(o.nodes[d],i)}(t,i,a,o):w(t,i,o);t.element.normalize()},remove:function(t,n,o){o=I(o);t.element.normalize();var i=d(t.selection,!0),a=m(t,o);a.nodes.length>0&&function(t,n,o,i){var a,r,s,l=t.selection.getSelection();if(n.length){for(s=n.length;s--;)T(n[s],t,i);b(t,n,i)}else{a=l.anchorNode;r=l.anchorOffset;for(s=o.nodes.length;s--;)e.dom.unwrap(o.nodes[s]);y(t,a,r,i)}}(t,i,a,o);t.element.normalize()},state:function(e,t,n){var o=m(e,n=I(n),!0).nodes;return 0!==o.length&&o}}})(s);(function(e){var t={nodeName:"BLOCKQUOTE",toggle:!0};e.commands.insertBlockQuote={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){e.commands.insertHTML={exec:function(e,t,n){e.selection.insertHTML(n)},state:function(){return!1}}})(s);(function(e){e.commands.insertImage={exec:function(t,n,o){o="object"==typeof o?o:{src:o};var i,a,r=t.doc,s=this.state(t);if(s&&!o.src){t.selection.setBefore(s);(a=s.parentNode).removeChild(s);e.dom.removeEmptyTextNodes(a);if("A"===a.nodeName&&!a.firstChild){t.selection.setAfter(a);a.parentNode.removeChild(a)}e.quirks.redraw(t.element);return}if(s){for(var l in o)o.hasOwnProperty(l)&&s.setAttribute("className"===l?"class":l,o[l]);return}s=r.createElement("IMG");for(var d in o)s.setAttribute("className"===d?"class":d,o[d]);t.selection.insertNode(s);if(e.browser.hasProblemsSettingCaretAfterImg()){i=r.createTextNode(e.INVISIBLE_SPACE);t.selection.insertNode(i);t.selection.setAfter(i)}else t.selection.setAfter(s)},state:function(t){var n,o,i,a=t.doc;if(!e.dom.hasElementWithTagName(a,"IMG"))return!1;if(!(n=t.selection.getSelectedNode()))return!1;if("IMG"===n.nodeName)return n;if(n.nodeType!==e.ELEMENT_NODE)return!1;o=t.selection.getText();if(o=e.lang.string(o).trim())return!1;if(1!==(i=t.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName})).length)return!1;return i[0]}}})(s);(function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(e,n){e.selection.insertHTML(t)},state:function(){return!1}}})(s);(function(e){e.commands.insertOrderedList={exec:function(t,n){e.commands.insertList.exec(t,n,"OL")},state:function(t,n){return e.commands.insertList.state(t,n,"OL")}}})(s);(function(e){e.commands.insertUnorderedList={exec:function(t,n){
e.commands.insertList.exec(t,n,"UL")},state:function(t,n){return e.commands.insertList.state(t,n,"UL")}}})(s);s.commands.insertList=function(e){var t=function(e,t){if(e&&e.nodeName){"string"==typeof t&&(t=[t]);for(var n=t.length;n--;)if(e.nodeName===t[n])return!0}return!1},n=function(n,o,i){var a={el:null,other:!1};if(n){var r=e.dom.getParentElement(n,{query:"li"},!1,i.element),s="UL"===o?"OL":"UL";t(n,o)?a.el=n:t(n,s)?a={el:n,other:!0}:r&&(t(r.parentNode,o)?a.el=r.parentNode:t(r.parentNode,s)&&(a={el:r.parentNode,other:!0}))}a.el&&!i.element.contains(a.el)&&(a.el=null);return a},o=function(e,n){for(var o=n.selection.getOwnRanges(),i=[],a=o.length;a--;)i=i.concat(o[a].getNodes([1],function(n){return t(n,e)}));return i};return{exec:function(t,i,a){var r,s,l=t.doc,d="OL"===a?"insertOrderedList":"insertUnorderedList",c=t.selection.getSelection(),u=1===c.anchorNode.nodeType&&c.anchorNode.firstChild?c.anchorNode.childNodes[c.anchorOffset]:c.anchorNode,f=1===c.focusNode.nodeType&&c.focusNode.firstChild?c.focusNode.childNodes[c.focusOffset]||c.focusNode.lastChild:c.focusNode;c.isBackwards()&&(u=[f,f=u][0]);e.dom.domNode(f).is.emptyTextNode(!0)&&f&&(f=e.dom.domNode(f).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}));e.dom.domNode(u).is.emptyTextNode(!0)&&u&&(u=e.dom.domNode(u).next({nodeTypes:[1,3],ignoreBlankTexts:!0}));r=u&&f?u===f?u:e.dom.domNode(u).commonAncestor(f,t.element):t.selection.getSelectedNode();(s=n(r,a,t)).el?s.other?function(t,n,i){var a="UL"===n?"OL":"UL";i.selection.executeAndRestoreRangy(function(){for(var r=[t].concat(o(a,i)),s=r.length;s--;)e.dom.renameElement(r[s],n.toLowerCase())})}(s.el,a,t):function(t,n,i){var a,r,s="UL"===n?"OL":"UL";i.selection.executeAndRestoreRangy(function(){if((a=o(s,i)).length)for(var l=a.length;l--;)e.dom.renameElement(a[l],n.toLowerCase());else{for(var d=(r=o(["OL","UL"],i)).length;d--;)e.dom.resolveList(r[d],i.config.useLineBreaks);0===r.length&&e.dom.resolveList(t,i.config.useLineBreaks)}})}(s.el,a,t):t.commands.support(d)?l.execCommand(d,!1,null):function(t,n){var o,i,a=rangy.saveSelection(n.win),r="_wysihtml5-temp-"+(new Date).getTime();n.commands.exec("formatBlock",{nodeName:"div",className:r});var s=n.element.querySelector("."+r);s.innerHTML=s.innerHTML.replace(e.INVISIBLE_SPACE_REG_EXP,"");if(s){o=/^(\s|(<br>))+$/i.test(s.innerHTML);i=e.dom.convertToList(s,t.toLowerCase(),n.parent.config.classNames.uneditableContainer);a&&rangy.restoreSelection(a);o&&n.selection.selectNode(i.querySelector("li"),!0)}}(a,t)},state:function(e,t,o){var i=e.selection.getSelectedNode(),a=n(i,o,e);return!(!a.el||a.other)&&a.el}}}(s);(function(e){var t={nodeName:"I",toggle:!0};e.commands.italic={exec:function(n,o){e.commands.formatInline.exec(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){var t={className:"wysiwyg-text-align-center",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};e.commands.justifyCenter={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={className:"wysiwyg-text-align-left",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};e.commands.justifyLeft={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={className:"wysiwyg-text-align-right",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};e.commands.justifyRight={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={className:"wysiwyg-text-align-justify",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};e.commands.justifyFull={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={styleProperty:"textAlign",styleValue:"right",toggle:!0};e.commands.alignRightStyle={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={styleProperty:"textAlign",styleValue:"left",toggle:!0};e.commands.alignLeftStyle={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={styleProperty:"textAlign",styleValue:"center",toggle:!0};e.commands.alignCenterStyle={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){var t={styleProperty:"textAlign",styleValue:"justify",toggle:!0};e.commands.alignJustifyStyle={exec:function(n,o){return e.commands.formatBlock.exec(n,"formatBlock",t)},state:function(n,o){return e.commands.formatBlock.state(n,"formatBlock",t)}}})(s);(function(e){e.commands.redo={exec:function(e){return e.undoManager.redo()},state:function(e){return!1}}})(s);(function(e){var t={nodeName:"U",toggle:!0};e.commands.underline={exec:function(n,o){e.commands.formatInline.exec(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){e.commands.undo={exec:function(e){return e.undoManager.undo()},state:function(e){return!1}}})(s);(function(e){e.commands.createTable={exec:function(e,t,n){var o,i,a;if(n&&n.cols&&n.rows&&parseInt(n.cols,10)>0&&parseInt(n.rows,10)>0){a=n.tableStyle?'<table style="'+n.tableStyle+'">':"<table>";a+="<tbody>";for(i=0;i<n.rows;i++){a+="<tr>";for(o=0;o<n.cols;o++)a+="<td><br></td>";a+="</tr>"}a+="</tbody></table>";e.commands.exec("insertHTML",a)}},state:function(e,t){return!1}}})(s);(function(e){e.commands.mergeTableCells={exec:function(t,n){t.tableSelection&&t.tableSelection.start&&t.tableSelection.end&&(this.state(t,n)?e.dom.table.unmergeCell(t.tableSelection.start):e.dom.table.mergeCellsBetween(t.tableSelection.start,t.tableSelection.end))},state:function(t,n){if(t.tableSelection){var o=t.tableSelection.start,i=t.tableSelection.end;if(o&&i&&o==i&&(e.dom.getAttribute(o,"colspan")&&parseInt(e.dom.getAttribute(o,"colspan"),10)>1||e.dom.getAttribute(o,"rowspan")&&parseInt(e.dom.getAttribute(o,"rowspan"),10)>1))return[o]}return!1}}})(s);(function(e){e.commands.addTableCells={exec:function(t,n,o){if(t.tableSelection&&t.tableSelection.start&&t.tableSelection.end){var i=e.dom.table.orderSelectionEnds(t.tableSelection.start,t.tableSelection.end);"before"==o||"above"==o?e.dom.table.addCells(i.start,o):"after"!=o&&"below"!=o||e.dom.table.addCells(i.end,o);setTimeout(function(){t.tableSelection.select(i.start,i.end)},0)}},state:function(e,t){return!1}}})(s);(function(e){e.commands.deleteTableCells={exec:function(t,n,o){if(t.tableSelection&&t.tableSelection.start&&t.tableSelection.end){var i,a=e.dom.table.orderSelectionEnds(t.tableSelection.start,t.tableSelection.end),r=e.dom.table.indexOf(a.start),s=t.tableSelection.table;e.dom.table.removeCells(a.start,o);setTimeout(function(){if(!(i=e.dom.table.findCell(s,r))){"row"==o&&(i=e.dom.table.findCell(s,{row:r.row-1,col:r.col}));"column"==o&&(i=e.dom.table.findCell(s,{row:r.row,col:r.col-1}))}i&&t.tableSelection.select(i,i)},0)}},state:function(e,t){return!1}}})(s);(function(e){e.commands.indentList={exec:function(e,t,n){var o=e.selection.getSelectionParentsByTag("LI");if(o)return this.tryToPushLiLevel(o,e.selection);return!1},state:function(e,t){return!1},tryToPushLiLevel:function(t,n){var o,i,a,r,s,l=!1;n.executeAndRestoreRangy(function(){for(var n=t.length;n--;){r=t[n];o="OL"===r.parentNode.nodeName?"OL":"UL";i=r.ownerDocument.createElement(o);a=e.dom.domNode(r).prev({nodeTypes:[e.ELEMENT_NODE]});s=a?a.querySelector("ul, ol"):null;if(a){if(s)s.appendChild(r);else{i.appendChild(r);a.appendChild(i)}l=!0}}});return l}}})(s);(function(e){e.commands.outdentList={exec:function(e,t,n){var o=e.selection.getSelectionParentsByTag("LI");if(o)return this.tryToPullLiLevel(o,e);return!1},state:function(e,t){return!1},tryToPullLiLevel:function(t,n){var o,i,a,r,s,l=!1,d=this
;n.selection.executeAndRestoreRangy(function(){for(var c=t.length;c--;)if((r=t[c]).parentNode&&("OL"===(o=r.parentNode).tagName||"UL"===o.tagName)){l=!0;i=e.dom.getParentElement(o.parentNode,{query:"ol, ul"},!1,n.element);a=e.dom.getParentElement(o.parentNode,{query:"li"},!1,n.element);if(i&&a){if(r.nextSibling){s=d.getAfterList(o,r);r.appendChild(s)}i.insertBefore(r,a.nextSibling)}else{if(r.nextSibling){s=d.getAfterList(o,r);r.appendChild(s)}for(var u=r.childNodes.length;u--;)o.parentNode.insertBefore(r.childNodes[u],o.nextSibling);o.parentNode.insertBefore(document.createElement("br"),o.nextSibling);r.parentNode.removeChild(r)}0===o.childNodes.length&&o.parentNode.removeChild(o)}});return l},getAfterList:function(e,t){var n=e.nodeName,o=document.createElement(n);while(t.nextSibling)o.appendChild(t.nextSibling);return o}}})(s);(function(e){var t={nodeName:"SUB",toggle:!0};e.commands.subscript={exec:function(n,o){e.commands.formatInline.exec(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){var t={nodeName:"SUP",toggle:!0};e.commands.superscript={exec:function(n,o){e.commands.formatInline.exec(n,o,t)},state:function(n,o){return e.commands.formatInline.state(n,o,t)}}})(s);(function(e){var t="data-wysihtml5-selection-node",n="data-wysihtml5-selection-offset",o=(e.INVISIBLE_SPACE,e.INVISIBLE_SPACE,e.dom);e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.element=this.composer.element;this.position=0;this.historyStr=[];this.historyDom=[];this.transact();this._observe()},_observe:function(){var e,t=this;this.composer.sandbox.getDocument();o.observe(this.element,"keydown",function(e){if(e.altKey||!e.ctrlKey&&!e.metaKey)return;var n=e.keyCode,o=90===n&&!e.shiftKey,i=90===n&&e.shiftKey||89===n;if(o){t.undo();e.preventDefault()}else if(i){t.redo();e.preventDefault()}});o.observe(this.element,"keydown",function(n){var o=n.keyCode;if(o===e)return;e=o;8!==o&&46!==o||t.transact()});this.editor.on("newword:composer",function(){t.transact()}).on("beforecommand:composer",function(){t.transact()})},transact:function(){var o,i,a,r,s,l=this.historyStr[this.position-1],d=this.composer.getValue(!1,!1),c=this.element.offsetWidth>0&&this.element.offsetHeight>0;if(d===l)return;if((this.historyStr.length=this.historyDom.length=this.position)>25){this.historyStr.shift();this.historyDom.shift();this.position--}this.position++;if(c){i=(o=this.composer.selection.getRange())&&o.startContainer?o.startContainer:this.element;a=o&&o.startOffset?o.startOffset:0;if(i.nodeType===e.ELEMENT_NODE)r=i;else{r=i.parentNode;s=this.getChildNodeIndex(r,i)}r.setAttribute(n,a);void 0!==s&&r.setAttribute(t,s)}var u=this.element.cloneNode(!!d);this.historyDom.push(u);this.historyStr.push(d);if(r){r.removeAttribute(n);r.removeAttribute(t)}},undo:function(){this.transact();if(!this.undoPossible())return;this.set(this.historyDom[--this.position-1]);this.editor.fire("undo:composer")},redo:function(){if(!this.redoPossible())return;this.set(this.historyDom[++this.position-1]);this.editor.fire("redo:composer")},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(e){this.element.innerHTML="";for(var o,i,a,r=0,s=e.childNodes,l=e.childNodes.length;r<l;r++)this.element.appendChild(s[r].cloneNode(!0));if(e.hasAttribute(n)){o=e.getAttribute(n);a=e.getAttribute(t);i=this.element}else{o=(i=this.element.querySelector("["+n+"]")||this.element).getAttribute(n);a=i.getAttribute(t);i.removeAttribute(n);i.removeAttribute(t)}null!==a&&(i=this.getChildNodeByIndex(i,+a));this.composer.selection.set(i,o)},getChildNodeIndex:function(e,t){for(var n=0,o=e.childNodes,i=o.length;n<i;n++)if(o[n]===t)return n},getChildNodeByIndex:function(e,t){return e.childNodes[t]}})})(s);s.views.View=_.extend({constructor:function(e,t,n){this.parent=e;this.element=t;this.config=n;this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.on("beforeload",function(){e.parent.on("change_view",function(t){if(t===e.name){e.parent.currentView=e;e.show();setTimeout(function(){e.focus()},0)}else e.hide()})})},focus:function(){if(this.element&&this.element.ownerDocument&&this.element.ownerDocument.querySelector(":focus")===this.element)return;try{this.element&&this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}});(function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",constructor:function(e,t,n){this.base(e,t,n);this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea;this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":"<br>"},getValue:function(t,n){var o=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);!1!==t&&(o=this.parent.parse(o,!1!==n));return o},setValue:function(e,t){!1!==t&&(e=this.parent.parse(e));try{this.element.innerHTML=e}catch(t){this.element.innerText=e}},cleanUp:function(e){var t;this.selection&&this.selection.isInThisEditable()&&(t=rangy.saveSelection(this.win));this.parent.parse(this.element,void 0,e);t&&rangy.restoreSelection(t)},show:function(){this.editableArea.style.display=this._displayStyle||"";if(!this.config.noTextarea&&!this.textarea.element.disabled){this.disable();this.enable()}},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea);"none"===this._displayStyle&&(this._displayStyle=null);this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer");this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer");this.element.setAttribute("contentEditable","true")},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear();this.base();var n=this.element.lastChild;t&&n&&this.selection&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getScrollPos:function(){if(this.doc&&this.win){var e={};void 0!==this.win.pageYOffset?e.y=this.win.pageYOffset:e.y=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop;void 0!==this.win.pageXOffset?e.x=this.win.pageXOffset:e.x=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft;return e}},setScrollPos:function(e){e&&void 0!==e.x&&void 0!==e.y&&this.win.scrollTo(e.x,e.y)},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var e=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(e)||""===e||"<br>"===e||"<p></p>"===e||"<p><br></p>"===e||this.hasPlaceholderSet()},_initContentEditableArea:function(){var e=this;if(this.config.noTextarea)this.sandbox=new t.ContentEditableArea(function(){e._create()},{className:this.config.classNames.sandbox},this.editableArea);else{this.sandbox=new t.ContentEditableArea(function(){e._create()},{className:this.config.classNames.sandbox});this.editableArea=this.sandbox.getContentEditable();t.insert(this.editableArea).after(this.textarea.element);this._createWysiwygFormField()}},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets,className:this.config.classNames.sandbox});this.editableArea=this.sandbox.getIframe();var n=this.textarea.element;t.insert(this.editableArea).after(n);this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var e=document.createElement("input");e.type="hidden";e.name="_wysihtml5_mode";e.value=1;t.insert(e).after(this.textarea.element)}},_create:function(){var o=this;this.doc=this.sandbox.getDocument()
;this.win=this.sandbox.getWindow();this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body;if(this.config.noTextarea)this.cleanUp();else{this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(!0,!1)}this.selection=new e.Selection(this.parent,this.element,this.config.classNames.uneditableContainer);this.commands=new e.Commands(this.parent);this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);this._initAutoLinking();t.addClass(this.element,this.config.classNames.composer);this.config.style&&!this.config.contentEditableMode&&this.style();this.observe();var i=this.config.name;if(i){t.addClass(this.element,i);this.config.contentEditableMode||t.addClass(this.editableArea,i)}this.enable();!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();var a="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");a&&t.simulatePlaceholder(this.parent,this,a,this.config.classNames.placeholder);this.commands.exec("styleWithCSS",!1);this._initObjectResizing();this._initUndoManager();this._initLineBreaking();this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||n.isIos()||setTimeout(function(){o.focus(!0)},100);n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this);this.initSync&&this.config.sync&&this.initSync();this.config.noTextarea||this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var o=this,i=n.canDisableAutoLinking(),a=n.doesAutoLinkingInContentEditable();i&&this.commands.exec("AutoUrlDetect",!1,!1);if(!this.config.autoLink)return;if(!a||a&&i){this.parent.on("newword:composer",function(){if(t.getTextContent(o.element).match(t.autoLink.URL_REG_EXP)){for(var n=o.selection.getSelectedNode(),i=o.element.querySelectorAll("."+o.config.classNames.uneditableContainer),a=!1,r=i.length;r--;)e.dom.contains(i[r],n)&&(a=!0);a||t.autoLink(n,[o.config.classNames.uneditableContainer])}});t.observe(this.element,"blur",function(){t.autoLink(o.element,[o.config.classNames.uneditableContainer])})}var r=this.sandbox.getDocument().getElementsByTagName("a"),s=t.autoLink.URL_REG_EXP,l=function(n){var o=e.lang.string(t.getTextContent(n)).trim();"www."===o.substr(0,4)&&(o="http://"+o);return o};t.observe(this.element,"keydown",function(e){if(!r.length)return;var n,i=o.selection.getSelectedNode(e.target.ownerDocument),a=t.getParentElement(i,{query:"a"},4);if(!a)return;n=l(a);setTimeout(function(){var e=l(a);if(e===n)return;e.match(s)&&a.setAttribute("href",e)},0)})},_initObjectResizing:function(){this.commands.exec("enableObjectResizing",!0);if(n.supportsEvent("resizeend")){var o=["width","height"],i=o.length,a=this.element;t.observe(a,"resizeend",function(t){var n,r=t.target||t.srcElement,s=r.style,l=0;if("IMG"!==r.nodeName)return;for(;l<i;l++)if(s[n=o[l]]){r.setAttribute(n,parseInt(s[n],10));s[n]=""}e.quirks.redraw(a)})}},_initUndoManager:function(){this.undoManager=new e.UndoManager(this.parent)},_initLineBreaking:function(){var o=this;function i(e){var n=t.getParentElement(e,{query:"p, div"},2);n&&t.contains(o.element,n)&&o.selection.executeAndRestoreRangy(function(){if(o.config.useLineBreaks){(!n.firstChild||n.firstChild===n.lastChild&&1===n.firstChild.nodeType&&n.firstChild.classList.contains("rangySelectionBoundary"))&&n.appendChild(o.doc.createElement("br"));t.replaceWithChildNodes(n)}else"P"!==n.nodeName&&t.renameElement(n,"p")})}this.config.useLineBreaks||t.observe(this.element,["focus"],function(){o.isEmpty()&&setTimeout(function(){var e=o.doc.createElement("P");o.element.innerHTML="";o.element.appendChild(e);if(n.displaysCaretInEmptyContentEditableCorrectly())o.selection.selectNode(e,!0);else{e.innerHTML="<br>";o.selection.setBefore(e.firstChild)}},0)});t.observe(this.element,"keydown",function(n){var a=n.keyCode;if(n.shiftKey||n.ctrlKey||n.defaultPrevented)return;if(a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)return;var r=t.getParentElement(o.selection.getSelectedNode(),{query:"li, p, h1, h2, h3, h4, h5, h6"},4);if(r){setTimeout(function(){var n,s=o.selection.getSelectedNode();if("LI"===r.nodeName){if(!s)return;(n=t.getParentElement(s,{query:"ul, ol, menu"},2))||i(s)}a===e.ENTER_KEY&&r.nodeName.match(/^H[1-6]$/)&&i(s)},0);return}if(o.config.useLineBreaks&&a===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()){n.preventDefault();o.commands.exec("insertLineBreak")}})}})})(s);(function(e){var t=e.dom,n=document,o=window,i=n.createElement("div"),a=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],r=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],s=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];e.views.Composer.prototype.style=function(){var l,d=this,c=n.querySelector(":focus"),u=this.textarea.element,f=u.hasAttribute("placeholder"),h=f&&u.getAttribute("placeholder"),p=u.style.display,m=u.disabled;this.focusStylesHost=i.cloneNode(!1);this.blurStylesHost=i.cloneNode(!1);this.disabledStylesHost=i.cloneNode(!1);f&&u.removeAttribute("placeholder");u===c&&u.blur();u.disabled=!1;u.style.display=l="none";(u.getAttribute("rows")&&"auto"===t.getStyle("height").from(u)||u.getAttribute("cols")&&"auto"===t.getStyle("width").from(u))&&(u.style.display=l=p);t.copyStyles(r).from(u).to(this.editableArea).andTo(this.blurStylesHost);t.copyStyles(a).from(u).to(this.element).andTo(this.blurStylesHost);t.insertCSS(s).into(this.element.ownerDocument);u.disabled=!0;t.copyStyles(r).from(u).to(this.disabledStylesHost);t.copyStyles(a).from(u).to(this.disabledStylesHost);u.disabled=m;u.style.display=p;(function(e){if(e.setActive)try{e.setActive()}catch(e){}else{var i=e.style,a=n.documentElement.scrollTop||n.body.scrollTop,r=n.documentElement.scrollLeft||n.body.scrollLeft,s={position:i.position,top:i.top,left:i.left,WebkitUserSelect:i.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e);e.focus();t.setStyles(s).on(e);o.scrollTo&&o.scrollTo(r,a)}})(u);u.style.display=l;t.copyStyles(r).from(u).to(this.focusStylesHost);t.copyStyles(a).from(u).to(this.focusStylesHost);u.style.display=p;t.copyStyles(["display"]).from(u).to(this.editableArea);var g=e.lang.array(r).without(["display"]);c?c.focus():u.blur();f&&u.setAttribute("placeholder",h);this.parent.on("focus:composer",function(){
t.copyStyles(g).from(d.focusStylesHost).to(d.editableArea);t.copyStyles(a).from(d.focusStylesHost).to(d.element)});this.parent.on("blur:composer",function(){t.copyStyles(g).from(d.blurStylesHost).to(d.editableArea);t.copyStyles(a).from(d.blurStylesHost).to(d.element)});this.parent.observe("disable:composer",function(){t.copyStyles(g).from(d.disabledStylesHost).to(d.editableArea);t.copyStyles(a).from(d.disabledStylesHost).to(d.element)});this.parent.observe("enable:composer",function(){t.copyStyles(g).from(d.blurStylesHost).to(d.editableArea);t.copyStyles(a).from(d.blurStylesHost).to(d.element)});return this}})(s);(function(e){var t=e.dom,n=t.domNode,o=e.browser,i={66:"bold",73:"italic",85:"underline"},a={addListeners:function(e,t,n){for(var o=0,i=t.length;o<i;o++)e.addEventListener(t[o],n,!1)},removeListeners:function(e,t,n){for(var o=0,i=t.length;o<i;o++)e.removeEventListener(t[o],n,!1)},fixLastBrDeletionInTable:function(t,n){if(t.selection.caretIsLastInSelection()){var o=t.selection.getSelection(),i=o.anchorNode;if(i&&1===i.nodeType&&(e.dom.getParentElement(i,{query:"td, th"},!1,t.element)||n)){var a=i.childNodes[o.anchorOffset];if(a&&1===a.nodeType&"BR"===a.nodeName){a.parentNode.removeChild(a);return!0}}}return!1},handleUneditableDeletion:function(e){var t=e.selection.getBeforeSelection(!0);if(t&&("element"===t.type||"leafnode"===t.type)&&1===t.node.nodeType&&t.node.classList.contains(e.config.classNames.uneditableContainer)){if(a.fixLastBrDeletionInTable(e,!0))return!0;try{var n=new CustomEvent("wysihtml5:uneditable:delete",{bubbles:!0,cancelable:!1});t.node.dispatchEvent(n)}catch(e){}t.node.parentNode.removeChild(t.node);return!0}return!1},fixDeleteInTheBeginningOfBlock:function(t){var o=t.selection,i=o.getPreviousNode();if(o.caretIsFirstInSelection(e.browser.usesControlRanges())&&i&&1===i.nodeType&&e.dom.domNode(i).is.block()&&!n(i).test({query:"ol, ul, table, tr, dl"})){if(/^\s*$/.test(i.textContent||i.innerText)){i.parentNode.removeChild(i);return!0}if(i.lastChild){var a=i.lastChild,r=o.getSelectedNode(),s=n(i).commonAncestor(r,t.element),l=e.dom.getParentElement(r,{query:"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote"},!1,s||t.element);if(l){n(l).transferContentTo(i,!0);o.setAfter(a);return!0}if(e.browser.usesControlRanges()){r=o.getCaretNode();n(r).transferContentTo(i,!0);o.setAfter(a);return!0}}}return!1},fixDeleteInTheBeginningOfLi:function(t){if(e.browser.hasLiDeletingProblem()){var o,i,a=t.selection.getSelection(),r=a.anchorNode,s=t.selection.caretIsFirstInSelection();if(3===r.nodeType&&0===a.anchorOffset&&r===r.parentNode.firstChild){r=r.parentNode;s=!0}if(s&&r&&1===r.nodeType&&"LI"===r.nodeName){(o=n(r).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}))||!r.parentNode||"UL"!==r.parentNode.nodeName&&"OL"!==r.parentNode.nodeName||(o=n(r.parentNode).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}));if(o){i=r.firstChild;n(r).transferContentTo(o,!0);i?t.selection.setBefore(i):o&&(1===o.nodeType?o.lastChild?t.selection.setAfter(o.lastChild):t.selection.selectNode(o):t.selection.setAfter(o));return!0}}}return!1},fixDeleteInTheBeginningOfControlSelection:function(e){var t,o=e.selection,i=o.getPreviousNode(),a=o.getSelectedNode();if(o.caretIsFirstInSelection()){3===a.nodeType&&(a=a.parentNode);t=a.firstChild;n(a).transferContentTo(i,!0);t&&e.selection.setBefore(t);return!0}return!1},initTableHandling:function(){var t=function(){window.removeEventListener("load",t);this.doc.execCommand("enableObjectResizing",!1,"false");this.doc.execCommand("enableInlineTableEditing",!1,"false")}.bind(this),n=function(){t.call(this);a.removeListeners(this.sandbox.getIframe(),["focus","mouseup","mouseover"],n)}.bind(this);this.doc.execCommand&&e.browser.supportsCommand(this.doc,"enableObjectResizing")&&e.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?a.addListeners(this.sandbox.getIframe(),["focus","mouseup","mouseover"],n):window.addEventListener("load",t));this.tableSelection=e.quirks.tableCellsSelection(this.element,this.parent)},doLineBreaksModeEnterWithCaret:function(o){var i,a,r=!1;if(i=o.selection.getNodesNearCaret()){(i.caretNode||i.nextNode)&&(a=t.getParentElement(i.caretNode||i.nextNode,{query:"p, pre, div, blockquote"},2))===o.element&&(a=void 0);if(a&&i.caretNode)if(n(i.caretNode).is.lineBreak()){if(o.config.doubleLineBreakEscapesBlock){r=!0;i.caretNode.parentNode.removeChild(i.caretNode);n(i.nextNode).is.lineBreak()&&i.nextNode.parentNode.removeChild(i.nextNode);var s=o.doc.createElement("br");n(i.nextNode).is.lineBreak()&&i.nextNode===a.lastChild?a.parentNode.insertBefore(s,a.nextSibling):o.selection.splitElementAtCaret(a,s);i.nextNode&&3===i.nextNode.nodeType&&(i.nextNode.data=i.nextNode.data.replace(/^ *[\r\n]+/,""));o.selection.setBefore(s)}}else if(3===i.caretNode.nodeType&&e.browser.hasCaretBlockElementIssue()&&i.textOffset===i.caretNode.data.length&&!i.nextNode){r=!0;var l=o.doc.createElement("br"),d=o.doc.createElement("br"),c=o.doc.createDocumentFragment();c.appendChild(l);c.appendChild(d);o.selection.insertNode(c);o.selection.setBefore(d)}}return r}},r=function(e){this.domNodeRemovedInterval&&clearInterval(domNodeRemovedInterval);this.parent.fire("destroy:composer")},s=function(t){var n,o,r=t.keyCode,s=i[r];if((t.ctrlKey||t.metaKey)&&!t.altKey&&65===r){this.selection.selectAll();t.preventDefault();return}if((t.ctrlKey||t.metaKey)&&!t.altKey&&s){this.commands.exec(s);t.preventDefault()}r===e.BACKSPACE_KEY&&function(t,n){var o=n.selection;n.element;if(o.isCollapsed()){if(a.handleUneditableDeletion(n)){t.preventDefault();return}if(a.fixDeleteInTheBeginningOfLi(n)){t.preventDefault();return}if(a.fixDeleteInTheBeginningOfBlock(n)){t.preventDefault();return}if(a.fixLastBrDeletionInTable(n)){t.preventDefault();return}if(e.browser.usesControlRanges()&&a.fixDeleteInTheBeginningOfControlSelection(n)){t.preventDefault()}}else if(o.containsUneditable()){t.preventDefault();o.deleteContents()}}(t,this);if((r===e.BACKSPACE_KEY||r===e.DELETE_KEY)&&(n=this.selection.getSelectedNode(!0))&&"IMG"===n.nodeName){t.preventDefault();(o=n.parentNode).removeChild(n);"A"!==o.nodeName||o.firstChild||o.parentNode.removeChild(o);setTimeout(function(){e.quirks.redraw(this.element)}.bind(this),0)}if(this.config.handleTabKey&&r===e.TAB_KEY){t.preventDefault();(function(e,t,n){if(e.selection.isCollapsed()){if(e.selection.caretIsInTheBeginnig("li"))if(n){if(e.commands.exec("outdentList"))return}else if(e.commands.exec("indentList"))return}else e.selection.deleteContents();e.commands.exec("insertHTML","&emsp;")})(this,this.element,t.shiftKey)}r===e.ENTER_KEY&&function(e,t){!t.config.useLineBreaks||e.shiftKey||e.ctrlKey||t.selection.isCollapsed()&&a.doLineBreaksModeEnterWithCaret(t)&&e.preventDefault()}(t,this)};e.views.Composer.prototype.observeActions=a;e.views.Composer.prototype.observe=function(){var n=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),i=(this.element,o.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?this.element:this.sandbox.getWindow());this.focusState=this.getValue(!1,!1);n.addEventListener(["DOMNodeRemoved"],r.bind(this),!1);o.supportsMutationEvents()||(this.domNodeRemovedInterval=setInterval(function(){t.contains(document.documentElement,n)||r.call(this)},250));this.config.handleTables&&a.initTableHandling.call(this);a.addListeners(i,["drop","paste","mouseup","focus","keyup"],function(e){this.parent.fire("beforeinteraction",e).fire("beforeinteraction:composer",e);setTimeout(function(){this.parent.fire("interaction",e).fire("interaction:composer",e)}.bind(this),0)}.bind(this));i.addEventListener("focus",function(e){this.parent.fire("focus",e).fire("focus:composer",e);setTimeout(function(){this.focusState=this.getValue(!1,!1)}.bind(this),0)}.bind(this),!1);i.addEventListener("blur",function(e){if(this.focusState!==this.getValue(!1,!1)){var t=e;"function"==typeof Object.create&&(t=Object.create(e,{type:{value:"change"}}));this.parent.fire("change",t).fire("change:composer",t)}this.parent.fire("blur",e).fire("blur:composer",e)}.bind(this),!1);a.addListeners(this.element,["drop","paste","beforepaste"],function(e){
this.parent.fire(e.type,e).fire(e.type+":composer",e);"paste"===e.type&&setTimeout(function(){this.parent.fire("newword:composer")}.bind(this),0)}.bind(this),!1);this.element.addEventListener("copy",function(t){if(this.config.copyedFromMarking){if(e.browser.supportsModernPaste()){t.clipboardData.setData("text/html",this.config.copyedFromMarking+this.selection.getHtml());t.clipboardData.setData("text/plain",this.selection.getPlainText());t.preventDefault()}this.parent.fire(t.type,t).fire(t.type+":composer",t)}}.bind(this),!1);this.element.addEventListener("mousedown",function(t){if(!o.canSelectImagesInContentEditable()){var n=t.target,i=this.element.querySelectorAll("img"),a=this.element.querySelectorAll("."+this.config.classNames.uneditableContainer+" img"),r=e.lang.array(i).without(a);"IMG"===n.nodeName&&e.lang.array(r).contains(n)&&this.selection.selectNode(n)}if(e.browser.usesControlRanges()){this.selection.lastMouseDownPos={x:t.clientX,y:t.clientY};setTimeout(function(){delete this.selection.lastMouseDownPos}.bind(this),0)}}.bind(this),!1);this.element.addEventListener("click",function(t){if(this.config.classNames.uneditableContainer){var n=e.dom.getParentElement(t.target,{query:"."+this.config.classNames.uneditableContainer},!1,this.element);n&&this.selection.setAfter(n)}}.bind(this),!1);this.element.addEventListener("drop",function(e){o.canSelectImagesInContentEditable()||setTimeout(function(){this.selection.getSelection().removeAllRanges()}.bind(this),0)}.bind(this),!1);this.element.addEventListener("keyup",function(t){var n=t.keyCode;n!==e.SPACE_KEY&&n!==e.ENTER_KEY||this.parent.fire("newword:composer")}.bind(this),!1);this.element.addEventListener("keydown",s.bind(this),!1);e.browser.usesControlRanges()&&this.element.addEventListener("mscontrolselect",function(e){e.target;var t=this.selection.lastMouseDownPos;if(t){var n=document.body.createTextRange();setTimeout(function(){try{n.moveToPoint(t.x,t.y);n.select()}catch(e){}}.bind(this),0)}}.bind(this),!1);this.element.addEventListener("dragenter",function(){this.parent.fire("unset_placeholder")}.bind(this),!1)}})(s);(function(e){e.views.Synchronizer=_.extend({constructor:function(e,t,n){this.editor=e;this.textarea=t;this.composer=n;this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue(!1,!1);if(t)this.composer.setValue(t,e);else{this.composer.clear();this.editor.fire("set_placeholder")}},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,o=this.textarea.element.form,i=function(){t=setInterval(function(){n.fromComposerToTextarea()},400)},a=function(){clearInterval(t);t=null};i();if(o){e.dom.observe(o,"submit",function(){n.sync(!0)});e.dom.observe(o,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})}this.editor.on("change_view",function(e){if("composer"!==e||t){if("textarea"===e){n.fromComposerToTextarea(!0);a()}}else{n.fromTextareaToComposer(!0);i()}});this.editor.on("destroy:composer",a)}})})(s);(function(e){e.views.SourceView=_.extend({constructor:function(e,t){this.editor=e;this.composer=t;this._observe()},switchToTextarea:function(e){var t=this.composer.win.getComputedStyle(this.composer.element),n=parseFloat(t.width),o=Math.max(parseFloat(t.height),100);if(!this.textarea){this.textarea=this.composer.doc.createElement("textarea");this.textarea.className="wysihtml5-source-view"}this.textarea.style.width=n+"px";this.textarea.style.height=o+"px";this.textarea.value=this.editor.getValue(e,!0);this.composer.element.parentNode.insertBefore(this.textarea,this.composer.element);this.editor.currentView="source";this.composer.element.style.display="none"},switchToComposer:function(e){var t=this.textarea.value;if(t)this.composer.setValue(t,e);else{this.composer.clear();this.editor.fire("set_placeholder")}this.textarea.parentNode.removeChild(this.textarea);this.editor.currentView=this.composer;this.composer.element.style.display=""},_observe:function(){this.editor.on("change_view",function(e){"composer"===e?this.switchToComposer(!0):"textarea"===e&&this.switchToTextarea(!0)}.bind(this))}})})(s);s.views.Textarea=s.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n);this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;!1!==e&&(t=this.parent.parse(t));return t},setValue:function(e,t){!1!==t&&(e=this.parent.parse(e));this.element.value=e},cleanUp:function(e){var t=this.parent.parse(this.element.value,void 0,e);this.element.value=t},hasPlaceholderSet:function(){var e=s.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value;return e&&!n||n===t},isEmpty:function(){return!s.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},o=s.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.on("beforeload",function(){s.dom.observe(e,o,function(e){var o=n[e.type]||e.type;t.fire(o).fire(o+":textarea")});s.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}});(function(e){var t={name:void 0,style:!0,toolbar:void 0,showToolbarAfterInit:!0,showToolbarDialogsOnSelection:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{},b:{},i:{},u:{}},classes:{}},pasteParserRulesets:null,parser:e.dom.parse,useLineBreaks:!0,doubleLineBreakEscapesBlock:!0,stylesheets:[],placeholderText:void 0,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,classNames:{composer:"wysihtml5-editor",body:"wysihtml5-supported",sandbox:"wysihtml5-sandbox",placeholder:"wysihtml5-placeholder",uneditableContainer:"wysihtml5-uneditable-container"},copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};e.Editor=e.lang.Dispatcher.extend({constructor:function(n,o){this.editableElement="string"==typeof n?document.getElementById(n):n;this.config=e.lang.object({}).merge(t).merge(o).get();this._isCompatible=e.browser.supported();o&&o.classNames&&e.lang.object(this.config.classNames).merge(o.classNames);if("textarea"!=this.editableElement.nodeName.toLowerCase()){this.config.contentEditableMode=!0;this.config.noTextarea=!0}if(!this.config.noTextarea){this.textarea=new e.views.Textarea(this,this.editableElement,this.config);this.currentView=this.textarea}if(!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var i=this;setTimeout(function(){i.fire("beforeload").fire("load")},0);return}e.dom.addClass(document.body,this.config.classNames.body);this.composer=new e.views.Composer(this,this.editableElement,this.config);this.currentView=this.composer;"function"==typeof this.config.parser&&this._initParser();this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea?this.sourceView=new e.views.SourceView(this,this.composer):this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer);this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){this.currentView.clear();return this},getValue:function(e,t){return this.currentView.getValue(e,t)},setValue:function(e,t){this.fire("unset_placeholder");if(!e)return this.clear();this.currentView.setValue(e,t);return this},cleanUp:function(e){this.currentView.cleanUp(e)},focus:function(e){this.currentView.focus(e);return this},disable:function(){this.currentView.disable();return this},enable:function(){this.currentView.enable();return this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},destroy:function(){this.composer&&this.composer.sandbox&&this.composer.sandbox.destroy();this.toolbar&&this.toolbar.destroy();this.off()},parse:function(t,n,o){
var i=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,a=this.config.parser(t,{rules:o||this.config.parserRules,cleanUp:this.config.cleanUp,context:i,uneditableClass:this.config.classNames.uneditableContainer,clearInternals:n});"object"==typeof t&&e.quirks.redraw(t);return a},_initParser:function(){var t;e.browser.supportsModernPaste()?this.on("paste:composer",function(n){n.preventDefault();(t=e.dom.getPastedHtml(n))&&this._cleanAndPaste(t)}.bind(this)):this.on("beforepaste:composer",function(t){t.preventDefault();var n=this.composer.getScrollPos();e.dom.getPastedHtmlWithDiv(this.composer,function(e){e&&this._cleanAndPaste(e);this.composer.setScrollPos(n)}.bind(this))}.bind(this))},_cleanAndPaste:function(t){var n=e.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.classNames.uneditableContainer});this.composer.selection.deleteContents();this.composer.selection.insertHTML(n)}})})(s);e(s)})(function(t){e.exports=t})},"PYM6+u89":function(e,t,n){e.exports=n("jzsWUI8o")("PYM6+u89")},PhzQWMwz:function(e,t,n){e.exports=n("kTWnU3g/")("PhzQWMwz")},QDyDm29T:function(e,t,n){e.exports=n("jzsWUI8o")("QDyDm29T")},"RKvz29A+":function(e,t,n){e.exports=n("jzsWUI8o")("RKvz29A+")},RV3XwBj4:function(e,t,n){e.exports=n("jzsWUI8o")("RV3XwBj4")},"Rbc/5Qxu":function(e,t,n){e.exports=n("jzsWUI8o")("Rbc/5Qxu")},RoeWeKu3:function(e,t,n){e.exports=n("jzsWUI8o")("RoeWeKu3")},Rq7nPsD6:function(e,t,n){e.exports=n("jzsWUI8o")("Rq7nPsD6")},RqNuIBnF:function(e,t,n){e.exports=n("jzsWUI8o")("RqNuIBnF")},RvwF9Uya:function(e,t,n){e.exports=n("jzsWUI8o")("RvwF9Uya")},SJosIy9U:function(e,t,n){e.exports=n("kTWnU3g/")("SJosIy9U")},SW8wBfrQ:function(e,t,n){e.exports=n("jzsWUI8o")("SW8wBfrQ")},Smkc2gbC:function(e,t,n){e.exports=n("kTWnU3g/")("Smkc2gbC")},SsthRmFI:function(e,t,n){e.exports=n("jzsWUI8o")("SsthRmFI")},StFv3lGw:function(e,t,n){e.exports=n("jzsWUI8o")("StFv3lGw")},TSQz0m59:function(e,t,n){e.exports=n("kTWnU3g/")("TSQz0m59")},TZmZY1y0:function(e,t,n){e.exports=n("jzsWUI8o")("TZmZY1y0")},"Tv+Tk4zx":function(e,t,n){e.exports=n("jzsWUI8o")("Tv+Tk4zx")},U0T8VM8b:function(e,t,n){e.exports=n("jzsWUI8o")("U0T8VM8b")},UAa7bF8p:function(e,t,n){e.exports=n("jzsWUI8o")("UAa7bF8p")},"UM4/E5wA":function(e,t){e.exports='<div>\r\n    <p><%- paragraphs.keyCiteDescription %></p>\r\n    <p><%- paragraphs.keyCiteWestKeyNumberIntegration %></p>\r\n    <p><%- paragraphs.keyCiteFlags %></p>\r\n    <ul class="co_keyciteLightboxList"><%\r\n    \tif (typeof(yellowFlag) !== \'undefined\') {\r\n        \t%><li>\r\n\t            <img src="<%- yellowFlag.imageUrl %>" alt="<%- yellowFlag.imageHint %>"/>\r\n\t            <p><%- yellowFlag.casesAndAdministrativeDecisions %></p>\r\n\t            <p><%- yellowFlag.statutesAndRegulations %></p>\r\n\t            <p><%- yellowFlag.patentsAndTrademarks %></p>\r\n        \t</li><%\r\n        }\r\n        if (typeof(redFlag) !== \'undefined\') {\r\n\t        %><li>\r\n\t            <img src="<%- redFlag.imageUrl %>" alt="<%- redFlag.imageHint %>"/>\r\n\t            <p><%- redFlag.casesAndAdministrativeDecisions %></p>\r\n\t            <p><%- redFlag.statutesAndRegulations %></p>\r\n\t            <p><%- redFlag.patentsAndTrademarks %></p>\r\n\t        </li><%\r\n\t    }\r\n\t    if (typeof(blueFlag) !== \'undefined\') {\r\n        \t%><li>\r\n\t            <img src="<%- blueFlag.imageUrl %>" alt="<%- blueFlag.imageHint %>"/>\r\n\t            <p><%- blueFlag.description %></p>\r\n\t        </li><%\r\n\t    }\r\n\t    if (typeof(overrulingFlag) !== \'undefined\') {\r\n\t        %><li>\r\n\t            <img src="<%- overrulingFlag.imageUrl %>" alt="<%- overrulingFlag.imageHint %>"/>\r\n\t            <p><%- overrulingFlag.description %></p>\r\n\t        </li><%\r\n\t    }\r\n    %></ul>\r\n    <p><%- paragraphs.keyCiteReferences %></p>\r\n    <p><%- paragraphs.forMoreInfo %></p>\r\n</div>'},UrjZSDrS:function(e,t,n){e.exports=n("Hvh/Xooh")("UrjZSDrS")},VEaQ2VFH:function(e,t,n){e.exports=n("jzsWUI8o")("VEaQ2VFH")},VTQq8KVI:function(e,t,n){e.exports=n("Hvh/Xooh")("VTQq8KVI")},VzHhdLxv:function(e,t,n){e.exports=n("Hvh/Xooh")("VzHhdLxv")},"W+JnEuI7":function(e,t,n){e.exports=n("jzsWUI8o")("W+JnEuI7")},XDQeQO6j:function(e,t,n){e.exports=n("kTWnU3g/")("XDQeQO6j")},"XU0TZS/w":function(e,t,n){e.exports=n("jzsWUI8o")("XU0TZS/w")},YIn5hNga:function(e,t,n){e.exports=n("kTWnU3g/")("YIn5hNga")},YkHnlQez:function(e,t,n){e.exports=n("jzsWUI8o")("YkHnlQez")},ZDDxJanG:function(e,t,n){e.exports=n("jzsWUI8o")("ZDDxJanG")},ZG0vd9jd:function(e,t){e.exports='<div class="co_redlineLightbox_tabItem">\r\n    \x3c!--\r\n     @file temporaryReportItem template\r\n    --\x3e\r\n\t<div ng-if="!temporaryReport.isProcessed && isReportCompleted(temporaryReport)">\r\n\t\t<div ng-if="temporaryReport.status !== notAddedStatus" class="co_floatRight">\r\n\t\t\t<div class="co_redlineLightbox_tabItem_notAddedMessage">\r\n\t\t\t\t{{notSavedStatusText}}\r\n\t\t\t\t<span info-box message="temporaryReportInfo" class="co_redlineLightbox_tabItem_notAddedReportHint"></span>\r\n\t\t\t</div>\r\n\t\t\t<a title="{{saveButtonText}}" ng-click="saveReport(temporaryReport)" href="javascript:void(0);">{{saveButtonText}}</a>\r\n\t\t</div>\r\n\t\t<div ng-if="temporaryReport.status === notAddedStatus" class="co_floatRight">\r\n\t\t\t<span class="co_redlineLightbox_tabItem_notAddedMessage">{{notAddedStatusText}}</span>\r\n\t\t</div>\r\n\r\n\t\t<div class="co_redlineLightbox_tabItem_itemData">\r\n\t\t\t<p class="co_redlineLightbox_tabItem_itemName">\r\n\t\t\t\t<a ng-href="{{getReportUrl(temporaryReport.itemGuid)}}" href="{{getReportUrl(temporaryReport.itemGuid)}}">{{temporaryReport.itemName}}</a>\r\n\t\t\t</p>\r\n\r\n\t\t\t<p class="co_redlineLightbox_tabItem_savedDate co_italic">{{temporaryReport.modifiedDate | renderDate}}</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-if="temporaryReport.isProcessed" class="co_progressIndicator">\r\n\t\t<img ng-src="{{spinnerSrc}}">\r\n\t</div>\r\n\t<div ng-if="!isReportCompleted(temporaryReport)">\r\n\t\t<div class="co_floatRight">\r\n\t\t\t<div class="co_progressIndicator">\r\n\t\t\t\t<img alt="{{processingText}}" ng-src="{{spinnerSrc}}">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="co_redlineLightbox_tabItem_itemData">\r\n\t\t\t<p class="co_redlineLightbox_tabItem_itemName co_bold">\r\n\t\t\t\t{{temporaryReport.itemName}}\r\n\t\t\t</p>\r\n\t\t\t<p ng-if="temporaryReport.completionStatus === \'processing\' || temporaryReport.completionStatus === \'submitted\'" class="co_redlineLightbox_tabItem_savedDate co_italic">{{inProgressStatus}}</p>\r\n\t\t\t<p ng-if="temporaryReport.completionStatus === \'error\'" class="co_redlineLightbox_tabItem_savedDate co_italic">{{errorStatus}}</p>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},"a2O/4LIg":function(e,t,n){e.exports=n("jzsWUI8o")("a2O/4LIg")},a7kUP4zK:function(e,t,n){e.exports=n("jzsWUI8o")("a7kUP4zK")},aDHXaPCs:function(e,t,n){e.exports=n("kTWnU3g/")("aDHXaPCs")},aLspR8vy:function(e,t,n){e.exports=n("kTWnU3g/")("aLspR8vy")},aT1Aky20:function(e,t){
e.exports='<div>\r\n    \x3c!--\r\n     @file redlineModal template\r\n    --\x3e\r\n    <div ng-if="comparisonProcessInProgress" class="co_loading">{{loadingMessageReportIsGenerated}}</div>\r\n    <div ng-hide="comparisonProcessInProgress">\r\n        <div ng-if="redlineToolError" class="co_redlineLightbox_toolError co_redStatus">{{errorMessage}}</div>\r\n        <div ng-hide="showSnippetForm || addReportBlocked || addReportWarning">\r\n            <div class="co_overlayBox_tabsLeft">\r\n                <div class="co_overlayBox_tabsRight">\r\n                    <div class="co_overlayBox_tabs">\r\n                        <div id="co_redlineLightbox_addNewSnippet_linkContainer" class="co-RedlineDropdown-wrapper co_floatRight">\r\n                        </div>\r\n                        <ul class="co_tabs" ng-init="selectedTab = 1">\r\n                            <li class="co_tabLeft co_tabFirst" ng-click="selectedTab = 1" ng-class="{\'co_tabActive\' : selectedTab==1 }">\r\n                                <div class="co_tabRight">\r\n                                    <h2>\r\n                                        <a class="co_tabLink" href="javascript:void(0);">{{comparisonItemsTabText}}</a>\r\n                                    </h2>\r\n                                </div>\r\n                            </li>\r\n                            <li class="co_tabLeft" ng-click="selectedTab = 2" ng-class="{\'co_tabActive\' : selectedTab==2 }">\r\n                                <div class="co_tabRight">\r\n                                    <h2>\r\n                                        <a class="co_tabLink" href="javascript:void(0);">{{reportsTabText}}</a>\r\n                                    </h2>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                        <div class="co_clear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div id="co_redlineLightbox_activeTabContent">\r\n                <div ng-show="selectedTab==1" comparison-items-tab></div>\r\n                <div ng-show="selectedTab==2" reports-tab></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div ng-show="showSnippetForm" new-snippet-form></div>\r\n\r\n        <div ng-show="addReportBlocked" add-report-blocked-message></div>\r\n\r\n        <div ng-show="addReportWarning" add-report-warning-message></div>\r\n    </div>\r\n</div>\r\n'},aiPVPkHF:function(e,t,n){e.exports=n("kTWnU3g/")("aiPVPkHF")},bAHpW9UW:function(e,t,n){e.exports=n("kTWnU3g/")("bAHpW9UW")},"cLbo/DCK":function(e,t,n){e.exports=n("jzsWUI8o")("cLbo/DCK")},crJM0Ng0:function(e,t,n){e.exports=n("jzsWUI8o")("crJM0Ng0")},csW7qF9b:function(e,t,n){e.exports=n("jzsWUI8o")("csW7qF9b")},d8UvjbB6:function(e,t,n){e.exports=n("jzsWUI8o")("d8UvjbB6")},dBnPS5SA:function(e,t,n){e.exports=n("jzsWUI8o")("dBnPS5SA")},dCykvzrd:function(e,t,n){e.exports=n("kTWnU3g/")("dCykvzrd")},dxKJdlWL:function(e,t,n){e.exports=n("jzsWUI8o")("dxKJdlWL")},"e+NcN1ex":function(e,t,n){e.exports=n("kTWnU3g/")("e+NcN1ex")},"f+r5AMhk":function(e,t,n){e.exports=n("jzsWUI8o")("f+r5AMhk")},f156cz7L:function(e,t,n){e.exports=n("jzsWUI8o")("f156cz7L")},fGg7yfwi:function(e,t,n){e.exports=n("kTWnU3g/")("fGg7yfwi")},fw8JaeZ8:function(e,t,n){e.exports=n("Hvh/Xooh")("fw8JaeZ8")},g0BW1Ge0:function(e,t,n){"use strict";n.r(t);var o=n("Cxq17/Nd"),i=n("M9ntRK8r"),a=n.n(i),r=n("rGhUfLoS"),s=n("hbiuscD4"),l=n("E/7qjUa+"),d=n.n(l),c=n("GDM5NzMC"),u=n("uFhTGM2M"),f=n("VzHhdLxv"),h=n("077jYPqM"),p=n("StFv3lGw"),m=n("Gqr5pQzq"),g=n("7qMMF/e5"),v=n("w6BV/ovP"),C=n("xvPFx6VW"),_=n("VTQq8KVI"),b=n("RKvz29A+"),y=n("yRMJo2a9"),S=n("8CnfOw+t"),D=n("YIn5hNga"),T=n("mUsc+9wB"),w=n("Gz42JICz"),I=n("ECuP/agU"),E=n("/TrPklgp"),x=n("UAa7bF8p");function N(){this.headnoteTimeout=null;this.fancyHeadNotesExpanded=null;this.documentGuid=null;this.chunkableHeadnotes=!1;this.updateCitedCaseReferenceCounts=!0;this.remainingInitializationEvents=1;var e=this;this.SetDocumentGuid=function(e){this.documentGuid=e};this.SetChunkableHeadnotes=function(e){this.chunkableHeadnotes=e};this.SetUpdateCitedCaseReferenceCounts=function(e){this.updateCitedCaseReferenceCounts=e};this.InitializeHeadnotesForUser=function(t){e.InitializeHeadnotes();if(!e.chunkableHeadnotes){var n=document.getElementById("co_headnotes");n&&n.className.indexOf(r["default"].classes.containsSearchTerms)>-1||this.SetHeadnotesVisiblity(t.hideHeadnotesBox);this.shouldSetHeadnoteViewFromUserPreference()&&this.SetHeadnoteViewFromUserPreference(t.headnotesDualColumnView)}e.PublishWhenFullyInitialized()};this.PublishWhenFullyInitialized=function(){e.remainingInitializationEvents--;0===e.remainingInitializationEvents&&setTimeout(function(){y["default"].Publish(r["default"].events.headnotesInitialized,new y["default"].Message({}))},0)};this.SetHeadnoteViewFromUserPreference=function(t){t?e.SetDualColumnHeadnotesView():e.SetSingleColumnHeadnotesView()};this.SetHeadnotesVisiblity=function(t){!0===t?e.CollapseHeadnotesBox():e.ExpandHeadnotesBox()};this.InitializeHeadnotes=function(){if(e.chunkableHeadnotes){var t=e.GetHeadnotesContainerElement();e.SetSingleColumnHeadnotesView(t);if((o=b["default"].GetElementById(r["default"].ids.headnoteHeader))&&o.element){i=o.element;var n=document.createElement("a");n.id=r["default"].ids.headnotesStart;n.className=r["default"].classes.headnoteSkipLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;n.innerHTML=r["default"].texts.skipHeadNotes;n.href="javascript:void(0);";i.appendChild(n);b["default"].AttachClickHandler(n,e.NavigateToEndOfHeadNotesHandler);b["default"].GetElementById(r["default"].ids.headnotesEnd,e.AddStartOfHeadNotesLink)}}else e.BuildHeadnotesTools();e.InitializeHeadnotesHover();e.updateCitedCaseReferenceCounts&&e.UpdateHeadNoteCitedCaseReferenceCounts();if(!e.chunkableHeadnotes){var o;if((o=b["default"].GetElementById(r["default"].ids.headnoteHeader))&&o.element){var i,a=(i=o.element).childNodes[0].innerHTML;a.indexOf("(")>-1&&(a=a.substring(0,a.indexOf("(")-1));var s=document.createElement("a");s.id=r["default"].ids.headnoteExpandCollapseLink;s.className=r["default"].classes.accessibleLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;s.innerHTML=r["default"].texts.collapseHeadnotesPrefix+" "+a;s.href="javascript:void(0);";s.setAttribute("role","button");i.appendChild(s);b["default"].AttachClickHandler(i,e.ToggleHeadnotesBoxHandler)}var l=document.getElementById(r["default"].ids.headnotesShowOrHideFancy);l&&b["default"].AttachClickHandler(l,e.ToggleHeadnotesColumnViewModeHandler)}};this.NavigateToEndOfHeadNotesHandler=function(){var e=b["default"].GetElementById(r["default"].ids.headnotesEnd);b["default"].ScrollToChunkedElement(e,null,null)};this.NavigateToStartOfHeadNotesHandler=function(){var e=b["default"].GetElementById(r["default"].ids.headnotesStart);b["default"].ScrollToChunkedElement(e,null,null)};this.AddStartOfHeadNotesLink=function(t){if(null==t)return;var n=r["default"],o=t.element;o.innerHTML=n.texts.skipToHeadnotesTop;o.href="javascript:void(0);";o.className=n.classes.headnoteTopSkipLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;b["default"].AttachClickHandler(o,e.NavigateToStartOfHeadNotesHandler)};this.InitializeHeadnotesHover=function(){document.getElementById(r["default"].ids.document)&&(c["default"].EnableIpad||c["default"].EnableIphone?g["default"].AddEventHandler(document.body,"touchstart",e.fancyHeadNoteClickHandler):b["default"].AttachClickHandler(document.body,e.fancyHeadNoteClickHandler))};this.BuildHeadnotesTools=function(){var e=b["default"].GetElementById(r["default"].ids.expandedHeadnotes);if(null==e)return;var t=e.element,n=document.createElement("div");n.id=r["default"].ids.headnoteTools;t.insertBefore(n,t.childNodes[0]);var o=document.createElement("a");o.id=r["default"].ids.headnotesShowOrHideFancy;o.href="javascript:void(0);"
;o.className=r["default"].classes.fancyHeadnotesShowHide+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;o.innerHTML=I["default"].lookup("SC.Document.Headnote.HeadnoteToggleLinkInnerHtml","Change View");n.appendChild(o)};this.ToggleHeadnotesBoxHandler=function(t){var n=b["default"].getEventSourceElement(t);if(n&&b["default"].selfOrAncestorHasId(n,r["default"].ids.headnoteHeader)){var o=document.getElementById(r["default"].ids.headnoteHeader),i=document.getElementById(r["default"].ids.expandedHeadnotes);if(o&&i)if("none"==i.style.display){e.ExpandHeadnotesBox(o,i);_["default"].Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.hideHeadnotesBoxPref,!1,function(){},function(){})}else{e.CollapseHeadnotesBox(o,i);_["default"].Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.hideHeadnotesBoxPref,!0,function(){},function(){})}t.preventDefault&&t.preventDefault();t.returnValue=!1;return!1}};this.CollapseHeadnotesBox=function(e,t){e||(e=document.getElementById(r["default"].ids.headnoteHeader));t||(t=document.getElementById(r["default"].ids.expandedHeadnotes));if(t&&e&&"none"!=t.style.display){e.className=r["default"].classes.headnoteHeader+" "+r["default"].classes.headnoteInactive;t.style.display="none"}var n=b["default"].GetElementById(r["default"].ids.headnoteExpandCollapseLink);if(n&&n.element){var o=n.element.childNodes[0];o.nodeValue=o.nodeValue.replace(r["default"].texts.collapseHeadnotesPrefix,r["default"].texts.expandHeadnotesPrefix)}y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))};this.ExpandHeadnotesBox=function(e,t){e||(e=document.getElementById(r["default"].ids.headnoteHeader));t||(t=document.getElementById(r["default"].ids.expandedHeadnotes));if(t&&e&&"none"==t.style.display){e.className=r["default"].classes.headnoteHeader;t.style.display="block"}var n=b["default"].GetElementById(r["default"].ids.headnoteExpandCollapseLink);if(n&&n.element){var o=n.element.childNodes[0];o.nodeValue=o.nodeValue.replace(r["default"].texts.expandHeadnotesPrefix,r["default"].texts.collapseHeadnotesPrefix)}y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))};this.ToggleHeadnotesColumnViewModeHandler=function(t){if(b["default"].getEventSourceElement(t)&&b["default"].selfOrAncestorHasId(r["default"].ids.headnotesShowOrHideFancy)){e.ToggleHeadnotesColumnViewMode();t.preventDefault&&t.preventDefault();t.returnValue=!1;return!1}};this.ToggleHeadnotesColumnViewMode=function(){var t=e.GetHeadnotesContainerElement();if(e.chunkableHeadnotes)e.SetSingleColumnHeadnotesView(t);else if(t&&g["default"].HasClass(t,r["default"].classes.fancyHeadnotes)){e.SetDualColumnHeadnotesView(t);_["default"].Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.headnotesDualColumnViewPref,!0,function(){},function(){})}else{e.SetSingleColumnHeadnotesView(t);_["default"].Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.headnotesDualColumnViewPref,!1,function(){},function(){})}};this.GetHeadnotesContainerElement=function(){var e,t=b["default"].GetElementById(r["default"].ids.headnotes);t&&null!=t&&(e=t.element);return e};this.SetDualColumnHeadnotesView=function(t){if(e.chunkableHeadnotes)return;t&&null!=t||(t=e.GetHeadnotesContainerElement());var n=r["default"].classes.fancyHeadnotes;t&&g["default"].HasClass(t,n)&&g["default"].RemoveClass(t,n);y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))};this.SetSingleColumnHeadnotesView=function(t){t||(t=e.GetHeadnotesContainerElement());var n=r["default"].classes.fancyHeadnotes;t&&!g["default"].HasClass(t,n)&&g["default"].AddClass(t,n);y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))};this.HeadnoteTopicsContainSearchTerms=function(){var e="#"+r["default"].ids.headnotes+" div."+r["default"].classes.headnoteTopics+" ."+r["default"].classes.searchTerm+", "+("#"+r["default"].ids.headnotes+" div."+r["default"].classes.headnoteTopics+" ."+r["default"].classes.currentSearchTerm);return a.a.find(e).length>0};this.fancyHeadNoteClickHandler=function(t){var n=b["default"].getEventSourceElement(t),o=b["default"].selfOrAncestorHasClassFromList(n,[r["default"].classes.headnoteKeyIcon]);if(b["default"].selfOrAncestorHasClassFromList(n,[r["default"].classes.fancyKeyciteContainer]))return;if(o)if(null!=e.fancyHeadNotesExpanded)if(e.fancyHeadNotesExpanded!==n.parentNode){e.hideHeadnotes();e.showHeadnote(n.parentNode)}else e.hideHeadnotes();else e.showHeadnote(n.parentNode);else e.hideHeadnotes()};this.showHeadnote=function(t){var n=g["default"].GetElementsByClassName(r["default"].classes.popupHeadnote,"div",t),o=t.parentNode.className;if(n&&o.indexOf(r["default"].classes.keyIcon)>=0){var i=e.GetHeadnotesTableFromHeadnoteTopicCell(t);i&&(n[0].innerHTML=i.innerHTML)}var a=r["default"].classes.showUp,s=r["default"].classes.fancyHeadnotesActive;g["default"].AddClass(t,a);g["default"].AddClass(t,s);this.fancyHeadNotesExpanded=t};this.hideHeadnotes=function(){for(var e=r["default"].classes.showUp,t=r["default"].classes.fancyHeadnotesActive,n=document.getElementById(r["default"].ids.document),o=b["default"].GetElementsByClassName(t,"div",n),i=0;i<o.length;i++){var a=o[i].element;g["default"].RemoveClass(a,t);g["default"].RemoveClass(a,e)}this.fancyHeadNotesExpanded=null};this.GetHeadnotesTableFromHeadnoteTopicCell=function(t){var n,o,i;if(t){var a,s=!1,l=t.parentNode;while(l&&!s){if((h=" "+l.className+" ").indexOf(" "+r["default"].classes.keyIcon+" ")>=0)a=l;else if(h.indexOf(" "+r["default"].classes.headnoteCellInner+" ")>=0){o=l;i=e.GetKeyIconIndex(a,l);s=!0}l=l.parentNode}}if(o&&"undefined"!=o){for(var d=null,c=o.parentNode.parentNode.childNodes,u=0;u<c.length;u++){var f=c[u];if(f.className===r["default"].classes.headnotesTopicCell){d=f;break}}if(d){var h;if((h=" "+d.className+" ").indexOf(" "+r["default"].classes.headnotesTopicCell+" ")>=0){n=g["default"].GetElementsByClassName(r["default"].classes.topicKeyContentTable,"div",d)[i]}}}return n};this.GetKeyIconIndex=function(e,t){if(e&&t)for(var n=-1,o=t.childNodes,i=0;i<o.length;i++)for(var a=o[i].childNodes,s=0;s<a.length;s++){if((" "+a[s].className+" ").indexOf(" "+r["default"].classes.keyIcon+" ")>=0){n++;if(a[s]===e)return n}}return-1};this.UpdateHeadNoteCitedCaseReferenceCounts=function(){var t=e.GetHeadnoteIdFromCitedCaseRefs(),n=r["default"].ids,o=r["default"].classes,i=e.PublishWhenFullyInitialized;try{if(t&&t.length>0){var s={docGuid:e.documentGuid,includeFacet:r["default"].queryParameters.westHeadnotes};e.remainingInitializationEvents++;(function(e,t){var n={},o=!1,i=e.docGuid;if("undefined"===n[i]||null==n[i]){n[i]=[];o=!0}n[i].push(t);if(o){var r=n[i],s=new x["default"]("RelatedInfo/v1/kcCitingReferences/facets");s.addParameter("docGuid",e.docGuid);"undefined"!==e.filterGuid&&s.addParameter("filterGuid",e.filterGuid);"undefined"!==e.includeFacet&&s.addParameter("includeFacet",e.includeFacet);var l=s.buildUrl(),d=new E["default"](h["default"].RelatedInfo,l);d.SetTimeout(9e4);d.Headers.Accept="application/json";d.Get(function(e){a()(r).each(function(){this(e)});n={}})}})(s,function(e){var t,s={HeadnoteCountInfo:{headnoteCounts:[]}},l=a.a.parseJSON(e.ResponseText);if(null!=l&&null!=l.facets&&l.facets.length>0){for(var d=0;d<l.facets.length;d++)if(l.facets[d].key===r["default"].queryParameters.westHeadnotes){t=l.facets[d];break}var c={};if(t&&null!=t&&t.children.length>0){s.HeadnoteCountInfo.headnoteCounts=[];for(d=0;d<t.children.length;d++)c[t.children[d].key]=t.children[d].count}a()("."+o.headnoteRow,a()("#"+n.headnotes)).each(function(e){var t=this.id.split("_")[2],n={headnoteId:t,headnoteCount:0};c.hasOwnProperty(t)&&(n.headnoteCount=c[t]);s.HeadnoteCountInfo.headnoteCounts[e]=n})}(function(e){if(null!=e&&null!=e.HeadnoteCountInfo){var t=e.HeadnoteCountInfo.headnoteCounts;if(0===t.length)a()(".co_headnoteCitedCaseRef").children().each(function(){g["default"].AddClass(this,o.hideState)});else for(var s=0;s<t.length;s++){
var l=t[s].headnoteId,d=t[s].headnoteCount,c=a()("div[id^="+n.citedCaseRefHeadnoteIdPrefix+l+"]");if(c&&null!=c&&c[0]&&null!=c[0]){var u=c[0].firstChild;d<1&&g["default"].AddClass(u,o.hideState);u.innerHTML=d>1?'<span class="'+o.citedRefCount+" "+o.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures+'">'+d+" </span>"+u.innerHTML:'<span class="'+o.citedRefCount+" "+o.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures+'">'+d+" </span>"+r["default"].texts.caseThatCitesThisHeadnote}}}i()})(s)})}}catch(e){Object(f["NonUserError"])(h["default"].Document,e.toString())}y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))};this.GetHeadnoteIdFromCitedCaseRefs=function(){var t=r["default"],n=[],o=g["default"].GetElementsByClassName(t.classes.headnoteCitedCaseRef,"div",e.GetHeadnotesContainerElement());if(o&&null!=o)for(var i=0;i<o.length;i++)n[i]=o[i].id.substring(t.ids.citedCaseRefHeadnoteIdPrefix.length);return n};this.shouldSetHeadnoteViewFromUserPreference=function(){var e=document.getElementById("co_headnotes");return e&&e.className.indexOf(r["default"].classes.fancyHeadnotes)>-1}}var k=n("VEaQ2VFH"),A=n("LUcJ47Td"),R=[],P=d.a.extend({init:function(e){this.chunks=[];this.currentChunk=0;this.documentDiv=e;this.lastChunkAdded=!1},GetChunkCount:function(){return this.chunks.length},GetChunkAt:function(e){return this.chunks[e]},GetCurrentChunk:function(){return this.currentChunk},IsLastChunkAdded:function(){return this.lastChunkAdded},AddChunk:function(e,t,n,o){if(this.chunks.length!=t)throw new f["NonUserError"](h["default"].Document,"ArgumentException: chunks out of sync");this.chunks.push(e);this.AddChunkCallback&&this.AddChunkCallback(e);this.lastChunkAdded=o;R.push(e);b["default"].publishHubEvent(r["default"].events.chunkAdded,null,{},null);!0===n&&this.RenderChunk(e,t);!0===o&&b["default"].publishHubEvent(r["default"].events.lastChunkAdded,null,{},null)},LoadFirstChunkFromDom:function(){var e=document.getElementById(r["default"].ids.partialDocumentChunkPrefix+"0");null!=e&&this.AddChunk(e,0,!1,!1)},RenderChunkAt:function(e){if(e==this.GetCurrentChunk())return;this.RenderChunk(this.GetChunkAt(e),e)},RenderChunk:function(e,t){var n=this.currentChunk,o=document.getElementById(r["default"].ids.partialDocumentChunkPrefix+n);o&&this.documentDiv.removeChild(o);this.documentDiv.appendChild(e);this.currentChunk=t;var i={chunkNumber:t,oldChunkNumber:n};b["default"].publishHubEvent(r["default"].events.chunkRendered,null,i,null)},FindElementInChunkById:function(e,t){var n="#"+b["default"].EscapeSelector(e);return this.FindElementInChunkBySelector(n,t)},FindElementInChunkBySelector:function(e,t){var n=null;if(t){for(o=this.chunks.length-1;o>-1;o--)if(n=this._getElementInChunkBySelectorAndChunkNumber(e,o))break}else for(var o=0;o<this.chunks.length;o++)if(n=this._getElementInChunkBySelectorAndChunkNumber(e,o))break;return n},GetElementInChunkByIdAndChunkNumber:function(e,t){if(t>=this.chunks.length)return null;if(this.chunks[t].id===e)return{element:this.chunks[t],chunkNumber:t};var n="#"+e,o=a()(this.chunks[t]).find(n);if(o.length>0)return{element:o[0],chunkNumber:t};return null},GetElementInChunkBySelectorAndChunkNumber:function(e,t){if(t>=this.chunks.length)return null;return this._getElementInChunkBySelectorAndChunkNumber(e,t)},_getElementInChunkBySelectorAndChunkNumber:function(e,t){var n=a()(this.chunks[t]);if(n.is(e))return{element:this.chunks[t],chunkNumber:t};var o=n.find(e);if(o.length>0)return{element:o[0],chunkNumber:t};return null},FindElementsInChunksByClassName:function(e,t){for(var n=t+"."+e,o=[],i=0;i<this.chunks.length;i++){var r=a()(this.chunks[i]).find(n);if(r.length>0)for(var s=0;s<r.length;s++)o.push({element:r[s],chunkNumber:i})}return o},AddChunkCallback:null});P.CreateProductSpecificInstance=function(e){return new P(e)};P.Create=function(e,t){if(null==e)throw new f["NonUserError"](h["default"].Document,"ArgumentNullException: documentDiv");p["default"].Instance=P.CreateProductSpecificInstance(e);p["default"].Instance.AddChunkCallback=t;p["default"].Instance.LoadFirstChunkFromDom();b["default"].publishHubEvent(r["default"].events.chunkManagerCreated,null,{},null);return p["default"].Instance};var B=P,L=B.prototype.init;B.prototype.init=function(e){this.chunkedElements=[];return L.call(this,e)};B.prototype.FindElementsInChunksByClassName=function(e,t){for(var n=t+"."+e,o=[],i=this.FindChunkedElementIndexBySelector(n),r=0;r<this.chunks.length;r++){var s=a()(this.chunks[r]).find(n);if(s.length>0)for(var l=0;l<s.length;l++)o.push({element:s[l],chunkNumber:r})}this.UpdateChunkedElementAtIndex(i,n,o);return o};B.prototype.FindElementsInSubChunksByClassName=function(e,t,n){var o=t+"."+e,i=[],r=this.FindChunkedElementIndexBySelector(o);r>-1&&(i=this.chunkedElements[r].value);for(var s=n;s<this.chunks.length;s++){var l=a()(this.chunks[s]).find(o);if(l.length>0)for(var d=0;d<l.length;d++)i.push({element:l[d],chunkNumber:s})}this.UpdateChunkedElementAtIndex(r,o,i);return i};B.prototype.FindChunkedElementIndexBySelector=function(e){for(var t=-1,n=0;n<this.chunkedElements.length;n++)if(this.chunkedElements[n].key===e){t=n;break}return t};B.prototype.UpdateChunkedElementAtIndex=function(e,t,n){e>-1?this.chunkedElements[e].value=n:this.chunkedElements.push({key:t,value:n})};B.prototype.GetChunkedElements=function(e,t){var n=t+"."+e,o=this.FindChunkedElementIndexBySelector(n);return o>-1?this.chunkedElements[o].value:[]};B.prototype.RenderChunk=function(e,t){var n=this.currentChunk,i=document.getElementById(r["default"].ids.partialDocumentChunkPrefix+n);if(i){if(o["default"].displayOptions.isNewDocumentView){var s=a()("#co_docContentHeader");if(s[0]&&0===t){var l=a()(e).find("#co_docContentBody");e.insertBefore(s[0],l[0])}else s[0]&&t>0&&e.appendChild(s[0])}this.documentDiv.removeChild(i)}this.documentDiv.appendChild(e);this.currentChunk=t;var d={chunkNumber:t,oldChunkNumber:n};b["default"].publishHubEvent(r["default"].events.chunkRendered,null,d,null)};var O=B,M=n("yMpLjSbq"),W=n("By2jxn+X"),F=n("Tv+Tk4zx"),H=d.a.extend({init:function(e){this.chunkManager=null;this.currentChunkStatusHtmlElement=null;this.chunkCountStatusHtmlElement=null;this.navWidgetHtmlElement=null;this.topRegion=null;this.parentDiv=null;this.listItemCount=null;this.nextNav=null;this.errorInfoBox=null;this.showPartLabel=!1!==e||e;this.isTopWidget=!1},SetChunkManager:function(e){this.chunkManager=e},SetParentDiv:function(e){this.parentDiv=e},SetTopRegion:function(e){this.topRegion=e},GetPreviousChunkButton:function(e){return document.getElementById(e+r["default"].ids.previousChunkButton)},GetNextChunkButton:function(e){return document.getElementById(e+r["default"].ids.nextChunkButton)},getChunkManager:function(){var e=this;if(null==this.chunkManager){this.chunkManager=p["default"].Instance;if(null==this.chunkManager){y["default"].Subscribe(r["default"].events.chunkManagerCreated,function(){e.Draw()});return}}if(null==this.chunkManager)throw new f["NonUserError"](h["default"].Document,"ArgumentNullException: chunkManager");if(null==this.parentDiv)throw new f["NonUserError"](h["default"].Document,"ArgumentNullException: parentDiv")},buildChunkNavHtml:function(e){var t=this,n=r["default"],o=document.createElement("div");o.className=n.classes.chunkPagination;"co_top"===e&&(o.className+=" co_hideState");o.id=e+n.ids.chunkNav;var i="<ul class='"+n.classes.navFooterPagination+"' id='"+e+n.ids.chunkNavFooterPagination+"'>",a="";!0===this.showPartLabel&&(a="<li><strong>"+I["default"].lookup("SC.Document.Widget.ChunkNavigation.PartLabel","Part:")+"</strong></li>");var s=t.buildNavButtonHtml(e+n.ids.previousChunkButton,n.classes.widgetPrev,n.classes.icon25+" "+n.classes.iconArrowPrev,n.texts.previousPart),l=this.buildStatusHtml(e);this.nextNav=t.buildNavButtonHtml(e+n.ids.nextChunkButton,n.classes.next,n.classes.icon25+" "+n.classes.iconArrowNext,n.texts.nextPart);var d="<div class='"+n.classes.clear+"'></div>";o.innerHTML=this._concatNavChunks(i,a,s,l,"</ul>",d);var c=document.createElement("div"),u=t.isTopWidget?W["default"].Bottom:W["default"].Top
;this.errorInfoBox=new M["default"](c,F["default"].None,u,!0,!0,!1);o.appendChild(c);this.parentDiv.appendChild(o);this.currentChunkStatusHtmlElement=document.getElementById(e+n.ids.currentChunkStatus);this.chunkCountStatusHtmlElement=document.getElementById(e+n.ids.chunkCountStatus);this.navWidgetHtmlElement=document.getElementById(e+n.ids.chunkNavFooterPagination);g["default"].AddEventHandler(this.currentChunkStatusHtmlElement,"keypress",function(e){t.chunkEntryKeyPressHandler(e)});g["default"].AddEventHandler(this.currentChunkStatusHtmlElement,"blur",function(e){t.chunkEntryBlurHandler(e)})},_concatNavChunks:function(e,t,n,o,i,a){return e+t+n+o+i+a},Draw:function(e){this.getChunkManager();if(null==this.chunkManager)return;this.isTopWidget=null!=e&&e===r["default"].texts.regionTop;this.buildChunkNavHtml(e);this.attachChunkNavEventHandlers(e);this.updateCount(e);this.updateCurrent(e)},attachChunkNavEventHandlers:function(e){var t=this;b["default"].AttachClickHandler(t.GetPreviousChunkButton(e),function(){t.ClickPrevious(e);return!1});t.GetPreviousChunkButton(e).onclick=function(){return!1};y["default"].Subscribe(r["default"].events.chunkAdded,function(){t.updateCount(e)});y["default"].Subscribe(r["default"].events.chunkRendered,function(){t.updateCurrent(e)})},buildNavButtonHtml:function(e,t,n,o){return"<li><button id='"+e+"' class='"+t+"'><span class='"+n+"'>"+o+"</span></button></li>"},buildStatusHtml:function(e){return"<li><label><span class='co_accessibilityLabel'>"+I["default"].lookup("SC.Document.Widget.ChunkNavigation.AccessibleLabel","Go To Document Part")+'</span><input type="text" id="'+e+r["default"].ids.currentChunkStatus+'" size="1" maxlength="4"/></label> '+I["default"].lookup("SC.Document.Widget.ChunkNavigation.OfConnector","of")+' <strong id="'+e+r["default"].ids.chunkCountStatus+'">...</strong></li>'},updateCount:function(e){this.updateButtons(e)},updateCurrent:function(e){this.currentChunkStatusHtmlElement.value=this.chunkManager.GetCurrentChunk()+1;this.updateButtons(e)},updateButtons:function(e){var t=this,n=this.GetPreviousChunkButton(e),i=this.GetNextChunkButton(e),a=!1;o["default"].documentData&&o["default"].documentData.metaInformation&&o["default"].documentData.metaInformation.isLargeDocument&&(a=o["default"].documentData.metaInformation.isLargeDocument);if((a||this.chunkManager.IsLastChunkAdded())&&null==i){var s=document.createElement("ul");s.innerHTML=this.nextNav;this.navWidgetHtmlElement.appendChild(s.childNodes[0]);i=this.GetNextChunkButton(e);b["default"].AttachClickHandler(i,function(){t.ClickNext(e);return!1});t.GetNextChunkButton(e).onclick=function(){return!1}}this.updateChunkCountStatus(a);var l=r["default"].classes.disabled;0==this.chunkManager.GetCurrentChunk()?g["default"].AddClass(n,l):g["default"].RemoveClass(n,l);null!=i&&(this.chunkManager.GetCurrentChunk()==this.chunkManager.GetChunkCount()-1?g["default"].AddClass(i,l):g["default"].RemoveClass(i,l))},chunkEntryBlurHandler:function(e){this.errorInfoBox&&this.errorInfoBox.Remove();var t=b["default"].getEventSourceElement(e);t&&t.value&&(t.value=this.chunkManager.GetCurrentChunk()+1)},chunkEntryKeyPressHandler:function(e){if(b["default"].IsEnterKey(e)){var t,n,o=b["default"].getEventSourceElement(e),i=this.chunkManager.GetChunkCount(),a=!0;if(o&&o.value){t=o.value;n=Number(t);if(t.match(/^\d+$/)&&!isNaN(n)&&n>=1&&n<=i){a=!1;this.changeChunk(n-1)}}a&&this.errorInfoBox.Draw(I["default"].format("SC.Document.Widget.ChunkNavigation.BasicErrorMessage",{MaxPartNumber:i},"Please enter a number 1-".concat(i)))}else this.errorInfoBox&&this.errorInfoBox.Remove()},ClickPrevious:function(e){var t=this.GetPreviousChunkButton(e);g["default"].HasClass(t,r["default"].classes.disabled)||this.changeChunk(this.chunkManager.GetCurrentChunk()-1)},ClickNext:function(e){var t=this.GetNextChunkButton(e);g["default"].HasClass(t,r["default"].classes.disabled)||this.changeChunk(this.chunkManager.GetCurrentChunk()+1)},changeChunk:function(e){this.chunkManager.RenderChunkAt(e);this.topRegion&&b["default"].scrollToElement(this.topRegion)},updateChunkCountStatus:function(e){var t=this.chunkManager.GetChunkCount();this.chunkManager.IsLastChunkAdded()?this.chunkCountStatusHtmlElement.innerHTML=t:e&&(this.chunkCountStatusHtmlElement.innerHTML=I["default"].format("SC.Document.Widget.ChunkNavigation.FormattedEllipsis",{chunkCount:t},"".concat(t,"...")))}}),G=n("GvJ62DCo"),U=d.a.extend({init:function(e){this.documentDisplay=e},documentDisplay:null,InitializeChunking:function(e){var t=document.getElementById(r["default"].ids.document);this.createChunkManager(t);var n=document.createElement("div");n.id=r["default"].ids.chunkNavOne;var o=document.createElement("div");o.id=r["default"].ids.chunkNavTwo;e.insertBefore(n,t);e.appendChild(o,t);this.drawChunkingNavWidgets(e,n,o)},createChunkManager:function(e){if(c["default"].EnableIpad||c["default"].EnableIphone){var t=new G["default"](this.documentDisplay);O.Create(e,t.AddClickHandlersForIpad.bind(t))}else O.Create(e)},drawChunkingNavWidgets:function(e,t,n){var o=!(c["default"].EnableIpad?c["default"].EnableIpad:c["default"].EnableIphone),i=new H(o);i.SetChunkManager(p["default"].Instance);i.SetTopRegion(e);i.SetParentDiv(t);i.Draw(r["default"].texts.regionTop);var a=new H(o);a.SetChunkManager(p["default"].Instance);a.SetTopRegion(e);a.SetParentDiv(n);a.Draw(r["default"].texts.regionBottom)},LoadChunk:function(e){var t=this,n=m["default"].GetObject(r["default"].objectIds.provider);n.ContextualInfo=t.documentDisplay.ContextualInfo;var o=t.documentDisplay.ChunkSizeSuggestion;t.documentDisplay.View==s["default"].FullText&&t.documentDisplay.IsDocketsUpdate?n.GetUpdatedDocketV3(t.documentDisplay.DocumentGuid,function(n){t.loadChunkCallback(n,e)},t.loadChunkErrorCallback,e,o):t.documentDisplay.View==s["default"].PersistedDoc?n.GetPersistedDocument(t.documentDisplay.DocumentGuid,function(n){t.loadChunkCallback(n,e)},t.loadChunkErrorCallback,e,t.documentDisplay.PersistProperties.SubContentTypeId,t.documentDisplay.PersistProperties.PersistedState,t.documentDisplay.cacheScope):t.documentDisplay.IsUserDocument?n.GetUserDocument(t.documentDisplay,e,function(n){t.loadChunkCallback(n,e)},t.loadChunkErrorCallback):n.GetFullText(t.documentDisplay,e,function(n){t.loadChunkCallback(n,e)},t.loadChunkErrorCallback)},loadChunkCallback:function(e,t){var n=document.createElement("div"),o=!1;n.innerHTML=e;if(n.childNodes.length>0){o=this.hasMoreChunks(n);p["default"].Instance.AddChunk(n.firstChild,t,!1,!o);!0===o&&this.LoadChunk(t+1);this.documentDisplay.IsNewDocumentView||a()("#co_topChunkNav").removeClass("co_hideState")}},loadChunkErrorCallback:function(e,t){throw t},hasMoreChunks:function(e){var t,n=!1,o=r["default"].ids.finalChunkMarker;if(this.documentDisplay.View!==s["default"].Preview)if(e&&e.childNodes){n=!0;for(var i=(t=e.childNodes).length;i--;)if(t[i].id==o){n=!1;break}}else{n=!document.getElementById(o)}return n}}),V=n("qyx2BoG4"),j=n("XDQeQO6j"),q=n("PhzQWMwz"),K=n("yF65NEl6"),z=n("5chxY23a"),Q=n("fw8JaeZ8"),$=n("L0cfzpXt"),J=n("/BuhnsSZ"),Y=function(){};Y.prototype.GetItem=function(e,t,n){if(void 0===Q["default"].GetUserNameEncoded())throw new f["UserError"](h["default"].Foldering,"Missing username for items provider",I["default"].lookup("SC.Foldering.ItemsProvider.MissingUsernameError","Missing username for items provider"));var o="/Foldering/v4/"+Q["default"].GetUserNameEncoded()+"/items/"+e;n&&(o+="?categoryId="+n);new E["default"](h["default"].Foldering,o).Get(function(e){if(200!==e.StatusCode)throw new f["NonUserError"](h["default"].Foldering,"An error occured while retrieving item data.");var n=JSON.parse(e.ResponseText);t(n)})};Y.prototype.GetSnippetFromDataRoom=function(e,t,n,o,i,a){Object($["ValidateNotUndefined"])(Q["default"].GetUserName(),"User.GetUserName() returns undefined, this value is required.");Object($["ValidateNotUndefined"])(e,"'snippetId' is undefined, this parameter is required.");Object($["ValidateNotUndefined"])(t,"'callback' is undefined, this parameter is required.");Object($["ValidateNotUndefined"])(n,"'containerGuid' is undefined, this parameter is required.")
;Object($["ValidateNotUndefined"])(o,"'dataRoomContainerType' is undefined, this parameter is required.");Object($["ValidateNotUndefined"])(i,"'contentType' is undefined, this parameter is required.");var r=this._convertFromDataRoomContainerTypeToFolderingContainerType(o),s="/Foldering/v1/"+Q["default"].GetUserName()+"/containers/"+n+"/snippets/"+e+"?containerType="+r+"&contentType="+i;Object(J["GetRequest"])({url:s,success:t,error:function(){throw new f["NonUserError"](h["default"].Foldering,"An error occured while retrieving item data from DataRoom.")},targetAccountKey:a})};Y.prototype._convertFromDataRoomContainerTypeToFolderingContainerType=function(e){Object($["ValidateNotUndefined"])(e,"'dataRoomContainerType' is undefined, this parameter is required.");var t;if("folders"===e)t="folder";else{if("projects"!==e)throw new f["NonUserError"](h["default"].Foldering,"Illegal value for 'dataRoomContainerType' ["+e+"], legal values: 'folders', 'projects'.");t="matter"}return t};var X=Y,Z=n("DOxHd27Z"),ee=n("N3Z774cZ");function te(e,t,n){var o=new function(e){this.red={flagImage:"/images/v1/flag_red_small.png",className:"co_rFlagSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.RedFlagAltText.GridHover",{documentTitle:e},"KeyCite Red Flag for ".concat(e)),colorAbbr:"R"};this.yellow={flagImage:"/images/v1/flag_yellow_small.png",className:"co_yFlagSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.YellowFlagAltText.GridHover",{documentTitle:e},"KeyCite Yellow Flag for ".concat(e)),colorAbbr:"Y"};this.grey={flagImage:"/images/v1/flag_question_small.png",className:"co_gFlagSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.GreyFlagAltText.GridHover",{documentTitle:e},"A problem occured gathering KeyCite information for ".concat(e))};this.blueH={flagImage:"/images/v2/H_icon_sm.png",className:"co_blueHSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.BlueHAltText.GridHover",{documentTitle:e},"KeyCite History available for ".concat(e))};this.blue={flagImage:"/images/v1/flag_blue_small.png",className:"co_bFlagSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.BlueFlagAltText.GridHover",{documentTitle:e},"KeyCite Blue Flag for ".concat(e)),colorAbbr:"B"};this.green={flagImage:"/images/v2/C_icon_sm.png",className:"co_greenCSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.GreenCAltText.GridHover",{documentTitle:e},"KeyCite Citing References available for ".concat(e))};this.blueD={flagImage:"/images/v2/case_on_appeal.gif",className:"co_blueHSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.BlueHAltText.GridHover",{documentTitle:e},"KeyCite History available for ".concat(e))};this.impliedOverrulings={flagImage:"/images/v1/caution_orange_small.png",className:"co_cautionSm",altText:I["default"].format("SC.RelatedInfo.FlagInfo.OverrulingsAltText.GridHover",{documentTitle:e},"KeyCite overruling risk - negative treatment for ".concat(e))}}(t);if(n)return o["grey"];if(void 0!==e&&null!=e)switch(e.id){case"direct.history.strong":case"statute.status.repealed":case"statute.status.revoked":case"statute.status.expired":case"statute.status.spent":case"future.note.strong":case"statute.unconstitutional.strong":case"negative.indirect.history.strong":case"proposed.reg.strong":case"pending.legislation.strong":case"legislative.action.strong":case"reg.action.strong":return o["red"];case"direct.history.mild":case"negative.indirect.history.mild":case"statute.unconstitutional.mild":case"proposed.reg.mild":case"reg.action.mild":case"pending.legislation.mild":case"legislative.action.mild":case"future.note.mild":return o["yellow"];case"direct.history.pending":case"direct.history.pending-neutral":return o["blue"];case"direct.history.neutral":case"negative.indirect.history.neutral":return o["blueH"];case"case.under.appeal":return o["blueD"];case"citing.references":return o["green"];case"implied.overrulings.implied_overrulings":return o["impliedOverrulings"]}}var ne=n("G1hdlbJ8");function oe(){this.documentGuid=null;this.originationContext=null;this.docSource=null;this.rank=null;this.documentCollection=null}oe.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setDocumentCollection:function(e){this.documentCollection=e},getDocumentCollection:function(){return this.documentCollection},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setRank:function(e){this.rank=e},getRank:function(){return this.rank},setOriginationContext:function(e){this.originationContext=e},getOriginationContext:function(){return this.originationContext},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&e instanceof oe&&this.documentGuid===e.getDocumentGuid()&&this.originationContext===e.getOriginationContext()&&this.documentCollection===e.getDocumentCollection()&&(t=!0);return t}};var ie=n("kl6HJ+2T");function ae(){this.documentGuid=null;this.docSource=null;this.rank=null;this.documentCollection=null}ae.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setDocumentCollection:function(e){this.documentCollection=e},getDocumentCollection:function(){return this.documentCollection},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setRank:function(e){this.rank=e},getRank:function(){return this.rank},setFlagOriginationContext:function(e){this.flagOriginationContext=e},getFlagOriginationContext:function(){return this.flagOriginationContext},setDocLinkOriginationContext:function(e){this.docLinkOriginationContext=e},getDocLinkOriginationContext:function(){return this.docLinkOriginationContext},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&e instanceof ae&&this.documentGuid===e.getDocumentGuid()&&this.flagOriginationContext===e.getFlagOriginationContext()&&this.docLinkOriginationContext===e.getDocLinkOriginationContext()&&this.documentCollection===e.getDocumentCollection()&&(t=!0);return t}};var re=n("gbvy8oLS"),se=n("jcExJMi3"),le=n("hkcAmB/L");function de(){re["default"].call(this);this.sessionExists=!0}de.prototype=new re["default"];de.prototype.constructor=de;de.prototype.setSessionExists=function(e){this.sessionExists=e};de.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/flags",o=new se["default"];o.addParameter("docGuid",e.documentGuid);o.addParameter("detailLevel","3");o.addParameter("transitionType","Document");o.addParameter("originationContext","docHeaderSnt");var i=function(){var e=le["default"].getItem("DistinguishedByContextData");if(!ne["default"].isNotNullOrUndefined(e)){var t=C["default"].PageContextData.indexOf("(sc.Toggle)")>-1?"(sc.Default)":C["default"].PageContextData;localStorage.setItem("DistinguishedByContextData",t);e=t}return e}();ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&o.addParameter("contextData",i);var a=e.getDocSource();ne["default"].isNotNullOrUndefined(a)&&ne["default"].trim(a).length>0&&o.addParameter("docSource",a);var r=e.getRank();ne["default"].isNotNullOrUndefined(r)&&ne["default"].trim(r).length>0&&o.addParameter("rank",r);var s=e.getDocumentCollection();ne["default"].isNotNullOrUndefined(s)&&ne["default"].trim(s).length>0&&o.addParameter("novusCollection",s);var l=o.buildParametersString();ne["default"].isNotNullOrUndefined(l)&&ne["default"].trim(l).length>0&&(n+="?"+l);var d=new E["default"](h["default"].RelatedInfo,n);(c["default"].EnableIpad||c["default"].EnableIphone)&&(d.ExcludeFromActiveWebRequestCount=!0);d.SetTimeout(9e4);d.Headers.Accept="application/json";d.Get(t)};var ce=new de,ue=d.a.extend({init:function(){this.renderCompleteEventName="Cobalt.RelatedInfo.RenderSntComplete";this.parentDiv=null;this.guid=null;this.flagOriginationContext=null;this.docLinkOriginationContext=null;this.docSource=null;this.rank=null;this.documentCollection=null;this.hasBeenDrawn=!1;this.kcFlag=null;this.statuteSNTListItem=null},setParentDiv:function(e){this.parentDiv=e},setGuid:function(e){this.guid=e},setDocumentCollection:function(e){this.documentCollection=e},setFlagOriginationContext:function(e){this.flagOriginationContext=e},
setDocLinkOriginationContext:function(e){this.docLinkOriginationContext=e},setDocSource:function(e){this.docSource=e},setRank:function(e){this.rank=e},getRedFlagImageUrl:function(){return h["default"].GetUrl(h["default"].Images,"/images/v1/flag_red.png")},getYellowFlagImageUrl:function(){return h["default"].GetUrl(h["default"].Images,"/images/v1/flag_yellow.png")},getBlueFlagImageUrl:function(){return h["default"].GetUrl(h["default"].Images,"/images/v1/flag_blue.png")},getOverrulingFlagImageUrl:function(){return h["default"].GetUrl(h["default"].Images,"/images/v1/caution_orange.png")},isOverruling:function(e){return"implied.overrulings.implied_overrulings"===e.id},drawViewAllLink:function(){},draw:function(){var e=this;if(null===e.parentDiv)throw new f["CobaltError"](h["default"].RelatedInfo,"parentDiv must not be null.");if(null===e.guid)throw new f["CobaltError"](h["default"].RelatedInfo,"guid must not be null.");if(null===e.flagOriginationContext)throw new f["CobaltError"](h["default"].RelatedInfo,"flagOriginationContext must not be null.");if(null===e.docLinkOriginationContext)throw new f["CobaltError"](h["default"].RelatedInfo,"docLinkOriginationContext must not be null.");if(!e.hasBeenDrawn){e.hasBeenDrawn=!0;var t=new ae;t.setDocumentGuid(e.guid);t.setFlagOriginationContext("flagOC");t.setDocLinkOriginationContext("docLinkOC");t.setDocSource(e.docSource);t.setRank(e.rank);t.setDocumentCollection(e.documentCollection);var n=function(t){var n=t.flags;if(ne["default"].isNullOrUndefined(n)||n.length<1)return;var o=n[0].categoryId?n[0].categoryId:"",i=!0;"kcNegativeTreatment"!==o&&"kcJudicialHistory"!==o&&"OtherHistory"!==o||(i=!1);if(i)e._renderStatueSpan(t);else{(n=t.flags||[]).filter(function(t){return e.isOverruling(t)}).length?e._renderOverrulingNonStatueSpan(t):e._renderNonStatuteSpan(t)}y["default"].Publish(e.renderCompleteEventName,{})},o=a()("#co_documentFlagInfo");o.length?setTimeout(function(){n(JSON.parse(o.val()))}):ce.requestData(t,n)}},_renderFlagLink:function(e,t){var n=te(e),o=document.createElement("a"),i=document.createElement("img");o.id=t;e.link&&(o.href=e.link);if("R"===n.colorAbbr){i.alt="KeyCite Red Flag - Severe Negative Treatment";i.src=this.getRedFlagImageUrl();o.className="co_rFlagLg"}else if("Y"===n.colorAbbr){i.alt="KeyCite Yellow Flag - Negative Treatment";i.src=this.getYellowFlagImageUrl();o.className="co_yFlagLg"}else if("B"===n.colorAbbr){i.alt="KeyCite Blue Flag - Negative Treatment";i.src=this.getBlueFlagImageUrl();o.className="co_bFlagLg"}else if(this.isOverruling(e)){i.alt="KeyCite overruling risk - negative treatment";i.src=this.getOverrulingFlagImageUrl();o.className="co_cautionLg"}o.appendChild(i);return o},_renderStatueSpan:function(e){var t=e.flags,n=document.createElement("span");n.id="NegativeTreatmentWidget_"+e.docGuid;for(var i=document.createElement("ol"),a=200-30*(t.length-1),r=0;r<t.length;r++){var s=document.createElement("li"),l=t[r],d=te(l);if(0!==r){if(ne["default"].isNotNullOrUndefined(l)&&ne["default"].isNotNullOrUndefined(d)){var c=this._renderFlagLink(l,"coid_relatedInfo_SNT_Statute_kcFlag_"+r);if(o["default"].displayOptions.isNewDocumentView&&"R"===d.colorAbbr||!o["default"].displayOptions.isNewDocumentView){s.appendChild(c);if(ne["default"].isNotNullOrUndefined(l.metadata)&&ne["default"].isNotNullOrUndefined(l.metadata.staticPhrase)){(f=document.createElement("span")).className="co_relatedInfo_SNT_StaticPhrase";f.id="coid_relatedInfo_SNT_Statute_staticPhrase_"+r;f.innerHTML=l.metadata.staticPhrase;s.appendChild(f)}i.appendChild(s)}}}else if(0===r&&o["default"].displayOptions.isNewDocumentView&&"R"===d.colorAbbr||0===r&&!o["default"].displayOptions.isNewDocumentView){if(ne["default"].isNotNullOrUndefined(l.metadata)){var u=l.metadata.staticPhrase?l.metadata.staticPhrase:"";if(ne["default"].isNotNullOrUndefined(u)&&""!==u){a-=u.length;var f;(f=document.createElement("span")).className="co_relatedInfo_SNT_StaticPhrase";f.id="coid_relatedInfo_SNT_Statute_staticPhrase_"+r;f.innerHTML=u;s.appendChild(f)}var h=l.metadata.treatmentPhrase;if(ne["default"].isNotNullOrUndefined(h)&&""!==h){if(a<h.length){if(a>=0){h=h.substring(0,a);h+="..."}else h="";a=-1}else a-=u.length;var p=document.createElement("span");p.className="co_relatedInfo_SNT_TreatmentPhrase";p.id="coid_relatedInfo_SNT_Statute_treatmentPhrase";p.innerHTML=h;s.appendChild(p)}var m=l.metadata.title;if(ne["default"].isNotNullOrUndefined(m)&&""!==m){if(a<m.length){if(a>=0){m=m.substring(0,a);m+="..."}else m="";a=-1}else a-=m.length;var g=l.metadata.titleLink;if(ne["default"].isNotNullOrUndefined(g)&&""!==g){var v=document.createElement("a");v.className="co_relatedInfo_SNT_TreatmentPhrase";v.id="coid_relatedInfo_SNT_Statute_title";v.href=g;v.innerHTML=m;s.appendChild(v);this.kcFlag=l;this.statuteSNTListItem=s;this.drawViewAllLink()}else{var C=document.createElement("span");C.className="co_relatedInfo_SNT_TreatmentPhrase";C.id="coid_relatedInfo_SNT_Statute_title";C.innerHTML=m;s.appendChild(C)}}var _=l.metadata.court;if(ne["default"].isNotNullOrUndefined(_)&&""!==_){if(a<_.length){if(a>0){_=_.substring(0,a);_+="..."}else _="";a=-1}else a-=_.length;var b=document.createElement("span");b.id="coid_relatedInfo_SNT_Statute_court";b.className="co_relatedInfo_SNT_TreatmentPhrase";b.innerHTML=_;s.appendChild(b)}var y=l.metadata.liveDate;if(ne["default"].isNotNullOrUndefined(y)&&""!==y){if(a<y.length){if(a>0){y=y.substring(0,a);y+="..."}else y="";a=-1}else a-=y.length;var S=document.createElement("span");S.id="coid_relatedInfo_SNT_Statute_date";S.className="co_relatedInfo_SNT_TreatmentPhrase";S.innerHTML=y;s.appendChild(S)}}i.appendChild(s)}}n.appendChild(i);this.parentDiv.appendChild(n)},_renderOverrulingNonStatueSpan:function(e){var t=this,n=e.flags,o=document.createElement("ol");o.id="co_snt_nonStatute_negativeTreatmentList";var i={};n.forEach(function(n,a){var r=t.isOverruling(n)?"overruling":"other";if(!i[r]){i[r]=!0;var s=document.createElement("li"),l=document.createElement("span");l.id="NegativeTreatmentWidget_".concat(e.docGuid,"_").concat(a);a>0&&l.appendChild(t._renderFlagLink(n,"coid_relatedInfo_SNT_Statute_kcFlag_".concat(a)));t._renderNonStatuteFlagMetaData(n,l);s.appendChild(l);o.appendChild(s)}});this.parentDiv.appendChild(o)},_renderNonStatuteSpan:function(e){var t=e.flags[0],n=document.createElement("span");n.id="NegativeTreatmentWidget_"+e.docGuid;this._renderNonStatuteFlagMetaData(t,n);this.parentDiv.appendChild(n)},_renderNonStatuteFlagMetaData:function(e,t){if(ne["default"].isNotNullOrUndefined(e.metadata)&&t){var n=e.metadata.fileLineType,o=ne["default"].isNotNullOrUndefined(n)&&""!==n;if(!o){var i=e.metadata.subsequentDetermination;if(ne["default"].isNotNullOrUndefined(i)&&"Y"===i){var a=document.createElement("span");a.innerHTML="In Subsequent Determination, ";a.className="co_snt_subsequentDetermination";t.appendChild(a)}}var r=e.metadata.treatmentPhrase;if(ne["default"].isNotNullOrUndefined(r)&&""!==r){var s=document.createElement("span");s.innerHTML=r+" ";s.className="co_snt_treatmentPhrase";t.appendChild(s)}var l=e.metadata.appendedText;if(ne["default"].isNotNullOrUndefined(l)&&""!==l){var d=document.createElement("span");d.innerHTML=l+" ";d.className="co_snt_appendedText";t.appendChild(d)}if(o){var c=e.metadata.writDate;if(ne["default"].isNotNullOrUndefined(c)&&""!==c){var u=document.createElement("span");u.innerHTML=c+" ";u.className="co_snt_writDate";t.appendChild(u)}}else{var f=e.metadata.title;if(ne["default"].isNotNullOrUndefined(f)&&""!==f){var h=e.metadata.titleLink;if(ne["default"].isNotNullOrUndefined(h)&&""!==h){var p=document.createElement("a");p.href=h;p.innerHTML=f;t.appendChild(p);var m=document.createElement("span");m.innerHTML=", ";t.appendChild(m)}else{var g=document.createElement("span");g.innerHTML=f+", ";g.className="co_snt_shortTitle";t.appendChild(g)}}var v=e.metadata.court;if(ne["default"].isNotNullOrUndefined(v)&&""!==v){var C=document.createElement("span");C.innerHTML=v+", ";C.className="co_snt_courtLine";t.appendChild(C)}else{var _=e.metadata.citation;if(ne["default"].isNotNullOrUndefined(_)&&""!==_){var b=document.createElement("span");b.innerHTML=_+", "
;b.className="co_snt_officialCitation";t.appendChild(b)}}var y=e.metadata.liveDate;if(ne["default"].isNotNullOrUndefined(y)&&""!==y){var S=document.createElement("span");S.innerHTML=y;S.className="co_snt_dateFiled";t.appendChild(S)}if(!ne["default"].isNotNullOrUndefined(e.metadata.titleLink)){var D=document.createElement("span");D.innerHTML=" "+I["default"].lookup("SC.RelatedInfo.NegativeTreatment.BNATextNotAvailable","(TEXT NOT AVAILABLE)");D.className="co_snt_textNotAvailableForBNA";t.appendChild(D)}}}}}),fe={};var he=n("6SLFWtq5"),pe=ue.extend({drawViewAllLink:function(){if(c["default"].isIacOn("IAC-ENACTED-LEGISLATION-LINK")){var e=new function(){var e=this;e.RequestData=function(t,n){var o=!1,i=e.createKey(t);if("undefined"===fe[i]||null==fe[i]){fe[i]=[];o=!0}fe[i].push(n);if(o){var r=fe[i],s=function(e){var t=null;void 0!==e.ResponseText&&(t=a.a.parseJSON(e.ResponseText));e.ResponseText=JSON.stringify(t);a()(r).each(function(){this(e,i)});fe={}},l=new x["default"]("RelatedInfo/v1/kcValidity/enactedLegislationCount");l.addParameter("docGuid",t.docGuid);l.addParameter("contextData",C["default"].PageContextData);"undefined"!==t.docSource&&l.addParameter("docSource",t.docSource);var d=C["default"].GetResearchOrganizerOriginalContext(),c=Q["default"].GetClientMatter(),u=null,f=null,p=null;if(ne["default"].isNotNullOrUndefined(c)){u=c.ClientId;f=c.MatterId;p=c.ClientMatterSeparator}l.addParameter("originalContext",d);l.addParameter("clientId",u);l.addParameter("matterId",f);l.addParameter("matterSeparator",p);var m=l.buildUrl(),g=new E["default"](h["default"].RelatedInfo,m);g.SetTimeout(3e5);g.Headers.Accept="application/json";setTimeout(function(){g.Get(s)},1)}};e.createKey=function(e){return e.docGuid+":"+e.detailLevel}},t={docGuid:o["default"].ViewData.DocumentGuid};e.RequestData(t,this.providerCallback.bind(this))}},providerCallback:function(e){var t=a()("span#NegativeTreatmentWidget_"+this.kcFlag.metadata.docGuid);if(200!==e.StatusCode){a()("div.coid_relatedInfo_loading_spinner_div").css("display","none");t.html(he["ContentErrorMessage"]);t.css("display","")}else{var n=a.a.parseJSON(e.ResponseText);if(void 0!==n&&null!==n){if(n.enactedLegislationCount>1){var o=this.kcFlag.link,i=document.createElement("span");i.className="co_relatedInfo_SNT_TreatmentPhrase";i.id="coid_relatedInfo_SNT_Statute_title";var r=document.createElement("a");r.className="co_relatedInfo_SNT_TreatmentPhrase";r.id="coid_relatedInfo_SNT_Statute_title";r.href=o;r.innerHTML=I["default"].lookup("SC.RelatedInfo.KcStatutesAffected.ViewAllLink","View all");i.appendChild(r);this.statuteSNTListItem.appendChild(i)}}}}});function me(){this.Go=function(){if(document.getElementById(r["default"].ids.expertWitnessRTGForm)){(new function(){var e=this;this.formData=null;this.Draw=function(){var e=r["default"].texts.expertWitnessRTGFormHeader,t=r["default"].texts.expertWitnessRTGFormPhoneNumber,n=r["default"].texts.expertWitnessRTGFormCallText,o=r["default"].texts.expertWitnessRTGFormCallExtendedText,i=r["default"].texts.expertWitnessRTGFormUserName,a=r["default"].texts.expertWitnessRTGFormUserPhoneEmail,s=r["default"].texts.expertWitnessRTGFormFieldRequired,l=document.createElement("div"),d=document.getElementById(r["default"].ids.expertWitnessRTGForm);l.id="co_expertWitnessRTGFormWithinContainer";try{l.classList.add("co_excludeAnnotations")}catch(e){l.className+=" co_excludeAnnotations"}var c=[];c[c.length]='<form action="" id="mExpertRefPushEmailForm" onsubmit="return false;">';c[c.length]="<p>";c[c.length]=e;c[c.length]="</p>";c[c.length]='<div id="mExpertRefPushEmail" class="ExpertRefHookUp ExpertRefFormProfile Informational">';c[c.length]="<p>";c[c.length]=n;c[c.length]="<Strong>";c[c.length]=t;c[c.length]="</strong>";c[c.length]=o;c[c.length]="</p><ul>";c[c.length]='<li class="co_formTextSelect"><label for="co_ewCustomerName">';c[c.length]="<P><Strong>";c[c.length]=i;c[c.length]="</Strong></P>";c[c.length]='</label><input type="text" id="co_ewCustomerName" /></li>';c[c.length]='<li class="co_formTextSelect"><label for="co_ewUserContactInfo">';c[c.length]="<p><strong>";c[c.length]=a;c[c.length]="<sup>";c[c.length]=s;c[c.length]='</sup></strong></p></label><input type="text" id="co_ewUserContactInfo" /></li>';c[c.length]='<li><input type="submit" id="co_rtgForm_submit" class="co_primaryBtn" value="'+I["default"].lookup("SC.Document.ExpertRoundTableGroup.ExpertWitnessRTGFormFieldSubmit","Submit")+'" /></li>';c[c.length]="</ul></form>";c[c.length]='<div id="formSubmissionInfoBox"></div>';l.innerHTML=c.join("");d.parentNode.appendChild(l);this.AttachSubmitClick(this)};this.AttachSubmitClick=function(){var t="/Document/v1/RTGFormEmail/Submission?";a()("#co_rtgForm_submit").click(function(){if(""==a()("#co_ewUserContactInfo").val()){var n=I["default"].lookup("SC.Document.ExpertWitnessRTGForm.EmptyPhoneEmailField","Please enter Email/Phone.");e.displayUserMessage(n,F["default"].Failure);return}e.formData=document.getElementById("co_expertWitnessRTGForm").value;var o=[];o=e.formData.split("|");var i=document.getElementById("co_ewCustomerName").value,s=document.getElementById("co_ewUserContactInfo").value;C["default"].PageContextData&&(t+=r["default"].queryParameters.contextData+"="+C["default"].PageContextData);var l=new E["default"](h["default"].Document,t);l.Headers[r["default"].headers.contentTypeHeader]=r["default"].headers.contentTypeJsonRequest;this.ContextualInfo&&(l.Headers[r["default"].headers.contextualInfoHeader]=this.ContextualInfo.toString());var d=l.SynchronousPost(JSON.stringify({expertWitnessName:o[0],expertWitnessLocation:o[1],expertWitnessGuid:o[2],userName:escape(i),userContactInfo:escape(s)}));if(d.TimedOut||200!=d.StatusCode){var c="Request failed: "+d.ResponseText+". Status code: "+d.StatusCode+".";new f["NonUserError"](h["default"].Document,c);return}var u=I["default"].lookup("SC.Document.ExpertWitnessRTGForm.EmailSentSuccessfully","Email sent successfully.");e.displayUserMessage(u,F["default"].Success);a()("#mExpertRefPushEmailForm")[0].reset()})};this.displayUserMessage=function(e,t){new M["default"](a()("#formSubmissionInfoBox")[0],t,"bottom",!0,!0,!0).Draw(e)}}).Draw()}};this.EmailAddressIsValid=function(e){var t=!1;-1!=e.search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)&&(t=!0);return t}}var ge=n("xTTYDesR"),ve=n("Bx16oQjF"),Ce=n("HyBIgqjG"),_e=n("Rq7nPsD6");function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(){this.pdfFileUrl=null;this.xmlDescription=null;this.originalDocId=null;this.document=null;this.lightbox=null;this.docTitle=null;this.docDescription=null;this.numberOfParts=0;this.pdfParts=[];this.classes={dialogWindowClass:"co_documentMultiPartPdfDialogClass",ViewButton:"co_tbButton"};this.ids={dialogWindowId:"co_documentMultiPartPdfDialogId"};this.messages={dialogWindowTitle:I["default"].lookup("SC.Document.MultiPartPdfManager.DialogWindowTitle","Please wait! Processing the request..."),dialogWindowErrorTitle:I["default"].lookup("SC.Document.MultiPartPdfManager.DialogWindowErrorTitle","Processing failed!"),generalErrorMessage:I["default"].lookup("SC.Document.MultiPartPdfManager.GeneralErrorMessage","Failed to process the PDF document."),lightboxInitializationError:"Cobalt.Widget.StyledLightbox widget failed to render while attempting to create the reading mode display options lightbox.",missingUrlError:I["default"].lookup("SC.Document.MultiPartPdfManager.MissingUrlError","The URL to the XML document with PDF parts description is missing!"),failedToParseXmlError:I["default"].lookup("SC.Document.MultiPartPdfManager.FailedToParseXmlError","Unable to retrieve PDF details from the court. Please try again later."),failedToPopulateDialogBadXmlError:I["default"].lookup("SC.Document.MultiPartPdfManager.FailedToPopulateDialogBadXmlError","Error translating PDF response"),unavailablePDFImage:I["default"].lookup("SC.Document.MultiPartPdfManager.UnavailablePDFImage","Requested image unavailable from court website")}}ye.prototype={ShowMultiPartPdfLightbox:function(){
Se.HideLightbox();try{Se.lightbox=new ve["default"];Se.lightbox.SetId(Se.ids.dialogWindowId);Se.lightbox.SetClass(Se.classes.dialogWindowClass);Se.lightbox.SetCloseLinkObject({alt:"Close the Multi-Part PDF window",onclick:function(){Se.HideLightbox()}});Se.lightbox.SetTitle(Se.messages.dialogWindowTitle);Se.lightbox.GetContentDomElement().innerHTML='<span class="co_loading"></span>';Se.lightbox.Draw()}catch(e){k["default"].WidgetFailure(Se.messages.lightboxInitializationError,!1)}},HideLightbox:function(){if(null!=Se.lightbox){Se.lightbox.Remove();Se.lightbox=null;Se.xmlDescription=null;Se.pdfParts.length=0}},IsPdfSealed:function(e){return e.indexOf("<code>8001</code>")>=0},GetXMLDescriptionOfMultiPartPdf:function(e){if(null==e||""===e)Se.ShowErrorMessage(Se.messages.missingUrlError);else{var t=e.replace(/\.pdf(?!.*\.pdf)/,".json");t=t.replace(".tiff",".json","gi");a.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:t,dataType:"json",success:function(t){try{var n=a.a.parseJSON(t.ResponseData),o=n.xmlResponse;if(void 0===be(o)||null==o||Se.IsPdfSealed(o)){var i=e;"image/tiff"===n.mimeType&&(i=i.replace(/\.pdf/gi,".tiff"));var r=n.persistId,s=n.persistChecksum,l=n.totalPagecount,d=n.billablePagecount,c=n.acquisitionGuid;void 0!==be(r)&&null!=r&&(i=i+"&docpersistid="+r);void 0!==be(s)&&null!=s&&(i=i+"&persistchecksum="+s);void 0!==be(o)&&null!=o&&(i=i+"&ispdfsealed="+Se.IsPdfSealed(o));void 0!==be(l)&&null!=l&&(i=i+"&totalpagecount="+l);void 0!==be(d)&&null!=d&&(i=i+"&billablepagecount="+d);void 0!==be(c)&&null!=c&&(i=i+"&acquisitionguid="+c);Se.HideLightbox();Ce["default"].PageTransition(i,!0)}else{Se.xmlDescription=o;Se.PopulateDialog()}}catch(e){Se.ShowErrorMessage(Se.messages.failedToParseXmlError)}},error:function(){Se.ShowErrorMessage(Se.messages.unavailablePDFImage)}})}},BuildUrlToPdfDocument:function(e){var t=a()(e).children().get(0),n=a()(t).attr("key"),o=n.substr(0,n.indexOf(";")).replace("|",",");return Se.pdfFileUrl.replace(Se.originalDocId,o).replace("&isFromBatchDownload=true","")},GetOriginalDocumentId:function(){var e=Se.pdfFileUrl.lastIndexOf("/"),t=Se.pdfFileUrl.substr(0,e);e=t.lastIndexOf("/");return t.substr(e+1)},GetPartDescription:function(e){return""!=e?e:"Description not provided by the court."},PopulateDialog:function(){try{var e=a.a.parseXML(Se.xmlDescription);Se.originalDocId=Se.GetOriginalDocumentId();Se.docTitle=a()(e).find("doc_title").text();Se.docDescription=a()(e).find("doc_description").text();Se.numberOfParts=a()(e).find("parts_total").text();a()(e).find("download_parts").find("part").each(function(){var e={number:"",description:"",pages:"",url:"",localImageGuid:""};e.number=a()(this).find("part_number").text();e.description=Se.GetPartDescription(a()(this).find("part_description").text());e.pages=a()(this).find("part_pages").text();e.url=Se.BuildUrlToPdfDocument(a()(this).find("part_url"));e.localImageGuid=a()(this).find("localImageGuid").text();Se.pdfParts.push(e)});var t="View PDF Parts ("+Se.numberOfParts+")";Se.batchDownload&&(t+=" - Batch Download");Se.lightbox.SetTitle(t);Se.lightbox.GetContentDomElement().innerHTML=Se.GenerateMultiPartPdfHTML();Se.AddFooterButtons()}catch(e){Se.ShowErrorMessage(Se.messages.failedToPopulateDialogBadXmlError)}},ShowErrorMessage:function(e){try{Se.lightbox.SetTitle(Se.messages.dialogWindowErrorTitle);var t=new A["default"](Se.lightbox.GetContentDomElement(),!1,!1,Se.messages.generalErrorMessage);t.SetListItemIdPrefix("coid_deliveryOptionsErrorMessage");t.Draw();t.SetHiddenMessage(e);_e["default"].ConsoleMessage(e,_e["default"].Level.Error,"Cobalt.Website.ErrorSummaryWidget.ProcessingError")}catch(e){_e["default"].ConsoleMessage("Error creating Cobalt.Widget.ErrorsSummary widget: "+e,_e["default"].Level.Error,"Cobalt.Website.ErrorSummaryWidget.ProcessingError");k["default"].WidgetFailure("Cobalt.Widget.ErrorsSummary widget failed to render.",!1)}},GenerateMultiPartPdfHTML:function(){return'<div class="co_document co_dockets">\n\t\t\t\t\t<h2 class="co_docketsHeading">'.concat(this.docTitle,'</h2>\n\t\t\t\t\t<table id="tbl_pdfParts" class="co_docketsTable">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colspan=2>').concat(I["default"].lookup("SC.Document.MultiPartPdfManager.Description","DESCRIPTION"),'</th>\n\t\t\t\t\t\t\t\t<th width="100px">').concat(I["default"].lookup("SC.Document.MultiPartPdfManager.Part","PART"),'</th>\n\t\t\t\t\t\t\t\t<th width="100px">').concat(I["default"].lookup("SC.Document.MultiPartPdfManager.Pages","PAGES"),'</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan="4">').concat(this.docDescription,"</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t").concat(this.pdfParts.map(function(e){return Se.AddPdfPartInfo(e)}).join(""),"\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t   </div>")},AddPdfPartInfo:function(e){return'<tr>\n\t\t\t\t\t<td style="border-right:0;">'.concat(e.description,'</td>\n\t\t\t\t\t<td width="130px">').concat(Se.AddGreenCarat(e),'\n\t\t\t\t\t\t<a href="').concat(e.url,'" target="_blank" class="co_blobLink co_tbButton co_pdfButton" style="margin-bottom:0;">\n\t\t\t\t\t\t\t<span class="icon25 icon_pdf-blue"></span>\n\t\t\t   \t\t\t\t').concat(I["default"].lookup("SC.Document.MultiPartPdfManager.View","View"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<strong>").concat(e.number,"</strong>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<strong>").concat(e.pages,"</strong>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>")},AddGreenCarat:function(e){return Object(u["IsNotNullOrEmpty"])(e.localImageGuid)?'<div class="co_relative"> <a title="'.concat(I["default"].lookup("SC.Document.MultiPartPdfManager.PdfStatus","Stored PDF"),'" class="co_docketStatus active">\n\t\t\t  ').concat(I["default"].lookup("SC.Document.MultiPartPdfManager.DocketStatus","Docket Status"),"</a></div>"):""},AddFooterButtons:function(){var e=Se.lightbox.GetFooterDomElement(),t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("input");o.setAttribute("type","submit");o.setAttribute("class","co_primaryBtn");o.id="co_multipartPdfDialogCloseButton";o.value="Close";o.onclick=function(){Se.HideLightbox()};n.appendChild(o);t.setAttribute("class","co_overlayBox_optionsBottom");t.appendChild(n);e.appendChild(t)},Draw:function(e){a()("#coid_website_documentWidgetDiv")&&!this._document&&(this.document=a()("#coid_website_documentWidgetDiv"));this.ShowMultiPartPdfLightbox();null!=this.xmlDescription?this.PopulateDialog():this.GetXMLDescriptionOfMultiPartPdf(e)}};var Se=new ye;function De(e){if(function(){var e=window.open(null,"","width=100,height=100");try{e.close();return!1}catch(e){return!0}}())Ce["default"].PageTransition(e,!0);else if(function(e){var t=C["default"].Parse(e).QueryString["localImageGuid"];return Object(u["IsNotNullOrEmpty"])(t)}(e))Ce["default"].PageTransition(e,!0);else{Se.pdfFileUrl=e;Se.Draw(e)}}var Te=n("qX+i1Yp3"),we=n("qC2DXFt0"),Ie=d.a.extend({init:function(e,t,n){var o=this;this._lightbox=new ve["default"];this._lightbox.SetId("matterTemplatesBox");this._lightbox.SetClass("co_wide");this._lightbox.SetTitle(e);a()(this._lightbox.GetContentDomElement()).html(t);this._lightbox.SetCloseLinkObject({alt:I["default"].lookup("SC.Website.MatterTemplates.CloseButton","Close"),onclick:function(){o._lightbox&&o._lightbox.Remove()}});n&&Object(we["postUXEvent"])("Cobalt.Website.MatterTemplates.Viewed",n)},showLightbox:function(){this.createFooter(this._lightbox.GetFooterDomElement());this._lightbox.Draw();this.attachEvents()},createFooter:function(e){a()(e).empty();var t=a()("<input>",{id:"co-matterTemplates-cancel",class:"co_primaryBtn",type:"button",value:I["default"].lookup("SC.Website.MatterTemplates.CloseButton","Close")});a()("<div/>").append(a()("<ul/>").append(a()("<li/>").append(t))).appendTo(e)},attachEvents:function(){var e=this;a()("#co-matterTemplates-cancel").click(function(){e._lightbox&&e._lightbox.Remove()})}}),Ee=d.a.extend({init:function(){this.eventQueue=new S["default"];this.Headnote.SetUpdateCitedCaseReferenceCounts(!0);this.Footnote=new w["default"];this.DraggableController=Object(D["default"])()
;ge["default"].Instance=this;y["default"].Publish(r["default"].events.documentDisplayReady,new y["default"].Message({}));var e=this;y["default"].Subscribe(r["default"].events.containsInlineNotes,function(){e.toggleHasInlineNotes()});y["default"].Subscribe(r["default"].events.noInlineNotes,function(){e.toggleHasInlineNotes()});this.eventQueueDockReadySubscription=this.eventQueue.Subscribe(r["default"].events.dockReady,function(t,n,o){e.dockReadyEventCallback(t,n,o)})},snippetRelocationInfo:null,eventQueue:null,sntWidgetRenderSubscription:null,documentNavigation:null,DocumentGuid:null,DomId:null,View:null,UrmId:null,ContextualInfo:null,TermNavigationState:null,ChunkSizeSuggestion:null,ChunkableHeadnotes:!1,DoCompleteSizeChecking:!0,FinishedRendering:!1,IsPersistedView:!1,IsDocketsUpdate:!1,NavigationProperties:{},PersistProperties:{},SearchWithinProperties:{},WebsiteProperties:{},FeatureConfigurations:{},Headnote:new N,Footnote:null,DraggableController:null,IsUserDocument:!1,ContainerId:null,ContainerType:null,AccountKey:null,DisableKeyCiteSnt:!1,DisableKeyCiteSntText:!1,InlineWarningView:!1,IsNewDocumentView:!1,DisableDocToolbar:!1,DocumentSections:[],SecureContentHash:null,HasDraftingNotes:!1,HasDocumentSections:!1,RulebookMode:!1,RulebookModeContent:!1,SetDocumentGuid:function(e){this.DocumentGuid=e;this.Headnote.SetDocumentGuid(this.DocumentGuid)},SetDomId:function(e){this.DomId=e},SetView:function(e){e&&(e=e.toLowerCase());this.View=e;this.IsPersistedView&&this.View==s["default"].FullText&&(this.View=s["default"].PersistedDoc)},SetNavigationProperties:function(e){this.NavigationProperties=e},SetPersistProperties:function(e){this.PersistProperties=e;this.IsPersistedView=null!=this.PersistProperties.PersistedDocumentGuid&&null!=this.PersistProperties.Checksum&&null!=this.PersistProperties.SubContentTypeId;this.IsPersistedView&&this.View==s["default"].FullText&&(this.View=s["default"].PersistedDoc)},SetWebsiteProperties:function(e){this.WebsiteProperties=e},SetSearchWithinProperties:function(e){this.SearchWithinProperties=e},SetFeatureConfigurations:function(e){this.FeatureConfigurations=e},SetUrmId:function(e){this.UrmId=e},SetContextualInfo:function(e){this.ContextualInfo=e},SetTermNavigationState:function(e){this.TermNavigationState=e},SetIsDocketsUpdate:function(e){this.IsDocketsUpdate=e},SetDisableKeyCiteSnt:function(e){this.DisableKeyCiteSnt=e},SetDisableKeyCiteSntText:function(e){this.DisableKeyCiteSntText=e},SetInlineWarningView:function(e){this.InlineWarningView=e},SetIsNewDocumentView:function(e){this.IsNewDocumentView=e},SetDisableDocToolbar:function(e){this.DisableDocToolbar=e},SetDocumentSections:function(e){this.DocumentSections=e},SetSecureContentHash:function(e){this.SecureContentHash=e},SetHasDraftingNotes:function(e){this.HasDraftingNotes=e},SetHasDocumentSections:function(e){this.HasDocumentSections=e},SetRulebookMode:function(e){this.RulebookMode=e},SetRulebookModeContent:function(e){this.RulebookModeContent=e},Configure:function(e){var t,n;for(t in e){n=e[t];Object(u["AreSame"])(t,"chunkSize")?this.setChunkSize(n):Object(u["AreSame"])(t,"chunkableHeadnotes")?this.setChunkableHeadnotes(n):Object(u["AreSame"])(t,"snippetRelocationInfo")?this.setSnippetRelocationInfo(n):Object(u["AreSame"])(t,"doCompleteSizeChecking")?this.setDoCompleteSizeChecking(n):Object(u["AreSame"])(t,"isNewDocumentView")?this.SetIsNewDocumentView(n):Object(u["AreSame"])(t,"disableDocToolbar")&&this.SetDisableDocToolbar(n)}},setChunkSize:function(e){if(e){var t,n=!1,o={small:"S",medium:"M",large:"L"};for(t in o)if(o[t]==e){n=!0;break}n?this.ChunkSizeSuggestion=e:new f["NonUserError"](h["default"].Document,"Invalid chunk size suggestion made: "+e)}},setChunkableHeadnotes:function(e){if(!0===e||!1===e){this.ChunkableHeadnotes=e;this.Headnote.SetChunkableHeadnotes(this.ChunkableHeadnotes||(c["default"].EnableIpad?c["default"].EnableIpad:c["default"].EnableIphone))}else new f["NonUserError"](h["default"].Document,"Value passed for chunkable headnotes configuration must be a Boolean: "+e)},setSnippetRelocationInfo:function(e){if(e&&Object(u["IsNotNullOrEmpty"])(e.snippetId)){Object(u["IsNullOrEmpty"])(e.categoryId)&&(e.categoryId=null);this.snippetRelocationInfo=e}},setDoCompleteSizeChecking:function(e){!0===e||!1===e?this.DoCompleteSizeChecking=e:new f["NonUserError"](h["default"].Document,"Value passed for doing complete size checking configuration must be a Boolean: "+e)},Draw:function(){var e=this;this.RenderDocumentContent();Object(v["AttachPageUpDownKeyEventHandlers"])(function(){return e.calculatePageHeight()})},calculatePageHeight:function(){var e=r["default"].ids,t=[document.getElementById(e.websiteHeader),document.getElementById(e.documentFixedHeader),document.getElementById(e.documentPrimaryTabNavigationContainer),document.getElementById(e.documentToolbar)];return a()(window).height()-Object(v["GetLargestHeightFromTop"])(t)},RenderDocumentContent:function(){var e,t=r["default"].ids;if(document.getElementById(t.documentUnavailable))this.postRender();else{var n=this.CreateDocDisplayChunking(this),o=n.hasMoreChunks();this.checkIfChunkingNeeded(o,n);this.postRender();if(this.scrollableContent()){var i=(e={},function(t,n,o){o||(o="Don't call this twice without a uniqueId");e[o]&&clearTimeout(e[o]);e[o]=setTimeout(t,n)}),s=this;a()(window).bind("resize",function(){i(function(){s.scrollableContent()},150,"scrollableContent")})}o&&n.LoadChunk(1)}},checkIfChunkingNeeded:function(e,t){if(e){var n=document.getElementById(this.DomId);t.InitializeChunking(n)}},isContentScrollable:function(){var e=r["default"].ids,t=r["default"].classes,n=document.getElementById(e.preformattedText);return a()("body").hasClass(t.scrollableDocument)||null!=n&&"true"==n.value||a()(t.document+", .co_contentTypeEdgar").length>0||a()(t.document+", .co_contentTypePrivateEquityFunds").length>0||a()(t.document+", .co_peDeals").length>0||a()(t.document+", .co_contentTypeLocatePrecedentAgreements").length>0},scrollableContent:function(){var e=r["default"].ids,t=r["default"].classes;if(this.isContentScrollable()){var n=a()(window).height(),o=a()("#"+e.websiteWidgetDiv).offset().top,i=a()("#"+e.documentFooter).outerHeight(!0);0===i&&(i=73);a()("#"+e.websiteWidgetDiv).css("height",n-o-i);a()("body").hasClass(t.scrollableDocument)||a()("body").addClass(t.scrollableDocument);if(a()("."+t.genericDocumentToc).length>0){var s=a()("."+t.genericDocumentTocInner).offset().top+parseFloat(a()("."+t.genericDocumentTocInner).css("border-bottom-width"))+parseFloat(a()("."+t.genericDocumentTocInner).css("border-top-width")),l=a()("."+t.tocFooter).outerHeight(!0)+parseFloat(a()("."+t.genericDocumentToc).css("padding-bottom"))+i+(parseFloat(a()("."+t.genericDocumentTocInner).css("padding-top"))+parseFloat(a()("."+t.genericDocumentTocInner).css("padding-bottom")));n=a()(window).height();a()("."+t.genericDocumentTocInner).css("height",n-s-l)}return!0}return!1},postRender:function(){var e=this;this.renderComplete();this.FinishedRendering=!0;if(this.View===s["default"].Preview&&!this.InlineWarningView)return;this.getUserPreferencesAndExecuteTasks();var t=m["default"].GetObject(r["default"].objectIds.documentDisplayEventHandlers);t.documentDisplay=this;if(!c["default"].EnableIpad&&!c["default"].EnableIphone){this.initializeSelectedTextMenuWidget();this.Footnote.InitializeFootnotesHover();t.AddImageEventHandlers();t.AttachDocumentLinkClickHandlers();t.AttachDocumentLinkMouseOverHandlers()}this.eventQueue.PublishEventsAndActivateSubscriptions();if(null!=p["default"].Instance){c["default"].EnableIpad||c["default"].EnableIphone||y["default"].Subscribe(r["default"].events.chunkRendered,function(){e.DraggableController.initializeDraggables()});y["default"].Subscribe(r["default"].events.lastChunkAdded,function(){e.xmlDocumentLoaded()})}else{if(c["default"].EnableIpad||c["default"].EnableIphone){var n=document.getElementById(r["default"].ids.document);n&&t.AddClickHandlersForIpad(n)}this.xmlDocumentLoaded()}y["default"].Subscribe(r["default"].events.tocInformationRetrieved,function(t,n,o){e.tocDataReadyCallback(t,n,o)})
;!1!==this.IsPersistedView||this.IsDocketsUpdate||!1!==this.DisableKeyCiteSnt||this.displayKeyCiteSntWidget();null==this.snippetRelocationInfo&&t.ProcessInternalLink();this.documentNavigation=new V["default"];y["default"].Subscribe(r["default"].events.billingSuspended,function(){a()("html").addClass("co_overflowHidden")});if(this.documentNavigation.hasLoadedData)this.showMessageIfNeeded();else{var o=r["default"].events.docNavDataIsReady;y["default"].Subscribe(o,function(){e.showMessageIfNeeded()});this.documentNavigation.FetchNextPreviousData(e.NavigationProperties.ListSource,e.NavigationProperties.NavigationPath,e.NavigationProperties.List,e.NavigationProperties.Rank)}e.IsUserDocument&&a()("body style").each(function(){a()(this).appendTo(a()("html > head"))});if(document.getElementById(r["default"].ids.expertWitnessProfile)){(new me).Go()}a()("#co_document").on("click","a.xslPauseSessionOnClick",function(){k["default"].ViewData.FeatureConfigurations["BLOCKSESSIONPAUSEDISPLAY"]||Object(Z["website_ShowResumeResearchLightbox"])("pause",!0)});a()("#co_document").on("click","a.xslLinkoutShowLightboxOnClick",function(){var e=a()(this).data("external-url"),t=a()(this).data("external-title");Object(Z["website_LinkoutAndShowTimeoutLightboxExternalWithoutRefresh"])(e,t)});a()("#co_document").on("click","a.xslShowMultiPartPdfOnClick",function(){var e=a()(this).data("pdf-link");e&&De(e)});a()(".co-TaskBoard-listItem").on("click",function(){var e=a()(this).children(".co-TaskBoard-taskTitle",this).html(),t=a()(this).children(".co-TaskBoard-listItemTitle",this).html(),n=a()(this).children(".co-TaskBoard-resources",this);n.length>0&&(t+=n.html());new Ie(e,t,{title:e}).showLightbox()});a()(".co-TaskBoard-header a").on("click",function(){var e=a()(this).parents(".co-TaskBoard-column"),t=e.find(".co-TaskBoard-shortTitle a").html()||"",n=e.find(".co-TaskBoard-title").html()||"";n+=e.children(".co-TaskBoard-header").next(".co-TaskBoard-resources").html()||"";new Ie(t,n,{title:t}).showLightbox()});a()("#co_document").on("click","a#co-staticTemplates-abstract-showMore",function(){var e=a()("#co-staticTemplates-abstract-fullText > div").html();new Ie("Overview",e).showLightbox()});(new Te["default"]).Draw()},initializeSelectedTextMenuWidget:function(){var e=m["default"].GetObject(r["default"].objectIds.widget$SelectedTextMenu);e.Initialize(this.DomId,this.DocumentGuid);e.Draw()},renderComplete:function(){var e=this,t=new T["default"];t.ContextualInfo=e.ContextualInfo;t.GetMetaInformation(e.DocumentGuid,function(t){e.metaInfoRetrieved(t)},function(t){e.metaInfoRetrieved(t)},this.IsUserDocument)},metaInfoRetrieved:function(e){K["default"].metaInfo=e;z["default"].metaInfo=e;q["default"].metaInfo=e;b["default"].publishHubEvent(r["default"].events.documentRenderComplete,this,null,e)},checkForLowercaseLAndO:function(e){var t=document.getElementById(e);t.hasChildNodes()&&this.searchForLowercaseLAndONextToNumber(t.childNodes,0)},searchForLowercaseLAndONextToNumber:function(e,t){var n=/[0-9]+[ol]+/;if(e){var o=e[t];o.hasChildNodes()?this.searchForLowercaseLAndONextToNumber(o.childNodes,0):"#text"===o.nodeName&&o.nodeValue.search(n)>=0&&this.addBoldAndItalics(o.parentNode,o,n);t<e.length-1&&this.searchForLowercaseLAndONextToNumber(e,t+1)}},addBoldAndItalics:function(e,t,n){var o=t.nodeValue,i=o.match(n);if(null!==i){var a=(i=i[0]).search("o")>=0?"o":"l",r=document.createElement("strong"),s=document.createElement("em"),l=document.createTextNode(""),d=o.indexOf(i)+i.indexOf(a),c=i.lastIndexOf(a)-i.indexOf(a)+1,u=document.createTextNode(o.substring(0,d));l=document.createTextNode("");for(var f=0;f<c;f++)l.nodeValue+=a;s.appendChild(l);r.appendChild(s);var h=document.createTextNode(o.substring(d+c));e.insertBefore(u,t);e.insertBefore(r,t);e.insertBefore(h,t);e.removeChild(t)}},tocDataReadyCallback:function(e,t){var n=t.Data.tocInfo.flyoutXhtml;n&&this.markupDocumentPrelimNodes(n);var o=t.Data.tocInfo.tocNode;o&&this.markupBrowseAllPrelimNodes(o);this.checkForLowercaseLAndO(r["default"].ids.document);this.checkForLowercaseLAndO(r["default"].ids.docHeaderTitle);y["default"].Publish("Cobalt.Document.TOC.Rendered")},markupBrowseAllPrelimNodes:function(){},markupDocumentPrelimNodes:function(e){if(!e||null==e||e.length<=0)return;var t=document.getElementById(r["default"].ids.prelimGoldenLeaf);if(!t||null==t)return;var n=[],o=document.createElement("div");o.innerHTML=e;var i=g["default"].GetElementsByClassName(r["default"].classes.activeClass,"li",o)[0].parentNode,a=0,s=null,l=null;while("LI"===i.parentNode.nodeName.toUpperCase()){if(!(s=i.parentNode).childNodes[0].href)break;l=s.childNodes[0].href;n[a]=l;a++;i=s.parentNode}if(a>0){var d=t,c=null;a=0;while(d.className.indexOf(r["default"].classes.headText)>-1){c=d.parentNode;if(null==n[a])break;for(var u=0,f=d.childNodes.length;u<f;u++){var h=d.childNodes[u];if("A"===h.nodeName.toUpperCase()||"DIV"===h.nodeName.toUpperCase())continue;var p=document.createElement("a");p.href=n[a];p.className=r["default"].classes.prelimNodeLink;var m=h.parentNode.replaceChild(p,h);p.appendChild(m)}a++;-1==(d=c).className.indexOf(r["default"].classes.headText)&&(d=c.parentNode)}}this.SuperBrowse(e)},IsSuperBrowseSupportedFeature:function(){var e=a.a.inArray(K["default"].metaInfo.ContentType,["Statutes","Regulations"])>-1,t=K["default"].metaInfo.metaInformation.isRefsAndAnnos,n=k["default"].IsSupportedFeature("SuperBrowse");return e&&!t&&n},SuperBrowse:function(e){if(!this.IsSuperBrowseSupportedFeature())return;var t=a()("#"+r["default"].ids.prelimGoldenLeaf);if(t.length){var n=a()(t[0]).children("a[href]");if(n.length<1)return;var o=C["default"].Parse(n[0].href);o.Path=o.Path.replace("/Browse/","/SuperBrowse/");o.QueryString["transitionType"]="SuperBrowse1";o.QueryString["docguid"]=this.DocumentGuid;a()(n[0]).before('<a class="co_excludeAnnotations icon25 icon_superbrowse" href="'+C["default"].Absolute(o)+'">'+I["default"].lookup("SC.Document.DocumentDisplay.SuperBrowse.LinkText","SuperBrowse")+"</a>");t.append("<div id='superBrowseToc' class='co_hideState'>"+e+"</div>");if(a()("div#superBrowseToc").find(".co_active").parentsUntil("ul#co_docTocOverlay_list").length>6&&(n=a()(t.parent()[0]).children("a[href]")).length){(o=C["default"].Parse(n[0].href)).Path=o.Path.replace("/Browse/","/SuperBrowse/");o.QueryString["transitionType"]="SuperBrowse2";o.QueryString["docguid"]=this.DocumentGuid;a()(n[0]).before('<a class="co_excludeAnnotations icon25 icon_superbrowse" href="'+C["default"].Absolute(o)+'">'+I["default"].lookup("SC.Document.DocumentDisplay.SuperBrowse.LinkText","SuperBrowse")+"</a>")}a()("#superBrowseToc").remove()}},_renderReadingModeCitatorFlag:function(e){var t=document.createElement("div");t.id=r["default"].ids.readingModeCitatorFlag;var n=e.innerHTML,o=e.children;o.length>1&&(n=o[0].outerHTML);t.innerHTML=n;var i=a()(t).find("a");i.attr("href")&&i.attr("href",function(){return this.href.replace("originationContext=docHeaderFlag","originationContext="+r["default"].texts.docHeaderSntTitleFlagOriginationContext)});return t},displayKeyCiteSntWidget:function(){var e,t,n,o,i=this;if(!(e=document.getElementById(r["default"].ids.docHeaderCitatorFlag))||0==a()(e).find("img").length)return;(t=document.getElementById(r["default"].ids.keyCiteFlagPlaceHolder))||(t=g["default"].GetElementsByClassName(r["default"].classes.document,"div",null)[0])&&(t=t.firstChild);if(t){(n=document.createElement("div")).id=r["default"].ids.readingModeKC;n.className=r["default"].classes.keyCiteFlagWidgetContainer+" "+r["default"].classes.hideState+" "+r["default"].classes.highlightingExcludeAnnotations;n.appendChild(i._renderReadingModeCitatorFlag(e));(o=document.createElement("div")).id=r["default"].ids.readingModeNegativeTreatment;n.appendChild(o);t.parentNode.insertBefore(n,t);if(!1===this.DisableKeyCiteSntText){i.sntWidgetRenderSubscription=y["default"].Subscribe(r["default"].events.sntWidgetRendered,function(e,t,n){i.unhideReadingModeCitatorArea(e,t,n)});(function(e,t,n,o,i,a){var r=new pe;r.setParentDiv(e);r.setGuid(t);r.setFlagOriginationContext(n);r.setDocLinkOriginationContext(o);r.setDocSource(i);r.setRank(a);r.draw()
})(o,i.DocumentGuid,r["default"].texts.docHeaderSntTitleFlagOriginationContext,r["default"].texts.docHeaderSntTitleOriginationContext,i.WebsiteProperties.DocSource,i.NavigationProperties.Rank)}else g["default"].RemoveClass(n,r["default"].classes.hideState)}},unhideReadingModeCitatorArea:function(){var e;if(e=document.getElementById(r["default"].ids.readingModeKC)){g["default"].RemoveClass(e,r["default"].classes.hideState);y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))}if(this.sntWidgetRenderSubscription){y["default"].Unsubscribe(this.sntWidgetRenderSubscription);this.sntWidgetRenderSubscription=null}},showMessageIfNeeded:function(){if(this.documentNavigation.hasMessage){var e=document.getElementById(this.DomId);if(null!=e){var t=document.createElement("div");e.insertBefore(t,e.childNodes[0]);var n=new A["default"](t);n.Draw();n.SetMessage(this.documentNavigation.message)}}},getUserPreferencesAndExecuteTasks:function(){var e=[new _["default"].Id("Document",r["default"].prefs.headnotesDualColumnViewPref),new _["default"].Id("Document",r["default"].prefs.hideHeadnotesBoxPref)],t=this;_["default"].GetMultiple(e,function(e){t.getUserPreferencesSuccessCallback(e)},function(e){t.getUserPreferencesFailedCallback(e)})},getUserPreferencesSuccessCallback:function(e){var t=new _["default"].Id("Document",r["default"].prefs.headnotesDualColumnViewPref),n=new _["default"].Id("Document",r["default"].prefs.hideHeadnotesBoxPref),o={headnotesDualColumnView:e[t],hideHeadnotesBox:e[n]};this.executePreferenceRequiredTasks(o)},getUserPreferencesFailedCallback:function(){this.executePreferenceRequiredTasks({headnotesDualColumnView:!1,hideHeadnotesBox:!1})},executePreferenceRequiredTasks:function(e){this.Headnote.InitializeHeadnotesForUser(e)},CreateDocDisplayChunking:function(e){return new U(e)},CreateDocDisplayHighlighting:function(e){return new j["default"](e)},xmlDocumentLoaded:function(){var e=null,t=null;(this.FeatureConfigurations.FOLDERS||this.FeatureConfigurations.ANNOTATIONS)&&(t=(e=this.CreateDocDisplayHighlighting(this)).InitializeHighlightingFunctionality());if(!c["default"].EnableIpad&&!c["default"].EnableIphone&&this.FeatureConfigurations.FOLDERS&&null!=this.snippetRelocationInfo){var n=new X;this.snippetRelocationInfo.containerGuid&&this.snippetRelocationInfo.containerType?n.GetSnippetFromDataRoom(this.snippetRelocationInfo.snippetId,function(t){e.ResolveLocationThenRelocateAndScrollToSnippet(t)},this.snippetRelocationInfo.containerGuid,this.snippetRelocationInfo.containerType,this.snippetRelocationInfo.contentType,this.snippetRelocationInfo.accountKey):n.GetItem(this.snippetRelocationInfo.snippetId,function(t){e.ResolveLocationThenRelocateAndScrollToSnippet(t)},this.snippetRelocationInfo.categoryId)}m["default"].GetObject(r["default"].objectIds.docketSections).SetupDocketSections();this.checkIfDisplayDocumentNotes()&&a.a.when(t).then(function(){e.RetrieveAndDisplayDocumentLevelNotes()})},checkIfDisplayDocumentNotes:function(){return this.FeatureConfigurations.ANNOTATIONS&&!this.IsDocketsUpdate},toggleHasInlineNotes:function(){var e=r["default"].classes,t=document.getElementById(this.DomId);t&&(g["default"].HasClass(t,e.hasInlineNotes)?g["default"].RemoveClass(t,e.hasInlineNotes):g["default"].AddClass(t,e.hasInlineNotes))},dockReadyEventCallback:function(e,t,n){if(!c["default"].EnableIpad&&!c["default"].EnableIphone&&this.FeatureConfigurations.FOLDERS){m["default"].GetObject(r["default"].objectIds.widget$SelectedTextMenu).dockReadyEventCallback(e,t,n)}},CheckSearchTermContext:function(e){if(!c["default"].EnableIpad&&!c["default"].EnableIphone)if(b["default"].hasAncestorWithClass(e,r["default"].classes.fancyHeadnotes)&&b["default"].hasAncestorWithClass(e,r["default"].classes.headnotesTopicCell)){this.Headnote.SetDualColumnHeadnotesView();this.Headnote.ExpandHeadnotesBox()}else b["default"].selfOrAncestorHasId(e,r["default"].ids.expandedHeadnotes)&&this.Headnote.ExpandHeadnotesBox();if(b["default"].IsAncestorDisabled(e))return{status:"skip"};return{status:"ok"}},hideDocument:function(){a()("#"+r["default"].ids.document).empty()}}).extend({postRender:function(){this._super();this.initMatterMapsTopScroll()},initMatterMapsTopScroll:function(){var e=a()(".co-TaskBoard");if(0===e.length)return;var t=this.getTaskBoardWidth(),n="<div class='co-TaskBoardTopScrollWrapper'>\n\t\t\t<div class='co-TaskBoardTopScroll' style='width:".concat(t,"px;'></div>\n   \t\t</div>");e.before(n);var o=a()(".co-TaskBoardTopScrollWrapper");e.scroll(function(){o.scrollLeft(e.scrollLeft())});o.scroll(function(){e.scrollLeft(o.scrollLeft())})},getTaskBoardWidth:function(){var e=0;a()(".co-TaskBoard-column").each(function(t,n){e+=n.offsetWidth});return e}}),xe=n("RoeWeKu3"),Ne=n("UrjZSDrS"),ke=n.n(Ne),Ae=n("Kv5vPWtp"),Re=n.n(Ae),Pe=n("A0baXm0S"),Be=n.n(Pe),Le=n("0xLFo+iU"),Oe=n("GEMZhLWf");function Me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(e,o.key,o)}}var We=r["default"].texts,Fe=r["default"].ids,He=function(){function e(t,n,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e);this.toggleNotesCallback=o;var i=[{content:We.showAllOption,isSelected:Fe.draftingNotesShowAllItemsOptionsModalId===n,id:"co_draftingNotesShowAllOption",textForButton:We.hideDraftingNotes},{content:We.hideAllOption,isSelected:Fe.draftingNotesHideAllItemsOptionsModalId===n,id:"co_draftingNotesHideAllOption",textForButton:We.showDraftingNotes},{content:We.showOnlyNotesOption,isSelected:Fe.draftingNotesShowOnlyItemsOptionsModalId===n,id:"co_draftingNotesShowOnlyOption",textForButton:We.hideDraftingNotes}];this.menuOpts={items:i,selectedItemClass:"co_active",collapseOnSelect:!1};this.buttonOpts={dropdownContainer:t.closest("div"),existingButton:t,defaultTriggerLabel:We.showDraftingNotes,changeTriggerLabelOnSelection:!0,iconClass:"kh_icon icon-toggle-notepad"}}(function(e,t,n){t&&Me(e.prototype,t);n&&Me(e,n)})(e,[{key:"draw",value:function(){this.menu=new Oe["default"](this.menuOpts);this.menuButton=new Le["default"](this.menu,this.buttonOpts);this.menuButton.draw();this._addEventHandlers()}},{key:"_addEventHandlers",value:function(){var e=this;a()(this.menu.getDOMElement()).on("itemSelected",function(t,n){e.toggleNotesCallback(n.items[0].id)})}}]);return e}(),Ge=function(){};(Ge.prototype={Id:r["default"].ids.newDocumentToolbarDraftingNotesId,ToolTip:I["default"].lookup("SC.Website.Delivery.Medium.DraftingNotesIconTooltip",r["default"].texts.toggleDraftingNotesIconToolTip),Draw:function(){var e=this,t=this.GetUrlAnchor();this.Name="DraftingNotes";this.containerId="co_Toggle"+this.Name+"Widget";this.anchorId="co_AnchorToggle"+this.Name+"Widget";this.IacA11yDraftingNotes=c["default"].isIacOn("IAC-A11Y-PL-DRAFTING-NOTES");this._buildWidgetStructure();this._bindMainDraftingNotesEvent();this._bindDraftingNotesToggleEvent();p["default"].Instance&&y["default"].Subscribe(r["default"].events.chunkAdded,function(){e._bindDraftingNotesToggleEvent(p["default"].Instance.chunks.length-1)});t&&this._expandLinkedDraftingNote(t)},SetParentDiv:function(e){this._parentObject=e},GetParentDiv:function(){return this._parentObject},SetDocumentDisplay:function(e){this._documentDisplay=e},GetDocumentDisplay:function(){return this._documentDisplay},DraftingNotesExistInDOM:function(){return a()("div.co_notesIcon").length>0},GetUrlAnchor:function(){return window.location.hash}})._buildWidgetStructure=function(){var e=ke.a.template(Re.a)(this._buildWidgetTemplateOptions());this.domStructure=a()(e);this._parentObject.appendChild(this.domStructure[0])};Ge.prototype._buildWidgetTemplateOptions=function(){return{containerId:this.containerId,anchorId:this.anchorId,toolTip:this.ToolTip,anchorSpanId:r["default"].ids.actionMenuBarDraftingNotesWidgetTextSpanId,anchorSpanText:I["default"].lookup("SC.Website.Delivery.Medium.ShowDraftingNotes",r["default"].texts.toggleExpandDraftingNotesWidgetSpanText),modalContainerId:r["default"].ids.draftingNotesOptionsModalContainerId,
modalContainerInnerId:r["default"].ids.draftingNotesOptionsModalContainerInnerId,IacA11yDraftingNotes:this.IacA11yDraftingNotes}};Ge.prototype._getDefaultStateForItemsOptionsModalId=function(){return r["default"].ids.draftingNotesHideAllItemsOptionsModalId};Ge.prototype._buildOptionsModalStructure=function(){var e=ke.a.template(Be.a)({dropdownBoxExpandedClass:r["default"].classes.dropdownBoxExpanded,dropdownBoxHeaderClass:r["default"].classes.dropdownBoxHeader,dropdownBoxContentClass:r["default"].classes.dropdownBoxContent,modalContainerCloseId:r["default"].ids.draftingNotesOptionsModalContainerCloseId,widgetCloseIconClass:r["default"].classes.widgetCloseIcon,dropdownBoxContentRightClass:r["default"].classes.dropdownBoxContentRight,ShowAllItemsOptionsModalId:r["default"].ids.draftingNotesShowAllItemsOptionsModalId,HideAllItemsOptionsModalId:r["default"].ids.draftingNotesHideAllItemsOptionsModalId,ShowOnlyItemsOptionsModalId:r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId,expandDraftingNotesModalLabel:r["default"].texts.expandDraftingNotesModalLabel,collapseDraftingNotesModalLabel:r["default"].texts.collapseDraftingNotesModalLabel,showOnlyDraftingNotesModalLabel:r["default"].texts.showOnlyDraftingNotesModalLabel,activeClass:r["default"].classes.activeClass,clearClass:r["default"].classes.clear,dropdownBoxFooterClass:r["default"].classes.dropdownBoxFooter,activeItemsOptionsModalId:this._getDefaultStateForItemsOptionsModalId()});this.modalDomStructure=a()(e);this._bindOptionsModalEvent()};Ge.prototype.ShowAll=function(){var e=this.domStructure.find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).hasClass(r["default"].classes.activeClass);if(!(this.modalDomStructure&&this.modalDomStructure.find("li#"+r["default"].ids.draftingNotesShowAllItemsOptionsModalId).hasClass(r["default"].classes.activeClass))||e){e&&this._showOnlyDraftingNotesOnDocument();this._expandDraftingNotes(this)}this._hideDraftingNotesOptionsModal()};Ge.prototype.HideAll=function(){var e=this.domStructure.find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).hasClass(r["default"].classes.activeClass);if(!(this.modalDomStructure&&this.modalDomStructure.find("li#"+r["default"].ids.draftingNotesHideAllItemsOptionsModalId).hasClass(r["default"].classes.activeClass))){e&&this._showOnlyDraftingNotesOnDocument();this._collapseDraftingNotes(this)}this._hideDraftingNotesOptionsModal()};Ge.prototype.ShowOnlyNotes=function(){this._showOnlyDraftingNotesOnDocument();this._hideDraftingNotesOptionsModal()};Ge.prototype._bindOptionsModalEvent=function(){var e=this,t=null,n=null;(t=e.modalDomStructure.find("button#"+r["default"].ids.draftingNotesOptionsModalContainerCloseId)).click(function(){e._hideDraftingNotesOptionsModal()});(n=e.modalDomStructure.find("li#"+r["default"].ids.draftingNotesShowAllItemsOptionsModalId)).click(function(){e.ShowAll()});e.modalDomStructure.find("li#"+r["default"].ids.draftingNotesHideAllItemsOptionsModalId).click(function(){e.HideAll()});e.modalDomStructure.find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).click(function(){e.ShowOnlyNotes()})};Ge.prototype._bindDraftingNotesToggleEvent=function(e){var t=this,n=a()(".co_notesContent .close-btn"),o=a()("div.co_notesIcon"),i=a()(".co_notesContent");if(p["default"].Instance&&e){n=a()(p["default"].Instance.chunks[e]).find(".co_notesContent .close-btn");o=a()(p["default"].Instance.chunks[e]).find("div.co_notesIcon");i=a()(p["default"].Instance.chunks[e]).find(".co_notesContent")}n.click(function(){var e=a()(this).parent();t._draftingNotesDivClick(e)});o.click(function(){var e=a()(this);t._draftingNotesIconClick(e)});i.find("a[class='co_internalLink']").click(function(){var e=a()(this).attr("href").split("#")[1];t._expandLinkedDraftingNote("#"+e)})};Ge.prototype._draftingNotesDivClick=function(e){e.removeClass("is-active");e.prev().removeClass("is-active")};Ge.prototype._draftingNotesIconClick=function(e){e.toggleClass("is-active");e.next().toggleClass("is-active");e.blur()};Ge.prototype._expandLinkedDraftingNote=function(e){var t=a()(e);p["default"].Instance&&(t=a()(p["default"].Instance.FindElementInChunkById(e).element));var n=t.closest(".co_notesContent");if(!n.prev(".co_notesIcon").hasClass("is-active")){n.prev(".co_notesIcon").addClass("is-active");n.addClass("is-active")}};Ge.prototype._bindMainDraftingNotesEvent=function(){var e=this;if(this.IacA11yDraftingNotes){var t=this.domStructure.find("#"+this.anchorId),n=this._getDefaultStateForItemsOptionsModalId();this.a11yMenu=new He(t,n,function(t){return e.toggleNotesById(t)});this.a11yMenu.draw()}else{var o=this;a()(o.domStructure.find("a#"+o.anchorId).click(function(){var e=a()("#"+r["default"].ids.draftingNotesOptionsModalContainerInnerId);if(e.children().length)e.hasClass(r["default"].classes.hideState)?o._showDraftingNotesOptionsModal():o._hideDraftingNotesOptionsModal();else{o._buildOptionsModalStructure();e.append(o.modalDomStructure)}}))}};Ge.prototype.toggleNotesById=function(e){var t=a()("#"+r["default"].ids.documentContentBody);if("co_draftingNotesShowAllOption"===e){this._updateExpandedDraftingNotesClasses();this._showHiddenParagraphs(t)}if("co_draftingNotesHideAllOption"===e){this._updateCollapsedDraftingNotesClasses();this._showHiddenParagraphs(t)}if("co_draftingNotesShowOnlyOption"===e)if(p["default"].Instance)for(var n=0;n<p["default"].Instance.chunks.length;n++){var o=a()(p["default"].Instance.chunks[n]).find("#"+r["default"].ids.documentContentBody).get(0);this._applyShowOnlyDraftingNotesToDocumentA11y(o)}else{var i=a()("#"+r["default"].ids.documentContentBody).get(0);this._applyShowOnlyDraftingNotesToDocumentA11y(i)}};Ge.prototype._expandDraftingNotes=function(e){e._updateExpandedDraftingNotesClasses();e._adjustExpandDraftingNotesEvent(e)};Ge.prototype._updateExpandedDraftingNotesClasses=function(){if(p["default"].Instance)for(var e=0;e<p["default"].Instance.chunks.length;e++){a()(p["default"].Instance.chunks[e]).find("div.co_notesIcon").addClass("is-active");a()(p["default"].Instance.chunks[e]).find(".co_notesContent").addClass("is-active")}else{a()("div.co_notesIcon").addClass("is-active");a()(".co_notesContent").addClass("is-active")}};Ge.prototype._collapseDraftingNotes=function(e){e._updateCollapsedDraftingNotesClasses();e._adjustCollapseDraftingNotesEvent(e)};Ge.prototype._updateCollapsedDraftingNotesClasses=function(){if(p["default"].Instance)for(var e=0;e<p["default"].Instance.chunks.length;e++){a()(p["default"].Instance.chunks[e]).find("div.co_notesIcon").removeClass("is-active");a()(p["default"].Instance.chunks[e]).find(".co_notesContent").removeClass("is-active")}else{a()("div.co_notesIcon").removeClass("is-active");a()(".co_notesContent").removeClass("is-active")}};Ge.prototype._adjustCollapseDraftingNotesEvent=function(e,t){e._addActiveClassToOptionsModalItem(e,t||r["default"].ids.draftingNotesHideAllItemsOptionsModalId);a()(e.domStructure).find("#"+r["default"].ids.actionMenuBarDraftingNotesWidgetTextSpanId).text(I["default"].lookup("SC.Website.Delivery.Medium.ShowDraftingNotes",r["default"].texts.toggleExpandDraftingNotesWidgetSpanText))};Ge.prototype._adjustExpandDraftingNotesEvent=function(e,t){e._addActiveClassToOptionsModalItem(e,t||r["default"].ids.draftingNotesShowAllItemsOptionsModalId);a()(e.domStructure).find("#"+r["default"].ids.actionMenuBarDraftingNotesWidgetTextSpanId).text(I["default"].lookup("SC.Website.Delivery.Medium.HideDraftingNotes",r["default"].texts.toggleCollapseDraftingNotesWidgetSpanText))};Ge.prototype._addActiveClassToOptionsModalItem=function(e,t){if(e.modalDomStructure){a()(e.domStructure).find("li").removeClass(r["default"].classes.activeClass);a()(e.domStructure).find("li#"+t).addClass(r["default"].classes.activeClass)}};Ge.prototype._hideDraftingNotesOptionsModal=function(){a()("#"+r["default"].ids.draftingNotesOptionsModalContainerInnerId).addClass(r["default"].classes.hideState)};Ge.prototype._showDraftingNotesOptionsModal=function(){a()("#"+r["default"].ids.draftingNotesOptionsModalContainerInnerId).removeClass(r["default"].classes.hideState)};Ge.prototype._showOnlyDraftingNotesOnDocument=function(){
if(p["default"].Instance)for(var e=0;e<p["default"].Instance.chunks.length;e++){var t=a()(p["default"].Instance.chunks[e]).find("#"+r["default"].ids.documentContentBody).get(0);this._applyShowOnlyDraftingNotesToDocument(this,t)}else{t=a()("#"+r["default"].ids.documentContentBody).get(0);this._applyShowOnlyDraftingNotesToDocument(this,t)}a()(this.domStructure).find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).hasClass(r["default"].classes.activeClass)?this._adjustCollapseDraftingNotesEvent(this,r["default"].ids.draftingNotesHideAllItemsOptionsModalId):this._adjustExpandDraftingNotesEvent(this,r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId)};Ge.prototype._applyShowOnlyDraftingNotesToDocument=function(e,t){var n=!this.domStructure.find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).hasClass(r["default"].classes.activeClass),o=a()(t).children();a.a.each(o,function(){var t=this;0==e._findWithFilter(t,".kh_abstract").length&&0==e._findWithFilter(t,".kh_standardDocumentAttachment").length&&0==e._findWithFilter(t,"#co_endOfDocument").length&&(a()(t).filter(".co_notesIcon").length>0||a()(t).filter(".co_notesContent").length>0?n?a()(t).addClass("is-active"):a()(t).removeClass("is-active"):0==e._findWithFilter(t,".co_notesIcon").length&&0==e._findWithFilter(t,".co_notesContent").length?n?a()(t).addClass("co_hideState"):a()(t).removeClass("co_hideState"):e._applyShowOnlyDraftingNotesToDocument(e,t))})};Ge.prototype._applyShowOnlyDraftingNotesToDocumentA11y=function(e){var t=this;a()(e).children().toArray().forEach(function(e){if(0!==t._findWithFilter(e,".kh_abstract").length||0!==t._findWithFilter(e,".kh_standardDocumentAttachment").length||0!==t._findWithFilter(e,"#co_endOfDocument").length)return;a()(e).filter(".co_notesIcon").length>0||a()(e).filter(".co_notesContent").length>0?a()(e).addClass("is-active"):0==t._findWithFilter(e,".co_notesIcon").length&&0==t._findWithFilter(e,".co_notesContent").length?a()(e).addClass("co_hideState"):t._applyShowOnlyDraftingNotesToDocumentA11y(e)})};Ge.prototype._showHiddenParagraphs=function(e){var t=this;a()(e).children().toArray().forEach(function(e){0==t._findWithFilter(e,".co_notesIcon").length&&0==t._findWithFilter(e,".co_notesContent").length?a()(e).removeClass("co_hideState"):t._showHiddenParagraphs(e)})};Ge.prototype._findWithFilter=function(e,t){return a()(e).filter(t).add(a()(e).find(t))};var Ue=Ge,Ve=n("aiPVPkHF");Ue.prototype.modifyQueryStringView=function(e){var t=function(e,t,n){var o=C["default"].Parse(e);o.QueryString[t]=n;return C["default"].Absolute(o)}(window.location.href,"view",e);window.history&&window.history.replaceState({newUrl:t},e,t);var n=xe["default"].PageData.LinkBuilderParameters;n&&n.Parameters&&(n.Parameters.view=e)};var je=Ue.prototype.ShowOnlyNotes;Ue.prototype.ShowOnlyNotes=function(){je.call(this);this.modifyQueryStringView(Ve["default"].queryParameters.draftingNotesOnlyView)};var qe=Ue.prototype.ShowAll;Ue.prototype.ShowAll=function(){qe.call(this);this.modifyQueryStringView(Ve["default"].queryParameters.showAllDraftingNotesView)};var Ke=Ue.prototype.HideAll;Ue.prototype.HideAll=function(){Ke.call(this);this.modifyQueryStringView(Ve["default"].queryParameters.hideAllDraftingNotesView)};Ue.prototype._showDefaultView=function(){var e=this._getDefaultView();if(e){var t=this._getListOfNotes(),n=Ve["default"].classes.activeClass;this.domStructure.find("li."+n).removeClass(n);if(e==Ve["default"].queryParameters.draftingNotesOnlyView){this.ShowOnlyNotes();this._lastButtonState=Ve["default"].ids.draftingNotesShowOnlyItemsOptionsModalId}else if(e==Ve["default"].queryParameters.showAllDraftingNotesView){this.ShowAll();this._lastButtonState=Ve["default"].ids.draftingNotesShowAllItemsOptionsModalId}else{this.HideAll();this._lastButtonState=Ve["default"].ids.draftingNotesHideAllItemsOptionsModalId}this.modifyQueryStringView(e);this._setListOfNotes(t)}else{var o=sessionStorage.getItem(this._buttonStateKey);o==Ve["default"].ids.draftingNotesShowOnlyItemsOptionsModalId?this.modifyQueryStringView(Ve["default"].queryParameters.draftingNotesOnlyView):o==Ve["default"].ids.draftingNotesShowAllItemsOptionsModalId?this.modifyQueryStringView(Ve["default"].queryParameters.showAllDraftingNotesView):this.modifyQueryStringView(Ve["default"].queryParameters.hideAllDraftingNotesView)}};Ue.prototype._setListOfNotes=function(e){var t=[];e.each(function(){t.push(a()(this).hasClass(Ve["default"].classes.isActive))});this._noteState&&sessionStorage.setItem(this._noteState,JSON.stringify(t))};Ue.prototype._getListOfNotes=function(){return a()("#"+Ve["default"].ids.documentContentBody).find(".co_notesIcon")};Ue.prototype._getDefaultView=function(){return C["default"].ParseQueryString(window.location.search).view};var ze,Qe=Ue,$e=Qe.prototype._getDefaultStateForItemsOptionsModalId,Je=Qe.prototype.ShowAll,Ye=Qe.prototype.HideAll,Xe=Qe.prototype.Draw,Ze=Qe.prototype._draftingNotesDivClick,et=Qe.prototype._draftingNotesIconClick,tt=Qe.prototype._buildWidgetTemplateOptions;function nt(e,t){var n=xe["default"].ViewModelData.DocumentGuid,o=ot(n);t?o.splice(o.indexOf(e),1):o.push(e);sessionStorage.setItem(n,o);(function(e){var t=a()(this.modalDomStructure),n=t.find("li#"+r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId).hasClass(r["default"].classes.activeClass);if(n||e.length!=ze)if(n||0!=e.length){t.find("li#"+r["default"].ids.draftingNotesShowAllItemsOptionsModalId).removeClass(r["default"].classes.activeClass);t.find("li#"+r["default"].ids.draftingNotesHideAllItemsOptionsModalId).removeClass(r["default"].classes.activeClass)}else{t.find("li#"+r["default"].ids.draftingNotesHideAllItemsOptionsModalId).removeClass(r["default"].classes.activeClass);t.find("li#"+r["default"].ids.draftingNotesShowAllItemsOptionsModalId).addClass(r["default"].classes.activeClass)}else{t.find("li#"+r["default"].ids.draftingNotesShowAllItemsOptionsModalId).removeClass(r["default"].classes.activeClass);t.find("li#"+r["default"].ids.draftingNotesHideAllItemsOptionsModalId).addClass(r["default"].classes.activeClass)}}).call(this,o)}function ot(e){var t=sessionStorage.getItem(e);return null!=t&&t.length?t.split(","):[]}Qe.prototype.Draw=function(){ze=a()(".co_notesIcon").length;Xe.call(this);var e=ot(xe["default"].ViewModelData.DocumentGuid);!e.length&&b["default"].isPracticalLawUsDocument()?this._showDefaultView():e.forEach(function(e){var t=a()("#"+e);t.toggleClass("is-active");t.prev().toggleClass("is-active");t.prev().blur()})};var it=Qe.prototype.modifyQueryStringView;Qe.prototype.modifyQueryStringView=function(e){b["default"].isPracticalLawUsDocument()&&it.call(this,e)};Qe.prototype.ShowAll=function(){e=xe["default"].ViewModelData.DocumentGuid,t=a()(".co_notesContent").map(function(){return this.id}).get(),sessionStorage.setItem(e,t);var e,t;Je.call(this)};Qe.prototype.HideAll=function(){e=xe["default"].ViewModelData.DocumentGuid,sessionStorage.removeItem(e);var e;Ye.call(this)};Qe.prototype._draftingNotesDivClick=function(e){Ze.call(this,e);nt.call(this,e.attr("id"),!0)};Qe.prototype._draftingNotesIconClick=function(e){et.call(this,e);nt.call(this,e.next().attr("id"),!1)};Qe.prototype._getDefaultStateForItemsOptionsModalId=function(){var e=ot(xe["default"].ViewModelData.DocumentGuid);if(this._lastButtonState==r["default"].ids.draftingNotesShowOnlyItemsOptionsModalId)return this._lastButtonState;return e.length==ze||this.isShowAllDraftingNotes()?r["default"].ids.draftingNotesShowAllItemsOptionsModalId:0==e.length?$e.call(this):null};Qe.prototype.isShowAllDraftingNotes=function(){if(xe["default"].ViewModelData&&xe["default"].ViewModelData.DocumentGuid){var e=b["default"].GetMetadataFromDom(r["default"].ids.embeddedMetaInfoPrefix+xe["default"].ViewModelData.DocumentGuid);if(e&&e.countryDocumentGuid&&e.countryDocumentCountry){if(a()(".co_notesContent").hasClass("is-active"))return!0}}return!1};Qe.prototype._buildWidgetTemplateOptions=function(){var e=tt.call(this);return Object.assign({},e,{
anchorSpanText:ot(xe["default"].ViewModelData.DocumentGuid).length!=ze?I["default"].lookup("SC.Website.Delivery.Medium.ShowDraftingNotes",r["default"].texts.toggleExpandDraftingNotesWidgetSpanText):I["default"].lookup("SC.Website.Delivery.Medium.HideDraftingNotes",r["default"].texts.toggleCollapseDraftingNotesWidgetSpanText)})};var at=Qe,rt=d.a.extend({wireUpClickEventOnAdditionalCites:function(){a()("#citeAdditional").children("a").click(function(e){m["default"].GetObject(r["default"].objectIds.documentDisplayEventHandlers).handleInternalLink(e.currentTarget,e)})}}),st=n("lFwkHtVf");var lt=function(){var e=null,t=document.getElementById("co_document"),n=new st["default"],o={},i=!1,s=null,l=null;this.initializeEvents=function(){a()(t).on("mouseenter","#co_document span.co_inlineKeyCiteFlag > img",d);a()(t).on("mouseleave","#co_document span.co_inlineKeyCiteFlag > img",c);a()(t).on("mouseenter","#co_document span.co_inlineKeyCiteFlag > a",d);a()(t).on("mouseleave","#co_document span.co_inlineKeyCiteFlag > a",c);a()(t).on("focusin","#co_document span.co_inlineKeyCiteFlag",d);a()(t).on("focusout","#co_document span.co_inlineKeyCiteFlag",c)};function d(t){h();l=setTimeout(function(){null===e&&function(){(e=document.createElement("div")).className="co_genericPopUp "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;a()(e).on("mouseenter",u);a()(e).on("mouseleave",c);var t=document.createElement("span");t.id="inlineFlag_popup_loading";t.className="co_icon co_loadingSmall";e.appendChild(t);var n=document.createElement("p");n.className="co_hideState";e.appendChild(n);var o=document.createElement("span");n.appendChild(o);var i=document.createElement("a");i.href="javascript:void()";i.innerText="";a()(i).on("focusin",u);a()(i).on("focusout",c);n.appendChild(i);var s=document.createElement("span");n.appendChild(s)}();(function(t,i){var s=t.getAttribute("guid"),l=t.getAttribute("data-is-unique"),d=t.getAttribute("data-pub-num"),c=t.getAttribute("data-serial-num"),u=t.getAttribute("data-flag-id");a()(e).removeClass(r["default"].classes.inlineKeyCiteProposedLegisHoverClass);a()(e).removeClass(r["default"].classes.inlineKeyCiteGrayFlagHoverClass);(function(t){var n=t.children[0].offsetTop-30,o=t.children[0].offsetLeft+16;a()(e).css({top:n,left:o,position:"absolute"});t.parentNode.insertBefore(e,t.nextSibling);(function(){var t=e.getElementsByTagName("p")[0],n=document.getElementById("inlineFlag_popup_loading");a()(t).addClass("co_hideState");a()(n).removeClass("co_hideState")})();a()(e).toggle(!0)})(t);"False"===l?function(){var t=e.getElementsByTagName("p")[0];t.childNodes[0].innerHTML=r["default"].texts.inlineKeyCitesNonUniqueHoverText;t.childNodes[1].innerHTML="";t.childNodes[2].innerHTML="";a()(e).addClass(r["default"].classes.inlineKeyCiteGrayFlagHoverClass);p()}():s?o[s]?f(o[s],u,i):n.GetKeyCiteFlagDocGuid(s,3,"InlineKeyCiteFlags","(sc.Default)",h):d&&c&&(o["PS:"+d+c]?f(o["PS:"+d+c],u,i):n.GetKeyCiteFlagPubSerial(c,d,3,"InlineKeyCiteFlags","(sc.Default)",h));function h(e){s?o[s]=e:d&&c&&(o["PS:"+d+c]=e);f(e,u,i)}})("SPAN"===t.currentTarget.tagName?t.currentTarget:t.currentTarget.parentNode,t);i=!0;l=null},250)}function c(t){if(i){var n=e.previousSibling;s=setTimeout(function(){var o=t.currentTarget,r=e.previousSibling;if(o==r||o==r.children[0]||(o==e||a()(e).has(o).length>0)&&n==r){a()(e).toggle(!1);i=!1;s=null}},500)}else h()}function u(){(function(){if(null!==s){clearTimeout(s);s=null}})()}function f(t,n,o){var i,s,l=o.currentTarget,d=e.previousSibling;if(l==d||l==d.children[0]){var c=function(e,t){if(!e||!e.flags||0===e.flags.length)return;var n;t&&(n=ke.a.find(e.flags,function(e){return e.id===t}));n||(n=e.flags[0]);return n}(t,n),u=c.categoryId,f=c.metadata,h=e.getElementsByTagName("p")[0],m=h.childNodes[0],g="",v=",";if("kcValidity"===u){g=f.staticPhrase?"<b>"+f.staticPhrase+"</b> ":"";g+=f.treatmentPhrase?"| "+f.treatmentPhrase+" ":"";v=" |"}else{g+=f.treatmentPhrase?"<b>"+f.treatmentPhrase+"</b> ":"";g+=f.writDate?" "+f.writDate:""}m.innerHTML=g;var C=h.childNodes[1];if(f.title){f.titleLink=f.titleLink.replace(new RegExp("transitionType=[^&]*","g"),"transitionType=InlineKeyCiteFlags");C.href=f.titleLink;a()(C).html(f.title);a()(C).toggle(!0)}else a()(C).toggle(!1);var _=h.childNodes[2],y=f.court?v+" "+f.court+v:"";y+=f.liveDate?" "+f.liveDate:"";_.innerHTML=y||"";m.innerHTML.indexOf("<b>Proposed Legislation</b>")>=0&&a()(e).addClass(r["default"].classes.inlineKeyCiteProposedLegisHoverClass);p();i=b["default"].determineOffset(e).x+e.offsetWidth-a()(window).width()-a()(window).scrollLeft(),s=e.offsetTop-e.offsetHeight+25,a()(e).css({top:s,left:"-="+(i>0?i:0)})}}function h(){if(null!==l){clearTimeout(l);l=null}}function p(){var t=e.getElementsByTagName("p")[0],n=document.getElementById("inlineFlag_popup_loading");a()(t).removeClass("co_hideState");a()(n).addClass("co_hideState")}};var dt=function(){N.call(this);var e=this.BuildHeadnotesTools,t=this.InitializeHeadnotesForUser,n=this.shouldSetHeadnoteViewFromUserPreference,o=this.SetDualColumnHeadnotesView,i=this;this.headnotesDocument=null;this.headnotesDocumentType=null;this.BuildHeadnotesTools=function(){"CaselawDigestHeadnotes"!==i.headnotesDocumentType&&e.call(this)};this.InitializeHeadnotesForUser=function(e){i.headnotesDocument=a()("."+r["default"].classes.document);i.headnotesDocumentType=i.headnotesDocument.data("headnote-type");"CaselawDigestHeadnotes"===i.headnotesDocumentType&&(e.headnotesDualColumnView=!1);y["default"].Subscribe("Cobalt.Document.Headnotes.Expand",function(e,t){i.ExpandAndScrollTo(t)});t.call(this,e)};this.shouldSetHeadnoteViewFromUserPreference=function(){var e;return e="CaselawDigestHeadnotes"===i.headnotesDocumentType||n.call(this)};this.SetDualColumnHeadnotesView=function(e){if("CaselawDigestHeadnotes"===i.headnotesDocumentType)return;o.call(this,e)};this.ExpandAndScrollTo=function(e){this.ExpandHeadnotesBox();if(e.Data.scrollLocation){var t="Cobalt.Document.ScrollToHighlightedText";y["default"].Publish(t,new y["default"].Message({scrollLocation:e.Data.scrollLocation},{},t,"2.0"))}}},ct=d.a.extend({init:function(e){this.fancyTableId=e},documentGuid:null,fancyTableId:null,prefrences:null,expandCollapseAnchor:null,headerElement:null,bodyElement:null,Initialize:function(){var e=this;e.headerElement=b["default"].GetElementById(e.fancyTableId+r["default"].ids.wlnFancyTableHeaderSuffix);e.bodyElement=b["default"].GetElementById(e.fancyTableId+r["default"].ids.wlnFancyTableBodySuffix);if(e.headerElement&&e.headerElement.element&&e.bodyElement&&e.bodyElement.element){var t=e.headerElement.element,n=t.childNodes[0].innerHTML;n.indexOf("(")>-1&&(n=n.substring(0,n.indexOf("(")-1));e.expandCollapseAnchor=document.createElement("a");e.expandCollapseAnchor.id=e.fancyTableId+r["default"].texts.wlnFancyTableExpandCollapseSuffix;e.expandCollapseAnchor.className=r["default"].classes.accessibleLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;e.expandCollapseAnchor.href="javascript:void(0);";e.expandCollapseAnchor.innerHTML=I["default"].lookup("SC.Document.FancyTable.AnchorText","click here");var o="none"!=e.bodyElement.element.style.display?I["default"].format("SC.Document.FancyTable.crswFancyTableCollapse",{HeaderText:n},"Collapse "+n):I["default"].format("SC.Document.FancyTable.crswFancyTableExpand",{HeaderText:n},"Expand "+n);t.appendChild(e.expandCollapseAnchor);t.setAttribute("title",o);b["default"].AttachClickHandler(t,function(){e.ToggleView()})}},SetDocumentGuid:function(e){this.documentGuid=e},ToggleView:function(){this.headerElement||(this.headerElement=b["default"].GetElementById(this.fancyTableId+r["default"].texts.wlnFancyTableHeaderSuffix));this.bodyElement||(this.bodyElement=b["default"].GetElementById(this.fancyTableId+r["default"].texts.wlnFancyTableBodySuffix));var e=this.headerElement.element,t=this.bodyElement.element,n=e.childNodes[0].innerHTML;n.indexOf("(")>-1&&(n=n.substring(0,n.indexOf("(")-1));if(e&&t){var o,i,s;if("none"==t.style.display){o="block";i=I["default"].format("SC.Document.FancyTable.crswFancyTableExpand",{HeaderText:n
},"Expand "+n);s=I["default"].format("SC.Document.FancyTable.crswFancyTableCollapse",{HeaderText:n},"Collapse "+n)}else{o="none";i=I["default"].format("SC.Document.FancyTable.crswFancyTableCollapse",{HeaderText:n},"Collapse "+n);s=I["default"].format("SC.Document.FancyTable.crswFancyTableExpand",{HeaderText:n},"Expand "+n)}a()(e).toggleClass(r["default"].classes.headnoteInactive);t.style.display=o;var l=e.getAttribute("title");if(l){l=l.replace(i,s);e.setAttribute("title",l)}y["default"].Publish(r["default"].events.documentMayHaveChangedSize,new y["default"].Message({}))}return!1}}),ut=n("DZmxAQuD"),ft=n("o2fWI1cq"),ht=n("4J0n6L5+"),pt=Ee.extend({inlineKeyCitesHoverDisplay:null,Headnote:new dt,init:function(){this._super();this.inlineKeyCitesHoverDisplay=new lt;this.WestlawNextAbridgment=new ct(r["default"].ids.wlnAbridgment);this.WestlawNextHeadnote=new ct(r["default"].ids.wlnHeadnote);this.WestlawNextAnnotation=new ct(r["default"].ids.wlnAnnotation);this.WestlawNextTableOfAuthorities=new ct(r["default"].ids.wlnTableOfAuthorities);a()(".crsw_document").length>0&&this.SetDisableKeyCiteSntText(!0)},xmlDocumentLoaded:function(){this._super();var e=C["default"].ParseQueryString(window.location.search).relevantPortionId;if(e){var t="co_anchor_"+e;b["default"].GetElementById(t,function(e){if(e.element.parentElement){e.element=e.element.parentElement;setTimeout(function(){b["default"].ScrollToChunkedElement(e)},0)}})}},postRender:function(){this._super();var e=this;(e.FeatureConfigurations["INLINE KC CASES BRIEF"]||e.FeatureConfigurations["INLINE KC FLAGS CUSTOM SELECT"])&&this.inlineKeyCitesHoverDisplay.initializeEvents();if(k["default"].ViewData.FeatureConfigurations["USER ACADEMIC"]){var t;(new T["default"]).GetMetaInformation(K["default"].guid,function(n){"Cases"===(t=n).ContentType&&e.displayBriefIt()})}(new rt).wireUpClickEventOnAdditionalCites();a()("#co_document").on("click","a.xslNavToCatPageOnClick",function(){Object(ft["website_CategoryPageLinkClicked"])(this.href)});ht["default"].isPracticalLawUSCompartment()&&a()(".co_internalLink").on("click",function(e){var t=a()(e.currentTarget).attr("href");window.history.pushState?window.history.pushState(null,null,t):window.location.hash=t});y["default"].Publish(r["default"].events.documentPostRenderComplete,this.DocumentGuid)},WestlawNextAbridgment:null,WestlawNextHeadnote:null,WestlawNextAnnotation:null,WestlawNextTableOfAuthorities:null,Draw:function(){this.WestlawNextAbridgment.Initialize();this.WestlawNextHeadnote.Initialize();this.WestlawNextAnnotation.Initialize();this.WestlawNextTableOfAuthorities.Initialize();this._super()},SetDocumentGuid:function(e){this._super(e);this.WestlawNextAbridgment.SetDocumentGuid(this.DocumentGuid);this.WestlawNextHeadnote.SetDocumentGuid(this.DocumentGuid);this.WestlawNextAnnotation.SetDocumentGuid(this.DocumentGuid);this.WestlawNextTableOfAuthorities.SetDocumentGuid(this.DocumentGuid)},displayBriefIt:function(){var e,t,n,o=document.getElementById(this.DomId),i=document.getElementById(r["default"].ids.document);(e=document.getElementById(r["default"].ids.websiteWidgetDiv))||(e=g["default"].GetElementsByClassName(r["default"].classes.document,"div",null)[0])&&(e=e.firstChild);if(e){(t=document.createElement("div")).id=r["default"].ids.briefItDiv;t.className=r["default"].classes.highlightingExcludeAnnotations;n=this.createBriefItButton();t.appendChild(n);var a=document.createElement("div");a.className=r["default"].classes.briefItButtonClearDiv;t.appendChild(a);o.insertBefore(t,i);y["default"].Subscribe(r["default"].events.documentToolbarRenderComplete,function(){var e=ut["default"].BriefItReadingModeView.Get();"briefIt"===e?ge["default"].Instance.DisplayInBriefItMode(e):ge["default"].Instance.DisplayInRegularMode("regular")})}},createBriefItButton:function(){var e=document.createElement("button");e.id=r["default"].ids.briefItButton;e.innerHTML=I["default"].lookup("SC.Document.BriefItMode","Brief It");e.onclick=this.ToggleBriefFeature.bind(this);e.className=r["default"].classes.briefItPrimaryClass+" "+r["default"].classes.briefItFloatRightClass;return e},ToggleBriefFeature:function(){var e=ut["default"].BriefItReadingModeView.Get();Object(u["IsNotNullOrEmpty"])(e)?this._view=e:this._view="regular";this._view="regular"===this._view?"briefIt":"regular";ut["default"].BriefItReadingModeView.Set(this._view);"briefIt"===this._view?this.DisplayInBriefItMode():this.DisplayInRegularMode()},DisplayInBriefItMode:function(){var e=this.getWidgetToHideInBriefItMode(),t=document.body;a()(t).addClass("co_readingMode");document.getElementById(r["default"].ids.briefItButton).innerHTML=I["default"].lookup("SC.Document.ExitBriefItMode","Exit Brief It");ge["default"].Instance.AddRemoveClass("briefIt");for(var n=0;n<e.length;n++)"undefined"!==e[n]&&null!==e[n]&&a()(e[n]).addClass("co_hideState");y["default"].Publish(r["default"].events.briefItActive)},getWidgetToHideInBriefItMode:function(){var e=[];e.push(document.getElementById(r["default"].ids.docToolbarInlineKeyCitesWidget));e.push(document.getElementById(r["default"].ids.docToolbarGoTo));e.push(document.getElementById(r["default"].ids.docToolbarKeyCiteWidget));e.push(document.getElementById(r["default"].ids.docToolbarSearchWithinDocument));e.push(document.getElementById(r["default"].ids.docToolbarDisplayOptions));e.push(document.getElementById(r["default"].ids.docToolbarReadingModeWidget));return e},DisplayInRegularMode:function(){var e=this.getWidgetToHideInBriefItMode(),t=document.body;a()(t).removeClass("co_readingMode");document.getElementById(r["default"].ids.briefItButton).innerHTML=I["default"].lookup("SC.Document.BriefItMode","Brief It");ge["default"].Instance.AddRemoveClass("regular");for(var n=0;n<e.length;n++)"undefined"!==e[n]&&null!==e[n]&&a()(e[n]).removeClass("co_hideState");y["default"].Publish(r["default"].events.briefItInactive)},AddRemoveClass:function(e){var t=a()("#"+r["default"].ids.briefItButton);"briefIt"===e?t.addClass(r["default"].classes.briefItModeClass):t.removeClass(r["default"].classes.briefItModeClass);for(var n=a()(".co_briefItState"),o=0;o<n.length;o++){var i=a()(n[o]);i.hasClass("co_synopsis")||i.hasClass("co_synopsisHolding")||i.hasClass("co_courtBlock")||i.hasClass("co_docketBlock")||("briefIt"===e?a()(n[o]).addClass("co_hideState"):"regular"===e&&a()(n[o]).removeClass("co_hideState"))}},SetHasDraftingNotes:function(e){var t=new at;this.HasDraftingNotes=e||t.DraftingNotesExistInDOM()}}),mt=null;var gt=n("/5D1hk9E"),vt=n("AHULqEA8");var Ct=function(){var e=this;vt["default"].call(this);this.navModeQueryString="selectedNavMode";this.checkNavigationData=function(e){return!!e.DualNavigationData&&e.DualNavigationData.AllResults.Count>0};var t=this.adjustNavigationUrl;this.adjustNavigationUrl=function(n,o){n=t.call(e,n,o);return n+="&".concat(e.navModeQueryString,"=").concat(e.currentSelectedOption)};var n=this.renderCallback;this.renderCallback=function(t){if(t&&t.DualNavigationData){e.dualNavigationData=t.DualNavigationData;Object.assign(e.dualNavigationData.AllResults,{Heading:I["default"].lookup("SC.Document.DualSearch.Navigation.AllResults","All Results")})}t&&t.DualRelatedDocsData&&(e.dualRelatedDocsData=t.DualRelatedDocsData);n.call(e,t)}},_t=n("SJosIy9U"),bt=n("Fn4GUS89"),yt=n("6OT0SkNi"),St=n("NfoyK8jb"),Dt=n("lcTvwkXh");var Tt=function(){this.documentDisplay=null;this.documentNavigation=null;this.searchGradingId=null;this.toolbar=new _t["default"];var e=this;this.SetParentDiv=function(e){this.toolbar.SetParentDiv(e)};this.SetDocumentDisplay=function(e){this.documentDisplay=e};this.SetSearchGradingId=function(e){this.searchGradingId=e};this.Draw=function(){if(!e.documentDisplay.FinishedRendering){var t=r["default"].events.documentRenderComplete;y["default"].Subscribe(t,e.Draw);return}null==e.documentNavigation&&(e.documentNavigation=new V["default"]);if(!e.documentNavigation.hasLoadedData){t=r["default"].events.docNavDataIsReady;y["default"].Subscribe(t,e.Draw)
;if(e.documentNavigation.FetchNextPreviousData(e.documentDisplay.NavigationProperties.ListSource,e.documentDisplay.NavigationProperties.NavigationPath,e.documentDisplay.NavigationProperties.List,e.documentDisplay.NavigationProperties.Rank))return}e.setLeftWidgets();e.setRightWidgets();e.toolbar.Draw()};this.setLeftWidgets=function(){var t=[];if(e.documentNavigation.hasNavigationData||e.documentNavigation.hasReturnToLink){var n=new bt["default"];n.SetDocumentNavigation(e.documentNavigation);t.push(n)}if(e.documentNavigation.hasNavigationData){var o=new Dt["default"];o.SetDocumentDisplay(e.documentDisplay);t.push(o)}if(e.documentNavigation.hasTerms){var i=new yt["default"];i.SetDocumentDisplay(e.documentDisplay);t.push(i)}if(e.documentNavigation.hasNavigationData&&e.documentNavigation.showInPlanDocumentsOnly){var a=new St["default"];t.push(a)}e.toolbar.SetLeftWidgets(t)};this.setRightWidgets=function(){e.toolbar.SetRightWidgets([])};this.setFeatureConfigurations=function(t){e.toolbar.SetFeatureConfigurations(t)}},wt=n("yklOysvk");var It=function(){var e=this,t=new V["default"],n=t.dualRelatedDocsData,o=function(e,t){var n=t?"":"co_dualDocument_RelatedDocsChild";return{content:e.Title,value:e.Url,isSelected:e.Current,textClass:n}};this.renderDropdownMenu=function(t){var i=n.Children.map(function(e){return o(e,!1)}),r=o(n.Parent,!0);i.unshift(r);var s={itemsContainerClass:"a11yDropdown-menu--right checkmarks",items:i,selectedItemClass:"checked"},l={defaultTriggerLabel:I["default"].lookup("SC.Document.Dual.Navigation.RelatedDocs","Related Docs"),dropdownContainer:a()(t),iconClass:"icon25",iconExpandedClass:"icon_upMenu-gray",iconCollapsedClass:"icon_downMenu-gray",iconAfterText:!0,triggerClass:"a11yDropdown-button"};e.menu=new Oe["default"](s);e.menuButton=new Le["default"](e.menu,l);e.menuButton.draw()};this.attachEventHandlers=function(){a()(e.menu.getDOMElement()).on("itemSelected",function(e,n){var o=n.items[0];if(o.isSelected)return;var i=o.value;t.currentSelectedOption&&(i=b["default"].AddQueryParamToUrl(i,"selectedNavMode",t.currentSelectedOption));Object(wt["default"])(i)})};this.setDomElement=function(t){e.domElement=t};this.draw=function(){var t=a()('<div id="co_dualDocument_RelatedDocs" class="collapsed"></div>')[0];e.domElement.appendChild(t);e.renderDropdownMenu(t);e.attachEventHandlers()}};var Et=n("tjTFLedb"),xt=n("7JGRqHyH"),Nt=function(){var e=this;Et["default"].apply(this,arguments);this.renderAllResultsDropdown=function(){var t=document.createElement("div");t.id="co_dualDocument_AllResultsNavigation";t.className="collapsed";e.parent.appendChild(t);e.renderDropdownMenu(t)};var t={Url:"",Title:""};this.updateNextPrevData=function(n){var o=e.docNavigation.dualNavigationData[n];e.docNavigation.currentSelectedOption=n;e.docNavigation.nextDocumentUrlAndTitle=o.NextDocument||t;e.docNavigation.previousDocumentUrlAndTitle=o.PreviousDocument||t;e.docNavigation.currentDocument=o.Rank;e.docNavigation.totalDocuments=o.Count};this.updateNextPrevWidget=function(){var t=e.docResultsMarkup(e.docNavigation);a()(".".concat(r["default"].classes.docToolbarDocumentNavigationNavText)).html(t)};this.updateMenuLabel=function(t){var n=e.docNavigation.dualNavigationData[t];e.$menuButtonText.text(n.Heading)};this.renderDropdownMenu=function(t){var n=C["default"].Parse(window.location.href).QueryString.selectedNavMode||"AllResults",o=ke.a.pick(e.docNavigation.dualNavigationData,"AllResults","Parent","Child"),i={itemsContainerClass:"a11yDropdown-menu--autoWidth checkmarks",items:ke.a.map(o,function(e,t){return{content:I["default"].format("SC.Document.DualSearch.Navigation.AllResults.DropdownOption",{Heading:e.Heading,Count:e.Count},"".concat(e.Heading," (").concat(e.Count,")")),value:t,isSelected:t==n}}),selectedItemClass:"checked"},r={dropdownContainer:a()(t),iconClass:"icon25",iconExpandedClass:"icon_upMenu-gray",iconCollapsedClass:"icon_downMenu-gray",iconAfterText:!0,triggerClass:"a11yDropdown-button"};e.menu=new Oe["default"](i);e.menuButton=new Le["default"](e.menu,r);e.menuButton.draw();var s=I["default"].lookup("SC.Document.DualSearch.Navigation.AllResults.Tooltip","Select results navigation"),l=a()(e.menuButton.getDOMElement());if(!c["default"].isIacOn("IAC-A11Y-CUSTOM-TOOLTIP")||c["default"].EnableIphone||c["default"].EnableIpad){var d=ke.a.uniqueId("coid_a11yTooltip_");l.append('<span id="'.concat(d,'" class="co_accessibilityLabel">').concat(s,"</span>"));l.attr("title",s).attr("aria-describedby",d)}else new xt["default"](l,s).render();a()(e.menu.getDOMElement()).prepend(a()("<li class='co_dropDownMenuLabel' role='none'>".concat(s,"</li>")));e.$menuButtonText=e.menuButton.$dropdownTrigger.find("span.".concat(e.menuButton.opts.itemTextClass));e.updateNavigation(n)};this.navigateToNextUrlIfNeeded=function(t){var n=e.docNavigation.dualNavigationData;if(n.IsParent&&"Child"===t){var o=n[t].NextDocument.Url;e.ChangeUrl(e.docNavigation.adjustNavigationUrl(o,!0))}if(!n.IsParent&&"Parent"===t){var i=n[t].PreviousDocument.Url;e.ChangeUrl(e.docNavigation.adjustNavigationUrl(i,!1))}};this.shouldDrawNavigation=function(){return!0};this.showOrHideNavigation=function(){var t=e.docNavigation.totalDocuments<2,n=a()("#".concat(r["default"].ids.documentNavigation)),o=r["default"].classes.hideState;n.toggleClass(o,t)};var n=this.Draw;this.Draw=function(){this.docNavigation&&this.docNavigation.hasNavigationData&&this.renderAllResultsDropdown();n.apply(this,arguments);this.showOrHideNavigation()};var o=this.AttachEventHandlers;this.AttachEventHandlers=function(){var e=this;o.apply(this,arguments);a()(this.menu.getDOMElement()).on("itemSelected",function(t,n){var o=n.items[0].value;e.updateNavigation(o);e.navigateToNextUrlIfNeeded(o);e.SetDirections()})};this.updateNavigation=function(t){e.updateNextPrevData(t);e.updateNextPrevWidget(t);e.updateMenuLabel(t);e.showOrHideNavigation()}};var kt=gt["default"].extend({buildRightWidgets:function(){var e=[];this.documentViewModelData.IsRelatedFullTextView||e.push(this.buildRelatedDocsWidget());return e.concat(this._super())},setDocumentNavigationWidget:function(e){var t=new function(){var e=this;this.documentDisplay=null;this.Name="DualSearchDocumentNavigation";this.Id=r["default"].ids.docToolbarDocumentNavigation;this.ClassName="co_relative";this.docNavWidget=new Nt;this.SetParentDiv=function(t){e.docNavWidget.SetParentDiv(t)};this.SetDocumentDisplay=function(t){e.documentDisplay=t};this.Draw=function(){e.docNavWidget.FetchData(e.documentDisplay.NavigationProperties.ListSource,e.documentDisplay.NavigationProperties.NavigationPath,e.documentDisplay.NavigationProperties.List,e.documentDisplay.NavigationProperties.Rank)}};t.SetDocumentDisplay(this.documentDisplay);e.push(t)},buildRelatedDocsWidget:function(){return new function(){var e=this;this.Name="DualSearchRelatedDocs";this.Id=r["default"].ids.docToolbarRelatedDocs;this.relDocsWidget=new It;this.SetParentDiv=function(t){e.relDocsWidget.setDomElement(t)};this.Draw=function(){e.relDocsWidget.draw()}}}}),At=n("tozfRYP0"),Rt=n("3j4fOEoY"),Pt=n("jOHT9XLs"),Bt=n("vVfh62dK"),Lt=n("nJWQgxDO"),Ot=n("MzrF7Ugc"),Mt=n("ojAWEKfh"),Wt=n("inuYPBvT");var Ft=function(){this.documentDisplay=null;this.documentNavigation=null;this.searchGradingId=null;this.toolbar=new _t["default"];var e=this;this.SetParentDiv=function(e){this.toolbar.SetParentDiv(e)};this.SetDocumentDisplay=function(e){this.documentDisplay=e};this.SetSearchGradingId=function(e){this.searchGradingId=e};this.Draw=function(){if(!e.documentDisplay.FinishedRendering){var t=r["default"].events.documentRenderComplete;y["default"].Subscribe(t,e.Draw);return}null==e.documentNavigation&&(e.documentNavigation=new V["default"]);if(!e.documentNavigation.hasLoadedData){t=r["default"].events.docNavDataIsReady;y["default"].Subscribe(t,e.Draw);if(e.documentNavigation.FetchNextPreviousData(e.documentDisplay.NavigationProperties.ListSource,e.documentDisplay.NavigationProperties.NavigationPath,e.documentDisplay.NavigationProperties.List,e.documentDisplay.NavigationProperties.Rank))return}e.setLeftWidgets();e.setRightWidgets();e.toolbar.Draw()};this.setLeftWidgets=function(){var t=[];this.setBackToResultsWidget(t);this.setDocNavWidget(t)
;this.setTermNavWidget(t);this.setShowDocsInPlanWidget(t);e.toolbar.SetLeftWidgets(t)};this.setBackToResultsWidget=function(t){if(e.documentNavigation.hasNavigationData||e.documentNavigation.hasReturnToLink){var n=new bt["default"];n.SetDocumentNavigation(e.documentNavigation);t.push(n)}};this.setDocNavWidget=function(t){if(e.documentNavigation.hasNavigationData){var n=new Dt["default"];n.SetDocumentDisplay(e.documentDisplay);t.push(n)}};this.setTermNavWidget=function(t){if(e.documentNavigation.hasTerms){var n=new yt["default"];n.SetDocumentDisplay(e.documentDisplay);t.push(n)}};this.setShowDocsInPlanWidget=function(t){if(e.documentNavigation.hasNavigationData&&e.documentNavigation.showInPlanDocumentsOnly){var n=new St["default"];t.push(n)}};this.setRightWidgets=function(){var t=[];this.setGoToWidget(t);this.setDisplayDocketsTrackWidget(t);this.setDisplayDealTrackWidget(t);this.setSeparatorWidget(t);var n=new Lt["default"];this.setDisplayOptionsWidget(t,n);this.setDeliveryWidget(t);this.setReadingModeWidget(t,n);e.toolbar.SetRightWidgets(t)};this.setGoToWidget=function(t){var n=new At["default"];n.SetDocumentDisplay(e.documentDisplay);t.push(n)};this.setDisplayDocketsTrackWidget=function(t){if(!0===e.toolbar.featureConfigurations.DKTTRACK&&this.docketTrackWarning!==r["default"].warnings.displayDocketsBlock){var n=new Rt["default"];n.SetDocumentObject(e.documentDisplay);t.push(n)}};this.setDisplayDealTrackWidget=function(t){if(!0===e.toolbar.featureConfigurations.BLCDEALTRACKALERT&&this.dealTrackWarning!==r["default"].warnings.displayDealBlock){var n=new Pt["default"];n.SetDocumentObject(e.documentDisplay);t.push(n)}};this.setSeparatorWidget=function(e){var t=new Bt["default"];e.push(t)};this.setDisplayOptionsWidget=function(e,t){var n=new Ot["default"];n.SetReadingModeManager(t);e.push(n)};this.setReadingModeWidget=function(e,t){var n=new Wt["default"];n.SetReadingModeManager(t);e.push(n)};this.setDeliveryWidget=function(e){var t=new Mt["default"];e.push(t)};this.setFeatureConfigurations=function(t){e.toolbar.SetFeatureConfigurations(t)};this.SetKeyCiteAlertWarning=function(){};this.SetDocketTrackWarning=function(){}},Ht=n("pRRoaVDd"),Gt=n.n(Ht),Ut={CreateFlow:"create",EditFlow:"edit",CopyFlow:"copy",BatchFlow:"batch"},Vt=n("fGg7yfwi"),jt=n("1r9wmanl"),qt=n("aLspR8vy"),Kt=new(n("SsthRmFI")["default"])({INDEX_KEY:"ALERT_INDEX_KEY"}.INDEX_KEY),zt={getCache:function(){return{put:function(e,t){Kt.Set(e,t)},clear:function(e){Kt.Remove(e)},get:function(e){return Kt.Get(e)}}}},Qt=n("RvwF9Uya"),$t=n("4Xl6rFd5"),Jt=n("6Soq1Eop"),Yt=n("M4pqUJYX"),Xt=n("tMgFeBcq");function Zt(e,t,n,o,i,a){var r={message:e,referenceElement:t,status:F["default"].Failure,position:n,hasPointer:void 0===o||o,hasCloseButton:!0,wrapper:!1,inputFocus:void 0===i||i,destroyOnClickoff:a};Object(Qt["default"])(r)}var en=n("cLbo/DCK");function tn(e){this._alertType=e.alertType;this._contextFlags=e.contextFlags;this._flowState=e.flowState;this._documentTitle=e.documentTitle||"";this._state=e.state&&e.state.basics||{};this._isBrowse=e.isBrowse;this._isSearch=e.isSearch;this._isDocument=e.isDocument;this._isTopicAlert=e.isTopicAlert;this._parentDiv=null;this._contentNameTitle=Vt["default"].AlertTypeData[this._alertType].ContentName||"Alert";this._alertNameMaxLength=250;this._maxAlertCountForReplace=100;this._provider=new jt["default"];this._localizedMessages={nameThisAlert:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.NameThisAlert","Name this alert"),alertNameHint:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.NameHint","MyAlertXYZ(required) (edit here to change name)"),replaceWithLabel:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.ReplaceWith","Select Alert to Replace"),selectAlert:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.SelectAlert","Select Alert"),loading:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.Loading","Loading..."),noTopicAlertsExist:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.NoTopicAlertsExist","No Topic Alerts Exist"),noSearchAlertsExist:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Basics.NoSearchAlertsExist","No Search Alerts Exist")};this._ids={alertName:"co_quickAlert_alertName",alertNameInfoBox:"co_quickAlert_alertNameInfoBox",replaceWithInfoBox:"co_quickAlert_replaceWithInfoBox",replaceWithPlaceholder:"co_quickAlert_replaceWithPlaceholder",replaceWithSwitcher:"co_quickAlert_replaceWithSwitcher",replaceWithSelect:"co_quickAlert_replaceWithSelect"};this._settings={ids:this._ids,localizedMessages:this._localizedMessages,alertNameMaxLength:this._alertNameMaxLength};this._status={init:1,loading:2,loaded:3,empty:4};this._contentHtml=Gt.a.template('<li class="co_formTextSelect">\n\t\t\t<label for="<%-ids.alertName%>"><%-localizedMessages.nameThisAlert%></label>\n\t\t\t<input type="text" id="<%-ids.alertName%>" maxlength="<%-alertNameMaxLength%>" placeholder="<%-localizedMessages.alertNameHint%>"/>\n\t\t\t<div id="<%-ids.alertNameInfoBox%>"></div>\n\t\t</li>\n\t\t<li class="co_formTextSelect co_hideState" id="<%-ids.replaceWithPlaceholder%>">\n\t\t\t<input type="checkbox" id="<%-ids.replaceWithSwitcher%>" />\n\t\t\t<label for="<%-ids.replaceWithSwitcher%>"><%-localizedMessages.replaceWithLabel%></label>\n\t\t\t<select id="<%-ids.replaceWithSelect%>" class="co_notActive" disabled="disabled"></select>\n\t\t\t<div id="<%-ids.replaceWithInfoBox%>"></div>\n\t\t</li>')}tn.prototype={setParentDiv:function(e){this._parentDiv=a()(e)},renderPayload:function(e){e.basics={name:a()("#"+this._ids.alertName).val(),description:"",clientId:Q["default"].GetClientId(),trackableCode:Q["default"].GetClientMatter().TrackableCode};if(Jt["default"].isAdmin()){e.basics.firmOwned=!0;e.basics.isPrivate=!1}var t=this._getAlertIdToReplace();t&&(e.basics.replaceWithAlert=t);return a.a.when()},setAlertMaxNameLength:function(e){this._alertNameMaxLength=e},_buildHtml:function(){return this._contentHtml(this._settings)},_getDefaultName:function(){if(this._flowState===Ut.EditFlow)return this._state.name;if(this._isBrowse)return en["default"].Browse.getCategoryPageTitle()||"";if(this._isSearch)return(en["default"].SearchResult.getQuery()||"").replace(/^adv(anced)?:[ \t]+/,"");if(this._isDocument)return this._documentTitle;return""},_getAlertsByFacetIds:function(){var e=this,t={alertType:Vt["default"].AlertTypes.WestClip,facetCriteria:{},start:1,end:this._maxAlertCountForReplace,sort:{direction:"ASCENDING",fieldName:"name"}};if(Jt["default"].isAdmin()){t.facetCriteria={owner:[{value:"loggedInUser"}]};Yt["default"].hasAccessToDataRoomAlerts()&&t.facetCriteria.owner.push({value:"Firm Owned"})}this._provider.getAlertsByFacetIds(function(t){var n=(t.alerts||[]).filter(function(t){return e._isTopicAlert?!t.query:t.query}).map(function(e){var t=Xt["default"].htmlEncode(e.name,!1);return'<option value="'.concat(e.guid,'">').concat(t,"</option>")});if(n.length){e._replaceWithState=e._status.loaded;n.unshift('<option value="" selected>'.concat(e._localizedMessages.selectAlert,"</option>"))}else{e._replaceWithState=e._status.empty;n.push('<option value="">'.concat(e._getNoAlertsMessage(),"</option>"))}e._renderReplaceWithContent();e._appendReplaceWithOptions(n.join(""))},t)},_getNoAlertsMessage:function(){return this._isTopicAlert?this._localizedMessages.noTopicAlertsExist:this._localizedMessages.noSearchAlertsExist},_renderContent:function(e){a()("#"+this._ids.alertName).val(this._getDefaultName());this._attachEvents();e.resolve()},_renderReplaceWithContent:function(){switch(this._replaceWithState){case this._status.empty:a()("#"+this._ids.replaceWithSwitcher).prop("disabled",!1).prop("checked",!1);a()("#"+this._ids.replaceWithSelect).toggleClass("co_notActive",!0).prop("disabled",!0);break;case this._status.loaded:a()("#"+this._ids.replaceWithSwitcher).prop("disabled",!1).focus();a()("#"+this._ids.replaceWithSelect).toggleClass("co_notActive",!1).prop("disabled",!1);break;case this._status.loading:a()("#"+this._ids.replaceWithSwitcher).prop("disabled",!0);a()("#"+this._ids.replaceWithSelect).toggleClass("co_notActive",!0).prop("disabled",!0);this._buildReplaceWithOptions();this._getAlertsByFacetIds();break;default:
case this._status.init:a()("#"+this._ids.replaceWithPlaceholder).toggleClass("co_hideState",!1).prop("disabled",!1);a()("#"+this._ids.replaceWithSelect).toggleClass("co_notActive",!0).prop("disabled",!0);this._buildReplaceWithOptions()}},_attachEvents:function(){var e=this;a()("#"+this._ids.replaceWithSwitcher).on("change",function(t){e._replaceWithState=a()(t.target).is(":checked")?e._status.loading:e._status.init;e._renderReplaceWithContent()})},_buildReplaceWithOptions:function(){var e="";switch(this._replaceWithState){case this._status.loading:e='<option value="">'.concat(this._localizedMessages.loading,"</option>");break;default:case this._status.init:e='<option value="">'.concat(this._localizedMessages.selectAlert,"</option>")}this._appendReplaceWithOptions(e)},_appendReplaceWithOptions:function(e){a()("#"+this._ids.replaceWithSelect).find("option").remove().end().append(e)},_getAlertIdToReplace:function(){return a()("#"+this._ids.replaceWithSwitcher).is(":checked")?a()("#"+this._ids.replaceWithSelect).val():null},draw:function(){var e=a.a.Deferred();this._parentDiv.append(this._buildHtml());this._renderContent(e);this._isDocument||this._renderReplaceWithContent();return e.promise()},validate:function(){var e,t,n=a.a.Deferred(),o=a()("#"+this._ids.alertName).val().trim(),i=a()("#"+this._ids.alertNameInfoBox);o?Xt["default"].isValidInput(o)?o.length>this._alertNameMaxLength&&(e=I["default"].format("SC.Alerts.AlertCreate.Basics.InvalidNameLength",{title:this._contentNameTitle},this._contentNameTitle+" name cannot be more than 250 characters in length.")):e=I["default"].lookup("SC.Alerts.Content.InvalidBrackets.AlertName","The character combination of < and > is not allowed in an Alert Name."):e=I["default"].format("SC.Alerts.AlertCreate.Basics.EmptyName",{title:this._contentNameTitle},"Please enter a name for this "+this._contentNameTitle);e&&Zt(e,i,W["default"].Bottom);var r=""===this._getAlertIdToReplace();!this._isDocument&&r&&Zt(t=I["default"].lookup("SC.Alerts.QuickAlert.Basics.SelectAlertToReplace","Select an existing alert to replace"),a()("#"+this._ids.replaceWithInfoBox),W["default"].Bottom);if(e||t)return n.reject().promise();if(this._flowState===Ut.EditFlow&&this._state.name===o)return n.resolve().promise();var s={name:o,type:this._alertType};Jt["default"].isAdmin()&&(s.administrative="admin");this._provider.isUniqueName(s,function(e){if(e.valid)n.resolve();else{Zt(e.reason,i,W["default"].Bottom);n.reject()}}.bind(this));return n.promise()}};var nn=tn;function on(e){nn.call(this,e);this._familyGuid=e.documentFamilyGuid}on.prototype={renderPayload:function(e){this._flowState===Ut.EditFlow?e.basics=a.a.extend({},this._state):e.basics={description:"",clientId:Q["default"].GetClientId(),trackableCode:Q["default"].GetClientMatter().TrackableCode,searchTarget:this._familyGuid};e.basics.name=a()("#"+this._ids.alertName).val();if(Jt["default"].isAdmin()){e.basics.firmOwned=!0;e.basics.isPrivate=!1}return a.a.when()}};on.prototype=a.a.extend({},nn.prototype,on.prototype);var an=on,rn=n("4+5Xg13e"),sn={VALID_RESULTS_PER_PAGE:["20","50","100"],getResultsPerPage:function(){var e=_["default"].Get("Alerts","AlertCenterResultsPerPage"),t=sn.getResultsPerPageAllowableValues();if(1===t.length)return parseInt(t[0],10);sn._isValidPreferenceValue(e,sn.VALID_RESULTS_PER_PAGE)||(e=sn.DEFAULT_RESULTS_PER_PAGE);return parseInt(e,10)},setResultsPerPage:function(e){if(!sn._isValidPreferenceValue(e,sn.VALID_RESULTS_PER_PAGE))throw new f["CobaltError"](h["default"].Alert,"Unable to set ResultsPerPage preference; '"+e+"' is not a valid preference value.");_["default"].Set("Alerts","AlertCenterResultsPerPage",e)},getAlertsEmailNotifications:function(e){return _["default"].Get("Alerts","AlertsEmailNotifications",null,e)},setAlertsEmailNotifications:function(e,t,n){_["default"].Set("Alerts","AlertsEmailNotifications",e,n,n,null,t)},getMultiFacetsEnabled:function(){return _["default"].Get("Global","MultiFacetsEnabled")},setMultiFacetsEnabled:function(e,t,n){_["default"].Set("Global","MultiFacetsEnabled",e,t,n)},_isValidPreferenceValue:function(e,t){if("string"==typeof e&&""===e||void 0===e)return!1;for(var n=0;n<t.length;n++)if(""+e===t[n])return!0;return!1},getResultsPerPageAllowableValues:function(){var e=_["default"].Get("Global","ResultsPerPageAllowableValues");e.sort(function(e,t){return e-t});return e},getCurrentFrequencyPreference:function(e){e=rn["default"].getMappedAlertType(e);var t=Vt["default"].AlertTypes[e];return t?_["default"].Get("Alerts",t+"DefaultFrequency"):""},getDeliveryOptionsSelectedPreference:function(e){e=rn["default"].getMappedAlertType(e);var t=Vt["default"].AlertTypes[e];return t?_["default"].Get("Alerts",t+"DeliveryOptionsSelected"):""},setDeliveryOptionsSelectedPreference:function(e,t,n){t=rn["default"].getMappedAlertType(t);_["default"].Set("Alerts",t+"DeliveryOptionsSelected",e,n,n)},setFrequencyPreference:function(e,t,n){t=rn["default"].getMappedAlertType(t);var o=Vt["default"].AlertTypes[t];o&&_["default"].Set("Alerts",o+"DefaultFrequency",e,n,n)},setModerationPreference:function(e,t,n){t=rn["default"].getMappedAlertType(t);var o=Vt["default"].AlertTypes[t];o&&_["default"].Set("Alerts",o+"DefaultModeration",e,n,n)},getModerationPreference:function(e){e=rn["default"].getMappedAlertType(e);var t=Vt["default"].AlertTypes[e];if(t)return _["default"].Get("Alerts",t+"DefaultModeration")},_compress:function(e){return String(e).replace(/Dockets/g,"~").replace(/CourtWireAlerts/g,"@")},compressRecentlySelectedContentUrls:function(e){var t=e.length;while(t--)e[t]=sn._compress(e[t]);return e},_decompress:function(e){return String(e).replace(/~/g,"Dockets").replace(/@/g,"CourtWireAlerts")},decompressRecentlySelectedContentUrls:function(e){var t=e.length;while(t--)e[t]=sn._decompress(e[t]);return e},setRecentlySelectedContentsPreference:function(e,t,n){t=rn["default"].getMappedAlertType(t);e=this.compressRecentlySelectedContentUrls(e);for(var o=[],i=0;i<e.length;i++)o[i]=i+"||"+e[i];_["default"].Set("Alerts","RecentContentSelections_"+t,o,n,n)},getRecentlySelectedContentsPreference:function(e){e=rn["default"].getMappedAlertType(e);for(var t=_["default"].Get("Alerts","RecentContentSelections_"+e),n=[],o=0;o<t.length;o++){var i=t[o].split("||"),a=i[0];if(2===i.length)n[a]=i[1];else{i.shift();n[a]=i.join("||")}}return n=sn.decompressRecentlySelectedContentUrls(n)},setEmailRecipientPreference:function(e,t,n){var o="AlertsDeliveryRecipients";k["default"].ViewData.FeatureConfigurations["ALERTS ADDRESS BOOK"]&&(o=Vt["default"].AlertTypeData[t].DefaultRecipientUDSProperty);_["default"].Set("Alerts",o,e,n,n)},setDeliveryFileFormatPreference:function(e,t,n){var o=Vt["default"].AlertTypeData[t].AlertsDeliveryFileFormat;void 0===o&&(o="AlertsDeliveryFileFormat");_["default"].Set("Alerts",o,e,n,n)},setDeliveryItemsAsFullTextPreference:function(e,t,n){_["default"].Set("Alerts","AlertsDeliveryItemsAsFullText",e,n,n,null,t)},setDeliveryItemsAsListPreference:function(e,t,n){_["default"].Set("Alerts","AlertsDeliveryItemsAsList",e,n,n,null,t)},setWhatToDeliverPreference:function(e,t,n){var o=Vt["default"].AlertTypeData[t].AlertsWhatToDeliver;void 0===o&&(o="AlertsWhatToDeliver");_["default"].Set("Alerts",o,e,n,n)},getEmailDeliveryDisplayDetailPreference:function(e){return _["default"].Get("Alerts","AlertsEmailDeliveryDisplayDetail",null,e)},setEmailDeliveryDisplayDetailPreference:function(e,t,n){_["default"].Set("Alerts","AlertsEmailDeliveryDisplayDetail",e,n,n,null,t)},getEmailDeliveryDocketAlertFieldsPreference:function(){return _["default"].Get("Alerts","EmailDeliveryDocketAlertFields")},setEmailDeliveryDocketAlertFieldsPreference:function(e,t,n){_["default"].Set("Alerts","EmailDeliveryDocketAlertFields",e,n,n)},getDeliveryFileContainerPreference:function(e){return _["default"].Get("Alerts","AlertsDeliveryFileContainer",null,e)},setDeliveryFileContainerPreference:function(e,t,n){_["default"].Set("Alerts","AlertsDeliveryFileContainer",e,n,n,null,t)},getNoResultsAlertPreference:function(e){var t=null,n=Vt["default"].AlertTypeData[e];n&&n.AlertNoResults&&(t=_["default"].Get("Alerts",n.AlertNoResults));return t},setAlertOnNoResults:function(e,t,n){
var o=Vt["default"].AlertTypeData[t];o&&o.AlertNoResults&&_["default"].Set("Alerts",o.AlertNoResults,e,n,n)},getIncludeAlertsWithNoResultsPreference:function(e){var t=null,n=Vt["default"].AlertTypeData[e];n&&n.IncludeAlertsWithNoResults&&(t=_["default"].Get("Alerts",n.IncludeAlertsWithNoResults));return t},setIncludeAlertsWithNoResults:function(e,t,n){var o=Vt["default"].AlertTypeData[t];o&&o.IncludeAlertsWithNoResults&&_["default"].Set("Alerts",o.IncludeAlertsWithNoResults,e,n,n)},getOtherDeliveryDisplayDetailPreference:function(e){return _["default"].Get("Alerts","AlertsOtherDeliveryDisplayDetail",null,e)},setOtherDeliveryDisplayDetailPreference:function(e,t,n){_["default"].Set("Alerts","AlertsOtherDeliveryDisplayDetail",e,n,n,null,t)},getOtherDeliveryNumberOfItemsPreference:function(e){return _["default"].Get("Alerts","AlertsOtherDeliveryNumberOfItems",null,e)},setOtherDeliveryNumberOfItemsPreference:function(e,t,n){_["default"].Set("Alerts","AlertsOtherDeliveryNumberOfItems",e,n,n,null,t)},getTimezonePreference:function(){return _["default"].Get("Global","TimeZone")},GetDetailLevel:function(){return _["default"].Get("Alerts","AlertCenterDisplayDetail")},SetDetailLevel:function(e,t,n){_["default"].Set("Alerts","AlertCenterDisplayDetail",e,t,n)},GetAlertsViewType:function(){return _["default"].Get("Global","AlertsViewType")},SetAlertsViewType:function(e,t,n){_["default"].Set("Global","AlertsViewType",e,t,n)},GetAlertNewsletterCenterViewType:function(){return _["default"].Get("Alerts","AlertNewsletterCenterViewType")},SetAlertNewsletterCenterViewType:function(e,t,n){_["default"].Set("Alerts","AlertNewsletterCenterViewType",e,t,n)},getResultHistoryAlertTypePreference:function(){return _["default"].Get("Alerts","AlertHistoryDisplayType")},setResultHistoryAlertTypePreference:function(e){_["default"].Set("Alerts","AlertHistoryDisplayType",e)},setDeliveryDualColumnsForNewsletters:function(e,t,n){_["default"].Set("Delivery","DualColumnsForNewsletters",e,n,n)},setDeliveryFontName:function(e,t,n){_["default"].Set("Delivery","FontName",e,n,n)},getSeamlessAuthenticationSettings:function(e){var t=new _["default"].Id("Alerts","AlertsSponsorId"),n=new _["default"].Id("Alerts","AlertsSponsorEmailDelivery"),o=new _["default"].Id("Alerts","AlertsSponsorOtherDelivery");return _["default"].GetMultiple([t,n,o],e,e)},setSeamlessAuthenticationSettings:function(e,t,n){var o={};o[new _["default"].Id("Alerts","AlertsSponsorId")]=e.sponsorId;o[new _["default"].Id("Alerts","AlertsSponsorEmailDelivery")]=e.emailDelivery;o[new _["default"].Id("Alerts","AlertsSponsorOtherDelivery")]=e.otherDelivery;_["default"].SetMultiple(o,t,n)},getErrorNotificationSettings:function(e){var t=new _["default"].Id("Alerts","NotifyAdmin"),n=new _["default"].Id("Alerts","NotifySubscribers");return _["default"].GetMultiple([t,n],e,e)},setErrorNotificationSettings:function(e,t,n){var o={};o[new _["default"].Id("Alerts","NotifyAdmin")]=e.NotifyAdmin;o[new _["default"].Id("Alerts","NotifySubscribers")]=e.NotifySubscribers;_["default"].SetMultiple(o,t,n)},getReplyToAddress:function(){return _["default"].Get("Alerts","ReplyTo")},setReplyToAddress:function(e,t,n){_["default"].Set("Alerts","ReplyTo",e,t,n)}},ln=sn,dn=n("CRJvDv3C"),cn=ln.getDeliveryOptionsSelectedPreference,un=ln.setDeliveryOptionsSelectedPreference;ln.getDeliveryOptionsSelectedPreference=function(e){return dn["default"].isPLDocument(e)?"Email":cn(e)};ln.setDeliveryOptionsSelectedPreference=function(e,t,n){if(!dn["default"].isPLDocument(t))return un(e,t,n);n()};var fn=ln,hn=n("Rbc/5Qxu"),pn=n("IiNtJFjh"),mn=n("hXsI0YRr"),gn={Edit:"Edit",EditWithAutoSuggest:"EditWithAutoSuggest",NewGroup:"NewGroup",ReadOnly:"ReadOnly"},vn=n("SW8wBfrQ"),Cn=n("d8UvjbB6"),_n=n("tJOVpjCS"),bn=n("XU0TZS/w"),yn=n("i3XmY87k"),Sn=n("a2O/4LIg"),Dn=n("U0T8VM8b"),Tn=n("gJP6i1wd"),wn={parentDiv:null,contactId:null,firstNameId:"coid_contactEdit_firstName",lastNameId:"coid_contactEdit_lastName",emailAddressId:"coid_contactEdit_emailAddress",saveButtonId:"coid_contactEdit_save",infoBox:null,contactListWidget:null,contactFirstName:null,contactLastName:null,contactEmailAddress:null,editMode:!1,modified:!1,saveErrorMessage:[],isFirstNamePresent:!1,isFirstNameCorrectLength:!1,isLastNamePresent:!1,isLastNameCorrectLength:!1,isEmailAddressPresent:!1,isEmailAddressCorrectLength:!1,isEmailAddressValid:!1,SetParentDiv:function(e){wn.parentDiv=e;wn.modified=!1;wn.editMode=!1},SetEditMode:function(e){wn.editMode=e},IsModified:function(){return wn.modified},Draw:function(e,t){wn.contactListWidget=e;var n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.CreateNewContact","Create New Contact"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.EditContact","Edit Contact"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.First","FIRST"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.Last","LAST"),s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.EMail","EMAIL"),l=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.Save","Save"),d=[];d[d.length]='<div id="newContact" class="co_edit_contact">';d[d.length]="<fieldset>";d[d.length]='<legend><span class="co_accessibilityLabel">'+n+"</span></legend>";if(void 0==t){d[d.length]='<label for="coid_contacts_newGroupName"><h5 class="coid_contacts_newGroupName" >'+n;d[d.length]='<a id="coid_new_contact_close" class="co_infoBox_closeButton" href="javascript:void(0);" type="new_contact"></a>';d[d.length]="</h5></label>"}else{d[d.length]='<label for="coid_contacts_newGroupName"><h5 class="coid_contacts_newGroupName" >'+o;d[d.length]='<a id="coid_new_contact_close" class="co_infoBox_closeButton" href="javascript:void(0);" type="new_contact"></a>';d[d.length]="</h5></label>"}d[d.length]='<ul class="co_contacts">';d[d.length]="<li>";d[d.length]='<label for="'+wn.firstNameId+'"><h5>'+i+"</h5></label>";d[d.length]='<input type="text" autocorrect="off" id="'+wn.firstNameId+'" size="8"/>';d[d.length]="</li>";d[d.length]="<li>";d[d.length]='<label for="'+wn.lastNameId+'"><h5>'+r+"</h5></label>";d[d.length]='<input type="text" autocorrect="off" id="'+wn.lastNameId+'" size="8"/>';d[d.length]="</li>";d[d.length]="<li>";d[d.length]='<label for="'+wn.emailAddressId+'"><h5>'+s+"</h5></label>";d[d.length]='<input type="text" autocorrect="off" id="'+wn.emailAddressId+'" size="22"/>';d[d.length]="</li>";d[d.length]="<li>";d[d.length]='<label for="'+wn.saveButtonId+'"></label><br />';d[d.length]='<a id="'+wn.saveButtonId+'" class="co_defaultBtn" href="javascript:void(0);" title="'+l+'" >'+l+"</a>";d[d.length]="</li>";d[d.length]="</ul>";d[d.length]="</fieldset>";d[d.length]="</div>";a()(wn.parentDiv).append(d.join(""));var c=a()("#"+wn.firstNameId.toString()).first();a()(c).bind("focus click",function(e){wn._handleContactInputElementFocus(e,this)});a()(c).bind("keydown",function(){wn.modified=!0});var u=a()("#"+wn.lastNameId.toString()).first();a()(u).bind("focus click",function(e){wn._handleContactInputElementFocus(e,this)});a()(u).bind("keydown",function(){wn.modified=!0});var f=a()("#"+wn.emailAddressId.toString()).first();a()(f).bind("focus click",function(e){wn._handleContactInputElementFocus(e,this)});a()(f).bind("keydown",function(){wn.modified=!0});a()("#coid_contactEdit_save").click(function(e){wn._handleSaveContactElementClick(e)});a()("#coid_new_contact_close").click(function(){wn._handleCloseContactElement()});t?wn._writeContactToControls(t):wn.contactId=null},_handleCloseContactElement:function(){wn.Close();wn.contactListWidget._showCurrentContact();wn.contactListWidget._addContactEvent();wn.contactListWidget._removeErrorMessage();Gn.SetEditWidgetExists(!1)},_handleContactInputElementFocus:function(){wn.contactListWidget._removeErrorMessage()},_handleSaveContactElementClick:function(e){var t=e.clientY,n=wn.editMode?"editContact":"newContact";wn.contactListWidget._removeErrorMessage();wn.SaveAndClose(e,n,t)},ValidateFields:function(){wn._isValidFirstName();wn._isValidLastName();wn._isValidEmailAddress()
;if((wn.isFirstNamePresent||wn.isFirstNameCorrectLength||wn.isLastNamePresent||wn.isLastNameCorrectLength||wn.isEmailAddressPresent||wn.isEmailAddressCorrectLength||wn.isEmailAddressValid)&&wn.isFirstNamePresent&&wn.isFirstNameCorrectLength&&wn.isLastNamePresent&&wn.isLastNameCorrectLength&&wn.isEmailAddressPresent&&wn.isEmailAddressCorrectLength&&wn.isEmailAddressValid)return!0;var e=[];if(wn.isFirstNamePresent){if(!wn.isFirstNameCorrectLength){var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.FirstNameExceedsCharacters","First name exceeds 50 characters");e[e.length]=t}}else{var n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.FirstNameRequired","A first name is required");e[e.length]=n}if(wn.isLastNamePresent){if(!wn.isLastNameCorrectLength){var o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.LastNameExceedsCharacters","Last name exceeds 150 characters");e[e.length]=o}}else{var i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.LastNameRequired","A last name is required");e[e.length]=i}if(wn.isEmailAddressPresent)if(wn.isEmailAddressCorrectLength){if(!wn.isEmailAddressValid){var a=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.CheckEmailAddressFormatting","Check email address formatting");e[e.length]=a}}else{var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.EmailExceedsCharacters","Email exceeds 100 characters");e[e.length]=r}else{var s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.EmailAddressRequired","An email address is required");e[e.length]=s}wn.saveErrorMessage=e.join("<br>");return!1},_publishSaveContactErrorMessage:function(e,t,n){var o=e,i={widgetMode:t,clientY:n},a=new y["default"].Message(o,i,"Cobalt.Widget.AddressBook.Internal.EditContact.SaveError","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditContact.SaveError",a)},SaveAndClose:function(e,t,n){if(wn.ValidateFields())wn.SaveValidContact();else{var o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactEditBox.ErrorMessage.PleaseCorrectFollowing","Please correct the following:")+" <br> "+wn.saveErrorMessage;wn._publishSaveContactErrorMessage(o,t,n);wn.saveErrorMessage=""}},SaveValidContact:function(){var e=wn.CreateContactFromControls();wn.contactListWidget._removeErrorMessage();wn.Close();1==wn.editMode&&wn._updateContactInfo(e);vn["default"].SaveDataroomContact(wn.contactId,e.FirstName,e.LastName,e.EmailAddress,function(e){if(0==wn.editMode){var t=e,n=new y["default"].Message(t,{},"Cobalt.Widget.AddressBook.Internal.EditContact.Save","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditContact.Save",n)}wn.contactListWidget._addContactEvent()},function(e){throw new f["CobaltError"](h["default"].Website,e)});wn.saveErrorMessage="";Gn.SetEditWidgetExists(!1)},Close:function(){if(wn.parentDiv){wn.modified=!1;wn.saveErrorMessage="";wn.isFirstNamePresent=!1;wn.isFirstNameCorrectLength=!1;wn.isLastNamePresent=!1;wn.isLastNameCorrectLength=!1;wn.isEmailAddressPresent=!1;wn.isEmailAddressCorrectLength=!1;wn.isEmailAddressValid=!1;a()(wn.parentDiv).remove()}},_updateContactInfo:function(e){var t="Cobalt.Widget.AddressBookContactEditBox.Internal.UpdateContact",n=e,o=new y["default"].Message(n,{},t,"1.0");y["default"].Publish(t,o)},_writeContactToControls:function(e){if(null==e.Id||void 0==e.Id)throw new f["CobaltError"](h["default"].Website,"Error while editing the contact. Contact Id is missing");wn.contactId=e.Id;if(e.FirstName){var t=a()("#"+wn.firstNameId.toString()).first();a()(t).val(e.FirstName);wn.contactFirstName=e.FirstName;wn.isFirstNamePresent=!0;wn.isFirstNameCorrectLength=!0}if(e.LastName){var n=a()("#"+wn.lastNameId.toString()).first();a()(n).val(e.LastName);wn.contactLastName=e.LastName;wn.isLastNamePresent=!0;wn.isLastNameCorrectLength=!0}if(e.EmailAddress){var o=a()("#"+wn.emailAddressId.toString()).first();a()(o).val(e.EmailAddress);wn.contactEmailAddress=e.EmailAddress;wn.isEmailAddressPresent=!0;wn.isEmailAddressCorrectLength=!0;wn.isEmailAddressValid=!0}},CreateContactFromControls:function(){var e=new Tn["default"];e.FirstName=wn.contactFirstName;e.LastName=wn.contactLastName;e.EmailAddress=wn.contactEmailAddress;e.Id=wn.contactId;return e},_isValidFirstName:function(){var e=a()("#"+wn.firstNameId.toString())[0];if(""!=a()(e).val().trim()){wn.isFirstNamePresent=!0;if(e.value.length>0&&e.value.length<51){wn.contactFirstName=e.value;wn.isFirstNameCorrectLength=!0}else wn.isFirstNameCorrectLength=!1}else wn.isFirstNamePresent=!1},_isValidLastName:function(){var e=a()("#"+wn.lastNameId.toString())[0];if(""!=a()(e).val().trim()){wn.isLastNamePresent=!0;if(e.value.length>0&&e.value.length<151){wn.contactLastName=e.value;wn.isLastNameCorrectLength=!0}else wn.isLastNameCorrectLength=!1}else wn.isLastNamePresent=!1},_isValidEmailAddress:function(){var e=a()("#"+wn.emailAddressId.toString())[0],t=a()(e).val().trim();if(""!=t){wn.isEmailAddressPresent=!0;if(t.length>0&&t.length<101){wn.isEmailAddressCorrectLength=!0;if(Object(u["ValidateSingleEmail"])(t)){wn.contactEmailAddress=t;wn.isEmailAddressValid=!0}else wn.isEmailAddressValid=!1}else wn.isEmailAddressCorrectLength=!1}else wn.isEmailAddressPresent=!1},Remove:function(){wn.parentDiv=null;wn.contactId=null;wn.infoBox=null;wn.contactListWidget=null;wn.contactFirstName=null;wn.contactLastName=null;wn.contactEmailAddress=null;wn.editMode=!1;wn.modified=!1;wn.saveErrorMessage=[];wn.isFirstNamePresent=!1;wn.isFirstNameCorrectLength=!1;wn.isLastNamePresent=!1;wn.isLastNameCorrectLength=!1;wn.isEmailAddressPresent=!1;wn.isEmailAddressCorrectLength=!1;wn.isEmailAddressValid=!1}},In=wn,En={GroupInfo:"GroupInfo",ContactInfo:"ContactInfo"},xn=n("TZmZY1y0"),Nn={lightbox:null,_confirmRemovalLightbox:null,_contactDetail:null,_groupMemberships:null,_membershipsToRemove:[],_oneMemberGroupsToRemove:[],_wereGroupsCompletelyDeleted:!0,_hasMembershipsChanged:!1,_groupListElement:null,_groupListInputs:null,_groupMembershipsCount:null,_groupMembershipsEmpty:null,_groupMembershipsLoading:null,_successMessage:null,_successMessageInfoBox:null,_oneMemberGroupSummaryToRemove:[],_cancelButtonId:"coid_contacts_cancelButton",_groupListElementId:"coid_contacts_groupsMembershipsListItems",_groupMembershipsCountId:"coid_filteredGroupsMembershipsCount",_groupMembershipsEmptyId:"coid_filteredGroupsMembershipsEmpty",_groupMembershipsInputId:"coid_contacts_groupsMemberships_cb",_groupMembershipsRemoveId:"coid_contacts_groupsMembershipsRemoveFrom",_successMessageCloseHandler:function(){Nn._hideSuccessMessage()},_membershipCheckBoxClickHandler:function(){Nn._membershipCheckBoxClick()},SetGroupMemberships:function(e){Nn._groupMemberships=e},SetContactDetail:function(e){Nn._contactDetail=e},Draw:function(){var e=Nn._contactDetail;if(!e)return;Nn.lightbox&&Nn.lightbox.Remove();Nn.lightbox=new ve["default"];Nn.lightbox.SetId("coid_contacts_lightbox");Nn.lightbox.SetTitle(I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Contacts","Contacts"));Nn.lightbox.SetClass("co_contacts_memberships co_contacts_overlayBox co_overlayBox_container");var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Close","Close");Nn.lightbox.SetCloseLinkObject({alt:t,onclick:function(){Nn.Close()}});var n=Nn.lightbox.GetContentDomElement(),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.CloseMemberships","Close Memberships");Nn.lightbox.GetFooterDomElement().innerHTML='<ul id="coid_contacts_newGroupButtons"><li><input id="'+Nn._cancelButtonId+'" type="button" value="'+o+'" /></li></ul>'
;var i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.MembershipsFor","Memberships for"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.RemovePerson","Remove Person from Selected Groups"),s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Memberships","Memberships"),l=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.PersonNotMember","This person is not a member of any groups.");n.innerHTML="<h4>"+i+" "+Object(u["EncodeHtml"])(e.FirstName+" "+e.LastName)+'<span class="co_smallText" id="'+Nn._groupMembershipsCountId+'"></span></h4><a href="javascript:void(0);" id="'+Nn._groupMembershipsRemoveId+'" class="co_contacts_groupsReturn co_disabled co_tbButton btnOffset" title="'+r+'"><span class="icon25 icon_close_red"></span>'+r+'</a><h5 class="co_accessibilityLabel">'+s+'</h5><ul class="co_contacts_data co_shrub co_hideState" id="'+Nn._groupListElementId+'"></ul><ul id="'+Nn._groupMembershipsEmptyId+'" class="co_contacts_noResults co_contacts_data co_hideState"><li><h5>'+l+'</h5></li></ul><div class="co_loading co_contacts_data"></div>';var d=a()(n);Nn._groupListElement=d.find("#"+Nn._groupListElementId)[0];Nn._groupMembershipsCount=d.find("#"+Nn._groupMembershipsCountId)[0];Nn._groupMembershipsEmpty=d.find("#"+Nn._groupMembershipsEmptyId)[0];Nn._groupMembershipsLoading=d.find(".co_loading")[0];Nn.lightbox.Draw(!0);a()("#"+Nn._cancelButtonId).click(Nn.Close);a()("#"+Nn._groupMembershipsRemoveId).click(Nn.RemoveMemberships);Object(yn["AttachClickFixForLabels"])(n);Sn["default"].GetDataroomContactGroupMemberships(e.Id,function(e){Nn.SetGroupMemberships(e);Nn.RedrawContents()},function(){})},Close:function(){if(Nn._hasMembershipsChanged){var e=new y["default"].Message({},{},"Cobalt.Widget.AddressBook.Internal.EditGroup.Save","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditGroup.Save",e)}Nn._groupListInputs&&Nn._groupListInputs.unbind("click",Nn._membershipCheckBoxClickHandler);Nn._close()},RedrawContents:function(){Nn._groupListElement.innerHTML=Nn._DrawInfoMessageContainer();var e=a()(Nn._groupListElement).find("div").get(0);Nn._successMessageInfoBox=new M["default"](e,F["default"].Success,W["default"].None,!1,!0,!1);var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.SuccessfullyRemoved","This person is not a member of any groups.");Nn._successMessageInfoBox.Draw(t);var n=null==Nn._groupMemberships?0:Nn._groupMemberships.length;Nn._groupMembershipsCount.innerHTML=" ("+n+")";Nn._groupListInputs&&Nn._groupListInputs.unbind("click",Nn._membershipCheckBoxClickHandler);for(var o=[],i=0;i<Nn._groupMemberships.length;i++)Nn._groupMemberships[i].GroupPermission==xn["default"].Write?o.push('<li><div class="co_listItem"><label for="coid_contacts_groupsMemberships_cb'+i+'" class="co_contacts_membershipsItem"><span class="co_contacts_groupsCount">'+Nn._groupMemberships[i].NumberOfMembers+'</span><input type="checkbox" id="coid_contacts_groupsMemberships_cb'+i+'" />'+Object(u["EncodeHtml"])(Nn._groupMemberships[i].GroupName||"")+"</label></div></li>"):o.push('<li><div class="co_listItem"><span class="co_contacts_membershipsItem"><span class="co_contacts_groupsCount">'+Nn._groupMemberships[i].NumberOfMembers+"</span>"+Object(u["EncodeHtml"])(Nn._groupMemberships[i].GroupName||"")+"</span></div></li>");Nn._groupListElement.innerHTML+=o.join("");Nn._groupListInputs=a()(Nn._groupListElement).find("input");Nn._groupListInputs.bind("click",Nn._membershipCheckBoxClickHandler);a()("#"+Nn._groupMembershipsRemoveId).addClass("co_disabled");if(n>0){a()(Nn._groupMembershipsEmpty).addClass("co_hideState");a()(Nn._groupListElement).removeClass("co_hideState");a()(Nn._groupMembershipsLoading).addClass("co_hideState")}else{a()(Nn._groupMembershipsEmpty).removeClass("co_hideState");a()(Nn._groupListElement).addClass("co_hideState");a()(Nn._groupMembershipsLoading).addClass("co_hideState")}},_DrawInfoMessageContainer:function(){return'<li class="co_contacts_message co_hideState" id="coid_contacts_groupMembershipsMessage"><div></div></li>'},_ShowConfirmRemovalDialog:function(e){if(null==e)return;var t=Object(u["EncodeHtml"])(e[0]||""),n="<p>"+I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Message.Warning",{DisplayText:t},"If this person is removed from <strong>"+t+"</strong> the group will be deleted since this person is the last remaining member.")+"</p>";if(e.length>1){n="<p>"+I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Message.LastMember","This person is the last remaining member of the following groups:")+"</p>";n+="<ul class='co_groupsToDelete'>";for(var o=0;o<e.length;o++)n+="<li>"+Object(u["EncodeHtml"])(e[o]||"")+"</li>";n+="</ul>";n+="<p>"+I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Message.RemovePersonAndGroup","If this person is removed from these groups, the groups will also be deleted.")+"</p>"}if(null==Nn._confirmRemovalLightbox){var i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.ConfirmRemoval","Confirm Removal");Nn._confirmRemovalLightbox=new ve["default"];Nn._confirmRemovalLightbox.SetId("coid_contactsConfirmRemoval_lightbox");Nn._confirmRemovalLightbox.SetTitle(i);Nn._confirmRemovalLightbox.SetClass("co_contactsConfirmRemoval");var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Close","Close");Nn._confirmRemovalLightbox.SetCloseLinkObject({alt:r,onclick:function(){Nn._RemoveConfirmRemovalDialog()}});var s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Remove","Remove"),l=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Cancel","Cancel");Nn._confirmRemovalLightbox.GetFooterDomElement().innerHTML='<ul><li><input type="button" id="co_confirmRemovalButton" class="co_primaryBtn" name="'+s+'" value="'+s+'" /></li><li><a href="javascript:void(0);" id="co_confirmRemovalCancelButton" class="co_overlayBox_buttonCancel"><strong>'+l+"</strong></a></li></ul>"}Nn._confirmRemovalLightbox.GetContentDomElement().innerHTML=n;Nn._confirmRemovalLightbox.Draw(!0);a()("#co_confirmRemovalButton").click(Nn.RemoveOneMemberGroups);a()("#co_confirmRemovalCancelButton").click(Nn._RemoveConfirmRemovalDialog)},_RemoveConfirmRemovalDialog:function(){Nn._membershipsToRemove.length>Nn._oneMemberGroupsToRemove.length&&Nn._UpdateContents();null!=Nn._confirmRemovalLightbox&&Nn._confirmRemovalLightbox.Remove()},Save:function(){},RemoveMemberships:function(){for(var e=a()(Nn._groupListElement).find("input:checked"),t=Nn._groupMembershipsInputId.length,n=[],o=e.length-1;o>=0;o--){var i=e[o].id.substring(t);Nn._membershipsToRemove.push(i);n.push(Nn._groupMemberships[i].GroupId)}n.length>0&&Sn["default"].DeleteAddressBookGroupMembership(Nn._contactDetail.Id,n,Nn._RemoveMembershipsSuccessHandler,function(){})},RemoveOneMemberGroups:function(){function e(e){if(e.IsGroupShared){var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.HelpText","Help Text"),n=new ve["default"];n.SetCloseLinkObject({id:"helpText",alt:t,onclick:function(){n.Remove()}});var o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.ErrorMessage.CannotDeleteGroup","Error: Group(s) cannot be deleted."),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.ErrorMessage.GroupInUse","This group(s) is in use for sharing and cannot be deleted.");n.SetTitle(o);a()(n.GetContentDomElement()).append(" "+i);n.Draw();return}Nn._RemoveConfirmRemovalDialog();Nn._UpdateContents(!0)}function t(){Nn._RemoveConfirmRemovalDialog();Nn._UpdateContents(!1)}if(null!=Nn._oneMemberGroupSummaryToRemove){a.a.each(Nn._oneMemberGroupSummaryToRemove,function(n,o){Sn["default"].DeleteGroup(o.GroupId,e,t)});Nn._oneMemberGroupSummaryToRemove=[]}},_RemoveMembershipsSuccessHandler:function(e){var t=e.NotDeletedGroups,n=[];if(null!=t&&t.length>0){Nn._oneMemberGroupsToRemove=t;for(var o=0;o<t.length;o++)for(var i=0;i<Nn._groupMemberships.length;i++)if(Nn._groupMemberships[i].GroupId==t[o]){
n.push(Nn._groupMemberships[i].GroupName);Nn._oneMemberGroupSummaryToRemove.push(Nn._groupMemberships[i]);break}Nn._ShowConfirmRemovalDialog(n);return}Nn._UpdateContents(!0)},_UpdateContents:function(e){Sn["default"].GetDataroomContactGroupMemberships(Nn._contactDetail.Id,function(t){Nn._hasMembershipsChanged=!0;Nn.SetGroupMemberships(t);Nn.RedrawContents();e&&Nn._showSuccessMessage()},function(){})},_close:function(){Nn.lightbox&&Nn.lightbox.Remove();Nn.lightbox=null;Nn._confirmRemovalLightbox=null;Nn._contactDetail=null;Nn._groupMemberships=null;Nn._membershipsToRemove=[];Nn._oneMemberGroupsToRemove=[];Nn._wereGroupsCompletelyDeleted=!0;Nn._hasMembershipsChanged=!1;Nn._groupListElement=null;Nn._groupListInputs=null;Nn._groupMembershipsCount=null;Nn._groupMembershipsEmpty=null;Nn._groupMembershipsLoading=null;Nn._successMessage=null;Nn._successMessageInfoBox=null;Nn._oneMemberGroupSummaryToRemove=[]},_showSuccessMessage:function(){a()("#coid_contacts_groupMembershipsMessage").bind("click",Nn._successMessageCloseHandler);var e=null;e=Nn._membershipsToRemove.length>1?I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Message.RemovedFromGroups","The person was successfully removed from the selected groups."):I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactMemberships.Message.RemovedFromGroup","The person was successfully removed from the selected group.");Nn._successMessageInfoBox.Draw(e);var t=a()("#coid_contacts_groupMembershipsMessage");a()(t[0]).removeClass("co_hideState")},_hideSuccessMessage:function(){a()("#coid_contacts_groupMembershipsMessage").unbind("click");a()(a()("#coid_contacts_groupMembershipsMessage")[0]).addClass("co_hideState")},_membershipCheckBoxClick:function(){a()(Nn._groupListElement).find("input:checked").length>0?a()("#"+Nn._groupMembershipsRemoveId).removeClass("co_disabled"):a()("#"+Nn._groupMembershipsRemoveId).addClass("co_disabled")}},kn=Nn;function An(e){if(null==e)throw new f["CobaltError"](h["default"].Website,"AddressBookCollaborationInfoBox: domElement was not found");this.domElement=e;this.infoBox=new M["default"](e,F["default"].None,W["default"].Top,!0,!0,!1);this.mode=null;this.scrollSelector="ul.co_shrub";this.visible=!1;var t=this;this.closeOnActionOutsideOfWidgetHandler=function(e){if(t._closeOnActionOutsideOfWidget(e))return!0};this.forceCloseWidgetHandler=function(){t.Hide()};this._BindEventHandlers()}An.prototype={SetMode:function(e){this.mode=e},Draw:function(e,t){if(null==this.infoBox||null==this.domElement)return;this.visible=!0;if(a.a.browser.msie){a()("#coid_contacts_contentDiv").addClass("co_relative");a()(this.domElement).css({top:-e-115})}else a()(this.domElement).css({bottom:e+15});t?this.mode==En.GroupInfo?this._DrawGroupsContent(t):this._DrawContactsContent(t):this._DrawLoadingState();a()(this.domElement).addClass("co_contacts_moreInfo")},Hide:function(){if(!this.visible)return;this.infoBox&&this.infoBox.Remove&&this.infoBox.Remove();this.visible=!1},Remove:function(){this.infoBox&&this.infoBox.Remove&&this.infoBox.Remove();this.visible=!1;this.infoBox=null;this.mode=null;this.domElement=null;this._UnbindEventHandlers();this.closeOnActionOutsideOfWidgetHandler=null;this.forceCloseWidgetHandler=null},_DrawLoadingState:function(){this.infoBox.Draw('<div class="co_deliveryWaitProgressImg"></div>')},_DrawContactsContent:function(e){kn.SetContactDetail(e);var t="";e.EmailAddress&&(t=e.EmailAddress);var n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationInfoBox.ShowGroupMemberships","Show Group Memberships");this.infoBox.Draw("<h5>"+Object(u["EncodeHtml"])(e.FirstName+" "+e.LastName)+"</h5><p>"+Object(u["EncodeHtml"])(t||"")+'</p><a id="contacts_membershipsInfo_link" class="co_contacts_membershipsInfo" href="javascript:void(0);">'+n+"</a>");a()("#contacts_membershipsInfo_link").click(kn.Draw)},_DrawGroupsContent:function(e){var t="";if("READ"==e.GroupPermission&&e.OwnerLastName){t=" (created by ";e.OwnerFirstName&&(t+=e.OwnerFirstName+" ");t+=e.OwnerLastName+")"}for(var n="<h5>"+I["default"].lookup("SC.Website.CollaborationInfoBox.GroupsContent.MemberInfoTitle","Members")+Object(u["EncodeHtml"])(t)+"</h5><ul>",o=0;o<e.GroupMembers.length;o++){var i=e.GroupMembers[o];n+="<li>"+Object(u["EncodeHtml"])(i.LastName||"");Object(u["IsNotNullOrEmpty"])(i.FirstName)&&(n+=", "+Object(u["EncodeHtml"])(i.FirstName));n+="</li>"}n+="</ul>";this.infoBox.Draw(n)},_BindEventHandlers:function(){a()("body").on({click:this.closeOnActionOutsideOfWidgetHandler,keypress:this.closeOnActionOutsideOfWidgetHandler},"*");var e=a()(this.scrollSelector);e.bind("scroll",this.forceCloseWidgetHandler);e.bind("mousewheel",this.forceCloseWidgetHandler)},_UnbindEventHandlers:function(){a()("body").off({click:this.closeOnActionOutsideOfWidgetHandler,keypress:this.closeOnActionOutsideOfWidgetHandler},"*");var e=a()(this.scrollSelector);e.unbind("scroll",this.forceCloseWidgetHandler);e.unbind("mousewheel",this.forceCloseWidgetHandler)},_closeOnActionOutsideOfWidget:function(e){if(a()(e.target).hasClass("co_contacts_info")&&a.a.contains(this.domElement.parentNode,e.target))return;this.Hide();return!0}};var Rn=An,Pn=n("OFRWjO3K");function Bn(){this.parentDiv=null;this.parentDivJQuery=null;this.contactList=null;this.key=null;this.settings={delay:40};this.chunkSize=vn["default"].PageSize;this.startingIndex=0;this.nextPageStartingIndex=0;this.previousStartingIndex=0;this.previousLength=0;this.prevoiusFilter=null;this.totalRecordsCount=0;this.paginationNavSetup=!1;this.firstPageAnchor=null;this.nextPageAnchor=null;this.previousPageAnchor=null;this.lastPageAnchor=null;this.firstPageAnchorBound=!1;this.nextPageAnchorBound=!1;this.previousPageAnchorBound=!1;this.lastPageAnchorBound=!1;this.navRangeElement=null;this.innerContainerDiv=null;this.listULElement=null;this.listCountElement=null;this.lightboxOffset=null;this.moreInfoWidget=null;this.searchInputElement=null;this.listItemIdPrefix="drag";this.dropDownArrowId="coid_contacts_people_filterDropDownMenuAnchor";this.dropDownControlId="coid_contacts_people_filterDropDownControl";this.dropDownListId="coid_contacts_people_filterDropDownList";this.dropDownListItemsId="coid_contacts_people_filterDropDownListItems";this.dropDownSelectedValueId="coid_contacts_people_filterDropDownSelectedValue";this.searchBoxInputDivId="coid_contacts_people_searchBoxInputDiv";this.searchBoxInputId="coid_contacts_people_searchBoxInput";this.contactEditBoxWidget=null;this.addNewContactWidgetDivId="co_contacts_addNewContactWidget";this.addNewContactButtonId="coid_contacts_addNewContactButton";this.addNewContactElementId="coid_contacts_addNewContactContainer";this.saveContactMessagePlaceHolder=null;this.saveContactErrorPlaceHolderId="coid_contacts_SaveErrorMessage";this.saveContactErrorMessageId="coid_contacts_errorMessage";this.updateContactInfoSubscription=null;this.selectContactSubscription=null;this.unselectContactSubscription=null;this.clearContactsSubscription=null;this.selectContactOnDragDropSubscription=null;this.addNewContactButtonSubscription=null;this.manageOnlyMode=!0;this.adminUser=!0;this.saveContactInfoSubscription=null;this._invalidEmailInfoBox=null;this._firmOnlyContacts=null;this._changeOwnerMode=!1;this._alertOwnerGuid=null;this.contactBrowserKeyData={};this.lastFilterRequest=null;this.collaborationWidget=null}Bn.prototype={SetParentDiv:function(e){this.parentDiv=e;this.parentDivJQuery=a()(e)},SetChangeOwnerMode:function(e){this._changeOwnerMode=e},SetFirmOnlyContacts:function(e){this._firmOnlyContacts=e},SetOwnerToDisplay:function(e){this._alertOwnerGuid=e},SetCollaborationWidget:function(e){this.collaborationWidget=e},SetManageOnlyMode:function(e){this.manageOnlyMode=e},SetAdminUser:function(e){this.adminUser=e},SetAddNewContactButtonId:function(e){this.addNewContactButtonId=e},SetContactList:function(e,t,n){this.contactList=e;this.startingIndex=t;this.nextPageStartingIndex=t+this.chunkSize;t>0&&(this.previousStartingIndex=t-this.chunkSize);this.totalRecordsCount=n;(this.nextPageStartingIndex<this.totalRecordsCount||this.startingIndex>0)&&!this.paginationNavSetup&&this._setupPaginationHtml()
;this.paginationNavSetup&&this._setupPaginationNavigationAndRangeDisplay()},SetWidgetData:function(e){this.collaborationBoxData=e;this._changeOwnerMode;if(e)for(var t=JSON.parse(e),n=0;n<t.SelectedContacts.length;n++)t.SelectedContacts[n].Id&&this._selectContactEventHandler(t.SelectedContacts[n].Id)},ShowNoDataroomAccess:function(){this.innerContainerDivJQuery.find(".co_contacts_noResults").first().addClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_createFirst").first().addClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_noDataroomAccess").first().removeClass("co_hideState");a()(document.getElementById(this.addNewContactButtonId)).addClass("co_hideState");a()(document.getElementById(this.searchBoxInputId)).attr("disabled","disabled")},Draw:function(e){this.key=e;this.searchBoxInputId+="_"+e;var t=document.createElement("div");t.setAttribute("id","coid_contacts_peopleList_"+e);a()(t).addClass("co_overlayBox_leftContent");this.saveContactErrorPlaceHolderId=this.saveContactErrorPlaceHolderId+"_"+e;this.parentDiv.appendChild(t);var n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.People","People"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.AddPeople","Add People"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.PeopleList","People List"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.NewContact","New Contact"),s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ContactsMessage","Add your first contact"),l=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ErrorMessage.NoDataroomAccess","No Dataroom access"),d=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ContactsMessageNo","No people found.");t.innerHTML="<h4>"+n+'<span id="co_filteredPeopleCount" class="co_smallText"></span></h4><ol class="co_navPages" id="co_navigationPages"></ol>';this._changeOwnerMode||(t.innerHTML+='<a href="javascript:void(0);" id="'+this.addNewContactButtonId+'" class="co_contacts_addNew" title="'+o+'">'+o+"</a>");t.innerHTML+=this._getFilterHTML()+'<div id="'+this.addNewContactWidgetDivId+"_"+e+'"></div><h5 class="co_accessibilityLabel">'+i+'</h5><ul class="co_shrub co_contacts_data" id="coid_contacts_peopleListItems_'+e+'"></ul><ul class="co_contacts_createFirst co_contacts_data co_hideState"><li class="co_contacts_message co_hideState"></li><li><h5><a title="'+r+'" href="javascript:void(0);">'+s+'</a></h5></li></ul><ul class="co_contacts_createFirst co_contacts_noDataroomAccess co_hideState"><li><h5><a title="'+l+'">'+l+'</a></h5></li></ul><ul class="co_contacts_noResults co_contacts_data co_hideState"><li class="co_contacts_message co_hideState"></li><li><h5>'+d+'</h5></li></ul><div class="co_loading co_contacts_data"></div><div class="co_contacts_moreInfo"></div><div id="'+this.saveContactErrorPlaceHolderId+'"></div>';this.innerContainerDivJQuery=a()(t);this.innerContainerDiv=t;this.moreInfoWidget=new Rn(this.innerContainerDivJQuery.find(".co_contacts_moreInfo")[0]);this.moreInfoWidget.SetMode(En.ContactInfo);this.listULElement=this.innerContainerDivJQuery.find("#coid_contacts_peopleListItems_"+e)[0];this.listCountElement=this.innerContainerDivJQuery.find("#co_filteredPeopleCount")[0];var c=this.innerContainerDivJQuery.find("#"+this.searchBoxInputId)[0];this.searchInputElement=c;this.AddEventSubscriptions();this.DrawLoadingState()},_removeErrorMessage:function(){this.saveContactMessagePlaceHolder&&this.saveContactMessagePlaceHolder.Remove()},AddEventSubscriptions:function(){var e=this;this.updateContactInfoSubscription||(this.updateContactInfoSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.AddressBook.UpdateContact",function(t,n){e._updateContactInfoEventHandler(n.Data);e.SetWidgetData(n.Metadata)}));this.saveContactInfoSubscription||(this.saveContactInfoSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.AddressBook.EditContact.Save",function(t,n){e.collaborationBoxData=n.Data;e._getFirstPage()}));this.selectContactSubscription||(this.selectContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.SelectContact",function(t,n){e._selectContactEventHandler(n.Data)}));this.unselectContactSubscription||(this.unselectContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectContact",function(t,n){e._unselectContactEventHandler(n.Data)}));this.clearContactsSubscription||(this.clearContactsSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.Clear",function(){e._unselectAllContactsEventHandler()}));this.selectContactOnDragDropSubscription||(this.selectContactOnDragDropSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.DragDropSelectContact",function(t,n){e._selectContactEventHandler(n.Data)}));this.saveContactErrorMessageSubscription||(this.saveContactErrorMessageSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditContact.SaveError",function(t,n){e._displaySaveContactErrorEventHandler(n.Data,n.Metadata)}));if(this.searchInputElement){var t=a()(this.searchInputElement);t.bind("focus",function(t){e._handleSearchInputElementFocus(t)});t.bind("blur",function(t){e._handleSearchInputElementLoseFocus(t)});t.bind("keyup",function(t){e._handleSearchInputElementKeyUp(t)})}a()("#coid_contacts_peopleList_"+this.key).off("mouseover","div.co_listItem").off("mouseleave","div.co_listItem").on({mouseover:function(){a()(this).addClass("hover")},mouseleave:function(){a()(this).removeClass("hover")},focusin:function(e){a()(e.target).closest("div.co_listItem").addClass("hover")},focusout:function(e){a()(e.relatedTarget).parents(".co_listItem.hover").get(0)||a()(e.target).closest(".co_listItem").removeClass("hover")}},"div.co_listItem").off("click","a.co_contacts_info").on("click","a.co_contacts_info",function(t){e._moreInfoClickHandler(t,this)}).off("click touchend","a.co_contacts_selectable").off("click","a.co_contacts_edit[type='contacts']").on("click","a.co_contacts_edit[type='contacts']",function(){e._contactEditClickHandler(this)}).on("click touchend","a.co_contacts_selectable",function(){e._contactClickedHandler(this)}).off("click","a.co_contacts_delete[type='contacts']").on("click","a.co_contacts_delete[type='contacts']",function(t){e._contactDeleteClickHandler(t,this)});this.addNewContactButtonSubscription||(this.addNewContactButtonSubscription=this._addContactEvent())},_displaySaveContactErrorEventHandler:function(e,t){var n=a()("#"+this.saveContactErrorPlaceHolderId)[0];if(n){var o=document.createElement("div");o.id=this.saveContactErrorMessageId;n.appendChild(o);this.saveContactMessagePlaceHolder=new M["default"](o,F["default"].None,W["default"].Bottom,!0,!0,!1);this.saveContactMessagePlaceHolder.Draw(e);this.contactEditBoxWidget=In;if(null!=Object(u["IsNotNullOrEmpty"])(this.key)){var i=this.key+"_"+t.widgetMode,r=t.clientY,s=0,l=0;switch(i){case"contacts_newContact":s=r-361;l=380;break;case"contacts_editContact":s=r-361;l=365;break;case"edit_groups_newContact":s=r-449;l=360;break;case"edit_groups_editContact":s=r-449;l=366;break;case"contacts_deleteContact":s=r-330;l=402;break;case"edit_groups_deleteContact":s=r-421;l=402}n.setAttribute("style","margin:"+s+"px 0  0 "+l+"px; z-index:9; position:absolute;")}}},_addContactEvent:function(){var e=this;a()("#coid_contacts_peopleListItems_"+this.key).removeClass("co_compact");var t=a()("a#"+this.addNewContactButtonId).click(function(){e._addNewContactEventHandler(this)});a()("a#"+this.addNewContactButtonId).removeClass("co_disabled");return t},_contactEditClickHandler:function(e){var t=a()(e).closest("li").data("contactSummary");if(t&&!this.editWidgetExists){var n=a()(e).parent().parent();if(n){this._removeContactEvent();this._showCurrentContact();this._hideCurrentContact(n);var o=document.createElement("div");o.id=this.addNewContactElementId;n.append(o);this._removeErrorMessage();this.contactEditBoxWidget=In
;this.contactEditBoxWidget.IsModified()?this.contactEditBoxWidget.SaveAndClose():this.contactEditBoxWidget.Close();this.contactEditBoxWidget.SetParentDiv(o);this.contactEditBoxWidget.SetEditMode(!0);this.contactEditBoxWidget.Draw(this,t);this.addressBook=Gn;this.addressBook.SetEditWidgetExists(!0)}}},_hideCurrentContact:function(e){a()(e).find(".co_listItem").hide();this.currentContactElement=e},_showCurrentContact:function(){if(this.currentContactElement){a()(this.currentContactElement).find(".co_listItem").show();this.currentContactElement=void 0}},_contactDeleteClickHandler:function(e,t){var n=a()(t).closest("li").data("contactSummary"),o=this;vn["default"].DeleteDataRoomContact(n.Id,function(){var e=n,t=new y["default"].Message(e,{},"Cobalt.Widget.AddressBook.Internal.EditContact.Delete","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditContact.Delete",t)},function(t){var n={widgetMode:"deleteContact"},i=Gn.GetLightboxDimensions(),r=e.pageY-i.top;if(a.a.browser.msie){var s=a()("#coid_contacts_contentDiv");r=s.size()>=1?-(e.pageY-s.offset().top):-i.height+r+35}n.clientY=r;o._displaySaveContactErrorEventHandler(t,n)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_removeContactEvent:function(){a()("#coid_contacts_peopleListItems_"+this.key).removeClass("co_compact");a()("a#"+this.addNewContactButtonId).unbind();a()("a#"+this.addNewContactButtonId).addClass("co_disabled")},CleanUp:function(){this.RemoveEventSubscriptions();this.moreInfoWidget.Remove();this.moreInfoWidget=null;if(this.contactEditBoxWidget){this.contactEditBoxWidget.Remove();this.contactEditBoxWidget=null}a()(this.listULElement).empty().remove();this.listULElement=null;this.listCountElement=null;this.searchInputElement=null;this.contactBrowserKeyData=null;this._changeOwnerMode=!1;this._firmOnlyContacts=null;this.innerContainerDiv=null;this.innerContainerDivJQuery=null;this.paginationNavSetup=!1},RemoveEventSubscriptions:function(e){if(this.updateContactInfoSubscription&&"editGroup"!=e){y["default"].Unsubscribe(this.updateContactInfoSubscription);this.updateContactInfoSubscription=null}if(this.saveContactInfoSubscription&&"editGroup"!=e){y["default"].Unsubscribe(this.saveContactInfoSubscription);this.saveContactInfoSubscription=null}if(this.selectContactSubscription){y["default"].Unsubscribe(this.selectContactSubscription);this.selectContactSubscription=null}if(this.unselectContactSubscription){y["default"].Unsubscribe(this.unselectContactSubscription);this.unselectContactSubscription=null}if(this.clearContactsSubscription){y["default"].Unsubscribe(this.clearContactsSubscription);this.clearContactsSubscription=null}if(this.selectContactOnDragDropSubscription){y["default"].Unsubscribe(this.selectContactOnDragDropSubscription);this.selectContactOnDragDropSubscription=null}if(this.saveContactErrorMessageSubscription){y["default"].Unsubscribe(this.saveContactErrorMessageSubscription);this.saveContactErrorMessageSubscription=null}if(this.addNewContactButtonSubscription){this._removeContactEvent();this.addNewContactButtonSubscription=null}this.nextPageAnchor&&a()(this.nextPageAnchor).unbind("click");this.previousPageAnchor&&a()(this.previousPageAnchor).unbind("click");if(this.searchInputElement){var t=a()(this.searchInputElement);t.unbind("focus");t.unbind("blur");t.unbind("keyup")}a()("#coid_contacts_peopleList_"+this.key).off("click","a.co_contacts_info").off("click","a.co_contacts_edit").off("click touchend",".co_listItem a:not(.co_contacts_info)").off("mouseover","div.co_listItem").off("mouseleave","div.co_listItem").off("focusin","div.co_listItem").off("focusout","div.co_listItem")},DrawLoadingState:function(){this.contactList=null;this.RedrawContents(null)},ResetToLoadingState:function(){this.innerContainerDivJQuery.find(".co_loading").first().removeClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_noResults").first().addClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_createFirst").first().addClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_noDataroomAccess").first().addClass("co_hideState");a()(this.listULElement).addClass("co_hideState")},RedrawContents:function(e,t){this.contactBrowserKeyData={};this.ResetToLoadingState();a()(this.listULElement).html('<li class="co_contacts_message co_hideState"></li>');var n=!(!this.contactList||!this.contactList.length);if(n){for(var o=this.contactList.length,i=0;i<o;i++){var r=this.contactList[i];this._changeOwnerMode&&(r.ContactPermission="False");this.contactBrowserKeyData[r.Id]=r.BrowserKey;var s=document.createElement("li");s.id=this.listItemIdPrefix+i;a()(s).addClass("drag");var l=a()(s);l.data("contactSummary",r);var d=Object(u["IsNotNullOrEmpty"])(r.FirstNameWithHighlights)?r.FirstNameWithHighlights:Object(u["EncodeHtml"])(r.FirstName?r.FirstName:""),c=Object(u["IsNotNullOrEmpty"])(r.LastNameWithHighlights)?r.LastNameWithHighlights:Object(u["EncodeHtml"])(r.LastName||""),f="";void 0!=r.EmailAddress&&null!=r.EmailAddress&&r.EmailAddress.length>0?f=Object(u["EncodeHtml"])(r.EmailAddress):this.adminUser&&(f=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.AddEmailAddress","Click to add email address"));var h=I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.ContactTextWithEmail",{LastName:c,FirstName:d,EmailAddress:f},c+", "+d+" "+f),p={contactPermission:r.ContactPermission,contactId:"contactListBoxContent"+r.BrowserKey,lastNameHtml:c,firstNameHtml:d,browserKey:r.BrowserKey,emailAddressHtml:f,titleText:I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.LastNameMoreInformation",{LastNameHtml:c},c+" More Information"),accesibilityLabel:I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.AccessibilityContactLabel",{userInfoText:h},"Press Enter to select this contact: ".concat(h)),moreInformationText:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.MoreInformation","More Information"),deleteContactText:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.DeleteContact","Delete Contact"),editText:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.EditContact","Edit Contact")};s.innerHTML=this._getContactItemHtml(p);l.draggable({appendTo:this.parentDiv,cursorAt:{left:0,top:0},snap:"true",snapMode:"outer",helper:function(e){Gn.HideMoreInfoWidget(!1);Gn.HideMoreInfoWidget(!0);var t=a.a.data(e.currentTarget,"contactSummary"),n=Object(u["EncodeHtml"])(t.LastName+", "+t.FirstName);return Pn["default"].createDraggable(n,1,e.currentTarget)}});this.listULElement.appendChild(s)}a()(this.listULElement).removeClass("co_hideState");this.innerContainerDivJQuery.find(".co_loading").first().addClass("co_hideState");this.listCountElement.innerHTML=e&&t?I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.TotalCount",{TotalCount:t},"(".concat(t,")")):""}else{if(this.contactList){this.innerContainerDivJQuery.find(".co_loading").first().addClass("co_hideState");this.innerContainerDivJQuery.find(".co_contacts_createFirst").first().removeClass("co_hideState")}this.listCountElement.innerHTML=e?I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ZeroCount","(0)"):""}this.innerContainerDivJQuery.find(".co_navPages").toggle(n)},_getContactItemHtml:function(e){var t="True"==e.contactPermission?'<a  href="javascript:void(0);" type="contacts" class="co_contacts_delete" title="'+e.deleteContactText+'">'+e.deleteContactText+'</a><a  href="javascript:void(0);" type="contacts" class="co_contacts_edit" title="'+e.editText+'">'+e.editText+"</a>":""
;return this.manageOnlyMode?'<div class="co_listItem">'+t+'<a href="javascript:void(0);" class="co_contacts_info" title="'+e.moreInformationText+'">'+e.moreInformationText+"</a>"+e.lastNameHtml+", "+e.firstNameHtml+' <span class="co_contacts_emailAddress" id="address_book_email'+e.key+'">'+e.emailAddressHtml+"</span></div>":'<div class="co_listItem">'+t+'<a href="javascript:void(0);" class="co_contacts_info" title="'+e.titleText+'">'+e.titleText+'</a><a id="'+e.contactId+'" role="checkbox" aria-checked="false" aria-label="'+e.accesibilityLabel+'" class="co_contacts_selectable co_checkbox_unselected" href="javascript:void(0);">'+e.lastNameHtml+", "+e.firstNameHtml+' <span class="co_contacts_emailAddress" id="address_book_email'+e.key+'">'+e.emailAddressHtml+"</span></a></div>"},HideMoreInfo:function(){this.moreInfoWidget&&this.moreInfoWidget.Hide()},RegisterLeftClickHandler:function(){},RegisterDragDropHandler:function(){},_getFilterHTML:function(){var e=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.Search","Search:"),t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.AllPeople","All People"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.OpenFilterMenu","Open Filter Menu"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.Personal","Personal"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.MyFirm","My Firm"),a=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.OutsideFirm","Outside Firm"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.SearchByName","Search by name");return'<div id="'+this.searchBoxInputDivId+'" class="co_widgetSearchBox"><div id="coid_contacts_searchSelector" class="co_sortDropDown co_hideState"><h4>'+e+'</h4><div id="'+this.dropDownControlId+'" class="co_dropdownTabCollapsed" style="display:none"><div class="co_dropdownTab" name="coid_contacts_filterDropDownLabelContainer" id="coid_contacts_filterDropDownLabelContainer"><span id="'+this.dropDownSelectedValueId+'" class="co_ellipsis">'+t+'</span><a id="'+this.dropDownArrowId+'" href="javascript:void(0);" class="co_dropdownMenuAnchor co_dropdownArrowCollapsed">'+n+'</a></div></div><div id="'+this.dropDownListId+'" class="co_dropdownBoxCollapsed" tabindex="-1" aria-hidden="true" aria-labelledby="coid_contacts_filterDropDownLabelContainer" role="navigation" aria-activedescendant=""><div class="co_dropdownBoxContent"><div class="co_dropdownBoxHeader"><span></span></div><div class="co_dropdownBoxContentRight"><ul id="'+this.dropDownListItemsId+'" role="menu"><li role="menuitem"><a href="javascript:void(0);" aria-selected="true">'+t+'</a></li><li role="menuitem"><a href="javascript:void(0);" aria-selected="true">'+o+'</a></li><li role="menuitem"><a href="javascript:void(0);" aria-selected="true">'+i+'</a></li><li role="menuitem"><a href="javascript:void(0);" aria-selected="true">'+a+'</a></li></ul></div></div><div class="co_dropdownBoxFooter"><span></span></div></div></div><label for="'+this.searchBoxInputId+'" id="'+this.searchBoxInputId+'_Label" /><input id="'+this.searchBoxInputId+'" title="'+e+'" class="co_widgetSearchBoxInput co_defaultInput" value="'+r+'" type="text" autocorrect="off" /></div>'},_moreInfoClickHandler:function(e,t){var n=Gn.GetLightboxDimensions(),o=n.top+n.height-e.pageY;if(a.a.browser.msie){var i=a()("#coid_contacts_contentDiv");o=i.size()>=1?-(e.pageY-i.offset().top):-n.height+o+35}this.moreInfoWidget.Draw(o);var r=this.GetContactSummary(a()(t).closest("li")[0]);this.moreInfoWidget.Draw(o,r)},_updateContactInfoEventHandler:function(e){var t="contactListBoxContent"+this.contactBrowserKeyData[e.Id],n=this.parentDivJQuery.find("#"+t)[0];n&&this._updateElement(n,e)},_selectContactEventHandler:function(e){var t="contactListBoxContent"+this.contactBrowserKeyData[e],n=this.parentDivJQuery.find("#"+t)[0];n&&this._selectElement(n)},_addNewContactEventHandler:function(){var e=a()("#"+this.addNewContactWidgetDivId+"_"+this.key);a()("#coid_contacts_peopleListItems_"+this.key).addClass("co_compact");if(e){var t=document.createElement("div");t.id=this.addNewContactElementId;e.append(t);this.contactEditBoxWidget=In;this.contactEditBoxWidget.SetParentDiv(t);this.contactEditBoxWidget.Draw(this);this.addressBook=Gn;this.addressBook.SetEditWidgetExists(!0);this._removeNewContactEvent()}},_removeNewContactEvent:function(){a()("a#"+this.addNewContactButtonId).unbind();a()("a#"+this.addNewContactButtonId).addClass("co_disabled")},_unselectContactEventHandler:function(e){var t="contactListBoxContent"+this.contactBrowserKeyData[e],n=this.parentDivJQuery.find("#"+t)[0];n&&this._unselectElement(n)},_unselectAllContactsEventHandler:function(){for(var e=this.listULElement.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t];n.id.toString().indexOf("contactListBoxContent")>=0&&this._unselectElement(n)}},_contactClickedHandler:function(e){var t=this.GetContactSummary(a()(e).closest("li")[0]),n="Cobalt.Widget.AddressBookContactListBox.Internal.SelectContact",o=a()(e).parent().parent();if(this._changeOwnerMode){var i=this._isSelected(e);this._unselectAllContactsEventHandler();i&&this._selectElement(e)}this._invalidEmailInfoBox&&this._invalidEmailInfoBox.Remove();if(!this.manageOnlyMode)if(a()(e).hasClass("co_checkbox_unselected")){if(t&&!this._changeOwnerMode&&!t.EmailAddress){if(0==a()(o).find("#co_contact_error_container").length){var r=document.createElement("div");r.id="co_contact_error_container";o.append(r)}this._invalidEmailInfoBox=new M["default"](a()(o).find("#co_contact_error_container")[0],F["default"].None,W["default"].Bottom,!0,!0,!1);var s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ErrorMessage.MissingEmailAddress","Contact missing email address, please edit the contact to proceed.");this._invalidEmailInfoBox.Draw(s);return}this._selectElement(e)}else{this._unselectElement(e);n="Cobalt.Widget.AddressBookContactListBox.Internal.UnselectContact"}var l=t,d=new y["default"].Message(l,{},n,"1.0");y["default"].Publish(n,d)},_isSelected:function(e){if(a()(e).hasClass("co_checkbox_selected"))return!0;return!1},_unselectElement:function(e){a()(e).removeClass("co_checkbox_selected").addClass("co_checkbox_unselected");a()(e).attr("aria-checked",!1)},_selectElement:function(e){a()(e).removeClass("co_checkbox_unselected").addClass("co_checkbox_selected");a()(e).attr("aria-checked",!0)},_updateElement:function(e,t){if(e.childNodes.length>=2&&e.childNodes[0].textContent&&e.childNodes[1].childNodes.length>=1&&e.childNodes[1].childNodes[0].textContent){e.childNodes[0].textContent=I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.ContactText",{LastName:t.LastName,FirstName:t.FirstName},t.LastName+", "+t.FirstName+" ");e.childNodes[1].childNodes[0].textContent=t.EmailAddress}else e.text=I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.ContactTextWithEmail",{LastName:t.LastName,FirstName:t.FirstName,EmailAddress:t.EmailAddress},t.LastName+", "+t.FirstName+" "+t.EmailAddress);var n=a()(e).closest("li").data("contactSummary");if(n){n.FirstName=t.FirstName;n.LastName=t.LastName;n.EmailAddress=t.EmailAddress;a()(e).closest("li").data("contactSummary",n);a()(e).closest("li").data("contactSummary")}a()(e).parent().show()},_handleSearchInputElementFocus:function(){var e=this.searchInputElement;if(""==e.value||""===a.a.trim(e.value)||a()(e).hasClass("co_defaultInput")){a()(e).removeClass("co_defaultInput");e.value=""}},_handleSearchInputElementLoseFocus:function(){var e=this.searchInputElement;if(""==e.value||""===a.a.trim(e.value)){a()(e).addClass("co_defaultInput");e.value=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.SearchByName","Search by name")}},_handleSearchInputElementKeyUp:function(){this.previousFilter!=this.searchInputElement.value&&this._applyFiltering()},_applyFiltering:function(){var e=this,t=this.searchInputElement,n=t.value;e.previousFilter=n;(a()(t).hasClass("co_defaultInput")||t.value.length<=1)&&(n=null);this.ResetToLoadingState();this._keyEventCurrentTimer=window.setTimeout(function(){
null!=e.lastFilterRequest&&e.lastFilterRequest.Abort();var t=vn["default"].GetDataroomContactsChunk(0,n,e._firmOnlyContacts,function(o,i,a){if(null!=e.lastFilterRequest&&t===e.lastFilterRequest){e.lastFilterRequest=null;e.SetContactList(o,i,a);e.RedrawContents(n,a);if(e.collaborationWidget){var r=e.collaborationWidget.GetWidgetData();e.SetWidgetData(r)}}},function(e){throw new f["CobaltError"](h["default"].Website,e)});e.lastFilterRequest=t},this.settings.delay)},_getFilterValue:function(){var e=this.searchInputElement,t=e.value;if(a()(e).hasClass("co_defaultInput")||e.value.length<=1)return null;return t},ScrollToTop:function(){this.listULElement&&a()(this.listULElement).scrollTop(0)},_setupPaginationHtml:function(){var e=a()(this.parentDiv).find("#co_navigationPages")[0];e.innerHTML="";var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.FirstPage","First Page"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.PreviousPage","Previous Page"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.NextPage","Next Page"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.LastPage","Last Page"),r=document.createElement("li");e.appendChild(r);r.innerHTML='<a id="contactPageFirst" class="co_first co_disabled" href="javascript:void(0);">'+t+"</a>";var s=document.createElement("li");e.appendChild(s);s.innerHTML='<a id="contactPagePrevious" class="co_prev co_disabled" href="javascript:void(0);">'+n+"</a>";var l=document.createElement("li");a()(l).addClass("co_resultRange");e.appendChild(l);this.navRangeElement=l;var d=document.createElement("li");e.appendChild(d);d.innerHTML='<a id="contactPageNext" class="co_next" href="javascript:void(0);">'+o+"</a>";var c=document.createElement("li");e.appendChild(c);c.innerHTML='<a id="contactPageLast" class="co_last co_disabled" href="javascript:void(0);">'+i+"</a>";this.firstPageAnchor=a()(r).find("#contactPageFirst")[0];this.previousPageAnchor=a()(s).find("#contactPagePrevious")[0];this.nextPageAnchor=a()(d).find("#contactPageNext")[0];this.lastPageAnchor=a()(c).find("#contactPageLast")[0];this.paginationNavSetup=!0},_setupPaginationNavigationAndRangeDisplay:function(){var e=this;if(this.startingIndex>=this.chunkSize&&!this.firstPageAnchorBound){a()(this.firstPageAnchor).bind("click",function(t){e._getFirstPage(t)});a()(this.firstPageAnchor).removeClass("co_disabled");this.firstPageAnchorBound=!0}if(this.startingIndex<this.chunkSize&&this.firstPageAnchorBound){a()(this.firstPageAnchor).unbind("click");a()(this.firstPageAnchor).addClass("co_disabled");this.firstPageAnchorBound=!1}if(this.startingIndex>0&&!this.previousPageAnchorBound){a()(this.previousPageAnchor).bind("click",function(t){e._getPreviousPage(t)});a()(this.previousPageAnchor).removeClass("co_disabled");this.previousPageAnchorBound=!0}if(0===this.startingIndex&&this.previousPageAnchorBound){a()(this.previousPageAnchor).unbind("click");a()(this.previousPageAnchor).addClass("co_disabled");this.previousPageAnchorBound=!1}if(this.nextPageStartingIndex<this.totalRecordsCount&&!this.nextPageAnchorBound){a()(this.nextPageAnchor).bind("click",function(t){e._getNextPage(t)});a()(this.nextPageAnchor).removeClass("co_disabled");this.nextPageAnchorBound=!0}if(this.nextPageStartingIndex>=this.totalRecordsCount&&this.nextPageAnchorBound){a()(this.nextPageAnchor).unbind("click");a()(this.nextPageAnchor).addClass("co_disabled");this.nextPageAnchorBound=!1}if(this.startingIndex<this.totalRecordsCount-this.chunkSize&&!this.lastPageAnchorBound){a()(this.lastPageAnchor).bind("click",function(t){e._getLastPage(t)});a()(this.lastPageAnchor).removeClass("co_disabled");this.lastPageAnchorBound=!0}if(this.startingIndex>=this.totalRecordsCount-this.chunkSize&&this.lastPageAnchorBound){a()(this.lastPageAnchor).unbind("click");a()(this.lastPageAnchor).addClass("co_disabled");this.lastPageAnchorBound=!1}var t=this.nextPageStartingIndex;this.totalRecordsCount<this.nextPageStartingIndex&&(t=this.totalRecordsCount);var n=this.startingIndex+1,o=I["default"].format("SC.Website.Cobalt.Widget.AddressBookContactListBox.RangeString",{Start:n,End:t,TotalRecordsCount:this.totalRecordsCount},n+"-"+t+" of "+this.totalRecordsCount);this.navRangeElement.innerHTML="<span>"+o+"</span>"},_getFirstPage:function(){var e=this,t=this._getFilterValue();this.DrawLoadingState();var n=y["default"].CreateUUID();this.lastFilterRequestId=n;vn["default"].GetDataroomContactsChunk(0,t,this._firmOnlyContacts,function(o,i,a){e._successCallBack(o,i,a,n,t)},this._errorCallback)},_getLastPage:function(){var e=this,t=this._getFilterValue();this.DrawLoadingState();var n=this.totalRecordsCount-this.totalRecordsCount%this.chunkSize;n==this.totalRecordsCount&&(n=this.totalRecordsCount-this.chunkSize);var o=y["default"].CreateUUID();this.lastFilterRequestId=o;vn["default"].GetDataroomContactsChunk(n,t,this._firmOnlyContacts,function(n,i,a){e._successCallBack(n,i,a,o,t)},this._errorCallback)},_getNextPage:function(){var e=this,t=this._getFilterValue();this.DrawLoadingState();var n=y["default"].CreateUUID();this.lastFilterRequestId=n;vn["default"].GetDataroomContactsChunk(this.nextPageStartingIndex,t,this._firmOnlyContacts,function(o,i,a){e._successCallBack(o,i,a,n,t)},this._errorCallback)},_getPreviousPage:function(){var e=this,t=this._getFilterValue();this.DrawLoadingState();var n=y["default"].CreateUUID();this.lastFilterRequestId=n;vn["default"].GetDataroomContactsChunk(this.previousStartingIndex,t,this._firmOnlyContacts,function(o,i,a){e._successCallBack(o,i,a,n,t)},this._errorCallback)},_successCallBack:function(e,t,n,o,i){if(o===this.lastFilterRequestId){this.SetContactList(e,t,n);this.RedrawContents(i,n);this.SetWidgetData(this.collaborationBoxData);this.ScrollToTop()}},_errorCallback:function(e){throw new f["CobaltError"](h["default"].Website,e)},GetContactSummary:function(e){var t=parseInt(e.id.substring(this.listItemIdPrefix.length)),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.RequiredIndex","Required index was not a number."),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.IndexExceeded","Index exceeded contact list.");if(isNaN(t))throw new f["CobaltError"](h["default"].Website,n);if(t<0||t>this.contactList.length)throw new f["CobaltError"](h["default"].Website,o);return this.contactList[t]}};var Ln=Bn,On=(n("lfZaYf9V"),{lightbox:null,groupListForm:null,groupListLoading:null,contactListWidget:null,isPeopleListFiltered:!1,searchInputElement:null,groupMembersDivId:"coid_contacts_newGroupContactsInput",groupNameErrorPlaceHolderId:"coid_contacts_newGroup_groupNameErrorPlaceHolder",groupNameErrorPlaceHolder:null,groupMembersErrorPlaceHolderId:"coid_contacts_newGroup_groupMembersErrorPlaceHolder",groupMembersErrorPlaceHolder:null,groupMembersWidget:null,groupNameElementId:"coid_contacts_newGroupName",groupTypeElementId:"coid_contacts_newGroupPublic",groupTypeListElementId:"coid_contacts_newGroupPublicListItem",cancelLinkId:"coid_contacts_newGroup_cancelLink",saveButtonId:"coid_contacts_newGroup_saveButton",isEditMode:!1,groupId:null,defaultGroupNameMessage:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.GroupNameMessage","Name your group"),selectContactSubscription:null,addContactToGroupMembers:null,Draw:function(e){if(On.lightbox){if(On.lightbox.IsShowing())return;On.lightbox.Remove();On.lightbox=null}var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.AddressBook","Address Book"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.Close","Close");On.lightbox=new ve["default"];On.lightbox.SetId("coid_contacts_groupeditbox");On.lightbox.SetTitle(t);On.lightbox.SetClass("co_contacts_group co_contacts_overlayBox");On.lightbox.SetCloseLinkObject({alt:n,onclick:function(){On.Close()}});var o=On.lightbox.GetContentDomElement();On.lightbox.Draw(!0);var i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.SaveGroup","Save Group"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.Cancel","Cancel")
;On.lightbox.GetFooterDomElement().innerHTML='<ul id="coid_contacts_newGroupButtons"><li><input id="'+On.saveButtonId+'" type="button" class="co_primaryBtn" value="'+i+'" /></li><li><a id="'+On.cancelLinkId+'" class="co_overlayBox_buttonCancel" href="javascript:void(0);">'+r+"</a></li></ul>";a()("#"+On.saveButtonId).click(On.Save);a()("#"+On.cancelLinkId).click(On.Close);var s=null;if(e){var l={SelectedContacts:e.GroupMembers};s=JSON.stringify(l);On.groupId=e.GroupIds[0];e.GroupName?On.isEditMode=!0:On.isEditMode=!1}else{On.groupId=null;On.isEditMode=!1}On.contactListWidget=new Ln;On.contactListWidget.SetManageOnlyMode(On._manageOnlyMode);On.contactListWidget.SetParentDiv(o);On.contactListWidget.SetAddNewContactButtonId("coid_contacts_addNewContactButtonEditGroup");On.contactListWidget.Draw("edit_groups");var d=document.createElement("div");a()(d).addClass("co_overlayBox_rightContent");o.appendChild(d);var c=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.EditGroup","Edit Group <span class='co_hideState'>(Public)</span>"),u=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.NewGroup","New Group"),p=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.CreateNewGroup","Create New Group"),m=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.GroupName","Group Name"),g=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.GroupMembers","Group Members"),v=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.MakePublicMessage","Make this group available to others in my organization."),C=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.ClickPeopleMessage","Click people at left to add."),_=On.isEditMode?c:u;d.innerHTML="<h4>"+_+'</h4><fieldset class="co_hideState"><legend><span class="co_accessibilityLabel">'+p+'</span></legend><ul class="co_contacts_groupData co_contacts_data"><li class="co_contacts_message"></li><li><label for="coid_contacts_newGroupName"><h5>'+m+'</h5></label><input type="text" maxlength="100" value="'+On.defaultGroupNameMessage+'" id="'+On.groupNameElementId+'" autocorrect="off"><div id="'+On.groupNameErrorPlaceHolderId+'"></div></li><li><h5>'+g+'</h5><div id="'+On.groupMembersDivId+'"></div><div id="'+On.groupMembersErrorPlaceHolderId+'"></div></li><li id="'+On.groupTypeListElementId+'" class="co_hideState"><label for="'+On.groupTypeElementId+'"><input type="checkbox" id="'+On.groupTypeElementId+'" />'+v+'</label><div aria-channel="notify" aria-atomic="true" aria-relevant="all" aria-live="assertive"></div></li></ul></fieldset><div class="co_loading co_contacts_data"></div>';On.groupsListForm=a()(d).find("fieldset")[0];On.groupsListLoading=a()(d).find(".co_loading")[0];var b=a()(d).find("#"+On.groupMembersDivId.toString())[0];On.groupMembersWidget=new qn;On.groupMembersWidget.SetMode(gn.NewGroup);On.groupMembersWidget.SetParentDiv(b);On.groupMembersWidget.SetNoDataMessage(C);On.groupMembersWidget.SetWidgetData(s);On.groupMembersWidget.Draw();On.contactListWidget.SetCollaborationWidget(On.groupMembersWidget);a()(On.groupsListForm).removeClass("co_hideState");a()(On.groupsListLoading).addClass("co_hideState");var S=On.contactListWidget,D=y["default"].CreateUUID();S.lastFilterRequestId=D;vn["default"].GetDataroomContactsChunk(0,null,null,function(e,t,n){if(D===S.lastFilterRequestId){S.SetContactList(e,t,n);S.RedrawContents();S.SetWidgetData(s)}},function(e){throw new f["CobaltError"](h["default"].Website,e)});var T=a()("#"+On.groupNameErrorPlaceHolderId.toString())[0],w=a()("#"+On.groupMembersErrorPlaceHolderId.toString())[0];On.groupNameErrorPlaceHolder=new M["default"](T,F["default"].None,W["default"].Bottom,!1,!1,!1);On.groupMembersErrorPlaceHolder=new M["default"](w,F["default"].None,W["default"].Bottom,!1,!1,!1);Object(yn["AttachClickFixForLabels"])(o);var E=a()("#"+On.groupNameElementId.toString()).first(),x=a()("#"+On.groupTypeElementId)[0];if(e){E.removeClass("co_defaultInput");E.val(e.GroupName);var N="FRMWD"==e.GroupType;x.checked=N;x.disabled=N;N?a()(a()(d).find("h4 span")[0]).removeClass("co_hideState"):a()(document.getElementById(On.groupTypeListElementId)).removeClass("co_hideState")}else{a()(document.getElementById(On.groupTypeListElementId)).removeClass("co_hideState");E.addClass("co_defaultInput")}a()(E).bind("focus",function(e){On._handleGroupNameInputElementFocus(e,this)});a()(E).bind("blur",function(e){On._handleGroupNameInputElementLoseFocus(e,this)});a()(E).bind("keypress",function(){On._removeErrors()});a()(E).focus();On.selectContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactListBox.Internal.SelectContact",function(){On._removeErrors()});On.addContactToGroupMembers=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.DragDropSelectContact",function(){On._removeErrors()})},Close:function(){var e=new y["default"].Message({},{},"Cobalt.Widget.AddressBook.Internal.EditGroup.Cancel","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditGroup.Cancel",e);On._close()},Save:function(){On.groupNameErrorPlaceHolder.Remove();On.groupMembersErrorPlaceHolder.Remove();if(!On._isValidGroup())return;var e=a()("#"+On.groupNameElementId.toString())[0].value,t=On.groupMembersWidget.GetWidgetData(),n=a()("#"+On.groupTypeElementId).is(":checked")?"FRMWD":"PRSNL",o=JSON.parse(t),i=a.a.map(o.SelectedContacts,function(e){return e.Id});Sn["default"].AddOrUpdateDataroomGroup(On.groupId,e,n,i,function(t){var o={GroupId:t=(t=t.replace('"',"")).replace('"',""),GroupName:e,GroupType:n,MemberIds:i},a=new y["default"].Message(o,{},"Cobalt.Widget.AddressBook.Internal.EditGroup.Save","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditGroup.Save",a);On._close()},function(e,t){if(409==t.StatusCode){var n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.ErrorMessage.DuplicateGroupMessage","This group name already exists.");On.groupNameErrorPlaceHolder.Draw(n)}else On.Close()})},_handleGroupNameInputElementFocus:function(e,t){if(""===a.a.trim(t.value)||a()(t).hasClass("co_defaultInput")){a()(t).removeClass("co_defaultInput");t.value=""}},_handleGroupNameInputElementLoseFocus:function(e,t){if(""===a.a.trim(t.value)){a()(t).addClass("co_defaultInput");t.value=On.defaultGroupNameMessage}},_isValidGroup:function(){var e=a()("#"+On.groupNameElementId.toString())[0],t=!0,n=!0;if(a()(e).hasClass("co_defaultInput")){t=!1;var o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.ErrorMessage.GroupNameRequired","A group name is required.");On.groupNameErrorPlaceHolder.Draw(o)}else if(e.value.length<=0||e.value.length>100){t=!1;var i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.ErrorMessage.CharacterLimit","Group name has a 100 character limit.");On.groupNameErrorPlaceHolder.Draw(i)}else if(!Object(u["ValidateInput"])(e.value)){t=!1;var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupEditBox.ErrorMessage.InvalidCharacterInGroupName","Invalid group name");On.groupNameErrorPlaceHolder.Draw(r)}var s=On.groupMembersWidget.GetWidgetData();if(s){JSON.parse(s).SelectedContacts.length<1&&(n=!1)}else n=!1;if(!n){var l=I["default"].lookup("SC.Website.GroupEditBox.AddMember","Add at least 1 member to save group.");On.groupMembersErrorPlaceHolder.Draw(l)}return t&&n},_close:function(){if(On.lightbox){On.groupListForm=null;On.groupListLoading=null;On.contactListWidget.CleanUp();On.contactListWidget=null;On.searchInputElement=null;On.groupMembersWidget&&On.groupMembersWidget.Remove();On.lightbox.Remove();On.lightbox=null}On.groupListForm=null;On.groupListLoading=null;On.contactListWidget=null;On.isPeopleListFiltered=!1;On.searchInputElement=null;On.groupNameErrorPlaceHolder=null;On.groupMembersErrorPlaceHolder=null;On.groupMembersWidget=null;On.isEditMode=!1;On.groupId=null;On.selectContactSubscription=null;On.addContactToGroupMembers=null;Gn.SetEditWidgetExists(!1);On.selectContactSubscription&&y["default"].Unsubscribe(On.selectContactSubscription)},_removeErrors:function(){On.groupNameErrorPlaceHolder&&On.groupNameErrorPlaceHolder.Remove()
;On.groupMembersErrorPlaceHolder&&On.groupMembersErrorPlaceHolder.Remove()}}),Mn=On;function Wn(){this.manageOnlyMode=!0;this.parentDiv=null;this.groupList=null;this.settings={delay:40};this.chunkSize=Sn["default"].PageSize;this.startingIndex=0;this.nextPageStartingIndex=0;this.previousStartingIndex=0;this.totalRecordsCount=0;this.paginationNavSetup=!1;this.firstPageAnchor=null;this.previousPageAnchor=null;this.nextPageAnchor=null;this.lastPageAnchor=null;this.navRangeElement=null;this.firstPageAnchorBound=!1;this.nextPageAnchorBound=!1;this.previousPageAnchorBound=!1;this.lastPageAnchorBound=!1;this.previousFilter=null;this.collaborationData=null;this.innerContainerDiv=null;this.listULElement=null;this.listCountElement=null;this.editGroupWidget=null;this.currentFilter=null;this.groupDeleteMessageInfoBox=null;this.groupDeleteMessageInfoBoxListItem=null;this.moreInfoWidget=null;this.searchInputElement=null;this.allElementsForDeleteClose=null;this.hasPublicGroups=!1;this.hasPrivateGroups=!1;var e=this;this.forceCloseDeleteMessageHandler=function(t){e._hideGroupDeleteInfoBox(t,!0)};this.checkCloseDeleteMessageHandler=function(t){e._hideGroupDeleteInfoBox(t,!1)};this.dropDownClickHandler=function(t){e._onDropDownClick(t)};this.dropDownItemClickHandler=function(t){e._onDropDownItemClick(t)};this.closeDropDownHandler=function(t){0==a()(t.target).closest(".co_sortDropDown").length&&e._onDropDownClick(t)};this.searchInputElementFocusHandler=function(t){e._handleSearchInputElementFocus(t)};this.searchInputElementBlurHandler=function(t){e._handleSearchInputElementLoseFocus(t)};this.searchInputElementKeyUpHandler=function(t){e._handleSearchInputElementKeyUp(t)};this.groupDeleteClickHandler=function(){e._handleGroupDelete(this)};this.groupEditClickHandler=function(){e._handleGroupEdit(this)};this.groupInfoClickHandler=function(t){e._moreInfoClickHandler(t,this)};this.newGroupClickHandler=function(){e._handleGroupEdit()};this.selectGroupHandler=function(t,n){e._selectGroupEventHandler(n.Data)};this.unselectGroupHandler=function(t,n){e._unselectGroupEventHandler(n.Data)};this.clearHandler=function(){e._unselectAllGroupsEventHandler()};this.dragDropSelectGroupHandler=function(t,n){e._selectGroupEventHandler(n.Data)};this.dropDown=null;this.dropDownTabJQuery=null;this.dropDownTabId="coid_contacts_groups_filterDropDownTab";this.dropDownTabLinksJQuery=null;this.dropDownContainer=null;this.dropDownContainerId="coid_contacts_filterDropDownContainer";this.dropDownItemsId="coid_contacts_filterDropDownItem";this.dropDownItemsJQuery=null;this.dropDownLabelContainerId="coid_contacts_filterDropDownLabelContainer";this.dropDownSelectedValue=null;this.dropDownSelectedValueId="coid_contacts_groups_filterDropDownSelectedValue";this.searchBoxInputId="coid_contacts_groups_searchBoxInput";this.isDropDownOpen=!1;this.dropDownValue=Dn["default"].All;this.groupsLoadingId="coid_contacts_groups_loading";this.groupsNoResultsId="coid_contacts_groups_noResults";this.groupsCreateFirstId="coid_contacts_groups_createFirst";this.groupsNoDataroomAccessId="coid_contacts_groups_noDataroomAccess";this.contactBrowserKeyData={};this.lastFilterRequest=null;this.collaborationWidget=null}Wn.prototype={SetParentDiv:function(e){this.parentDiv=e},SetCollaborationWidget:function(e){this.collaborationWidget=e},SetManageOnlyMode:function(e){this.manageOnlyMode=e},SetGroupList:function(e,t,n){this.groupList=e;this.startingIndex=t;this.nextPageStartingIndex=t+this.chunkSize;t>0&&(this.previousStartingIndex=t-this.chunkSize);this.totalRecordsCount=n;(this.nextPageStartingIndex<this.totalRecordsCount||this.startingIndex>0)&&!this.paginationNavSetup&&this._setupPaginationHtml();this.paginationNavSetup&&this._setupPaginationNavigationAndRangeDisplay()},Refresh:function(e){a()(document.getElementById(this.groupsLoadingId)).removeClass("co_hideState");a()(this.listULElement).addClass("co_hideState");var t=this,n=this.previousFilter;Sn["default"].GetDataroomGroupsChunk(this.startingIndex,n,this.dropDownValue,function(o,i,a){t.SetGroupList(o,i,a);t.RedrawContents(n);t.SetWidgetData(e)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},SetWidgetData:function(e){this.collaborationData=e;if(e){var t=JSON.parse(e);if(t.SelectedGroups)for(var n=0;n<t.SelectedGroups.length;n++)t.SelectedGroups[n].GroupId&&this._selectGroupEventHandler(t.SelectedGroups[n].GroupId)}},Cleanup:function(){a()("#groupListBoxWidgetAddGroup").unbind("click",this.newGroupClickHandler);a()("#"+this.groupsCreateFirstId).unbind("click",this.newGroupClickHandler);var e=a()(this.searchInputElement);e.unbind("focus",this.searchInputElementFocusHandler);e.unbind("blur",this.searchInputElementBlurHandler);e.unbind("keyup",this.searchInputElementKeyUpHandler);this.dropDownTabLinksJQuery.unbind("click",this.dropDownClickHandler);this.dropDownItemsJQuery.unbind("click",this.dropDownItemClickHandler);a()("#coid_contacts_groupsListItems").on("click","a.co_contacts_delete[type='group']",this.groupDeleteClickHandler).on("click","a.co_contacts_edit[type='group']",this.groupEditClickHandler).on("click","a.co_contacts_info",this.groupInfoClickHandler);a()("body *").off({click:this.checkCloseDeleteMessageHandler,keypress:this.forceCloseDeleteMessageHandler});a()("#coid_contacts_lightbox .co_shrub").unbind("scroll",this.forceCloseDeleteMessageHandler);a()("#coid_contacts_groupsListItems").off("mouseover","div.co_listItem").off("mouseleave","div.co_listItem").off("focusin","div.co_listItem").off("focusout","div.co_listItem");this.moreInfoWidget.Remove();this.moreInfoWidget=null;this.parentDiv=null;this.groupList=null;this.firstPageAnchor=null;this.previousPageAnchor=null;this.nextPageAnchor=null;this.lastPageAnchor=null;this.navRangeElement=null;this.collaborationData=null;this.innerContainerDiv=null;this.listULElement=null;this.listCountElement=null;this.editGroupWidget=null;this.currentFilter=null;this.groupDeleteMessageInfoBox=null;this.groupDeleteMessageInfoBoxListItem=null;this.searchInputElement=null;this.allElementsForDeleteClose=null;this.dropDown=null;this.dropDownTabJQuery=null;this.dropDownTabLinksJQuery=null;this.dropDownContainer=null;this.dropDownItemsJQuery=null;this.dropDownSelectedValue=null},ShowNoDataroomAccess:function(){a()(document.getElementById(this.groupsNoResultsId)).addClass("co_hideState");a()(document.getElementById(this.groupsCreateFirstId)).addClass("co_hideState");a()(document.getElementById(this.groupsNoDataroomAccessId)).removeClass("co_hideState");a()("#groupListBoxWidgetAddGroup").addClass("co_hideState");a()(document.getElementById(this.searchBoxInputId)).attr("disabled","disabled");a()(document.getElementById(this.dropDownSelectedValueId)).unbind()},Draw:function(){var e=document.createElement("div");e.setAttribute("id","coid_contacts_groupList");a()(e).addClass("co_overlayBox_rightContent");this.parentDiv.appendChild(e);var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Groups","Groups"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.AddGroup","Add Group"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.NewGroup","New Group"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.CreateFirstGroup","Create your first group"),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.ErrorMessage.NoGroupsFound","No groups found."),s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookContactListBox.ErrorMessage.NoDataroomAccess","No Dataroom access")
;e.innerHTML="<h4>"+t+' <span id="coid_filteredGroupsCount" class="co_smallText"></span></h4><ol class="co_navPages" id="co_groups_navigationPages"></ol><a id="groupListBoxWidgetAddGroup" href="javascript:void(0);" class="co_contacts_addNew" title="'+n+'">'+n+"</a>"+this._getFilterHTML()+'<h5 class="co_accessibilityLabel">'+t+'</h5><ul class="co_shrub co_contacts_data co_hideState" id="coid_contacts_groupsListItems"></ul><ul class="co_contacts_createFirst co_contacts_data co_hideState" id="'+this.groupsCreateFirstId+'"><li class="co_contacts_message co_hideState"></li><li><h5><a title="'+o+'" href="javascript:void(0);">'+i+'</a></h5></li></ul><ul class="co_contacts_noResults co_contacts_data co_hideState" id="'+this.groupsNoResultsId+'"><li class="co_contacts_message co_hideState"></li><li><h5>'+r+'</h5></li></ul><ul class="co_contacts_createFirst co_contacts_noDataroomAccess co_hideState" id="'+this.groupsNoDataroomAccessId+'"><li><h5><a title="'+s+'">'+s+'</a></h5></li></ul><div class="co_loading co_contacts_data" id="'+this.groupsLoadingId+'"></div><div class="co_contacts_moreInfo"></div>';var l=a()(e),d=l.find("#groupListBoxWidgetAddGroup")[0];a()(d).bind("click",this.newGroupClickHandler);a()("#"+this.groupsCreateFirstId).bind("click",this.newGroupClickHandler);this.innerContainerDiv=e;this.listULElement=l.find("#coid_contacts_groupsListItems")[0];this.listCountElement=l.find("#coid_filteredGroupsCount")[0];this.dropDown=l.find(".co_sortDropDown");this.dropDownTabJQuery=a()("#"+this.dropDownTabId);this.dropDownContainer=document.getElementById(this.dropDownContainerId);this.dropDownSelectedValue=document.getElementById(this.dropDownSelectedValueId);this.dropDownTabLinksJQuery=this.dropDownTabJQuery.find("a");this.dropDownTabLinksJQuery.bind("click",this.dropDownClickHandler);this.dropDownItemsJQuery=a()(this.dropDownContainer).find("a");this.dropDownItemsJQuery.bind("click",this.dropDownItemClickHandler);this.moreInfoWidget=new Rn(l.find(".co_contacts_moreInfo")[0]);this.moreInfoWidget.SetMode(En.GroupInfo);var c=l.find("#"+this.searchBoxInputId);this.searchInputElement=c[0];c.bind("focus",this.searchInputElementFocusHandler);c.bind("blur",this.searchInputElementBlurHandler);c.bind("keyup",this.searchInputElementKeyUpHandler);a()("#coid_contacts_groupsListItems").on("click","a.co_contacts_delete[type='group']",this.groupDeleteClickHandler).on("click","a.co_contacts_edit[type='group']",this.groupEditClickHandler).on("click","a.co_contacts_info",this.groupInfoClickHandler).on({mouseover:function(){a()(this).addClass("hover")},mouseleave:function(){a()(this).removeClass("hover")},focusin:function(e){a()(e.target).closest(".co_listItem").addClass("hover")},focusout:function(e){a()(e.relatedTarget).parents(".co_listItem.hover").get(0)||a()(e.target).closest(".co_listItem").removeClass("hover")}},"div.co_listItem");y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.SelectGroup",this.selectGroupHandler);y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectGroup",this.unselectGroupHandler);y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.Clear",this.clearHandler);y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.DragDropSelectGroup",this.dragDropSelectGroupHandler);y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.Internal.AddGroup",this._handleGroupEdit);this.hasPublicGroups=!1;this.hasPrivateGroups=!1;this.DrawLoadingState()},DrawLoadingState:function(){this.groupList=null;this.RedrawContents(null)},RedrawContents:function(e){this.contactBrowserKeyData={};var t=null!==this.groupDeleteMessageInfoBoxListItem&&!a()(this.groupDeleteMessageInfoBoxListItem[0]).hasClass("co_hideState"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Close","Close"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.GroupDeleted","The personal group was deleted");a()(this.listULElement).html('<li class="co_contacts_message co_hideState" id="coid_contacts_groupDeleteInfoBoxListItem"><div id="coid_contacts_groupDeleteInfoBox" class="co_infoBox success" tabindex="-1" role="status"><div class="co_infoBox_container"><div class="co_infoBox_outer"><div class="co_infoBox_inner"><a href="javascript:void(0)" class="co_infoBox_closeButton">'+n+'</a><div class="co_infoBox_message">'+o+" </div><div></div></div></div></li>");var i=this;this.groupDeleteMessageInfoBoxListItem=a()(this.parentDiv).find("#coid_contacts_groupDeleteInfoBoxListItem");this.groupDeleteMessageInfoBox=a()(this.parentDiv).find("#coid_contacts_groupDeleteInfoBox");this.groupDeleteMessageInfoBox.find(".co_notes_closeLink").bind("click",function(e){i._hideGroupDeleteInfoBox(e,!0)});t&&this.groupDeleteMessageInfoBoxListItem.removeClass("co_hideState");a()(this.innerContainerDiv).removeClass("co_contacts_groupsList");a()(document.getElementById(this.groupsNoResultsId)).addClass("co_hideState");a()(document.getElementById(this.groupsCreateFirstId)).addClass("co_hideState");a()(document.getElementById(this.groupsNoDataroomAccessId)).addClass("co_hideState");if(this.groupList&&this.groupList.length>0){i=this;for(var r=0;r<this.groupList.length;r++){var s=this.groupList[r];this.contactBrowserKeyData[s.GroupId]=s.BrowserKey;var l=document.createElement("li");l.setAttribute("id","dropLocation_"+s.BrowserKey);a()(l).addClass("dropLocation");var d=a()(l),c="groupListBox"+s.BrowserKey,f={groupPermission:s.GroupPermission,editGroup:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.EditGroup","Edit Group"),deleteGroup:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.DeleteGroup","Delete Personal Group"),browserKey:s.BrowserKey,groupAnchorId:c,groupNameHtml:Object(u["EncodeHtml"])(s.GroupName||""),moreInformation:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.MoreInformation","More Information"),numberOfMembers:I["default"].renderInteger(s.NumberOfMembers)};l.innerHTML=this._getContactItemHtml(f);if(!this.manageOnlyMode){var h=d.find("#"+c.toString())[0];a()(h).bind("click",function(){i._groupClickedHandler(this)})}d.data("groupSummary",s);a()(l).data("groupInfo",{groupName:s.GroupName,groupId:s.GroupId.toString(),itemElemId:l.id,BrowserKey:s.BrowserKey});this.mangeOnlyMode||a()(l).draggable({appendTo:i.parentDiv,cursorAt:{left:0,top:0},snap:"true",snapMode:"outer",helper:function(e){Gn.HideMoreInfoWidget(!1);Gn.HideMoreInfoWidget(!0);var t=a()(e.currentTarget).find(a()(e.currentTarget).data("groupInfo").itemElemId),n=Object(u["EncodeHtml"])(a()(e.currentTarget).data("groupInfo").groupName||"");return Pn["default"].createDraggable(n,1,t)}});this.listULElement.appendChild(l)}a()(document.getElementById(this.groupsLoadingId)).addClass("co_hideState");a()(this.listULElement).removeClass("co_hideState");if(e){this.currentFilter=e;this.groupList.length>0&&(this.listCountElement.innerHTML="("+this.groupList.length.toString()+")")}else this.listCountElement.innerHTML=""}else{this.listCountElement.innerHTML="(0)";a()(this.listULElement).addClass("co_hideState");a()(document.getElementById(this.groupsLoadingId)).addClass("co_hideState");e||this.dropDownValue!=Dn["default"].All?a()(document.getElementById(this.groupsNoResultsId)).removeClass("co_hideState"):null===this.groupList?a()(document.getElementById(this.groupsLoadingId)).removeClass("co_hideState"):a()(document.getElementById(this.groupsCreateFirstId)).removeClass("co_hideState")}},_getContactItemHtml:function(e){var t="WRITE"==e.groupPermission?'<a  href="javascript:void(0);" class="co_contacts_delete" type="group" title="'+e.deleteGroup+'">'+e.deleteGroup+'</a><a  href="javascript:void(0);" type="group" class="co_contacts_edit" title="'+e.editGroup+'">'+e.editGroup+"</a>":""
;return this.manageOnlyMode?'<div id="co_listItem_'+e.browserKey+'" class="co_listItem"><span class="co_contacts_groupsCount"><span id="groupCount'+e.browserKey+'">'+e.numberOfMembers+'</span><span class="co_accessibilityLabel">'+e.groupNameHtml+"</span></span>"+t+'<a href="javascript:void(0);" class="co_contacts_info" title="'+e.moreInformation+'">'+e.moreInformation+"</a>"+e.groupNameHtml+"</div>":'<div id="co_listItem_'+e.browserKey+'" class="co_listItem"><span class="co_contacts_groupsCount"><span id="groupCount'+e.browserKey+'">'+e.numberOfMembers+'</span><span class="co_accessibilityLabel">'+e.groupNameHtml+"</span></span>"+t+'<a href="javascript:void(0);" class="co_contacts_info" title="'+e.moreInformation+'">'+e.moreInformation+'</a><a id="'+e.groupAnchorId+'" role="checkbox" aria-checked="false" class="co_checkbox_unselected" href="javascript:void(0);">'+e.groupNameHtml+"</a></div>"},DisableDragAndDropDroppables:function(){a()(".dropLocation").droppable("option","disabled",!0)},EnableDragAndDropDroppables:function(){a()(".dropLocation").droppable("option","disabled",!1)},HideMoreInfo:function(){this.moreInfoWidget&&this.moreInfoWidget.Hide()},ApplyFiltering:function(){var e=this,t=this.searchInputElement,n=t.value;e.previousFilter=n;(a()(t).hasClass("co_defaultInput")||n.length<=1)&&(n=null);this._keyEventCurrentTimer=window.setTimeout(function(){null!=e.lastFilterRequest&&e.lastFilterRequest.Abort();var t=Sn["default"].GetDataroomGroupsChunk(0,n,e.dropDownValue,function(o,i,a){if(null!=e.lastFilterRequest&&t===e.lastFilterRequest){e.lastFilterRequest=null;e.SetGroupList(o,i,a);e.RedrawContents(n);e.RedrawContents(n);if(e.collaborationWidget){var r=e.collaborationWidget.GetWidgetData();e.SetWidgetData(r)}}},function(e){throw new f["CobaltError"](h["default"].Website,e)});e.lastFilterRequest=t},this.settings.delay)},SetAddGroupButton:function(e){e?a()("#groupListBoxWidgetAddGroup").addClass("co_disabled"):a()("#groupListBoxWidgetAddGroup").removeClass("co_disabled")},_getFilterHTML:function(){var e=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.SearchByGroup","Search by group name"),t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.AllGroups","All Groups"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Personal","Personal"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Organization","Organization"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Search","Search"),a=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.OpenFilterMenu","Open Filter Menu");return'<div id="coid_groups_searchBox" class="co_widgetSearchBox"><div class="co_sortDropDown"><h4>'+i+':</h4><div class="co_dropdownTabCollapsed" id="'+this.dropDownTabId+'"><div name="'+this.dropDownLabelContainerId+'" class="co_dropdownTab"><a class="co_ellipsis co_collapsed" id="'+this.dropDownSelectedValueId+'" href="javascript:void(0);" title="'+a+'">'+t+'</a></div></div><div aria-activedescendant="" role="navigation" aria-labelledby="'+this.dropDownLabelContainerId+'" aria-hidden="true" tabindex="-1" class="co_dropdownBoxCollapsed" id="'+this.dropDownContainerId+'"><div class="co_dropdownBoxContent"><div class="co_dropdownBoxContentRight"><ul role="menu"><li role="menuitem"><a aria-selected="true" href="javascript:void(0);" id="'+this.dropDownItemsId+'_1">'+t+'</a></li><li role="menuitem"><a aria-selected="true" href="javascript:void(0);" id="'+this.dropDownItemsId+'_2">'+n+'</a></li><li role="menuitem"><a aria-selected="true" href="javascript:void(0);" id="'+this.dropDownItemsId+'_3">'+o+'</a></li></ul></div></div></div></div><label for="coid_contacts_groups_searchBoxInput"><input id="'+this.searchBoxInputId+'" type="text" autocorrect="off" value="'+e+'" class="co_widgetSearchBox_selectableInput co_widgetSearchBoxInput co_defaultInput" title="'+i+'"></label></div>'},_groupClickedHandler:function(e){var t=a()(e).closest("li").data("groupSummary"),n="Cobalt.Widget.AddressBookGroupListBox.Internal.SelectGroup";if(!this.manageOnlyMode)if(a()(e).hasClass("co_checkbox_unselected"))this._selectElement(e);else{n="Cobalt.Widget.AddressBookGroupListBox.Internal.UnselectGroup";this._unselectElement(e)}var o=t,i=new y["default"].Message(o,{},n,"1.0");y["default"].Publish(n,i)},_unselectElement:function(e){a()(e).removeClass("co_checkbox_selected").addClass("co_checkbox_unselected")},_selectElement:function(e){a()(e).removeClass("co_checkbox_unselected").addClass("co_checkbox_selected")},_handleGroupEdit:function(e,t){this.addressBook=Gn;if(!this.addressBook.GetEditWidgetExists()){var n,o,i,r={};e&&(n=a()(e).closest("li").data("groupSummary"))&&(r=n);if(n)(o=[]).push(n);else if(t&&t.Data){var s=a.a.parseJSON(t.Data);if(s){o=s.SelectedGroups;i=s.SelectedContacts}}var l=new y["default"].Message(r,{},"Cobalt.Widget.AddressBook.Internal.EditGroup","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.EditGroup",l);o?Sn["default"].GetDataroomGroupsContacts(o,function(e){if(t&&t.Data){i&&(e.GroupMembers=e.GroupMembers.concat(i));e.GroupIds=[]}else if(1==o.length){e.GroupName=o[0].GroupName;e.GroupType=o[0].GroupType}Mn.Draw(e)},function(e){throw new f["CobaltError"](h["default"].Website,e)}):Mn.Draw();Gn.HideMoreInfoWidget(!1);Gn.HideMoreInfoWidget(!0)}},_handleUndoGroupDelete:function(){},_handleGroupDelete:function(e){var t=a()(e).closest("li").data("groupSummary"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.HelpText","Help Text"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.ErrorMessage.CanNotDelete","Error: Group(s) cannot be deleted."),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.ErrorMessage.DeleteError","This group(s) is in use for sharing and cannot be deleted."),r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.ErrorMessage.ServerError","Server error occurred."),s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.ErrorMessage.CanNotClear","The group(s) could not be cleared."),l=this;Sn["default"].DeleteDataroomGroup(t.GroupId,function(e){if(e.IsGroupShared){(d=new ve["default"]).SetCloseLinkObject({id:"heltText",alt:n,onclick:function(){d.Remove()}});d.SetTitle(o);(c=a()(d.GetContentDomElement())).append(" "+i);d.Draw();return}if(!e.IsGroupInfoCleared){var d,c;(d=new ve["default"]).SetCloseLinkObject({id:"heltText",alt:n,onclick:function(){d.Remove()}});d.SetTitle(r);(c=a()(d.GetContentDomElement())).append(s);d.Draw();return}l._showGroupDeleteInfoBox(t);var u=t,f="Cobalt.Widget.AddressBook.Internal.EditGroup.Delete",h=new y["default"].Message(u,{},f,"1.0");y["default"].Publish(f,h)},function(){});Gn.HideMoreInfoWidget(!1);Gn.HideMoreInfoWidget(!0)},_moreInfoClickHandler:function(e,t){var n=Gn.GetLightboxDimensions(),o=n.top+n.height-e.pageY;if(a.a.browser.msie){var i=a()("#coid_contacts_contentDiv");o=i.size()>=1?-(e.pageY-i.offset().top):-n.height+o+35}this.moreInfoWidget.Draw(o);var r=a()(t).closest("li").data("groupSummary"),s=this;Sn["default"].GetDataroomGroupDetails(r,function(e){s.moreInfoWidget.Draw(o,e)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_selectGroupEventHandler:function(e){var t="groupListBox"+this.contactBrowserKeyData[e],n=a()(this.innerContainerDiv).find("#"+t)[0];this._selectElement(n)},_unselectGroupEventHandler:function(e){var t="groupListBox"+this.contactBrowserKeyData[e],n=a()(this.innerContainerDiv).find("#"+t)[0];this._unselectElement(n)},_unselectAllGroupsEventHandler:function(){for(var e=this.listULElement.getElementsByTagName("a"),t=0;t<e.length;t++)this._unselectElement(e[t])},_hideGroupDeleteInfoBox:function(e,t){if(!this.groupDeleteMessageInfoBox||this.groupDeleteMessageInfoBox&&this.groupDeleteMessageInfoBox.is(":hidden"))return;if(!t&&e&&e.target){var n=e.target,o=a()(n).parents("div")[0],i=null,r=null;if(o){i=a()(o).attr("id");while(!i&&o){n=o;(o=a()(n).parents("div")[0])&&(i=a()(o).attr("id"))}o&&i&&(r=this.groupDeleteMessageInfoBox.find("#"+i.toString())[0])}}if(!r||t){
var s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.GroupDeleted","The personal group was deleted");a()(this.groupDeleteMessageInfoBoxListItem[0]).addClass("co_hideState");a()(this.innerContainerDiv).removeClass("co_contacts_groupsItemDeleted");a()(this.groupDeleteMessageInfoBox[0]).removeClass("failure");a()(this.groupDeleteMessageInfoBox[0]).addClass("success");this.groupDeleteMessageInfoBox.find(".co_infoBox_message").text(s)}},_showGroupDeleteInfoBox:function(e){a()(this.groupDeleteMessageInfoBoxListItem[0]).removeClass("co_hideState");this.groupDeleteMessageInfoBox.data("groupSummary",e);a()(this.innerContainerDiv).addClass("co_contacts_groupsItemDeleted");a()("body").on({click:this.checkCloseDeleteMessageHandler,keypress:this.forceCloseDeleteMessageHandler},"*");a()("#coid_contacts_lightbox .co_shrub").bind("scroll",this.forceCloseDeleteMessageHandler)},_hideContactAddedToGroup:function(){a()("#coid_contacts_contactAddedToGroupMessage").hide(6e3,function(){a()("#coid_contacts_contactAddedToGroupMessage").remove()})},_handleSearchInputElementFocus:function(){var e=this.searchInputElement;if(""===e.value||""===a.a.trim(e.value)||a()(e).hasClass("co_defaultInput")){a()(e).removeClass("co_defaultInput");e.value=""}},_handleSearchInputElementLoseFocus:function(){var e=this.searchInputElement;if(""===e.value||""===a.a.trim(e.value)){a()(e).addClass("co_defaultInput");e.value=searchByGroup}},_handleSearchInputElementKeyUp:function(){this.previousFilter!=this.searchInputElement.value&&this.ApplyFiltering()},_setupPaginationHtml:function(){var e=a()(this.parentDiv).find("#co_groups_navigationPages")[0];e.innerHTML="";var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.FirstPage","First Page"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.PreviousPage","Previous Page"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.NextPage","Next Page"),i=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.LastPage","Last Page"),r=document.createElement("li");e.appendChild(r);r.innerHTML='<a id="groupPageFirst" class="co_first co_disabled" href="javascript:void(0);">'+t+"</a>";var s=document.createElement("li");e.appendChild(s);s.innerHTML='<a id="groupPagePrevious" class="co_prev co_disabled" href="javascript:void(0);">'+n+"</a>";var l=document.createElement("li");a()(l).addClass("co_resultRange");e.appendChild(l);this.navRangeElement=l;var d=document.createElement("li");e.appendChild(d);d.innerHTML='<a id="groupPageNext" class="co_next" href="javascript:void(0);">'+o+"</a>";var c=document.createElement("li");e.appendChild(c);c.innerHTML='<a id="groupPageLast" class="co_last co_disabled" href="javascript:void(0);">'+i+"</a>";this.firstPageAnchor=a()(r).find("#groupPageFirst")[0];this.previousPageAnchor=a()(s).find("#groupPagePrevious")[0];this.nextPageAnchor=a()(d).find("#groupPageNext")[0];this.lastPageAnchor=a()(c).find("#groupPageLast")[0];this.paginationNavSetup=!0},_setupPaginationNavigationAndRangeDisplay:function(){var e=this;if(this.startingIndex>=this.chunkSize&&!this.firstPageAnchorBound){a()(this.firstPageAnchor).bind("click",function(t){e._getFirstPage(t)});a()(this.firstPageAnchor).removeClass("co_disabled");this.firstPageAnchorBound=!0}if(this.startingIndex<this.chunkSize&&this.firstPageAnchorBound){a()(this.firstPageAnchor).unbind("click");a()(this.firstPageAnchor).addClass("co_disabled");this.firstPageAnchorBound=!1}if(this.startingIndex>0&&!this.previousPageAnchorBound){a()(this.previousPageAnchor).bind("click",function(t){e._getPreviousPage(t)});a()(this.previousPageAnchor).removeClass("co_disabled");this.previousPageAnchorBound=!0}if(0===this.startingIndex&&this.previousPageAnchorBound){a()(this.previousPageAnchor).unbind("click");a()(this.previousPageAnchor).addClass("co_disabled");this.previousPageAnchorBound=!1}if(this.startingIndex<this.totalRecordsCount-this.chunkSize&&!this.lastPageAnchorBound){a()(this.lastPageAnchor).bind("click",function(t){e._getLastPage(t)});a()(this.lastPageAnchor).removeClass("co_disabled");this.lastPageAnchorBound=!0}if(this.startingIndex>=this.totalRecordsCount-this.chunkSize&&this.lastPageAnchorBound){a()(this.lastPageAnchor).unbind("click");a()(this.lastPageAnchor).addClass("co_disabled");this.lastPageAnchorBound=!1}if(this.nextPageStartingIndex<this.totalRecordsCount&&!this.nextPageAnchorBound){a()(this.nextPageAnchor).bind("click",function(t){e._getNextPage(t)});a()(this.nextPageAnchor).removeClass("co_disabled");this.nextPageAnchorBound=!0}if(this.nextPageStartingIndex>=this.totalRecordsCount&&this.nextPageAnchorBound){a()(this.nextPageAnchor).unbind("click");a()(this.nextPageAnchor).addClass("co_disabled");this.nextPageAnchorBound=!1}var t=this.nextPageStartingIndex;this.totalRecordsCount<this.nextPageStartingIndex&&(t=this.totalRecordsCount);var n=(this.startingIndex+1).toString()+"-"+t.toString()+" of "+this.totalRecordsCount.toString();this.navRangeElement.innerHTML="<span>"+n+"</span>"},_getFirstPage:function(){var e=this;Sn["default"].GetDataroomGroupsChunk(0,null,this.dropDownValue,function(t,n,o){e.SetGroupList(t,n,o);e.RedrawContents();e.SetWidgetData(e.collaborationBoxData)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_getLastPage:function(){var e=this,t=e.totalRecordsCount-e.totalRecordsCount%e.chunkSize;t==e.totalRecordsCount&&(t=e.totalRecordsCount-e.chunkSize);Sn["default"].GetDataroomGroupsChunk(t,null,this.dropDownValue,function(t,n,o){e.SetGroupList(t,n,o);e.RedrawContents();e.SetWidgetData(e.collaborationBoxData)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_getNextPage:function(){var e=this;Sn["default"].GetDataroomGroupsChunk(e.nextPageStartingIndex,null,this.dropDownValue,function(t,n,o){e.SetGroupList(t,n,o);e.RedrawContents();e.SetWidgetData(e.collaborationBoxData)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_getPreviousPage:function(){var e=this;Sn["default"].GetDataroomGroupsChunk(e.previousStartingIndex,null,this.dropDownValue,function(t,n,o){e.SetGroupList(t,n,o);e.RedrawContents();e.SetWidgetData(e.collaborationBoxData)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_onDropDownClick:function(){var e=this.dropDownTabJQuery[0];if(this.isDropDownOpen){a()(e).addClass("co_dropdownTabCollapsed");a()(e).removeClass("co_dropdownTabExpanded");a()(this.dropDownContainer).addClass("co_dropdownBoxCollapsed");a()(this.dropDownContainer).removeClass("co_dropdownBoxExpanded");a()(this.dropDownSelectedValue).addClass("co_collapsed");a()(this.dropDownSelectedValue).removeClass("co_expanded");a()("body *").off({click:this.closeDropDownHandler,keypress:this.closeDropDownHandler});a()("#coid_contacts_lightbox .co_shrub").unbind("scroll",this.closeDropDownHandler)}else{a()(e).addClass("co_dropdownTabExpanded");a()(e).removeClass("co_dropdownTabCollapsed");a()(this.dropDownContainer).addClass("co_dropdownBoxExpanded");a()(this.dropDownContainer).removeClass("co_dropdownBoxCollapsed");a()(this.dropDownSelectedValue).addClass("co_expanded");a()(this.dropDownSelectedValue).removeClass("co_collapsed");a()("body *").on({click:this.closeDropDownHandler,keypress:this.closeDropDownHandler});a()("#coid_contacts_lightbox .co_shrub").bind("scroll",this.closeDropDownHandler)}this.isDropDownOpen=!this.isDropDownOpen},_onDropDownItemClick:function(e){var t=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.AllGroups","All Groups"),n=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Personal","Personal"),o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookGroupListBox.Organization","Organization"),i=e.target,r=null,s=null;switch(i.id.substr(i.id.length-1)){case"1":s=t;r=Dn["default"].All;break;case"2":s=n;r=Dn["default"].Personal;break;case"3":s=o;r=Dn["default"].Firmwide}if(r!=this.dropDownValue){this.dropDownSelectedValue.innerHTML=s;this.dropDownValue=r;this._onDropDownClick();a()(document.getElementById(this.groupsLoadingId)).removeClass("co_hideState");a()(this.listULElement).addClass("co_hideState");var l=null
;null!==this.previousFilter&&this.previousFilter.length>1&&(l=this.previousFilter);var d=this;Sn["default"].GetDataroomGroupsChunk(0,l,r,function(e,t,n){d.SetGroupList(e,t,n);d.RedrawContents(l);d.SetWidgetData(d.collaborationBoxData)},function(e){throw new f["CobaltError"](h["default"].Website,e)})}}};var Fn=Wn,Hn={_lightbox:null,_title:null,_defaultTitle:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.Title","Address Book"),_actionButtonText:null,_defaultActionButtonText:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.ActionButtonText","Submit"),_actionButtonCallback:null,_contactsLightBoxId:"coid_contacts_lightbox",_contactsLightBoxClassName:"co_overlayBox_container co_contacts_overlayBox",_closeImageId:"coid_contacts_closeImage",_closeButtonId:"coid_contacts_closeButton",_cancelLinkId:"coid_contacts_cancelLink",_clearButtonId:"coid_contacts_clearButton",_manageOnlyMode:!1,defaultRecipientUdsProperty:null,defaultRecipientVertical:null,_changeOwnerMode:!1,_firmOnlyContacts:null,_alertOwnerGuid:null,_contactsContentDivId:"coid_contacts_contentDiv",_contactListWidget:null,_groupListWidget:null,_collaborationBoxWidget:null,_editWidgetExists:!1,_triggeredElementId:null,_userTypeFilter:null,_xButtonImgSrc:h["default"].GetUrl(h["default"].Images,"/images/v1/co_overlayBox_closeButton.png"),_lightboxLoadingSrc:h["default"].GetUrl(h["default"].CSS,"/css/v2/images/co_loading_small.gif"),_lightboxLoadingMsg:'<img src="'+h["default"].GetUrl(h["default"].CSS,"/css/v2/images/co_loading_small.gif")+'" />'+I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.LoadingMessage","Loading Contacts data..."),_saveGroupSubscription:null,_saveContactSubscription:null,_updateContactSubscription:null,_cancelGroupSubscription:null,_deleteGroupSubscription:null,_deleteContactSubscription:null,_editGroupSubscription:null,SetActionButtonText:function(e){Hn._actionButtonText=e},SetTitle:function(e){Hn._title=e},SetActionButtonCallback:function(e){Hn._actionButtonCallback=e},SetManageOnlyMode:function(e){Hn._manageOnlyMode=e},SetDefaultRecipientUdsProperty:function(e){Hn.defaultRecipientUdsProperty=e},SetTriggeredElementId:function(e){Hn._triggeredElementId=e},SetDefaultRecipientVertical:function(e){Hn.defaultRecipientVertical=e},SetChangeOwnerMode:function(e){Hn._changeOwnerMode=e},SetFirmOnlyContacts:function(e){Hn._firmOnlyContacts=e},SetOwnerToDisplay:function(e){Hn._alertOwnerGuid=e},SetEditWidgetExists:function(e){Hn._editWidgetExists=e;Hn.ToggleEnableAddGroupButton(e)},GetEditWidgetExists:function(){return Hn._editWidgetExists},SetUserTypeFilter:function(e){Hn._userTypeFilter=e},Draw:function(e){Hn._lightbox&&Hn._destroyLightbox();Hn._lightbox=new ve["default"];Hn._lightbox.SetId(Hn._contactsLightBoxId);null!=Hn._title&&void 0!=Hn._title||(Hn._title=Hn._defaultTitle);null!=Hn._actionButtonText&&void 0!=Hn._actionButtonText||(Hn._actionButtonText=Hn._defaultActionButtonText);Hn._lightbox.SetTitle(Hn._title);Hn._manageOnlyMode?Hn._lightbox.SetClass(Hn._contactsLightBoxClassName+" co_contacts_view"):Hn._lightbox.SetClass(Hn._contactsLightBoxClassName+" co_contacts_collector");Hn._lightbox.SetCloseLinkObject({id:Hn._closeImageId,alt:I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.CloseContacts","Close Contacts"),src:Hn._xButtonImgSrc,onclick:function(){Hn.Close()}});Hn._escapeDialog=function(e){27===e.keyCode&&Hn._destroyLightbox()};a()(document).keyup(Hn._escapeDialog);Hn._lightbox.Draw();a()("#"+Hn._contactsLightBoxId).addClass("co_contactsAlerts");a()("#"+Hn._contactsLightBoxId).attr("tabIndex",-1);Hn._manageOnlyMode||Hn._publishToggleAutoSuggest(!1);var t=Hn._lightbox.GetContentDomElement(),n=document.createElement("div");n.id=Hn._contactsContentDivId;t.appendChild(n);Hn._contactListWidget=new Ln;Hn._contactListWidget.SetManageOnlyMode(Hn._manageOnlyMode);Hn._contactListWidget.SetParentDiv(n);Hn._contactListWidget.SetChangeOwnerMode(Hn._changeOwnerMode);Hn._contactListWidget.SetFirmOnlyContacts(Hn._firmOnlyContacts);Hn._contactListWidget.SetOwnerToDisplay(Hn._alertOwnerGuid);Hn._contactListWidget.Draw("contacts");if(!Hn._changeOwnerMode){Hn._groupListWidget=new Fn;Hn._groupListWidget.SetManageOnlyMode(Hn._manageOnlyMode);Hn._groupListWidget.SetParentDiv(n);Hn._groupListWidget.Draw()}if(Hn._manageOnlyMode){var o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.Close","Close");Hn._lightbox.GetFooterDomElement().innerHTML='<ul><li><input type="button" id="'+Hn._closeButtonId+'" class="co_primaryBtn" value="'+o+'"/></li></ul>';a()("#"+Hn._closeButtonId).click(function(){Hn.Close()})}else{var i=document.createElement("div");a()(i).addClass("co_overlayBox_bottomContent");n.appendChild(i);Hn._collaborationBoxWidget=new qn;Hn._collaborationBoxWidget.SetMode(gn.Edit);Hn._collaborationBoxWidget.SetParentDiv(i);Hn._collaborationBoxWidget.SetWidgetData(e);Hn._collaborationBoxWidget.SetDefaultRecipientUdsProperty(Hn.defaultRecipientUdsProperty);Hn._collaborationBoxWidget.SetDefaultRecipientVertical(Hn.defaultRecipientVertical);Hn._collaborationBoxWidget.SetChangeOwnerMode(Hn._changeOwnerMode);Hn._collaborationBoxWidget.SetContactDropCallback(a.a.proxy(Hn._dropContactCallback,this));Hn._collaborationBoxWidget.Draw();if(Hn._changeOwnerMode){a()("#coid_contacts_addedContactsInput_co_overlayBox_bottomContent").addClass("co_hideState");a()("#"+Hn._contactsLightBoxId).addClass("co_changeOwner")}Hn._contactListWidget.SetCollaborationWidget(Hn._collaborationBoxWidget);Hn._changeOwnerMode||Hn._groupListWidget.SetCollaborationWidget(Hn._collaborationBoxWidget);var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.Cancel","Cancel");Hn._lightbox.GetFooterDomElement().innerHTML='<ul><li><input class="co_primaryBtn" id="'+Hn._closeButtonId+'" type="button" value="'+Hn._actionButtonText+'" /></li><li><a id="'+Hn._cancelLinkId+'" class="co_overlayBox_buttonCancel" href="javascript:void(0);">'+r+"</a></li></ul>";a()("#"+Hn._closeButtonId).click(function(){Hn.ExecuteActionButton()});a()("#"+Hn._cancelLinkId).click(function(){Hn.Close()});a()("#"+Hn._contactsLightBoxId).focus()}var s=Hn._contactListWidget,l=y["default"].CreateUUID();s.lastFilterRequestId=l;vn["default"].GetDataroomContactsChunk(0,null,Hn._firmOnlyContacts,function(t,n,o,i){if(l===s.lastFilterRequestId){s.SetContactList(t,n,o);s.RedrawContents();s.SetWidgetData(e);if(void 0!=i&&null!=i&&i.length>0){Hn._collaborationBoxWidget.ShowNoDataroomAccess();s.ShowNoDataroomAccess()}}},function(e){throw new f["CobaltError"](h["default"].Website,e)},Hn._userTypeFilter);Sn["default"].GetDataroomGroupsChunk(0,null,Dn["default"].All,function(t,n,o,i){var a=Hn._groupListWidget;a.SetGroupList(t,n,o);a.RedrawContents();a.SetWidgetData(e);if(void 0!=i&&null!=i&&i.length>0){Hn._collaborationBoxWidget.ShowNoDataroomAccess();a.ShowNoDataroomAccess()}},function(e){throw new f["CobaltError"](h["default"].Website,e)});Object(yn["AttachClickFixForLabels"])(t);Hn._saveGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Save",a.a.proxy(function(){Hn._handleGroupSave()},Hn));Hn._saveContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditContact.Save",a.a.proxy(function(){Hn._handleContactSave()},Hn));Hn._updateContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactEditBox.Internal.UpdateContact",a.a.proxy(function(e,t,n){Hn._handleContactUpdate(e,t,n)},Hn));Hn._cancelGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Cancel",a.a.proxy(function(){Hn._addEventSubscriptionsForWidgets()},Hn));Hn._deleteGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Delete",a.a.proxy(function(){Hn._handleGroupSave()},Hn));Hn._deleteContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditContact.Delete",a.a.proxy(function(){Hn._handleContactSave()},Hn));Hn._editGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup",a.a.proxy(function(){Hn._removeEventSubscriptionsForWidgets("editGroup")},Hn))},ToggleEnableAddGroupButton:function(e){
Hn._groupListWidget&&Hn._groupListWidget.SetAddGroupButton(e);Hn._collaborationBoxWidget&&Hn._collaborationBoxWidget.SetAddGroupButton(e)},ExecuteActionButton:function(){if(null!=Hn._actionButtonCallback&&void 0!=Hn._actionButtonCallback){var e=Hn._collaborationBoxWidget.GetWidgetData();if(!Hn._validateCollaborationBoxWidgetData(e))return;Hn._actionButtonCallback(e)}Hn.Close()},Close:function(){Hn._saveGroupSubscription&&y["default"].Unsubscribe(Hn._saveGroupSubscription);Hn._cancelGroupSubscription&&y["default"].Unsubscribe(Hn._cancelGroupSubscription);Hn._editGroupSubscription&&y["default"].Unsubscribe(Hn._editGroupSubscription);Hn._deleteGroupSubscription&&y["default"].Unsubscribe(Hn._deleteGroupSubscription);Hn._removeEventSubscriptionsForWidgets();null!=Hn._contactListWidget&&Hn._contactListWidget.CleanUp();null!=Hn._groupListWidget&&Hn._groupListWidget.Cleanup();if(null!=Hn._lightbox){Hn._destroyLightbox();Hn._lightbox=null}if(Hn._collaborationBoxWidget){Hn._collaborationBoxWidget.Remove();Hn._collaborationBoxWidget=null}Hn._editWidgetExists&&(Hn._editWidgetExists=!1);Hn._manageOnlyMode||Hn._publishToggleAutoSuggest(!0);if(Hn._removeOnClose){Hn._title=null;Hn._actionButtonText=null;Hn._actionButtonCallback=null;Hn._manageOnlyMode=!1;Hn.defaultRecipientUdsProperty=null;Hn.defaultRecipientVertical=null;Hn._changeOwnerMode=!1;Hn._firmOnlyContacts=null;Hn._alertOwnerGuid=null;Hn._contactListWidget=null;Hn._groupListWidget=null;Hn._collaborationBoxWidget=null;Hn._editWidgetExists=!1;Hn._triggeredElementId=null;Hn._userTypeFilter=null;Hn._saveGroupSubscription=null;Hn._saveContactSubscription=null;Hn._updateContactSubscription=null;Hn._cancelGroupSubscription=null;Hn._deleteGroupSubscription=null;Hn._deleteContactSubscription=null;Hn._editGroupSubscription=null}},_destroyLightbox:function(){if(Hn._lightbox){Hn._escapeDialog&&a()(document).unbind("keyup",Hn._escapeDialog);Hn._lightbox.Remove()}Hn._triggeredElementId&&a()("#"+Hn._triggeredElementId).focus()},HideMoreInfoWidget:function(e){e?Hn._contactListWidget&&Hn._contactListWidget.HideMoreInfo():Hn._groupListWidget&&Hn._groupListWidget.HideMoreInfo()},GetLightboxDimensions:function(){var e=a()("#"+Hn._contactsLightBoxId),t=e.offset();return{top:t.top,left:t.left,height:e.outerHeight(),width:e.outerWidth()}},_validateCollaborationBoxWidgetData:function(e){var t=!0,n=[],o=[];if(null!=e||void 0!=e||""!=e){var i=JSON.parse(e);if(i&&i.SelectedContacts&&i.SelectedContacts.length>0)for(var a=0;a<i.SelectedContacts.length;a++){var r=i.SelectedContacts[a];if((null==r.EmailAddress||void 0==r.EmailAddress)&&!Hn._changeOwnerMode){n.push(r);t=!1}}if(i&&i.SelectedGroups&&i.SelectedGroups.length>0)for(a=0;a<i.SelectedGroups.length;a++){var s=i.SelectedGroups[a];if((null==s.NumberOfMembers||void 0==s.NumberOfMembers||0==s.NumberOfMembers)&&(null==s.MemberIds||void 0==s.MemberIds||null!=s.MemberIds&&void 0!=s.MemberIds&&0==s.MemberIds.length)){o.push(s);t=!1}}}var l=null;n.length>0?l=n[0].Id:o.length>0&&(l=o[0].GroupId);t||null==l||Hn._showInvalidContactGroupWarning(n,o,l);return t},_showInvalidContactGroupWarning:function(e,t,n){var o=Hn._collaborationBoxWidget.contactBrowserKeyData[n],i=a()(Hn._collaborationBoxWidget.contentElement).find("#"+o)[0],r=!1;if(i){if(null==document.getElementById("missingId_"+n)){var s=document.createElement("div");s.id="missingId_"+n;a()(i).append(s)}if(null!=document.getElementById("missingId_"+n)){Hn._noEmailErrorPlaceHolder=new M["default"](document.getElementById("missingId_"+n),F["default"].None,W["default"].Bottom,!0,!0,!1);var l="",d=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.ErrorMessage.ContactMissingEmail","Contacts missing email addresses:"),c=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.ErrorMessage.GroupMissingMember","Groups without members:"),f=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBook.Lightbox.ErrorMessage.EditContact","Please edit the contacts to proceed.");if(e.length>0){r=!0;l=l+d+"<br>";for(var h=0;h<e.length;h++)l=l+Object(u["EncodeHtml"])(e[h].LastName+", "+e[h].FirstName)+"<br>";l+="<br>"}if(t.length>0){l=l+c+"<br>";for(h=0;h<t.length;h++)l=l+Object(u["EncodeHtml"])(t[h].GroupName||"")+"<br>"}r&&(l=l+"<br>"+f);Hn._noEmailErrorPlaceHolder.Draw(l)}}},_removeEventSubscriptionsForWidgets:function(e){Hn._contactListWidget.RemoveEventSubscriptions(e);if(Hn._collaborationBoxWidget){Hn._collaborationBoxWidget.RemoveEventSubscriptions("editGroup");Hn._collaborationBoxWidget.DisableDragDropContactOrGroupDropLocation()}},SetRemoveOnClose:function(e){Hn._removeOnClose=e},_addEventSubscriptionsForWidgets:function(){Hn._contactListWidget.AddEventSubscriptions();if(Hn._collaborationBoxWidget){Hn._collaborationBoxWidget.AddEventSubscriptions();Hn._collaborationBoxWidget.EnableDragDropContactOrGroupDropLocation()}},_handleGroupSave:function(){Hn._addEventSubscriptionsForWidgets();Hn._manageOnlyMode?Hn._changeOwnerMode||Hn._groupListWidget.Refresh():Hn._changeOwnerMode||Hn._groupListWidget.Refresh(Hn._collaborationBoxWidget.GetWidgetData())},_handleContactSave:function(){var e={};Hn._manageOnlyMode||(e=Hn._contactListWidget.collaborationBoxData);var t=new y["default"].Message(e,{},"Cobalt.Widget.AddressBook.Internal.AddressBook.EditContact.Save","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.AddressBook.EditContact.Save",t)},_handleContactUpdate:function(e,t){var n=t.Data,o={};Hn._manageOnlyMode||(o=Hn._contactListWidget.collaborationBoxData);var i=new y["default"].Message(n,o,"Cobalt.Widget.AddressBook.Internal.AddressBook.UpdateContact","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.AddressBook.UpdateContact",i)},_publishToggleAutoSuggest:function(e){var t=e,n=new y["default"].Message(t,{},"Cobalt.Widget.AddressBook.Internal.CollaborationBox.ToggleAutoSuggest","1.0");y["default"].Publish("Cobalt.Widget.AddressBook.Internal.CollaborationBox.ToggleAutoSuggest",n)},_dropContactCallback:function(){Hn._changeOwnerMode&&Hn._contactListWidget._unselectAllContactsEventHandler()}},Gn=Hn;function Un(e,t,n){this._inputElement=e;this._parentElement=t;this._selectedItem=-1;this._currentData=null;this._currentDataLength=0;this._suggestionListElement=null;this._onWidget=!1;this._data=null;this._keyEvents=null;this._keyEventCurrentTimer=!1;this._previousLength=0;this._previousValue="";this._inputHandlersBound=!1;this.moreInfoWidget=null;this._settings={delay:40,minChars:2,selectFirst:!0,onSelect:null};null!=n&&(this._settings=n);this.lastFilterRequest=null}Un.prototype={SetInputElement:function(e){this._inputElement=e;this._addInputEventHandlers()},SetParentElement:function(e){this._parentElement=e},SetOnSelectCallback:function(e){this._settings.onSelect=e},Draw:function(){if(!this._parentElement)throw new f["CobaltError"](h["default"].Website,"Contacts Autosuggest Widget Error: parent element not provided");if(!this._inputElement)throw new f["CobaltError"](h["default"].Website,"Contacts Autosuggest Widget Error: input element not provided");var e=document.createElement("ul");e.id="co_searchSuggestion";this._suggestionListElement=e;this._parentElement.appendChild(e);var t=document.createElement("div");this._parentElement.appendChild(t);this.moreInfoWidget=new Rn(t);this.moreInfoWidget.SetMode(En.GroupInfo);this.Hide();this._addInputEventHandlers();var n=this;a()("body").off({click:function(e){n._onClick(this,e)},focus:function(e){n._eventFocus(this,e)}},"#co_searchSuggestion li a").on({click:function(e){n._onClick(this,e)},focus:function(e){n._eventFocus(this,e)}},"#co_searchSuggestion li a").off({mouseover:function(){a()(this).addClass("hover")},mouseleave:function(){a()(this).removeClass("hover")}},"#co_searchSuggestion li").on({mouseover:function(){a()(this).addClass("hover")},mouseleave:function(){a()(this).removeClass("hover")}},"#co_searchSuggestion li")},Update:function(e){this._suggestionListElement.innerHTML="";this._currentData=e;this._currentDataLength=e.length;for(var t=0;t<e.length;t++){var n=document.createElement("li");n.setAttribute("num",t);if(e[t].ContactType===bn["default"].Group){var o=document.createElement("a");o.href="javascript:void(0);"
;o.title="More Information";a()(o).addClass("co_contacts_info");o.innerHTML="More Information";n.appendChild(o)}var i=document.createElement("a");i.href="javascript:void(0);";i.innerHTML=this._getDisplayString(e[t]);n.appendChild(i);this._suggestionListElement.appendChild(n)}this._settings.selectFirst&&e.length>0&&(this._selectedItem=0);this._setFocusOnSelectedItem(this._selectedItem)},FindMatch:function(){var e=[];if(null!=this._data)for(var t=0;t<this._data.length;t++)e[e.length]=this._data[t];return e},Show:function(){a()(this._parentElement).removeClass("co_hideState").addClass("co_showState");this._selectedItem=0},Hide:function(){a()(this._parentElement).removeClass("co_showState").addClass("co_hideState")},IsVisible:function(){return a()(this._parentElement).hasClass("co_showState")},GetValue:function(){if(!this.IsVisible())return Object(u["Trim"])(this._inputElement.value);if(this._selectedItem>=0&&"undefined"!=this._currentData[this._selectedItem]&&this.IsVisible())return this._currentData[this._selectedItem];return""},_onClick:function(e,t){if(a()(t.target).hasClass("co_contacts_info")){var n=t.target.parentNode.getAttribute("num");this._showMoreInfoPopUp(t.target,n,t.pageY);return}this._onSelect(e.parentNode.getAttribute("num"))},_showMoreInfoPopUp:function(e,t,n){if(!e)return;if(!t||!this._currentData[t])return;var o=a()(this._parentElement),i=o.offset().top+o.outerHeight()-n;this.moreInfoWidget.Draw(i);var r=new _n["default"];r.GroupId=this._currentData[t].ContactId;var s=this;Sn["default"].GetDataroomGroupDetails(r,function(e){s.moreInfoWidget.Draw(i,e)},function(e){throw new f["CobaltError"](h["default"].Website,e)})},_onSelect:function(e){if("function"==typeof this._settings.onSelect){null!=this.lastFilterRequest&&this.lastFilterRequest.Abort();if(this.IsVisible()&&e>=0&&"undefined"!=this._currentData[e])this._settings.onSelect(this._currentData[e]);else if(k["default"].ViewData.FeatureConfigurations.SAO_INVITING){var t=a.a.trim(this._inputElement.value);this._settings.onSelect(t)}this.Hide()}},_getContacts:function(e){if(e.length>=this._settings.minChars){var t=this;null!=t.lastFilterRequest&&t.lastFilterRequest.Abort();var n=vn["default"].GetDataroomContactAutoSuggestValues(e,function(o){if(n===t.lastFilterRequest){t.lastFilterRequest=null;if(o.length>0){t._data=o;var i=t.FindMatch(e);t.Update(i,e);t.Show()}else t.Hide()}},function(e){throw new f["CobaltError"](h["default"].Website,e)});t.lastFilterRequest=n}else this.Hide()},_getDisplayString:function(e){var t="";if(e.ContactType==bn["default"].Person||e.ContactType==bn["default"].ExternalPerson){var n=[];n.push(Object(u["IsNotNullOrEmpty"])(e.ContactName1WithHighlights)?e.ContactName1WithHighlights:Object(u["EncodeHtml"])(e.ContactName2||""));n.push(", ");n.push(Object(u["IsNotNullOrEmpty"])(e.ContactName2WithHighlights)?e.ContactName2WithHighlights:Object(u["EncodeHtml"])(e.ContactName1||""));t=n.join("")}else t=Object(u["IsNotNullOrEmpty"])(e.ContactName1WithHighlights)?e.ContactName1WithHighlights:Object(u["EncodeHtml"])(e.ContactName1||"");return t},_setFocusOnSelectedItem:function(e){if(-1!=e){a()("#"+this._suggestionListElement.id+" li:eq("+e+")").addClass("co_searchSuggestionFocus")}else this._suggestionListElement.focus()},_removeFocusOnCurrentItem:function(){a()("#"+this._suggestionListElement.id+" li:eq("+this._selectedItem+")").removeClass("co_searchSuggestionFocus")},_keyEventArrowUp:function(){this._removeFocusOnCurrentItem();this._selectedItem>0?this._selectedItem--:this._selectedItem=0;this._setFocusOnSelectedItem(this._selectedItem)},_keyEventArrowDown:function(){this._removeFocusOnCurrentItem();this._selectedItem<this._currentDataLength-1?this._selectedItem++:this._selectedItem=this._currentDataLength-1;this._setFocusOnSelectedItem(this._selectedItem)},_keyEventEnter:function(){this._onSelect(this._selectedItem)},_keyEventEsc:function(){a()(this._parentElement).removeClass("co_showState").addClass("co_hideState")},_eventFocus:function(e,t){this._removeFocusOnCurrentItem();var n=t.target.parentNode.getAttribute("num");this._selectedItem=n;this._setFocusOnSelectedItem(this._selectedItem)},_addInputEventHandlers:function(){if(this._inputHandlersBound)return;var e=this;a()(this._inputElement).on("keyup",function(t){if(38===t.keyCode)e._keyEventArrowUp();else if(40===t.keyCode)e._keyEventArrowDown();else if(13===t.keyCode)e._keyEventEnter();else if(27===t.keyCode)e._keyEventEsc();else{var n=e._inputElement.value;if(e._previousLength!==n.length||e._previousValue!==n){if(!1!==e._keyEventCurrentTimer){window.clearTimeout(e._keyEventCurrentTimer);e._keyEventCurrentTimer=!1}k["default"].ViewData.FeatureConfigurations["FOLDERS"]&&(e._keyEventCurrentTimer=window.setTimeout(function(){e._getContacts(e._inputElement.value)},e._settings.delay));e._previousValue=e._inputElement.value;e._previousLength=e._previousValue.length}}t.cancelBubble=!0;t.stopPropagation&&t.stopPropagation();return!1});this._inputHandlersBound=!0}};var Vn=Un;function jn(){this.mode=null;this.parentDiv=null;this.collaborationData=null;this.contentElement=null;this.checkForValidEmail=!1;this.noDataMessageEditMode=I["default"].lookup("SC.Website.Collaboration.NoDataMessageEditMode","Click or drag people or groups above to collect them for insertion.");this.noDataMessageAutoSuggestMode=I["default"].lookup("SC.Website.Collaboration.NoDataMessageAutoSuggestMode","Enter names, groups, email addresses or select from Contacts.");this.NoDatamessageAutoSuggestNoExternalSharingMode=I["default"].lookup("SC.Website.Collaboration.NoDatamessageAutoSuggestNoExternalSharingMode","Enter names and groups or select from Contacts.");this.noDataMessageNewGroupMode=I["default"].lookup("SC.Website.Collaboration.NoDataMessageNewGroupMode","Click people at left to add.");this.recipientsAccessibilityMessage=I["default"].lookup("SC.Website.Collaboration.EmptyEmailList","Selected Contacts.  No recipients selected.  Press enter or down arrow to add email, tab to go to next.");this.recipeintTitle=I["default"].lookup("SC.Website.Collaboration.EmailLabel","Selected Contacts");this.title=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.AddContacts","Add Contacts");this.autoSuggestLIElement=null;this.autoSuggestInput=null;this.autoSuggestDiv=null;this.autoSuggestWidget=null;this.messageLI=null;this.addedContactsInputIdBase="coid_contacts_addedContactsInput";this.addedContactsInputId=this.addedContactsInputIdBase;this.selectContactSubscription=null;this.unselectContactSubscription=null;this.selectGroupSubscription=null;this.unselectGroupSubscription=null;this.groupDeleteSubscription=null;this.contactDeleteSubscription=null;this.groupEditSubscription=null;this.contactEditSubscription=null;this.toggleAutoSuggestSubscription=null;this.classNoContactsMessage="co_contacts_message";this.classCollectorAddNew="co_contacts_collector_addNew";this.onKeyDownHandler=null;this.contactBrowserKeyData={};this.defaultRecipients=null;this.defaultRecipientUdsProperty=null;this.defaultRecipientVertical=null;this.changeOwnerMode=!1;this.hideGroupButton=!1;this.hideMessage=!1;this._contactDropCallback=function(){};this.renderedCallback=null;this.accessibilityLabelRecipients="coid_contacts_recipientsAccessibilityLabel";this._useCurrentUserEmailIfEmpty=!1}jn.prototype={SetContactDropCallback:function(e){this._contactDropCallback=e},SetParentDiv:function(e){this.parentDiv=e;var t=null;e.className?t=e.className:e.id&&(t=e.id);this.addedContactsInputId=this.addedContactsInputIdBase+"_"+t},SetChangeOwnerMode:function(e){this.changeOwnerMode=e},SetHideGroupButton:function(e){this.hideGroupButton=e},SetHideMessage:function(e){this.hideMessage=e},SetDefaultRecipientUdsProperty:function(e){this.defaultRecipientUdsProperty=e},SetDefaultRecipientVertical:function(e){this.defaultRecipientVertical=e},SetMode:function(e){this.mode=e},SetNoDataMessage:function(e){this.noDataMessage=e},SetRenderedCallback:function(e){this.renderedCallback=e},SetTitle:function(e){this.title=e},SetWidgetData:function(e){this.collaborationData=e;if(e&&this.mode===gn.Edit){var t,n=JSON.parse(e);for(t=0;t<n.SelectedContacts.length;t++){var o="",i=null
;if(n.SelectedContacts[t].Id){o="Cobalt.Widget.AddressBookCollaborationBox.Internal.SelectContact";i=n.SelectedContacts[t].Id}else if(n.SelectedGroups[t].GroupId){o="Cobalt.Widget.AddressBookCollaborationBox.Internal.SelectGroup";i=n.SelectedGroups[t].GroupId}var a=new y["default"].Message(i,{},o,"1.0");y["default"].Publish(o,a)}}else e&&this.mode===gn.EditWithAutoSuggest&&(this.collaborationData=e)},GetWidgetData:function(){var e=this._GetWidgetData(),t={SelectedContacts:e.Contacts,SelectedGroups:e.Groups,Email:e.Emails};return JSON.stringify(t)},GetWidgetDataResolveEmails:function(e,t){if(!e)throw new f["CobaltError"](h["default"].Website,"Error: callback cannot be null in GetWidgetDataResolveEmails");var n=this._GetWidgetData();if(n.HasExternalEmails){this._ResolveEmails(n.Data,e,t);return}var o={SelectedContacts:n.Contacts};e(JSON.stringify(o))},_GetWidgetData:function(){var e=this.contentElement.getElementsByTagName("li"),t=null,n=[],o=[],i=[],r=!1;if(e.length>0){var s;for(s=0;s<e.length;s++)if((t=e[s])!==this.messageLI&&t!==this.autoSuggestLIElement){var l=this.mode!==gn.ReadOnly?a()(t).find("a:first"):a()(e[s]),d=l.data("contactSummary");if(d){n.push(d);continue}var c=l.data("groupSummary");if(c){o.push(c);continue}var u=l.data("email");if(u){i.push(u);r=!0}}}return{Contacts:n,Groups:o,Emails:i,HasExternalEmails:r}},SetUseCurrentUserEmailIfEmpty:function(e){this._useCurrentUserEmailIfEmpty=e},GetUseCurrentUserEmailIfEmpty:function(){return this._useCurrentUserEmailIfEmpty},IsEmpty:function(){if(a()(this.contentElement).find("li:not(."+this.classNoContactsMessage+"):not(."+this.classCollectorAddNew+")").length>0)return!1;if(!Object(u["IsNullOrEmpty"])(Object(u["Trim"])(this.autoSuggestInput.value))){if(!k["default"].ViewData.FeatureConfigurations.SAO_INVITING)return!0;return!1}return!0},IsValid:function(){if(!k["default"].ViewData.FeatureConfigurations.SAO_INVITING)return!0;var e=Object(u["Trim"])(this.autoSuggestInput.value);return Object(u["IsNullOrEmpty"])(e)||Object(u["ValidateSingleEmail"])(e)},ShowNoDataroomAccess:function(){a()("#collabGroupListBoxWidgetAddGroup").addClass("co_hideState")},Draw:function(){var e=this,t=function(){if(e.mode!==gn.NewGroup){var t="";e.mode===gn.Edit&&(t=e.title);if(e.mode!==gn.EditWithAutoSuggest){var n="",o=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.AddGroup","Add Group");n='<fieldset><legend><span class="co_accessibilityLabel">'+e.recipeintTitle+'</span></legend><ul class="co_defaultInput co_contacts_addedContactsInput" title="'+t+'" id="'+e.addedContactsInputId+'">';e.changeOwnerMode||e.hideGroupButton||(n+='<li id="liAddGroupButton"><a id="collabGroupListBoxWidgetAddGroup" href="javascript:void(0);" class="co_contacts_addNew" title="'+o+'">'+o+"</a></li>");n+="</ul></fieldset>";e.parentDiv.innerHTML=n;e.contentElement=a()(e.parentDiv).find("#"+e.addedContactsInputId)[0];var i=a()("#liAddGroupButton")[0];a()(i).bind("click",function(){e._handleGroupEdit()});a()(e.contentElement).droppable({tolerance:"pointer",drop:function(t,n){var o=n.draggable.data("contactSummary");this._invalidEmailInfoBox&&this._invalidEmailInfoBox.Remove();if(o){if(!o.EmailAddress){if(0==a()(n.draggable[0]).find("#co_contact_error_container").length){var i=document.createElement("div");i.id="co_contact_error_container";n.draggable[0].appendChild(i)}this._invalidEmailInfoBox=new M["default"](a()(n.draggable[0]).find("#co_contact_error_container")[0],F["default"].None,W["default"].Bottom,!0,!0,!1);var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.ErrorMessage.MissingEmailAddress","Contact missing email address, please edit the contact to proceed.");this._invalidEmailInfoBox.Draw(r);return}e._contactDragAndDropped(o);e._contactDroppedInConsumptionBoxHandler(o)}else{var s=a()("#groupListBox"+n.draggable.data("groupInfo").BrowserKey).parent().parent().data("groupSummary");if(s){e._groupDragAndDropped(s);e._groupDroppedInConsumptionBoxHandler(s)}}},over:function(e,t){t.helper[0].setAllowDrop()},out:function(e,t){t.helper[0].setNeutralDrop()}})}else{e.parentDiv.innerHTML='<fieldset role="application"><legend><label for="'+e.addedContactsInputId+'"class="co_accessibilityLabel" id="'+e.accessibilityLabelRecipients+'">'+e.recipeintTitle+'</label></legend><ul class="co_defaultInput co_contacts_addedContactsInput" id="'+e.addedContactsInputId+'" role="textbox" /></fieldset>';e.contentElement=a()(e.parentDiv).find("#"+e.addedContactsInputId)[0];a()(e.contentElement).bind("click",function(t){e._contentElementClick(t)});var r=document.createElement("li");e.contentElement.appendChild(r);a()(r).addClass(e.classCollectorAddNew+" co_hideState");var s=document.createElement("label");r.appendChild(s);s.className+=" co_accessibilityLabel";s.innerHTML=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.EmailAddress","Email address");s.setAttribute("for","coid_contacts_autoSuggest_input");var l=document.createElement("input");r.appendChild(l);l.setAttribute("autocomplete","off");l.id="coid_contacts_autoSuggest_input";a()(l).keyup(function(t){e._checkForValidEmail(e,t)});var d=document.createElement("div");e.parentDiv.appendChild(d);d.id="coid_contacts_autoSuggest";a()(d).addClass("co_contacts_autoSuggest");e.autoSuggestLIElement=r;e.autoSuggestInput=l;e.autoSuggestDiv=d;e.autoSuggestWidget=new Vn(e.autoSuggestInput,e.autoSuggestDiv,null);e.autoSuggestWidget.SetOnSelectCallback(function(t){e._autoSuggestValueSelected(t)});e.autoSuggestWidget.Draw();e._changeAccessibilityLabel();e.autoSuggestWidget.Hide()}}else{e.contentElement=document.createElement("ul");a()(e.contentElement).addClass("co_defaultInput co_contacts_addedContactsInput");e.parentDiv.appendChild(e.contentElement);a()(e.contentElement).droppable({tolerance:"pointer",drop:function(t,n){var o=n.draggable.data("contactSummary");this._invalidEmailInfoBox&&this._invalidEmailInfoBox.Remove();if(o){if(!o.EmailAddress){if(0==a()(n.draggable[0]).find("#co_contact_error_container").length){var i=document.createElement("div");i.id="co_contact_error_container";n.draggable[0].appendChild(i)}this._invalidEmailInfoBox=new M["default"](a()(n.draggable[0]).find("#co_contact_error_container")[0],F["default"].None,W["default"].Bottom,!0,!0,!1);var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.ErrorMessage.MissingEmailAddress","Contact missing email address, please edit the contact to proceed.");this._invalidEmailInfoBox.Draw(r);return}e._contactDragAndDropped(o);e._contactDroppedInConsumptionBoxHandler(o)}else{var s=a()("#groupListBox"+n.draggable.data("groupInfo").groupId).data("groupSummary");if(s){e._groupDragAndDropped(s);e._groupDroppedInConsumptionBoxHandler(s)}}},over:function(e,t){t.helper[0].setAllowDrop()},out:function(e,t){t.helper[0].setNeutralDrop()}})}e.AddEventSubscriptions();var c=document.createElement("li");e.contentElement.appendChild(c);a()(c).addClass(e.classNoContactsMessage+" co_hideState").attr("id",e.classNoContactsMessage);e.messageLI=c;if(e.mode!==gn.NewGroup&&e.mode!==gn.EditWithAutoSuggest){var u=a()("#"+e.addedContactsInputId);a()(e.contentElement).append(a()(u).find("#liAddGroupButton"))}e.RedrawContents();a.a.isFunction(e.renderedCallback)&&e.renderedCallback()};null!=this.defaultRecipientVertical&&null!=this.defaultRecipientUdsProperty?vn["default"].GetDataroomDefaultRecipients(this.defaultRecipientVertical,this.defaultRecipientUdsProperty,function(n){(!n.Email||0==n.Email.length)&&e.GetUseCurrentUserEmailIfEmpty()&&Q["default"].EmailAddress&&(n.Email=[{Id:null,EmailAddress:Q["default"].EmailAddress}]);e.defaultRecipients=n;t()},function(){}):t()},SetAddGroupButton:function(e){e?a()("#collabGroupListBoxWidgetAddGroup").addClass("co_disabled"):a()("#collabGroupListBoxWidgetAddGroup").removeClass("co_disabled")},Clear:function(){this.collaborationData=null;this.contactBrowserKeyData={};a()(this.contentElement).find("li:not(."+this.classNoContactsMessage+"):not(.co_contacts_collector_addNew)").remove();this._checkForEmptyMessage()},RedrawContents:function(){var e,t=!1
;this.collaborationData?e=JSON.parse(this.collaborationData):this.defaultRecipients&&(e=this.defaultRecipients);if(e){a()(this.messageLI).addClass("co_hideState");var n=!0;if(e.SelectedContacts&&e.SelectedContacts.length>0){n=!1;for(r=0;r<e.SelectedContacts.length;r++){var o=e.SelectedContacts[r];o.IsEmailOnly?this._addEmail(o):o.Id&&this._addContact(o)}}if(e.SelectedGroups&&e.SelectedGroups.length>0){n=!1;for(r=0;r<e.SelectedGroups.length;r++){var i=e.SelectedGroups[r];i.GroupId&&this._addGroup(i)}}if(e.Email&&e.Email.length>0){var r;for(r=0;r<e.Email.length;r++){var s=e.Email[r];if((s.IsEmailOnly||null===s.Id)&&s.EmailAddress&&"null"!==s.EmailAddress){this._addEmail(s);n=!1}}}n&&(t=!0)}else t=!0;t?this._clearSelections():this._detachEmptyListEvent()},Remove:function(){this.RemoveEventSubscriptions()},RemoveEventSubscriptions:function(e){if(this.selectContactSubscription){y["default"].Unsubscribe(this.selectContactSubscription);this.selectContactSubscription=null}if(this.unselectContactSubscription){y["default"].Unsubscribe(this.unselectContactSubscription);this.unselectContactSubscription=null}if(this.selectGroupSubscription){y["default"].Unsubscribe(this.selectGroupSubscription);this.selectGroupSubscription=null}if(this.unselectGroupSubscription){y["default"].Unsubscribe(this.unselectGroupSubscription);this.unselectGroupSubscription=null}if(this.groupDeleteSubscription){y["default"].Unsubscribe(this.groupDeleteSubscription);this.groupDeleteSubscription=null}if(this.contactDeleteSubscription&&"editGroup"!=e){y["default"].Unsubscribe(this.contactDeleteSubscription);this.contactDeleteSubscription=null}if(this.groupEditSubscription&&"editGroup"!=e){y["default"].Unsubscribe(this.groupEditSubscription);this.groupEditSubscription=null}if(this.contactEditSubscription&&"editGroup"!=e){y["default"].Unsubscribe(this.contactEditSubscription);this.contactEditSubscription=null}if(this.toggleAutoSuggestSubscription){y["default"].Unsubscribe(this.toggleAutoSuggestSubscription);this.toggleAutoSuggestSubscription=null}if(this.onKeyDownHandler){a()(document.documentElement).unbind("keydown",this.onKeyDownHandler);this.onKeyDownHandler=null}},AddEventSubscriptions:function(){var e=this;if(this.mode===gn.EditWithAutoSuggest){this.AddEventSubscriptionsKeyDown();this.toggleAutoSuggestSubscription||(this.toggleAutoSuggestSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.CollaborationBox.ToggleAutoSuggest",function(t,n){e._toggleAutoSuggestHandler(n.Data)}));this.groupDeleteSubscription||(this.groupDeleteSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Delete",function(t,n){e._removeGroup(n.Data)}));this.contactDeleteSubscription||(this.contactDeleteSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditContact.Delete",function(t,n){e._removeContact(n.Data)}));this.groupEditSubscription||(this.groupEditSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Save",function(t,n){e._editGroup(n.Data)}));this.contactEditSubscription||(this.contactEditSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactEditBox.Internal.UpdateContact",function(t,n){e._editContact(n.Data)}))}else if(this.mode!==gn.ReadOnly){this.selectContactSubscription||(this.selectContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactListBox.Internal.SelectContact",function(t,n){e._contactClicked(n.Data)}));this.unselectContactSubscription||(this.unselectContactSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactListBox.Internal.UnselectContact",function(t,n){e._contactClicked(n.Data)}));this.selectGroupSubscription||(this.selectGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookGroupListBox.Internal.SelectGroup",function(t,n){e._groupClicked(n.Data)}));this.unselectGroupSubscription||(this.unselectGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookGroupListBox.Internal.UnselectGroup",function(t,n){e._groupClicked(n.Data)}));this.groupDeleteSubscription||(this.groupDeleteSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Delete",function(t,n){e._removeGroup(n.Data)}));this.contactDeleteSubscription||(this.contactDeleteSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditContact.Delete",function(t,n){e._removeContact(n.Data)}));this.groupEditSubscription||(this.groupEditSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBook.Internal.EditGroup.Save",function(t,n){e._editGroup(n.Data)}));this.contactEditSubscription||(this.contactEditSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookContactEditBox.Internal.UpdateContact",function(t,n){e._editContact(n.Data)}))}},AddEventSubscriptionsKeyDown:function(){if(this.mode!==gn.EditWithAutoSuggest)return;if(!this.onKeyDownHandler){var e=this;this.onKeyDownHandler=function(t){if(a()(e.autoSuggestLIElement).hasClass("co_hideState"))e._showAutoSuggestInput();else if(t.keyCode===a.a.ui.keyCode.ENTER){e._onAutoSuggestInputBlur();return!1}};a()(this.autoSuggestInput).unbind("keydown");a()(this.autoSuggestInput).bind("keydown",this.onKeyDownHandler)}},DisableDragDropContactOrGroupDropLocation:function(){a()("#"+this.addedContactsInputId).droppable("option","disabled",!0)},EnableDragDropContactOrGroupDropLocation:function(){a()("#"+this.addedContactsInputId).droppable("option","disabled",!1)},_clearSelections:function(){var e=this.noDataMessage;if(e)this.messageLI.innerHTML=e;else{e="";this.mode!==gn.Edit||this.hideMessage?this.mode===gn.NewGroup?e=this.noDataMessageNewGroupMode:this.mode===gn.EditWithAutoSuggest&&(e=this.noDataMessageAutoSuggestMode):e=this.noDataMessageEditMode;this.noDataMessage=e;this.messageLI.innerHTML=e}a()(this.messageLI).removeClass("co_hideState");if(this.mode!==gn.NewGroup&&this.mode!==gn.EditWithAutoSuggest){var t=a()("#"+this.addedContactsInputId);a()(this.contentElement).append(a()(t).find("#liAddGroupButton"))}this._attachEmptyListEvent()},_contactClicked:function(e){void 0===this.contactBrowserKeyData[e.Id]?this._addContact(e):this._removeContact(e)},_contactDragAndDropped:function(e){this._addContact(e)},_addContact:function(e){if(this.changeOwnerMode){this.selectedContact&&this._removeContact(this.selectedContact);this.selectedContact=e}if(void 0===this.contactBrowserKeyData[e.Id]){var t=e.BrowserKey||y["default"].CreateUUID();this.contactBrowserKeyData[e.Id]=t;this._setToContainsItemMode();var n=this,o=e.FirstName+(e.FirstName&&" ")+e.LastName;o=Object(u["EncodeHtml"])(o||"");var i=document.createElement("li");i.id=t;a()(i).addClass("co_contacts_addedContactsPerson");if(this.mode!==gn.ReadOnly){var r="collaborationBoxContact"+t,s=I["default"].format("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.TabText",{DisplayText:o},"Press Enter to remove "+o+", Tab to go to next control and Down Arrow to add another email.");i.innerHTML='<a id="'+r+'" title="'+s+'" href="javascript:void(0);">'+o+"</a>";this.contentElement.appendChild(i);var l=a()(i).find("#"+r)[0];a()(l).data("contactSummary",e);a()(l).bind("click",function(){n._contactClickedHandler(this)})}else{i.innerHTML=o;this.contentElement.appendChild(i);a()(i).data("contactSummary",e)}a()(this.messageLI).addClass("co_hideState");if(this.mode===gn.EditWithAutoSuggest){this.contentElement.appendChild(this.autoSuggestLIElement);this._attachElementEditEvent(i)}if(this.parentDiv){var d=a()(this.parentDiv).children(":first");d&&d.attr({scrollTop:d.attr("scrollHeight")})}if(this.mode!==gn.NewGroup&&this.mode!==gn.EditWithAutoSuggest){var c=a()("#"+this.addedContactsInputId);a()(this.contentElement).append(a()(c).find("#liAddGroupButton"))}this._changeAccessibilityLabel()}},_removeContact:function(e){var t=this.contactBrowserKeyData[e.Id],n=a()(this.contentElement).find("#"+t)[0];if(n){this.contactBrowserKeyData[e.Id]=void 0;this.contentElement.removeChild(n);this._checkForEmptyMessage();this._showAutoSuggestInput("",!1)}this._changeAccessibilityLabel()},_handleGroupEdit:function(){this.addressBook=Gn;if(!this.addressBook.GetEditWidgetExists()){
var e="Cobalt.Widget.AddressBookCollaborationBox.Internal.AddGroup",t=this.GetWidgetData(),n=new y["default"].Message(t,{},e,"1.0");y["default"].Publish(e,n)}},_groupClicked:function(e){void 0===this.contactBrowserKeyData[e.GroupId]?this._addGroup(e):this._removeGroup(e)},_groupDragAndDropped:function(e){this._addGroup(e)},_setToContainsItemMode:function(){if(a()(this.contentElement).hasClass("co_contacts_addedContactsInputEmpty")){a()(this.contentElement).removeClass("co_contacts_addedContactsInputEmpty");a()(this.contentElement).addClass("co_contacts_addedContactsInputFull")}},_addEmail:function(e){e.EmailAddress=e.EmailAddress.toLowerCase();var t=e.EmailAddress.trim();if(void 0!==this.contactBrowserKeyData[t])return!0;if(!Object(u["ValidateSingleEmail"])(t)){this._publishInvalidEmailMessage(!0);return!1}this._publishInvalidEmailMessage(!1);this._setToContainsItemMode();var n=y["default"].CreateUUID();this.contactBrowserKeyData[t]=n;var o=this,i=document.createElement("li");i.id=n;e.id=n;a()(i).addClass("co_contacts_addedContactsGroup");if(this.mode===gn.Edit||this.mode===gn.EditWithAutoSuggest){var r=I["default"].format("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.TabText",{DisplayText:t},"Press Enter to remove "+t+", Tab to go to next control and Down Arrow to add another email.");i.innerHTML='<a title="'+r+'" href="javascript:void(0);">'+t+"</a>";this.contentElement.appendChild(i);var s=a()(i).find("a");s.data("email",e);s.bind("click",function(){o._removeEmail(a()(this).html(),i)});this._attachElementEditEvent(i)}else{i.innerHTML=t;this.contentElement.appendChild(i);a()(i).data("email",e)}a()(this.messageLI).addClass("co_hideState");this.mode===gn.EditWithAutoSuggest&&this.contentElement.appendChild(this.autoSuggestLIElement);this._changeAccessibilityLabel();return!0},_attachElementEditEvent:function(e){var t=this;a()(e).off("keydown");a()(e).on("keydown",function(e){e.keyCode===a.a.ui.keyCode.ENTER||e.keyCode===a.a.ui.keyCode.TAB||e.keyCode===a.a.ui.keyCode.ESCAPE||e.shiftKey||a()("#"+t.addedContactsInputId).click()})},_removeEmail:function(e,t){e=e.toLowerCase();if(t){this.contactBrowserKeyData[e]=void 0;this.contentElement.removeChild(t);this._checkForEmptyMessage();this._showAutoSuggestInput("",!1);t.focus()}var n="Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectEmail",o=e,i=new y["default"].Message(o,{},n,"1.0");y["default"].Publish(n,i);this._changeAccessibilityLabel()},_addGroup:function(e){if(void 0===this.contactBrowserKeyData[e.GroupId]){var t=e.BrowserKey||y["default"].CreateUUID();this.contactBrowserKeyData[e.GroupId]=t;this._setToContainsItemMode();var n=this,o=document.createElement("li");o.id=t;a()(o).addClass("co_contacts_addedContactsGroup");var i=Object(u["EncodeHtml"])(e.GroupName||"");if(this.mode===gn.Edit||this.mode===gn.EditWithAutoSuggest){var r="collaborationBoxGroup"+t,s=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.Remove","Remove");o.innerHTML='<a id="'+r+'" title="'+s+" "+i+'" href="javascript:void(0);">'+i+"</a>";this.contentElement.appendChild(o);var l=a()(o).find("#"+r)[0];a()(l).data("groupSummary",e);a()(l).bind("click",function(){n._groupClickedHandler(this)});this._attachElementEditEvent(o)}else{o.innerHTML=i;this.contentElement.appendChild(o);a()(o).data("groupSummary",e)}a()(this.messageLI).addClass("co_hideState");this.mode===gn.EditWithAutoSuggest&&this.contentElement.appendChild(this.autoSuggestLIElement);if(this.mode!==gn.NewGroup&&this.mode!==gn.EditWithAutoSuggest){var d=a()("#"+this.addedContactsInputId);a()(this.contentElement).append(a()(d).find("#liAddGroupButton"))}}var c="Cobalt.Widget.AddressBookCollaborationBox.GroupAdded",f=e,h=new y["default"].Message(f,{},c,"1.0");y["default"].Publish(c,h);this._changeAccessibilityLabel()},_removeGroup:function(e){var t=this.contactBrowserKeyData[e.GroupId],n=a()(this.contentElement).find("#"+t)[0];if(n){this.contactBrowserKeyData[e.GroupId]=void 0;this.contentElement.removeChild(n);this._checkForEmptyMessage();this._showAutoSuggestInput("",!1)}if(!this._hasGroupRecipients()){var o="Cobalt.Widget.AddressBookCollaborationBox.AllGroupsRemoved",i=e,r=new y["default"].Message(i,{},o,"1.0");y["default"].Publish(o,r)}this._changeAccessibilityLabel()},_hasGroupRecipients:function(){var e=this.GetWidgetData();if(a.a.parseJSON(e).SelectedGroups.length>0)return!0;return!1},_editGroup:function(e){var t=this.contactBrowserKeyData[e.GroupId];if(a()(this.contentElement).find("#"+t)[0]){this._removeGroup(e);this._addGroup(e)}},_editContact:function(e){var t=this.contactBrowserKeyData[e.Id];if(a()(this.contentElement).find("#"+t)[0]){this._removeContact(e);this._addContact(e)}},_checkForEmptyMessage:function(){var e=a()(this.contentElement).find("li:not(.co_hideState, #liAddGroupButton)");0===e.length?this._clearSelections():e.eq(0).hasClass("co_contacts_message")?this._attachEmptyListEvent():this._detachEmptyListEvent()},_detachEmptyListEvent:function(){if(this.mode===gn.EditWithAutoSuggest){var e=a()("#"+this.addedContactsInputId);e.attr("tabindex",-1);e.off("keydown")}},_attachEmptyListEvent:function(){if(this.mode===gn.EditWithAutoSuggest){var e=a()("#"+this.addedContactsInputId);e.attr("tabindex",0);e.off("keydown");var t=this;e.on("keydown",function(e){e.keyCode===a.a.ui.keyCode.TAB||e.keyCode===a.a.ui.keyCode.ESCAPE||e.shiftKey||t._contentElementClick(e)})}},_groupClickedHandler:function(e){var t=a()(e).data("groupSummary");this._removeGroup(t);null!=this.autoSuggestInput&&this.autoSuggestInput.focus();var n="Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectGroup",o=t.GroupId,i=new y["default"].Message(o,{},n,"1.0");y["default"].Publish(n,i)},_contactClickedHandler:function(e){var t=a()(e).data("contactSummary");this._removeContact(t);null!=this.autoSuggestInput&&this.autoSuggestInput.focus();var n="Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectContact",o=t.Id,i=new y["default"].Message(o,{},n,"1.0");y["default"].Publish(n,i)},_contactDroppedInConsumptionBoxHandler:function(e){var t="Cobalt.Widget.AddressBookCollaborationBox.Internal.DragDropSelectContact",n=e.Id,o=new y["default"].Message(n,{},t,"1.0");this._contactDropCallback();y["default"].Publish(t,o)},_groupDroppedInConsumptionBoxHandler:function(e){var t="Cobalt.Widget.AddressBookCollaborationBox.Internal.DragDropSelectGroup",n=e.GroupId,o=new y["default"].Message(n,{},t,"1.0");y["default"].Publish(t,o)},_removeEmailAddressAlreadyDuplicates:function(){var e=this.GetWidgetData();if(e){var t=JSON.parse(e),n=t.Email,o=t.SelectedContacts;if(null==n||void 0==n||0==n.length)return;if(null==o||void 0==o||0==o.length)return;for(var i=0;i<n.length;i++)for(var a=0;a<o.length;a++)n[i].EmailAddress==o[a].EmailAddress&&void 0!=n[i].id&&null!=n[i].id&&this._removeEmail(n[i].EmailAddress,document.getElementById(n[i].id))}},_publishInvalidEmailMessage:function(e){var t=e?"Cobalt.Website.Collaboration.InvalidEmailsEntered":"Cobalt.Website.Collaboration.InvalidEmailsRemoved",n=new y["default"].Message({},{},t,"1.0");y["default"].Publish(t,n);this.checkForValidEmail=e},_checkForValidEmail:function(e){this.checkForValidEmail&&void 0!==e.value&&Object(u["ValidateSingleEmail"])(Object(u["Trim"])(e.value))&&this._publishInvalidEmailMessage(!1)},_contentElementClick:function(e){this.mode===gn.EditWithAutoSuggest&&a()("#invalidEmail_co_contacts_collector_addNew").length>0&&a()("#invalidEmail_co_contacts_collector_addNew").addClass("co_hideState");if(e.target.id===this.addedContactsInputId||a()(e.target).hasClass(this.classNoContactsMessage)){var t=Object(u["Trim"])(this.autoSuggestInput.value);this._showAutoSuggestInput(t,Object(u["IsNotNullOrEmpty"])(t)&&!Object(u["ValidateSingleEmail"])(t))}},_showAutoSuggestInput:function(e,t){var n=this;if(this.autoSuggestInput){a()(this.messageLI).addClass("co_hideState");a()(this.autoSuggestLIElement).removeClass("co_hideState");if(t){var o=a()("#co_delivery_recipients_addressBook")[0];if(o){if(0==a()(".invalidEmail_co_contacts_collector_addNew").length){var i=document.createElement("div");i.id="invalidEmail_co_contacts_collector_addNew";a()(o).append(i)}
if(null!=document.getElementById("invalidEmail_co_contacts_collector_addNew")){this._invalidEmailInfoBox=new M["default"](document.getElementById("invalidEmail_co_contacts_collector_addNew"),F["default"].None,W["default"].Bottom,!0,!0,!1);var r=I["default"].lookup("SC.Website.Cobalt.Widget.AddressBookCollaborationBox.ErrorMessage.Invalid","Invalid email, group or contact");this._invalidEmailInfoBox.Draw(r);var s=a()(".co_contacts_collector_addNew").offset();a()("#invalidEmail_co_contacts_collector_addNew").offset({top:s.top+30,left:s.left})}}this._publishInvalidEmailMessage(!0)}else{this._publishInvalidEmailMessage(!1);this._removeEmailAddressAlreadyDuplicates()}this.autoSuggestInput.value=e||"";a()(this.autoSuggestInput).bind("blur",function(){n._onAutoSuggestInputBlur()});(null!=document.getElementById("invalidEmail_co_contacts_collector_addNew")&&void 0!=document.getElementById("invalidEmail_co_contacts_collector_addNew")&&a()("#invalidEmail_co_contacts_collector_addNew").hasClass("co_hideState")||null==document.getElementById("invalidEmail_co_contacts_collector_addNew")||void 0==document.getElementById("invalidEmail_co_contacts_collector_addNew"))&&setTimeout(function(){n.autoSuggestInput.focus()},100)}},_onAutoSuggestInputBlur:function(){if(!this.autoSuggestWidget.IsVisible()){var e=this.autoSuggestWidget.GetValue();Object(u["IsNotNullOrEmpty"])(e)?this._autoSuggestValueSelected(e):this._hideAutoSuggestInput()}},_hideAutoSuggestInput:function(){if(this.autoSuggestInput&&this.autoSuggestWidget&&!this.autoSuggestWidget.IsVisible()){a()(this.autoSuggestInput).unbind("blur");this.autoSuggestInput.value="";a()(this.autoSuggestLIElement).addClass("co_hideState");this._checkForEmptyMessage()}},_autoSuggestValueSelected:function(e){this._hideAutoSuggestInput();var t="",n=!1;if(e){if("string"==typeof e){e={EmailAddress:e,IsEmailOnly:!0};if(!this._addEmail(e)){t=e.EmailAddress;n=!0}}else if(void 0===this.contactBrowserKeyData[e.ContactId])if(e.ContactType==bn["default"].Person||e.ContactType==bn["default"].ExternalPerson){var o=new Cn["default"];o.BrowserKey=e.BrowserKey;o.Id=e.ContactId;o.FirstName=e.ContactName1;o.LastName=e.ContactName2;o.EmailAddress=e.EmailAddress;this._addContact(o)}else{var i=new _n["default"];i.BrowserKey=e.BrowserKey;i.GroupId=e.ContactId;i.GroupName=e.ContactName1;i.NumberOfMembers=e.NumberOfMembers;this._addGroup(i)}if(!n){var a="Cobalt.Widget.AddressBookCollaborationBox.AutoSuggestValueSelected";y["default"].Publish(a,new y["default"].Message(e,{},a,"1.0"))}}this._showAutoSuggestInput(t,n)},_toggleAutoSuggestHandler:function(e){if(e){this.AddEventSubscriptionsKeyDown();return}if(this.onKeyDownHandler){a()(document.documentElement).unbind("keydown",this.onKeyDownHandler);this.onKeyDownHandler=null}},_ResolveEmails:function(e,t,n){if(!t)return;vn["default"].ResolveEmailAddresses(e,function(e){var n={SelectedContacts:e};t(JSON.stringify(n))},n)},_changeAccessibilityLabel:function(){var e=a()(this.contentElement).find("li:not(.co_hideState, #liAddGroupButton, .co_contacts_message, .co_contacts_collector_addNew)"),t=a()("#"+this.accessibilityLabelRecipients)[0];e&&t&&(0===e.length?t.innerHTML=this.recipientsAccessibilityMessage:t.innerHTML=I["default"].format("SC.Website.Collaboration.NonEmptyEmailList",{count:e.length},"Selected Contacts. ".concat(e.length," recipeints selected. Tab to go to next recipient.")))}};var qn=jn;function Kn(){this.mode=gn.EditWithAutoSuggest;this.parentDiv=null;this.defaultRecipientUdsProperty=null;this.defaultRecipientVertical=null;this.recipientsData=null;this.hideGroupButton=!1;this.hideMessage=!1;this.renderedCallback=null;this._useCurrentUserEmailIfEmpty=!1}Kn.prototype={SetParentDiv:function(e){this.parentDiv=e},SetDefaultRecipientUdsProperty:function(e){this.defaultRecipientUdsProperty=e},SetDefaultRecipientVertical:function(e){this.defaultRecipientVertical=e},SetMode:function(e){this.mode=e},SetHideGroupButton:function(e){this.hideGroupButton=e},SetRenderedCallback:function(e){this.renderedCallback=e},SetHideMessage:function(e){this.hideMessage=e},SetUseCurrentUserEmailIfEmpty:function(e){this._useCurrentUserEmailIfEmpty=e},GetUseCurrentUserEmailIfEmpty:function(){return this._useCurrentUserEmailIfEmpty},Draw:function(){this._drawContactsListbox()},_drawContactsListbox:function(){var e=this._contactsListbox=new qn;e.SetMode(this.mode);e.SetParentDiv(this.parentDiv);e.SetHideGroupButton(this.hideGroupButton);e.SetHideMessage(this.hideMessage);e.SetDefaultRecipientUdsProperty(this.defaultRecipientUdsProperty);e.SetDefaultRecipientVertical(this.defaultRecipientVertical);e.SetRenderedCallback(this.renderedCallback);e.SetUseCurrentUserEmailIfEmpty(this._useCurrentUserEmailIfEmpty);null!=this.recipientsData&&e.SetWidgetData(this.recipientsData);e.Draw()},SetWidgetData:function(e){this.recipientsData=e},_updateContactsListbox:function(e){if(this._contactsListbox&&0!=JSON.parse(e).length){this._contactsListbox.Clear();this._contactsListbox.SetWidgetData(e);this._contactsListbox.RedrawContents()}},_getContactsListBoxData:function(){var e=this._contactsListbox&&this._contactsListbox.GetWidgetData();if(e&&((e=JSON.parse(e)).SelectedContacts||e.SelectedGroups||e.SelectedEmails))return e;return[]}};var zn=new Kn,Qn={Configure:function(e){rn["default"].isKeyCite(e.alertType)&&function(e){e.BuildWhatToDeliverOption=function(){return"List"};e.BuildIncludeDocWithRILists=function(){return this.GetVal("co_delivery_chkincludeFullTextNewDocs",!1)};e.BuildIsFullTextDelivery=function(){return this.GetVal("co_delivery_chkincludeFullTextNewDocs",!1)}}(e);rn["default"].isNewsletter(e.alertType)&&function(e){e.BuildWhatToDeliverOption=function(){return"List"};e.BuildIsFullTextDelivery=function(){return!1}}(e);rn["default"].isPublicationAlert(e.alertType)&&function(e){e.BuildWhatToDeliverOption=function(){return"List"};e.BuildIsFullTextDelivery=function(){return!1}}(e);rn["default"].isDocketTrack(e.alertType)&&function(e){e.BuildAlertOptions=function(){return{acceptCharges:!0,deliveryItemsAsList:this.GetVal("co_alerts_delivery_items_as_list",this.MaximumValues.ListOfItems),deliveryItemsAsFulltext:this.GetVal("co_alerts_delivery_items_as_fulltext",this.MaximumValues.FullTextDocument)}}}(e)}};function $n(e,t,n,o,i,a,r,s,l,d,c,u,f,h,p){this.Headnotes=e;this.RightNoteMargin=t;this.WestlawLinks=n;this.TermHighlighting=o;this.CoverPage=i;this.SnippetsWithinLists=a;this.CoverPageComment=r;this.KeyCiteTreatment=s;this.OriginalImageLink=l;this.SelectedFootnotesFormat=d;this.LinkColor=c;this.LinkUnderline=u;this.FontSize=f;this.FontName=h;this.DeliveryDuplicates=p}var Jn=n("1RwRpBM3"),Yn=Qn.Configure;Qn.Configure=function(e){Yn(e);rn["default"].isCourtWire(e.alertType)&&function(e){e.BuildIsFullTextDelivery=function(){return!0};e.BuildDeliveryFormat=function(){return"InlineHtml"}}(e);(rn["default"].isBusinessInvestigator(e.alertType)||rn["default"].isPeopleMap(e.alertType))&&function(e){e.BuildLayoutOptions=function(){var e=new $n("ExpandedKeyNumbers",this.GetVal("coid_chkDdcLayoutRightNoteMarging",this.defaultValues.RightNoteMargin),this.GetVal("coid_chkDdcLayoutWestlawLinks",this.defaultValues.WestlawLinks),!1,!1,this.GetVal("coid_chkDdcLayoutSnippetsInLists",!1),this.GetVal("coid_DdcLayoutCoverPageComment",""),!1,this.GetVal("coid_chkDdcLayoutOriginalImageLink",this.defaultValues.OriginalImageLink),this.GetVal("co_delivery_footnotes","EndOfDocument"),this.GetVal("co_delivery_linkColor",this.defaultValues.LinkColor),!1,"Normal",this.GetVal("co_delivery_fontName",this.defaultValues.FontName),a()("#coid_deliveryDuplicatesSection input:radio:checked").val());this.DeliveryOptions.LayoutOptions=e}}(e);rn["default"].isCapitolWatchTrack(e.alertType)&&function(e){e.BuildWhatToDeliverOption=function(){return Jn["default"].List};e.BuildIsFullTextDelivery=function(){return!1}}(e)};var Xn=Qn;fn._compress=function(e){return String(e).replace(/Dockets/g,"~").replace(/CourtWireAlerts/g,"@")};fn._decompress=function(e){return String(e).replace(/~/g,"Dockets").replace(/@/g,"CourtWireAlerts")};var Zn=fn,eo=n("3HgpF6br"),to=n("uybOBmCo");function no(e,t,n,o){to["default"].Post({relativeUrl:e,jsonObject:t,
trmrWidgetName:"Cobalt.Widget.Alerts.Delivery",trmrWidgetAction:"GetAlertsDeliveryDialog",responseIsJson:!1,successCallback:n,failedCallback:o,timeoutMillisecs:6e4})}var oo=n("xvDIEcaO"),io=a.a.extend({},yo,oo["default"],{GetDeliveryOptions:function(){var e={emailList:[],emailSubject:"",useDefaultSubject:!0};e.emailSubject=this.GetVal("co_delivery_subject",this.defaultValues.EmailInitialSubject);""!==this._basicsTab.currentCustomSubject&&this._basicsTab.currentCustomSubject!==this._basicsTab.originalDefaultSubject?e.useDefaultSubject=!1:e.useDefaultSubject=!0;var t=this._requestContext.ContextView===mn["default"].AlertsHistoryResults||this._requestContext.ContextView===mn["default"].AlertsHistory;if(k["default"].ViewData.FeatureConfigurations["ALERTS ADDRESS BOOK"]&&t)e.emailList=this.GetSelectedContacts();else{var n=this.GetVal("co_delivery_emailAddress",this.defaultValues.EmailInitialValue);e.emailList=Object(u["SplitEmails"])(n)}return this.initiateDeliveryOptions(!0,!1,!1,!1,e)},initiateDeliveryOptions:function(e,t,n,o,i){var r=this.WhatToDeliverValue(),s=a()("#coid_whatToDeliverInitialValue").val();this._whatToDeliverModified=r!==s;this._isFullTextDelivery=this.IsFullText();t&&(this._isFullTextDelivery=!0);this._updateDualColumnDisplay();var l,d=Jn["default"].SingleDocument;this._isFullTextDelivery&&(r!==Jn["default"].DocumentAndAnnotations&&r!==Jn["default"].DraftingNotesOnly&&r!==Jn["default"].DocumentAnnotationsAndDraftingNotes&&r!==Jn["default"].DocumentAndDraftingNotes&&r!==Jn["default"].DocumentAndAllAnnotations||(d=r));l=this._requestContext.ContextView===mn["default"].AlertsHistoryResults||this._requestContext.ContextView===mn["default"].SingleDocument||this._requestContext.ContextView===mn["default"].FullTextPersistedDocument?1:this._isFullTextDelivery?null!==document.getElementById("coid_RecipientDeliverAsFullTextCount")?this.GetVal("coid_RecipientDeliverAsFullTextCount"):this.GetVal("coid_itemsDeliverableAsFullText"):null!==document.getElementById("coid_RecipientDeliverAsListCount")?this.GetVal("coid_RecipientDeliverAsListCount"):this.GetVal("coid_itemsDeliverableAsAList");var c=this.GetVal("coid_SelectedPrinterId","");this._isSingleItem=1===l||"1"===l;var u=this.GetDeliveryFormat(),f=this.GetVal("coid_chkDdcLayoutUseDualColumnsForCases",this.defaultValues.DualColumnsForCases),h=this.GetVal("coid_chkDdcLayoutUseDualColumnsForPLDocuments",this.defaultValues.DualColumnsForPLDocuments),p=this.GetVal("coid_chkDdcLayoutUseDualColumnsForNewsletters",this.defaultValues.DualColumnsForNewsletters);if(n)u=this.IsPclRequest()?"Pcl":"Pdf";else if(t){u="Rtf";f=!1;p=!1}else o&&(u="Wlx");var m=this.GetVal("co_delivery_fileContainer",this.defaultValues.DeliveryFileContainer),g="None";if(this.GetVal("coid_chkDdcLayoutIncludeHeadnotes",this.defaultValues.IncludeHeadnotes)){g=this.GetVal("coid_chkDdcLayoutFullWKNHierarchy",this.defaultValues.ShowWKNHierarchy)?"ExpandedKeyNumbers":"CollapsedKeyNumbers"}var v={itemsToDeliver:l,annotationsSelection:d,whatToDeliverOption:r,deliveryFormat:u,standalonePrinterId:c,deliveryFileContainer:m,isEmail:e,isKindle:t,headnotesToDeliver:g,isDualColumn:f,isDualColumnForPLDocuments:h,isDualColumnNewsletters:p,isOriginalDocument:this.IsOriginalDocument(),isFullTextDelivery:this._isFullTextDelivery,emailAndPrintSelected:this._emailAndPrintSelected,websiteRequestId:this.GetVal("websiteRequestId"),hasSeenContentToAppendTab:this._hasSeenContentToAppendTab},C=this.createDeliveryOptions(v,i);if(this.AppendDeliveryInfo){this.AppendDeliveryInfo.Init&&this.AppendDeliveryInfo.Init();a.a.extend(!0,C,this.AppendDeliveryInfo)}return C},createDeliveryOptions:function(e,t){var n={options:e,emailData:t,alertType:this.alertType},o=new Do(n);Xn.Configure(o);return o.Build()}}),ao=n("CCuXZRWj"),ro=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};function so(e){g["default"].AddEventHandler(e,"click",function(){(function(e){var t=document.getElementById("co_delivery_customLogo_image"),n=document.getElementById("co_delivery_customLogo_image_other"),o="";"None"!==e&&(o='<img src="'+e+'"/>');t&&(t.innerHTML=o);n&&(n.innerHTML=o)})(e.value);var t="";t=-1!=e.id.indexOf("Other")?e.id.replace("Other",""):e.id.replace(e.id.slice(-1),"Other"+e.id.slice(-1));a()("#"+e.id).attr("checked",!0);a()("#"+t).attr("checked",!0)})}var lo=n("hcrMAWpa"),co=n.n(lo);function uo(e){var t="Newsletter"===e?"newsletter":"alert";(function(e){var t=null,n={title:"Override this title",message:"Override this message",okButtonClass:"co_primaryBtn co_button",okButtonText:"Continue",cancelLinkClass:"co_overlayBox_buttonCancel",cancelLinkText:"Cancel",id:"co_delete_item_lightbox"};e&&a.a.extend(n,e);var o=function(){t&&r();(t=new ve["default"]).SetId(n.id);t.SetClass("co_overlayBox_lightbox");t.SetTitle('<div id="co_lightboxTitle">'+n.title+"<div>");t.SetCloseLinkObject({alt:"Close",onclick:function(){"function"==typeof n.cancelCallback&&n.cancelCallback();r()}});t.Draw()},i=function(){co.a.div({id:"co_alertsMessage"},co.a.p(co.a.strong({id:"co_lightboxMessage"},n.message))).appendTo(t.GetContentDomElement());var e=co.a.input({type:"submit",class:n.okButtonClass,value:n.okButtonText}),o=co.a.a({href:"javascript:void(0);",class:n.cancelLinkClass,title:n.cancelLinkText},n.cancelLinkText);co.a.ul(co.a.li(e),co.a.li(o)).appendTo(t.GetFooterDomElement());a()(e).on("click",function(){"function"==typeof n.okCallback&&n.okCallback();r()});a()(o).on("click",function(){"function"==typeof n.cancelCallback&&n.cancelCallback();r()})},r=function(){if(null!==t&&void 0!==t){t.Remove();t=null}};return{draw:function(){o();i()},remove:r}})({title:I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.OtherSettings.Logo","Add Logo on Settings Page"),message:I["default"].format("SC.Alerts.Bellows.CustomizeDelivery.OtherSettings.WarningOnAddLogoLink",{alertType:t},"Any changes to your "+t+" will be lost if you continue to the Settings page."),id:"co_delete_item_lightbox",okCallback:function(){var e=C["default"].Relative(C["default"].Parse(window.location.href)),t="/Alerts/Center?transitionType=Default&contextData=(sc.Default)&returnTo="+encodeURIComponent(e)+"#ALERTS_Content_Refresh=pageNumber%3D1%26resultsPerPage%3D20%26appliedAlertType%3DSettings%26appliedFacets%3D%257B%257D%26sortSpec%3D%257B%2522field%2522%253A%2522name%2522%252C%2522direction%2522%253A%2522ASCENDING%2522%257D%26viewPreference%3DList%26centerType%3DSettings%26state%3Dmodified";Object(wt["default"])(t)}}).draw()}function fo(){this.Draw=function(e,t,n,o){var i=this;no(C["default"].Relative(C["default"].Rest.GetDeliveryWestClipAlertLayoutAndLimitsV1(null)),{RequestContextId:t,SelectedItemsLimit:0,DeliveryOptions:e},function(e){var t=a()("#co_website_generatedLayoutAndLimitsTab");if(t.length>0){a()("#co_website_generatedLayoutAndLimitsTab :checkbox").each(function(){i.SaveCheckboxState(i._layoutAndLimitsCheckboxState,this.id,this.checked)});t.remove()}var r=document.createElement("div");r.id="co_website_generatedLayoutAndLimitsTab";r.innerHTML=e;document.getElementById("co_website_deliveryTabContent").appendChild(r);a()("#coid_chkDdcLayoutIncludeHeadnotes").bind("click",function(){i.ToggleFullHierarchyOption()});i.ToggleFullHierarchyOption();a()("#co_deliveryOptionsTab2").removeClass("co_tabInactive");a()("#co_deliveryOptionsTab2").addClass("co_done");a()("#coid_deliveryDuplicatesLabel").html("");a()("#coid_deliveryDuplicatesSection").html("");new function(e){var t={id:"featured",panelsId:"co_website_deliveryTabContent",navId:"",css:{panel:"tabs-panel",selectedpanel:"co_tabShow",navigation:"tabs-nav",selectedtab:"co_tabActive",hiddenpanel:"co_tabHide",body:"tabs-body"},data:[]};if(e){a.a.extend(t,e);e.css&&a.a.extend(t.css,e.css)}var n=a()("body").find("ul.co_tabs"),o=a()("#"+t.panelsId);n.addClass(t.css.navigation);o.addClass(t.css.body);a()("body").find(".co_tabPanel").each(function(){a()(this).addClass(t.css.panel).attr("aria-hidden",!0).attr("aria-labelledby",a()(this).attr("id").replace("Panel","")).attr("id",a()(this).attr("id"))}).keydown(function(e){var o=!0;if(e.keyCode==ao["default"].UP&&e.ctrlKey){n.find("li."+t.css.selectedtab).focus();ro(e);o=!1
}else if(e.keyCode==ao["default"].PAGE_UP&&e.ctrlKey){r(n.find("li."+t.css.selectedtab));ro(e);o=!1}else if(e.keyCode==ao["default"].PAGE_DOWN&&e.ctrlKey){s(n.find("li."+t.css.selectedtab));ro(e);o=!1}return o});o.children(".co_tabPanel:first").addClass(t.css.selectedpanel).attr("aria-hidden",!1);n.find("li").attr("tabindex","-1");function i(e){n.find("li."+t.css.selectedtab).removeClass(t.css.selectedtab).attr("tabindex","-1");e.attr("tabindex","0").addClass(t.css.selectedtab);o.find("div."+t.css.selectedpanel).attr({"aria-hidden":!0,"aria-selected":!1}).addClass(t.css.hiddenpanel).removeClass(t.css.selectedpanel);o.find('div[aria-labelledby|="'+e.attr("id")+'"]').addClass(t.css.selectedpanel).attr({"aria-hidden":!1,"aria-selected":!0})}function r(e){if(e.prev(":visible").size()>0){i(e.prev(":visible"));e.prev(":visible").focus()}else{i(e.closest("ul").find("li:visible:last"));e.closest("ul").find("li:visible:last").focus()}}function s(e){if(e.next(":visible").size()>0){i(e.next(":visible"));e.next(":visible").focus()}else{i(e.closest("ul").find("li:visible:first"));e.closest("ul").find("li:visible:first").focus()}}n.find("li").click(function(){i(a()(this));a()(this).focus();return!1}).keydown(function(e){var t=a()(this),o=!0;switch(e.keyCode){case ao["default"].LEFT:case ao["default"].UP:r(t);o=!1;break;case ao["default"].RIGHT:case ao["default"].DOWN:s(t);o=!1;break;case ao["default"].HOME:i(n.find("li:visible:first"));n.find("li:visible:first").focus();o=!1;break;case ao["default"].END:i(n.find("li:visible:last"));n.find("li:visible:last").focus();o=!1}return o});function l(e){var t=a()("#"+e[0].ID);o.find('div[aria-labelledby|="'+t.attr("id")+'"]').html(e[0].HTML)}this.update=function(){t.data.onFetchSuccess=l;t.data.Fetch()}};for(var s=document.getElementsByName("co_delivery_customLogo"),l=0;l<s.length;l++)so(s[l]);a()("ul#co_delivery_customLogo_logo_list").find("a").on("click",function(){uo(n)});o!==I["default"].lookup("SC.Alerts.Center.View.AdminOwner","Administrator")&&a()("#co_deliveryLogoDiv").hide();var d=a()("#coid_chkDdcLayoutTermHighlighting");y["default"].Subscribe("Cobalt.Delivery.UIEvent.TermHighlighting",function(e,t){d.prop("checked",t);y["default"].Publish("Cobalt.Alert.Bellows.Common.Delivery.DrawSubSummary","email")});d.change(function(){y["default"].Publish("Cobalt.Delivery.UIEvent.TermHighlighting",d.prop("checked"))})},function(){i._parentDiv.innerHTML="Unexpected error. Please try creating the alert again."})}}fo.prototype=a.a.extend({},io);var ho=fo,po=n("YkHnlQez"),mo=d.a.extend({init:function(e){if(e){this.alertType=e.alertType;this.flowState=e.flowState;this.deliveryNoteMaxLength=e.deliveryNoteMaxLength}this._provider=new jt["default"];var t=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.Delivery.DocumentOnly","Documents"),n=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.Delivery.List","List of Items"),o=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.Format.Rtf","Word Processor (RTF)"),i=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.PractitionerInsights","Practitioner Insights Inline HTML"),r=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.PracticePoint","PracticalLawConnect Inline HTML"),s=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.FullDocket","Full Docket"),l=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.FullDockets","Full Dockets");this._exceededMaximumMessages={100:I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.ExceededMaximum.100","Must enter a number 1-100"),500:I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.ExceededMaximum.500","Must enter a number 1-500"),etc:I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.ExceededMaximum","Exceeded maximum, etc")};this._displayName={DocumentOnly:t,List:n,Doc:"Microsoft Word (DOC)",Rtf:o,Pdf:"PDF",Csv:"Microsoft Excel (CSV)",Wpd:"WordPerfect",PractitionerInsightsInlineHtml:i,PracticticePointInlineHtml:r};this.currentCustomSubject="";this.currentDefaultSubject="";this.lastSubjectReset="";this.rendered=!1;var d=this;if(this.alertType===Vt["default"].AlertTypes.DocketTrack){var c=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.NewChangedEntries","New or Changed Entries");this._displayName.DocumentOnly=s;this._displayName.List=c;y["default"].Subscribe("Cobalt.Delivery.UIEvent.WhatToDeliverChanged",function(){if(!d.onlyPagesWithTermsDisplay)return;var e=d.DisplayMode();if(e===eo["default"].List){d.onlyPagesWithTermsActive=!1;a()("#co_delivery_whatToDeliver li").has("#coid_chkDdcLayoutOnlyPagesWithSearchTerms").removeClass("ddcdisplaymodefulltext ddcdisplaymodelist");a()("#co_delivery_whatToDeliver li").has("#coid_chkDdcLayoutOnlyPagesWithSearchTerms").hide()}else if(e===eo["default"].FullText){d.onlyPagesWithTermsActive=!0;a()("#co_delivery_whatToDeliver li").has("#coid_chkDdcLayoutOnlyPagesWithSearchTerms").addClass("ddcdisplaymodefulltext ddcdisplaymodelist");a()("#co_delivery_whatToDeliver li").has("#coid_chkDdcLayoutOnlyPagesWithSearchTerms").show()}})}else if(this.alertType===Vt["default"].AlertTypes.DocketAlert){this._displayName.DocumentOnly=l;y["default"].Subscribe("Cobalt.Delivery.UIEvent.DeliveryFormatChanged",function(){var e=a()("#co_delivery_format_list").val(),t=a()("input[name=whatToDeliver]:checked").val(),n=function(){a()("#coid_chkDdcDetailLevel option[value=4]").attr("selected","selected")};if("InlineHtml"===e&&t.toLowerCase()!="DocumentOnly".toLowerCase())a()("#co_delivery_whatToDeliver li#co_delivery_htmlTable").show();else{a()("#co_delivery_whatToDeliver li#co_delivery_htmlTable").hide();if(t.toLowerCase()==="HtmlTable".toLowerCase()){a()("#co_deliveryWhatToDeliverList").attr("checked","checked");y["default"].Publish("Cobalt.Delivery.UIEvent.WhatToDeliverChanged")}}a()("#coid_DocketNumber, #coid_Court, #coid_FilingDate, #coid_JudgeName, #coid_CaseType, #coid_JuryDemandInfo, #coid_PartyNames, #coid_AttorneyNames").off("click",n).on("click",n)});y["default"].Subscribe("Cobalt.Delivery.UIEvent.DetailLevelChanged",function(){var e=a()("#coid_chkDdcDetailLevel").val();a()('input[name="coid_alertFields"]').prop("checked",!1);switch(e){case"4":case"3":a()("#coid_JuryDemandInfo").prop("checked",!0);a()("#coid_PartyNames,#coid_AttorneyNames").prop("checked",!0);case"2":a()("#coid_JudgeName, #coid_CaseType").prop("checked",!0);case"1":a()("#coid_DocketNumber, #coid_Court, #coid_FilingDate").prop("checked",!0)}})}},showSponsorIdOptions:function(e,t){return e==I["default"].lookup("SC.Alerts.Center.View.AdminOwner","Administrator")||Vt["default"].AlertTypeData[t].SupportSponsorId},_getDisplayEmails:function(e){var t,n=e.length-2;return t=1==e.length?e[0]:2==e.length?e[0]+", "+e[1]:I["default"].format("SC.Alerts.Bellows.CustomizeDelivery.Summary.MoreThanTwoEmails",{email1:e[0],email2:e[1],number:n},e[0]+", "+e[1]+" ... and "+n+" more")},_getRecipients:function(e){var t,n=[],o=0;for(var i in e)if(e.hasOwnProperty(i))for(var a=0;a<e[i].length;a++)if("Email"==i){n[o]=e.Email[a].EmailAddress;o++}else if("SelectedContacts"==i){n[o]=e.SelectedContacts[a].LastName+", "+e.SelectedContacts[a].FirstName;o++}else if("SelectedGroups"==i){n[o]=e.SelectedGroups[a].GroupName;o++}if(0==o)t=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.None","None");else if(1==o)t=n[0];else if(2==o)t=n[0]+"; "+n[1];else{var r=o-2;t=I["default"].format("SC.Alerts.Bellows.CustomizeDelivery.Summary.MoreThanTwoContacts",{contact1:n[0],contact2:n[1],number:r},n[0]+"; "+n[1]+" ... and "+r+" more")}return t},_removeEmptyContactsAndGroups:function(){if(this.contacts)for(var e in this.contacts)if(this.contacts.hasOwnProperty(e)){var t=this.contacts[e].length;while(t--){if("Email"==e){var n={IsEmailOnly:!0,EmailAddress:this.contacts[e][t]};this.contacts[e][t]=n}""!==this.contacts[e][t].FirstName&&""!==this.contacts[e][t].LastName&&""!==this.contacts[e][t].GroupName||this.contacts[e].splice(t,1)}}},_getDisplayName:function(e){if(void 0===this._displayName[e])return e;return this._displayName[e]},IsRendered:function(){return this.rendered},_drawLayoutTab:function(e,t){var n=new ho,o=this.GetVal("websiteRequestId")
;n.Draw(e,o,this.alertType,t)},_successfullyRetrieveBasicsTab:function(){},Draw:function(e,t,n,o){var i=this;this.contacts=null;if(e){this.contacts=e.Contacts;delete e.Contacts}this._removeEmptyContactsAndGroups();var r=C["default"].Relative(C["default"].Rest.GetDeliveryWestClipAlertV1(null));t.ContextProviderData={alertType:o};var s={DeliveryRequestContext:t,DeliveryOptions:e};i.selectGroupSubscription||(i.selectGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.GroupAdded",function(){i._toggleGroups()}));i.selectNoGroupSubscription||(i.selectNoGroupSubscription=y["default"].Subscribe("Cobalt.Widget.AddressBookCollaborationBox.AllGroupsRemoved",function(){i._toggleNoGroups()}));no(r,s,function(t){var r=a()("#co_ownerField").text();r||(r=a()("#newsletterOwnerDropdown option:selected").text());n.innerHTML=t;i.WhatToDeliverChanged();i._drawLayoutTab(e,r);if(k["default"].ViewData.FeatureConfigurations["ALERTS ADDRESS BOOK"]){var s=document.getElementById("co_delivery_recipients_addressBook");if(s){var l=document.createElement("div");l.id="co_collaboratorWidget";s.appendChild(l);zn.SetParentDiv(l);if(!rn["default"].isNewsletter(o)){var d=Vt["default"].AlertTypeData[o].DefaultRecipientUDSProperty;zn.SetDefaultRecipientVertical("Alerts");zn.SetDefaultRecipientUdsProperty(d);zn.SetUseCurrentUserEmailIfEmpty(Vt["default"].AlertTypeData[o].UseCurrentUserEmailIfEmpty)}i.contacts&&zn.SetWidgetData(JSON.stringify(i.contacts));zn.SetRenderedCallback(function(){i.rendered=!0});zn.Draw()}else i.rendered=!0;a()("#co_delivery_open_addressBook").click(function(){var e=Vt["default"].AlertTypeData[o].ContentName||"Alert",t=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary."+e+"sContacts",e+"s Contacts"),n=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.AddSelectedTo"+e,"Add Selected to "+e);Gn.SetTitle(t);var i=Vt["default"].AlertTypeData[o].DefaultRecipientUDSProperty;Gn.SetDefaultRecipientUdsProperty(i);Gn.SetDefaultRecipientVertical("Alerts");Gn.SetActionButtonText(n);Gn.SetRemoveOnClose(!0);Gn.SetTriggeredElementId("co_delivery_open_addressBook");Gn.SetActionButtonCallback(function(e){zn._updateContactsListbox(e)});Gn.Draw(JSON.stringify(zn._getContactsListBoxData()))})}else{a()("#co_delivery_emailAddress").TextAreaExpander();var u=a()("#co_delivery_emailAddress").val(),f="";if((u=u.split(";"))&&u.length)for(var h=0;h<u.length;h++)-1==u[h].indexOf(":")&&(f=f+u[h]+";");f=f.slice(0,f.length-1);a()("#co_delivery_emailAddress").val(f);i.rendered=!0}a()("#co_delivery_format_list,#co_delivery_format_fulltext").bind("change",function(){i._fileFormatModified=!0;i.UpdateDisplayForDeliveryFormat()});y["default"].Subscribe("Cobalt.Delivery.UIEvent.OutOfPlanChanged",function(e,t){a()("#coid_chkAcceptCharges").prop("checked",t);y["default"].Publish("Cobalt.Alert.Bellows.Common.Delivery.DrawSubSummary","email")});a()("#coid_chkAcceptCharges").change(function(){y["default"].Publish("Cobalt.Delivery.UIEvent.OutOfPlanChanged",a()("#coid_chkAcceptCharges").prop("checked"))});var p=a()("#co_delivery_alerts_email_useReplyTo");p.click(function(e){var t=a()("#co_delivery_alerts_replyTo");if(a()(e.currentTarget).is(":checked")){t.val("");t.attr("disabled","disabled")}else if(c["default"].isIacOn("IAC-ALERT-ADMIN-SETTINGS"))c["default"].isIacOn("IAC-ALERT-ADMIN-SETTINGS-MIGRATED")?i._provider.retrieveReplyToAddressSettings(function(e){t.removeAttr("disabled");t.val(e["ReplyToAddress"])}):i._provider.retrieveReplyToAddressSettings(function(e){if(e.hasOwnProperty("ReplyToAddress")){t.removeAttr("disabled");t.val(e["ReplyToAddress"])}else{t.removeAttr("disabled");t.val(Zn.getReplyToAddress())}});else{t.removeAttr("disabled");t.val(Zn.getReplyToAddress())}});if(r==I["default"].lookup("SC.Alerts.Center.View.AdminOwner","Administrator")){a()("#co_delivery_unsubscribe").show();a()("#co_delivery_replyTo").show();if(p.is(":checked")){var m=a()("#co_delivery_alerts_replyTo");m.val("");m.attr("disabled","disabled")}}else{a()("#co_delivery_unsubscribe").hide();a()("#co_delivery_replyTo").hide()}var g=a()("#co_labelEmailUnsubscribeInfobox"),v=a()("#co_labelEmailReplyToInfobox");if(g.length>0){i.createInfoBox("#co_labelEmailUnsubscribeInfobox",I["default"].lookup("SC.Alerts.Delivery.Bellow.InfoBox.Unsubscribe","When selected, individual recipients will have the ability to unsubscribe from email deliveries. This does not apply to recipients who are part of a Group. To allow individual recipients to unsubscribe, remove any groups from the delivery."));i._attachShowHideOnHoverHandler(a()("#coid_alerts_emailUnsubscribeInfoBox"),g);i._attachShowHideOnFocusHandler(a()("#coid_alerts_emailUnsubscribeInfoBox"),g)}if(v.length>0){i.createInfoBox("#co_labelEmailReplyToInfobox",I["default"].lookup("SC.Alerts.Delivery.Bellow.InfoBox.ReplyTo",'Set a "reply-to" email address.  Any email replies from alert recipients will be delivered to this address.'));i._attachShowHideOnHoverHandler(a()("#coid_alerts_emailReplyToInfoBox"),v);i._attachShowHideOnFocusHandler(a()("#coid_alerts_emailReplyToInfoBox"),v)}if(i.alertType!==Vt["default"].AlertTypes.DocketTrack&&i.alertType!==Vt["default"].AlertTypes.SummaryReport){var C=a()("#co_delivery_alerts_email_useSponsor");C.click(function(e){var t=a()("#co_delivery_alerts_sponsor_id");if(a()(e.currentTarget).is(":checked")){t.val("");t.attr("disabled","disabled")}else c["default"].isIacOn("IAC-ALERT-ADMIN-SETTINGS")?c["default"].isIacOn("IAC-ALERT-ADMIN-SETTINGS-MIGRATED")?i._provider.retrieveSeamlessAuthenticationSettings(function(e){t.removeAttr("disabled");t.val(e["SponsorId"])}):i._provider.retrieveSeamlessAuthenticationSettings(function(e){if(e.hasOwnProperty("SponsorId")){t.removeAttr("disabled");t.val(e["SponsorId"])}else Zn.getSeamlessAuthenticationSettings(function(e){t.removeAttr("disabled");t.val(e["Alerts-AlertsSponsorId"])})}):Zn.getSeamlessAuthenticationSettings(function(e){t.removeAttr("disabled");t.val(e["Alerts-AlertsSponsorId"])})});if(i.showSponsorIdOptions(r,i.alertType)){a()("#co_delivery_sponsorId").show();a()("#co_delivery_alerts_sponsor_id").attr("maxlength","34");if(C.is(":checked")){var _=a()("#co_delivery_alerts_sponsor_id");_.val("");_.attr("disabled","disabled")}}else a()("#co_delivery_sponsorId").hide();var b=a()("#co_labelEmailSponsorIdInfobox");if(b.length>0){i.createInfoBox("#co_labelEmailSponsorIdInfobox",I["default"].lookup("SC.Alerts.Delivery.Bellow.InfoBox.SponsorID","Setting a Sponsor ID gives recipients the ability to seamlessly access full-text documents in your alert results."));i._attachShowHideOnHoverHandler(a()("#coid_alerts_emailSponsorIdInfoBox"),b);i._attachShowHideOnFocusHandler(a()("#coid_alerts_emailSponsorIdInfoBox"),b)}}var S=a()("#co_delivery_subject");if(e){i.currentDefaultSubject=e.RecipientOptions.EmailSubject;i.originalDefaultSubject=e.RecipientOptions.EmailSubject;i.currentCustomSubject=e.RecipientOptions.EmailSubject;S.val(i.currentDefaultSubject)}if(i.flowState===Ut.EditFlow||i.flowState===Ut.CopyFlow){if(e){a()("#coid_chkDdcDetailLevel").val(e.DetailLevel);a()("#co_delivery_fileContainer").val(e.FileContainer)}}else{var D=Zn.getEmailDeliveryDisplayDetailPreference(i.alertType);void 0!==D&&null!==D&&a()("#coid_chkDdcDetailLevel").val(D);var T=Zn.getEmailDeliveryDocketAlertFieldsPreference();void 0!==T&&null!==T&&a()("input[name=coid_alertFields]").each(function(){a()(this).prop("checked",a.a.inArray(a()(this).prop("value"),T)>=0)});var w=Zn.getDeliveryFileContainerPreference(i.alertType);void 0!==w&&null!==w&&a()("#co_delivery_fileContainer").val(w)}Object(po["default"])(i.deliveryNoteMaxLength);i._successfullyRetrieveBasicsTab()},function(){i._parentDiv.innerHTML=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.Unexpected","Unexpected error. Please try creating the alert again.")})},_toggleGroups:function(){var e=a()('label[for="co_delivery_alerts_email_allowUnsubscribe"]'),t=a()("#co_delivery_alerts_email_unsubscribe");if(t.length>0){t[0].checked=!1;t[0].disabled=!0}e.length>0&&e.addClass("co_disabled")},_toggleNoGroups:function(){
var e=a()('label[for="co_delivery_alerts_email_allowUnsubscribe"]'),t=a()("#co_delivery_alerts_email_unsubscribe");e.length>0&&e.removeClass("co_disabled");t.length>0&&(t[0].disabled=!1)},createInfoBox:function(e,t){new M["default"](a()(e)[0],F["default"].None,W["default"].Right,!0,!1,!1).Draw(t);a()(e).hide()},_attachShowHideOnFocusHandler:function(e,t){a()(e).focusin(function(){a()(t).show()});a()(e).focusout(function(){a()(t).hide()})},_attachShowHideOnHoverHandler:function(e,t){a()(e).hover(function(){a()(t).show()},function(){a()(t).hide()})},ValidateMaxValues:function(e){var t,n,o=!1,i=null,r="";if(this.DisplayMode()===eo["default"].List){i=this.MaximumValues.ListOfItems;r=this.GetVal("co_alerts_delivery_items_as_list",i.toString())}else if(this.DisplayMode()===eo["default"].FullText){i=this.MaximumValues.FullTextDocument;r=this.GetVal("co_alerts_delivery_items_as_fulltext",i.toString())}if(r.match(/^\d+$/)){if(parseInt(r,10)>i||parseInt(r,10)<1){o=!0;t=this._exceededMaximumMessages[i]||this._exceededMaximumMessages.etc;rn["default"].isKeyCite(this.alertType)?Zt(t,n=a()("#co_deliveryKeyCiteUpToErrorPlaceHolder"),W["default"].Bottom,!1,!1,e):Zt(t,n=a()("#co_deliveryAlertsUpToErrorPlaceHolder"),W["default"].Bottom,!0,!1,e)}}else{o=!0;t=I["default"].lookup("SC.Alerts.Delivery.Bellow.Warning.EnterNumber","Must enter a number");rn["default"].isKeyCite(this.alertType)?Zt(t,n=a()("#co_deliveryKeyCiteUpToErrorPlaceHolder"),W["default"].Bottom,!1,!1,e):Zt(t,n=a()("#co_deliveryAlertsUpToErrorPlaceHolder"),W["default"].Bottom,!0,!1,e)}return o},ValidateSubject:function(e){var t,n,o=!1;e.emailSubject=this.GetVal("co_delivery_subject");if(Object(u["IsNullOrEmpty"])(e.emailSubject)){o=!0;Zt(t=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.EnterSubject","A subject is required."),n=a()("#co_deliverySubjectErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_subject").parent().addClass("co_active")}else if(Xt["default"].isValidInput(e.emailSubject)){if(-1!=e.emailSubject.indexOf("://")||e.emailSubject.match(/www\./i)){o=!0;Zt(t=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.OtherSettings.NoUrlInSubject","Subject field cannot contain a URL."),n=a()("#co_deliverySubjectErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_subject").parent().addClass("co_active")}}else{o=!0;Zt(t=I["default"].lookup("SC.Alerts.Content.InvalidBrackets.SubjectField","The character combination of < and > is not allowed in the Subject Field."),n=a()("#co_deliverySubjectErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_subject").parent().addClass("co_active")}return o},ValidateDeliveryNote:function(e){var t,n,o=!1;e.emailNote=this.GetVal("co_delivery_note");if(!Xt["default"].isValidInput(e.emailNote)){o=!0;Zt(t=I["default"].lookup("SC.Alerts.Content.InvalidBrackets.EmailNote","The character combination of < and > is not allowed in the Notes Field."),n=a()("#co_deliveryNoteErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_note").parent().addClass("co_active")}return o},Validate:function(e,t,n){var o,i,r,s,l,d=!1;if(e||t){if(e){d=!!(this.ValidateSubject(n)|this.ValidateDeliveryNote(n));var c=0;if(k["default"].ViewData.FeatureConfigurations["ALERTS ADDRESS BOOK"]){this.contacts=zn._getContactsListBoxData();this.contacts.SelectedContacts&&(c+=this.contacts.SelectedContacts.length);this.contacts.SelectedGroups&&(c+=this.contacts.SelectedGroups.length);this.contacts.Email&&(c+=this.contacts.Email.length)}else c=Object(u["SplitEmails"])(this.GetVal("co_delivery_emailAddress")).length;if(c>500){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.OtherSettings.TooManyEmails","No more than 500 recipients can be specified."),i=a()("#co_deliveryEmailAddressErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_emailAddress").parent().addClass("co_active")}}if(k["default"].ViewData.FeatureConfigurations["ALERTS ADDRESS BOOK"]){this.contacts=zn._getContactsListBoxData();if(!(this.contacts.SelectedContacts&&0!==this.contacts.SelectedContacts.length||0!==(!this.contacts.SelectedGroups||this.contacts.SelectedGroups.length)||this.contacts.Email&&0!==this.contacts.Email.length)){o=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.NoRecipient","No recipients specified.");d=!0;Zt(o,i=a()("#co_deliveryEmailAddressErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_recipients_addressBook").parent().addClass("co_active")}}else{s=this.GetVal("co_delivery_emailAddress");n.emailList=Object(u["SplitEmails"])(s);if(Object(u["IsNullOrEmpty"])(s)){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.NoEmailAddress","No email address specified."),i=a()("#co_deliveryEmailAddressErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_emailAddress").parent().addClass("co_active");n.emailList=[]}for(l=0;l<n.emailList.length;l++){r=n.emailList[l];if(!Object(u["ValidateSingleEmail"])(r)){d=!0;Zt(o=I["default"].format("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.InvalidEmail",{Email:r},"Check address formatting "+r+"."),i=a()("#co_deliveryEmailAddressErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_emailAddress").parent().addClass("co_active");break}}if(t&&n.emailList.length>15){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.KindleEmailLimit","Please limit to 15 Kindle addresses."),i=a()("#co_deliveryEmailAddressErrorPlaceHolder"),W["default"].Bottom,!0,!1);a()("#co_delivery_emailAddress").parent().addClass("co_active")}}}d=d||this.ValidateMaxValues();if(a()("#co_delivery_alerts_email_useReplyTo").length&&!a()("#co_delivery_alerts_email_useReplyTo").is(":checked")){var f=a()("#co_delivery_alerts_replyTo").val();if(!f){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Delivery.Bellow.Warning.ReplyToAddress.ErrorMessage","You must enter an email address"),i=a()("#co_emailDeliveryReplyToErrorPlaceHolder"),W["default"].Bottom,!0,!1)}if(!Object(u["ValidateSingleEmail"])(f)){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Delivery.Bellow.Warning.ReplyToAddress.ValidationMessage","Please enter a valid email address"),i=a()("#co_emailDeliveryReplyToErrorPlaceHolder"),W["default"].Bottom,!0,!1)}}if(a()("#co_delivery_alerts_email_useSponsor").length&&!a()("#co_delivery_alerts_email_useSponsor").is(":checked")&&!a.a.trim(a()("#co_delivery_alerts_sponsor_id").val())){d=!0;Zt(o=I["default"].lookup("SC.Alerts.Delivery.Bellow.Warning.SponsorId.ErrorMessage","Sponsor Id cannot be empty. Please Enter a valid Sponsor Id."),i=a()("#co_emailDeliverySponsorIdErrorPlaceHolder"),W["default"].Bottom,!0,!1)}if(d){a()("#co_deliveryOptionsTabPanel2").removeClass("co_tabShow");a()("#co_deliveryOptionsTab2").removeClass("co_tabActive");a()("#co_deliveryOptionsTabPanel1").addClass("co_tabShow");a()("#co_deliveryOptionsTab1").addClass("co_tabActive");if(!a()("div#co_deliveryAlertsUpToErrorPlaceHolder.co_infoBox").hasClass("co_hideState")){a()("div#co_deliveryAlertsUpToErrorPlaceHolder.co_infoBox.bottom").css({position:"relative"});a()("#co_wizard .co_formTextSelect div#co_deliveryAlertsUpToErrorPlaceHolder.co_infoBox").css({margin:"0 0 20px",top:"18px"})}}return d}});mo.prototype=a.a.extend({},io,mo.prototype);var go=mo,vo=a.a.extend(go.extend({init:function(e){this._super(e);this._displayName.HtmlEmail="Html Email";var t=this;this.alertType===Vt["default"].AlertTypes.BusinessLawCenterAlert&&y["default"].Subscribe("Cobalt.Delivery.UIEvent.WhatToDeliverChanged",function(){if(t.DisplayMode()===eo["default"].FullText)if(a()("#co_delivery_businesslawcenter_doctext").text().length>0)a()("#co_delivery_businesslawcenter_doctext").show();else{a()("#co_delivery_whatToDeliver li#co_delivery_documents").append("<em id='co_delivery_businesslawcenter_doctext'>Many full-text Filing & Disclosure, Annual Report to Shareholder and/or Sample Agreement documents are large documents that may exceed your system's email capacity.</em>")}else a()("#co_delivery_businesslawcenter_doctext").hide()})
;this.alertType===Vt["default"].AlertTypes.CapitolWatchReport&&y["default"].Subscribe("Cobalt.Delivery.UIEvent.DeliveryFormatChanged",function(){var e=a()("#co_delivery_whatToDeliverContainer");if("Csv"==a()("#co_delivery_format_list").val()){e.hide();a()("#co_deliveryWhatToDeliverShortForm").click()}else e.show()});this.alertType===Vt["default"].AlertTypes.DealTrack&&y["default"].Subscribe("Cobalt.Delivery.UIEvent.DeliveryFormatChanged",function(){a()("#co_alerts_keyciteContainer1").hide();var e=a()("label[for='co_delivery_chkincludeFullTextNewDocs']").find("input").clone();a()("label[for='co_delivery_chkincludeFullTextNewDocs']").text(I["default"].lookup("SC.Alerts.DealTrack.Delivery.FullText","Include full text of new document")).prepend(e);a()("label[for='coid_chkAcceptCharges']").text(I["default"].lookup("SC.Alerts.DealTrack.Delivery.OutOfPlan","Include out-of-plan document"));var t=a()("#co_delivery_chkincludeFullTextNewDocs"),n=function(){if(!0===t.prop("checked")){a()("#co_alerts_keyciteContainer2").show();a()(".ddcdisplaymodelist").hide();a()(".ddcdisplaymodefulltext").show();a()("#co_delivery_fileContainer").val("SingleMergedFile")}else{a()("#co_alerts_keyciteContainer2").hide();a()(".ddcdisplaymodefulltext").hide();a()(".ddcdisplaymodelist").show()}};if(t){n();t.bind("change",n)}});y["default"].Subscribe("Cobalt.Alert.Delivery.Configuration.Basics.UpdateCurrentEmailSubject",a.a.proxy(function(e,t){this.currentCustomSubject=t},this))},_drawLayoutTab:function(e,t){var n=this;(function(){if(rn["default"].isCapitolWatchReport(n.alertType)){a()("#co_deliveryOptionsTab2").remove();return!1}return!0})()&&this._super(e,t)},updateFormatTabsForAlerts:function(e){if(this.alertType===Vt["default"].AlertTypes.WestClip&&c["default"].isIacOn("IAC-FULLTEXT-INLINE-DELIVERY-WESTCLIP")){var t=this.DisplayMode(),n=a()("#co_delivery_fileContainer"),o=a()(n).parent();if(t===eo["default"].FullText)if("InlineHtml"===e){a()(n).val("SingleMergedFile");a()(o).hide()}else a()(o).show()}}}),go),Co=a.a.extend({},oo["default"],{Initialize:function(){this._requestContext=null;this._parentDiv=null;this._displayModeClass;this._isMixedModeOriginalUserDoc=!1;this._hasSeenContentToAppendTab=!1;this._emailAndPrintSelected=!1;this._whatToDeliverModified=!1;this._isFullTextDelivery=!1;this._DeliveryFormat=null;this.SubscribeToHubEvents();this.defaultValues={EmailInitialValue:"",EmailInitialSubject:"",UsedefaultSubject:"true",DeliveryFormat:"Pdf",DeliveryFileContainer:"MultipleFileZip",KeyCiteTreatment:"false",OriginalImageLink:"false",IncludeHeadnotes:"false",ShowWKNHierarchy:"false",RightNoteMargin:"false",WestlawLinks:"false",TermHighlighting:"false",CoverPage:"false",OnlyPagesWithSearchTerms:"false",OnlyCaseAnalysisDocuments:"false",DualColumnsForCases:"false",DualColumnsForPLDocuments:"false",DualColumnsForNewsletters:"false",SynopsisAndHeadnotesOnly:"false",SynopsisOnly:"false",StatutoryTextOnly:"false",LinkColor:"Blue",LinkUnderline:"true",FontSize:"Normal",FontName:"Times New Roman",IncludeDocWithRILists:"false",IncludeDocWithRIFullText:"false",ShouldFolder:"false",PartialDocument:"false"}},setDefaultValues:function(e){this.defaultValues=e},getDefaultValues:function(){return this.defaultValues},SetDeliveryFormat:function(e){this._DeliveryFormat=e;a()("#co_delivery_format_list,#co_delivery_format_fulltext").val(e)},GetDeliveryFormat:function(){return this.IsFullText()?this.GetVal("co_delivery_format_fulltext",this.defaultValues.DeliveryFormat):this.GetVal("co_delivery_format_list",this.defaultValues.DeliveryFormat)},ToggleFullHierarchyOption:function(){var e=a()("#coid_chkDdcLayoutIncludeHeadnotes"),t=a()("#coid_showHierarchy");e.is(":checked")?t.show():t.hide()},SetRequestContext:function(e){if(!e)throw new f["NonUserError"](h["default"].Website,"A valid request context was not passed to Cobalt.Delivery.DeliveryOptionsDialog");this._requestContext=e},GetRequestContext:function(){return this._requestContext},GetSelectedContacts:function(){var e=zn._getContactsListBoxData(),t=[];if(e.SelectedContacts&&e.SelectedContacts.length>0)for(var n=0;n<e.SelectedContacts.length;n++)t.push("c:"+e.SelectedContacts[n].Id);if(e.SelectedGroups&&e.SelectedGroups.length>0)for(n=0;n<e.SelectedGroups.length;n++)t.push("g:"+e.SelectedGroups[n].GroupId);if(e.Email&&e.Email.length>0)for(n=0;n<e.Email.length;n++)t.push(e.Email[n].EmailAddress);return t},TextboxKeyPress:function(e){if(null===e.keyCode||13!==e.keyCode){this.ClearErrors();return}},UpdateDisplayForDeliveryFormat:function(){var e=this.GetDeliveryFormat(),t=a()("#co_deliveryOptionsTab2"),n=a()("#co_delivery_whatToDeliverContainer"),o=a()("#co_deliveryOptionsTab3");if("PractitionerInsightsInlineHtml"===e||"HtmlEmail"===e){t.addClass("co_tabHide");t.hide();o.addClass("co_tabHide")}else if("Csv"==e){t.addClass("co_tabHide");t.show();o.addClass("co_tabHide")}else{t.removeClass("co_tabHide");t.show();n.removeClass("co_tabHide");o.removeClass("co_tabHide")}this._updateDualColumnDisplay();this.SetDeliveryFormat(e)},_updateDualColumnDisplay:function(){var e=a()("#co_delivery_format_list").val(),t=a()("#coid_chkDdcLayoutUseDualColumnsForNewsletters")[0];if(void 0!==t)if("InlineHtml"===e){a()("#co_dualColumnForNewslettersSection").hide();t.checked=!1}else a()("#co_dualColumnForNewslettersSection").show()},DisplayCorrectDeliveryFormatDropdown:function(){var e=this.DisplayMode();if(e===eo["default"].List){a()(".ddcdisplaymodefulltext",this._parentDiv).hide();this._displayModeClass=".ddcdisplaymodelist";a()(this._displayModeClass,this._parentDiv).show()}else if(e===eo["default"].FullText){a()(".ddcdisplaymodelist",this._parentDiv).hide();this._displayModeClass=".ddcdisplaymodefulltext";a()(this._displayModeClass,this._parentDiv).show()}},GetVal:function(e,t){if(this._useDefaultValue(e))return t;return g["default"].GetInputValueOrDefault(e,t)},_useDefaultValue:function(e){var t=a()("#"+e).parents().filter(".ddcdisplaymodefulltext,.ddcdisplaymodelist:first"),n=!1;if(t.length>0){var o=!t.hasClass("ddcdisplaymodelist"),i=!t.hasClass("ddcdisplaymodefulltext");n=o&&!this.IsFullText()||i&&this.IsFullText()}return n},IsFullText:function(e){var t=e,n=Jn["default"];t||(t=this.WhatToDeliverValue());switch(t){case n.SingleDocument:case n.OriginalDocument:case n.DocumentAndAnnotations:return!0;case n.List:case n.TocOutline:default:return!1}},IsOriginalDocument:function(){return this.GetVal("co_deliveryWhatToDeliverOriginalDocument",!1)||this._isMixedModeOriginalUserDoc},MaximumValues:{ListOfItems:500,FullTextDocument:100},SubscribeToHubEvents:function(){y["default"].Subscribe("Cobalt.Delivery.UIEvent.*",this.HandleHubEvent,this)},HandleHubEvent:function(e,t){var n=e.lastIndexOf(".");switch(e.substr(n+1)){case"TabChanged":this.ShowTab(t.Tab);break;case"WhatToDeliverChanged":this.WhatToDeliverChanged()}},WhatToDeliverChanged:function(){this._isFullTextDelivery=2==this.DisplayMode();this.DisplayCorrectDeliveryFormatDropdown();var e=this.GetDeliveryFormat();"PractitionerInsightsInlineHtml"!==e&&"HtmlEmail"!==e||a()("#co_deliveryOptionsTab2").hide()},DisplayMode:function(){var e=this.WhatToDeliverValue();if(e===Jn["default"].OriginalDocument)return eo["default"].OriginalDocument;return this.IsFullText(e)?eo["default"].FullText:eo["default"].List},WhatToDeliverValue:function(){var e=a()("#co_delivery_whatToDeliver input:radio:checked");if(1!==e.length){var t=a()("#co_delivery_chkincludeFullTextNewDocs");return 1!==t.length?a()("#coid_whatToDeliverInitialValue").val():!0===t.prop("checked")?Jn["default"].SingleDocument:Jn["default"].List}return e.val()},ShowTab:function(){}}),_o=Co.UpdateDisplayForDeliveryFormat,bo=Co.DisplayCorrectDeliveryFormatDropdown,yo=a.a.extend({},Co,{UpdateDisplayForDeliveryFormat:function(){_o.apply(this,arguments);this.DisplayCorrectDeliveryFormatDropdown()},DisplayCorrectDeliveryFormatDropdown:function(){bo.apply(this,arguments);var e=this.DisplayMode();if(this.alertType===Vt["default"].AlertTypes.WestClip&&e===eo["default"].FullText){this._basicsTab||(this._basicsTab=new vo({alertType:this.alertType}));this._basicsTab.updateFormatTabsForAlerts.call(this,a()("#co_delivery_format_fulltext").val())}}});function So(e){
var t=e.options,n=e.emailData;this.alertType=e.alertType?e.alertType:Vt["default"].AlertTypes.Westclip;this.Initialize();e.defaultOptions&&this.setDefaultValues(e.defaultOptions);this.defaultValues=this.getDefaultValues();var o=this;this.BuildDeliveryOptions=function(){this.DeliveryOptions=new function(e,t,n,o,i,a,r,s,l,d,c,u,f,h,p){this.Version=e;this.WebsiteRequestId=t;this.EmailAndPrint=n;this.DetailLevel=o;this.AlertFields=i;this.ListAsFullText=a;this.ItemsToDeliver=r;this.AnnotationsSelection=s;this.WhatToDeliverOption=l;this.Format=d;this.StandalonePrinterId=c;this.FileContainer=u;this.IsOriginalUserDocument=f;this.AlertsAutoAcceptOutOfPlan=h.acceptCharges;this.AlertsDeliveryItemsAsList=h.deliveryItemsAsList;this.AlertsDeliveryItemsAsFullText=h.deliveryItemsAsFulltext;this.IncludePublicAnnotations=p}(8,t.websiteRequestId,t.emailAndPrintSelected,this.GetVal("coid_chkDdcDetailLevel","2"),o.BuildAlertFields(),o.BuildIsFullTextDelivery(),t.itemsToDeliver,t.annotationsSelection,o.BuildWhatToDeliverOption(),o.BuildDeliveryFormat(),t.standalonePrinterId,t.deliveryFileContainer,t.isOriginalDocument,o.BuildAlertOptions())};this.BuildAlertFields=function(){var e=a()("input:checked[name=coid_alertFields]"),t=[];a.a.each(e,function(e,n){t.push(n.value)});return t};this.BuildWhatToDeliverOption=function(){return t.whatToDeliverOption};this.BuildIsFullTextDelivery=function(){return t.isFullTextDelivery};this.BuildDeliveryFormat=function(){return t.deliveryFormat};this.BuildAlertOptions=function(){return{acceptCharges:this.GetVal("coid_chkAcceptCharges",!1),deliveryItemsAsList:this.GetVal("co_alerts_delivery_items_as_list",this.MaximumValues.ListOfItems),deliveryItemsAsFulltext:this.GetVal("co_alerts_delivery_items_as_fulltext",this.MaximumValues.FullTextDocument)}};this.BuildRecipientOptions=function(){var e=I["default"].lookup("SC.Alerts.Basics.Description.HintText","optional notes"),o=new function(e,t,n,o,i,a,r,s){this.EmailAddresses=e;this.EmailSubject=t;this.UseDefaultSubject=n;this.Comment=o;this.MatterNumber=i;this.Category=a;this.ResearchEvent=r;this.ResearchTitle=s}(t.isEmail||t.isKindle?n.emailList:[],t.isEmail?n.emailSubject:"",this.GetVal("co_delivery_subject_useDefault","false"),this.GetVal("co_delivery_note","")==e?"":this.GetVal("co_delivery_note",""),this.GetVal("co_matterNumberTextbox",""),this.GetVal("co_delivery_category",""),"",this.GetVal("co_delivery_title",""));this.DeliveryOptions.RecipientOptions=o;this.DeliveryOptions.HasSeenContentToAppendTab=t.hasSeenContentToAppendTab};this.BuildIncludeDocWithRILists=function(){return this.GetVal("coid_chkDdcLayoutIncludeCorrespondingDocOption",this.defaultValues.IncludeDocWithRILists)};this.BuildAdditionalContentOptions=function(){var e=new function(e,t,n,o,i,a,r,s,l,d,c,u,f,h,p,m,g,v,C,_,b,y,S,D,T){this.IncludeDocWithRILists=e;this.CitingReferences=t;this.ExcludeCourtDocsFromCitingReferences=n;this.AppellateHistory=o;this.AppellateHistoryDiagram=i;this.Filings=a;this.NegativeTreatments=r;this.StatuteHistoryNegativeTreatments=s;this.Topics=l;this.NotesOfDecisions=d;this.BillDrafts=c;this.LegislativeHistoryNotes=u;this.ReportsAndRelatedMaterials=f;this.Versions=h;this.RelatedOpinions=p;this.History=m;this.RegulatoryHistory=g;this.ContextAnalysis=v;this.StatutesAffected=C;this.BillActivity=_;this.BillTracking=b;this.TableOfAuthorities=y;this.References=S;this.Exhibits=D;this.IncludeFiling=T}(o.BuildIncludeDocWithRILists(),this.GetVal("coid_chkDdcContentAppCitingRefs",!1),this.GetVal("coid_chkDdcContentAppExcludePleadingsBriefsOther",!1),this.GetVal("coid_chkDdcContentAppellateHistory",!1),this.GetVal("coid_chkDdcContentAppellateHistoryDiagram",!1),this.GetVal("coid_chkDdcContentFillings",!1),this.GetVal("coid_chkDdcContentAppAllNNegTreatments",!1),this.GetVal("coid_chkDdcContentAppAllNStatuteHistoryNegativeTreatments",!1),this.GetVal("coid_chkDdcContentAppUpToNCasesUpToNRelevantTopics",!1),this.GetVal("coid_chkDdcContentAppAllNNotesOfDecision",!1),this.GetVal("coid_chkDdcContentAppNBillDrafts",!1),this.GetVal("coid_chkDdcContentAppNHistoryNotes",!1),this.GetVal("coid_chkDdcContentAppFirstNReportsAndMaterials",!1),this.GetVal("coid_chkDdcContentAppAllNVersions",!1),this.GetVal("coid_chkDdcContentAppAllNRelatedOpinions",!1),this.GetVal("coid_chkDdcContentAppAllNHistory",!1),this.GetVal("coid_chkDdcContentAppRegulatoryHistory",!1),this.GetVal("coid_chkDdcContextAnalysis",!1),this.GetVal("coid_chkDdcContentStatutesAffected",!1),this.GetVal("coid_chkDdcContentBillActivity",!1),this.GetVal("coid_chkDdcContentBillTracking",!1),this.GetVal("coid_chkDdcContentTableOfAuthorities",!1),this.GetVal("coid_chkDdcReferences",!1));this.DeliveryOptions.AdditionalContentOptions=e};this.BuildContentLimitOptions=function(){var e=new function(e,t,n,o,i,a,r,s,l){this.OnlyPagesWithSearchTerms=e;this.OnlyCaseAnalysisDocuments=l;this.StarPages=t;this.DualColumnsForCases=n;this.DualColumnsForNewsletters=o;this.SynopsisAndHeadnotesOnly=i;this.StatutoryTextOnly=a;this.PartialDocument=r;this.DualColumnsForPLDocuments=s}(this.GetVal("coid_chkDdcLayoutOnlyPagesWithSearchTerms",this.defaultValues.OnlyPagesWithSearchTerms),"",t.isDualColumn,t.isDualColumnNewsletters,this.GetVal("coid_chkDdcLayoutSynopsisAndHeadnotesOnly",this.defaultValues.SynopsisAndHeadnotesOnly),this.GetVal("coid_chkDdcLayoutStatutoryTextOnly",!1),!this.GetVal("coid_chkDdcLayoutPartialDocument",this.defaultValues.PartialDocument),t.isDualColumnForPLDocuments,this.GetVal("coid_chkOnlyCaseAnalysisDocuments",!1));this.DeliveryOptions.ContentLimitOptions=e};this.BuildLayoutOptions=function(){var e=new $n(t.headnotesToDeliver,this.GetVal("coid_chkDdcLayoutRightNoteMarging",this.defaultValues.RightNoteMargin),this.GetVal("coid_chkDdcLayoutWestlawLinks",this.defaultValues.WestlawLinks),this.GetVal("coid_chkDdcLayoutTermHighlighting",this.defaultValues.TermHighlighting),this.GetVal("coid_chkDdcLayoutCoverPage",this.defaultValues.CoverPage),this.GetVal("coid_chkDdcLayoutSnippetsInLists",!1),this.GetVal("coid_DdcLayoutCoverPageComment",""),this.GetVal("coid_chkDdcLayoutKeyCiteTreatment",this.defaultValues.KeyCiteTreatment),this.GetVal("coid_chkDdcLayoutOriginalImageLink",this.defaultValues.OriginalImageLink),this.GetVal("co_delivery_footnotes","EndOfDocument"),this.GetVal("co_delivery_linkColor",this.defaultValues.LinkColor),this.GetVal("co_delivery_linkUnderline",this.defaultValues.LinkUnderline),this.GetVal("co_delivery_fontSize",this.defaultValues.FontSize),this.GetVal("co_delivery_fontName",this.defaultValues.FontName),a()("#coid_deliveryDuplicatesSection input:radio:checked").val());this.DeliveryOptions.LayoutOptions=e};this.Build=function(){this.BuildDeliveryOptions();this.BuildRecipientOptions();this.BuildAdditionalContentOptions();this.BuildContentLimitOptions();this.BuildLayoutOptions();return this.DeliveryOptions}}So.prototype=a.a.extend({},yo);var Do=So;function To(e){this._alertType=e.alertType;this._flowState=e.flowState;this._parentDiv=null;this._collaboratorsWidget=new Kn;this._availableTypes=Vt["default"].AlertTypeData[this._alertType].AvailableDeliveryTypes;this._availableTypes=Gt.a.intersection(["Email","RSS","HTML"],this._availableTypes);this._deliveryOptionsPreference=fn.getDeliveryOptionsSelectedPreference(this._alertType)||"";this._state=e.state&&e.state.delivery||{};this._provider=new jt["default"];this._isAdmin=Jt["default"].isAdmin();this._hasInvalidEmail=!1;this._localizedMessages={fileFormat:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.FileFormat","File format"),method:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.Method","Method"),myContacts:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.MyContacts","My contacts"),emailAddress:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.EmailAddress","Email address"),emailSearchResults:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.EmailSearchResults","Email - Search results"),emailAllDocuments:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.EmailAllDocuments","Email - All documents")};this._formatDisplayName={Doc:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.MicrosoftWord","Microsoft Word"),
Rtf:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.WordProcessor","Word Processor (RTF)"),Pdf:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.PDF","PDF"),Csv:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.MicrosoftExcel","Microsoft Excel (CSV)"),InlineHtml:I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.InlineHTML","Inline HTML")};this._ids={myContacts:"co_quickAlert_myContacts",deliveryRecipients:"co_deliveryRecipients",addressBook:"co_delivery_recipients_addressBook",addressBookErrorPlaceHolder:"co_quickAlert_addressBookErrorPlaceHolder",deliveryType:"co_quickAlert_deliveryType",fileFormat:"co_quickAlert_fileFormat",fileFormatContainer:"co_quickAlert_fileFormatContainer"};this._settings={ids:this._ids,localizedMessages:this._localizedMessages};this._contentHtml=Gt.a.template('<li class="co_formTextSelect" id="<%-ids.deliveryRecipients%>"><a id="<%-ids.myContacts%>" class="co_floatRight" href="javascript:void(0);"><%-localizedMessages.myContacts%></a><label for="<%-ids.addressBook%>"><%-localizedMessages.emailAddress%></label><div id="<%-ids.addressBook%>"></div><div id="<%-ids.addressBookErrorPlaceHolder%>"></div></li><li class="co_formTextSelect"><label for="<%-ids.deliveryType%>"><%-localizedMessages.method%></label><select id="<%-ids.deliveryType%>"></select></li><li class="co_formTextSelect" id="<%-ids.fileFormatContainer%>"><label for="<%-ids.fileFormat%>"><%-localizedMessages.fileFormat%></label><select id="<%-ids.fileFormat%>"></select></li>')}To.prototype={setParentDiv:function(e){this._parentDiv=a()(e)},_buildHtml:function(){return this._contentHtml(this._settings)},draw:function(){var e=this,t=a.a.Deferred();this._parentDiv.append(this._buildHtml());this._renderContent(t);y["default"].Subscribe("Cobalt.Website.Collaboration.InvalidEmailsEntered",function(){e._hasInvalidEmail=!0});y["default"].Subscribe("Cobalt.Website.Collaboration.InvalidEmailsRemoved",function(){e._hasInvalidEmail=!1});return t.promise()},_isEmail:function(e){return"Email"===e||this._isDocumentOnly(e)||this._isList(e)},_isDocumentOnly:function(e){return"EmailDocumentOnly"===e},_isList:function(e){return"EmailList"===e},_renderDeliveryFormats:function(){var e=a()("#"+this._ids.deliveryType).val();if(a.a.isEmptyObject(this._optionsDialogData)||!this._isEmail(e))return;var t=this,n=a()("#"+this._ids.fileFormat),o=this._flowState===Ut.EditFlow?this._state.emailDelivery.Format:this._getFormatFromPreferences(n),i=[];this._isList(e)?i=this._optionsDialogData.FormatsSupportedForLists||[]:this._isDocumentOnly(e)&&(i=this._optionsDialogData.FormatsSupportedForFullText||[]);n.empty();i.forEach(function(e){a()("<option/>").val(e).text(t._formatDisplayName[e]||e).appendTo(n)});n.val(o)},_getFormatFromPreferences:function(e){var t=Vt["default"].AlertTypeData[this._alertType].AlertsDeliveryFileFormat,n=this._optionsDialogData&&this._optionsDialogData.DeliveryPreferences||{};return e.val()||n[t]},_renderDeliveryOptions:function(e){var t=this,n=this._provider.retrieveReplyToAddressSettings.bind(this._provider),o=this._provider.retrieveSeamlessAuthenticationSettings.bind(this._provider);a.a.when(this._getOptionsDialogData(),this._getDeliverySetting(n,"_replyTo"),this._getDeliverySetting(o,"_seamlessAuthentication")).done(function(){t._renderDeliveryTypes();e.resolve()}).fail(function(t){e.reject(t)})},_getDeliverySetting:function(e,t){var n=this;if(this._isAdmin){var o=a.a.Deferred();e(function(e){if(e.error)o.reject(e.error);else{n[t]=e;o.resolve()}});return o.promise()}return a.a.when()},_getOptionsDialogData:function(){var e=a.a.Deferred(),t=this,n=new hn["default"];n.Medium=pn["default"].Email;n.ContextView=mn["default"].AlertsHistoryResults;n.ContextProviderData={alertType:this._alertType};this._provider.getOptionsDialogData(n,function(n){n.error&&e.reject(n.error);t._optionsDialogData=n;e.resolve()});return e.promise()},_renderContacts:function(){if(!this._collaboratorsWidget.parentDiv){if(this._flowState===Ut.EditFlow)this._collaboratorsWidget.SetWidgetData(this._getContactsFromState());else{var e=Vt["default"].AlertTypeData[this._alertType].DefaultRecipientUDSProperty;this._collaboratorsWidget.SetRenderedCallback(this._applyDefaultEmail.bind(this));this._collaboratorsWidget.SetDefaultRecipientUdsProperty(e);this._collaboratorsWidget.SetDefaultRecipientVertical("Alerts")}this._collaboratorsWidget.SetParentDiv(a()("#"+this._ids.addressBook).get(0));this._collaboratorsWidget.Draw()}},_getContactsFromState:function(){var e=Object.assign({},this._state.contacts);e.Email=e.Email.map(function(e){return{IsEmailOnly:!0,EmailAddress:e}});return JSON.stringify(e)},_applyDefaultEmail:function(){var e=this._collaboratorsWidget._getContactsListBoxData()||{},t=this._getDefaultEmail();if(t&&e.Email&&0===e.Email.length){var n={Email:[{IsEmailOnly:!0,EmailAddress:t}]};this._collaboratorsWidget._updateContactsListbox(JSON.stringify(n))}},_getDefaultEmail:function(){return Q["default"].EmailAddress},_renderContent:function(e){this._renderDeliveryOptions(e);this._attachEvents()},_attachEvents:function(){a()("#"+this._ids.deliveryType).on("change",this._changeDeliveryType.bind(this));a()("#"+this._ids.myContacts).on("click",this._myContactsHandler.bind(this))},_populateOptions:function(e){var t=this;this._availableTypes.forEach(function(n){if(t._isEmail(n)){a()("<option/>").val(n+"List").text(t._localizedMessages.emailSearchResults).appendTo(e);a()("<option/>").val(n+"DocumentOnly").text(t._localizedMessages.emailAllDocuments).appendTo(e)}else a()("<option/>").val(n).text(n).appendTo(e)})},_renderDeliveryTypes:function(){var e="#"+this._ids.deliveryType;this._populateOptions(e);var t=Gt.a.intersection(this._deliveryOptionsPreference.split(","),this._availableTypes);this._defaultDeliveryType=t.length>0?t[0]:this._availableTypes[0];if(this._isEmail(this._defaultDeliveryType)){var n=(this._optionsDialogData&&this._optionsDialogData.DeliveryPreferences||{})[Vt["default"].AlertTypeData[this._alertType].AlertsWhatToDeliver]||"List";this._defaultDeliveryType=this._defaultDeliveryType+n}a()(e).val(this._defaultDeliveryType);this._changeDeliveryType()},_myContactsHandler:function(){Gn.SetTitle(I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.AlertsContacts","Alerts Contacts"));Gn.SetActionButtonText(I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.AddSelectedtoAlert","Add Selected to Alert"));Gn.SetRemoveOnClose(!0);Gn.SetActionButtonCallback(this._collaboratorsWidget._updateContactsListbox.bind(this._collaboratorsWidget));Gn.Draw(JSON.stringify(this._collaboratorsWidget._getContactsListBoxData()))},_changeDeliveryType:function(e){var t=e?a()(e.target).val():this._defaultDeliveryType,n=a()("#"+this._ids.fileFormatContainer),o=this._isEmail(t),i=a()("#"+this._ids.deliveryRecipients);n.toggleClass("co_hideState",!o);i.toggleClass("co_hideState",!o);if(o){this._renderContacts();this._renderDeliveryFormats()}y["default"].Publish("Cobalt.QuickAlert.DeliveryMethod.Changed",o)},_getContactsList:function(){var e=[];if(this._collaboratorsWidget){var t=this._collaboratorsWidget._getContactsListBoxData()||{};t.SelectedContacts&&t.SelectedContacts.length>0&&(e=e.concat(t.SelectedContacts.map(function(e){return"c:"+e.Id})));t.SelectedGroups&&t.SelectedGroups.length>0&&(e=e.concat(t.SelectedGroups.map(function(e){return"g:"+e.GroupId})));t.Email&&t.Email.length>0&&(e=e.concat(t.Email.map(function(e){return e.EmailAddress})))}return e},validate:function(){var e=a.a.Deferred(),t=this._getContactsList().length,n=null,o=this.getDeliveryType();if(this._isEmail(o)){if(this._hasInvalidEmail)return e.reject();0===t?n=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.Summary.ErrorMessage.NoRecipient","No recipients specified."):t>500&&(n=I["default"].lookup("SC.Alerts.Bellows.CustomizeDelivery.OtherSettings.TooManyEmails","No more than 500 recipients can be specified."));if(n){Zt(n,a()("#"+this._ids.addressBookErrorPlaceHolder),W["default"].Bottom,!0,!1);return e.reject()}}return a.a.when()},getDeliveryType:function(){return a()("#"+this._ids.deliveryType).val()},getPreferencesToSave:function(){
var e={},t=a()("#"+this._ids.deliveryType).val(),n=this._isEmail(t)?"Email":t,o=this._deliveryOptionsPreference.split(",").filter(function(e){return e!==n});o.unshift(n);e.setDeliveryOptionsSelectedPreference=o.join(",");e.setEmailRecipientPreference=this._getContactsList();if(this._isEmail(t)){var i=a()("#"+this._ids.fileFormat).val();e.setWhatToDeliverPreference=this._isDocumentOnly(t)?"DocumentOnly":"List";e.setDeliveryFileFormatPreference=i}return e},_renderEmailDelivery:function(e){var t=a()("#"+this._ids.fileFormat).val(),n=a()("#"+this._ids.deliveryType).val(),o=Vt["default"].AlertTypeData[this._alertType].EmailSubjectDisplayName+": "+e.basics.name,i=this._getContactsList(),r=this._isDocumentOnly(n),s={options:{itemsToDeliver:1,annotationsSelection:"DocumentOnly",whatToDeliverOption:r?"DocumentOnly":"List",deliveryFormat:this._getDeliveryFileFortmat(t),standalonePrinterId:"",deliveryFileContainer:"SingleMergedFile",isEmail:!0,isKindle:!1,headnotesToDeliver:"ExpandedKeyNumbers",isDualColumn:!1,isDualColumnNewsletters:!1,isOriginalDocument:!1,isFullTextDelivery:r,emailAndPrintSelected:!1,websiteRequestId:this._optionsDialogData.WebsiteRequestId,hasSeenContentToAppendTab:!1},emailData:{emailList:i,emailSubject:o,useDefaultSubject:!0},alertType:this.alertType},l=new Do(s);Xn.Configure(l);var d=l.Build();this._seamlessAuthentication&&this._seamlessAuthentication.EmailDelivery&&this._applySeamlessAuthentication(d);this._replyTo&&(d.replyTo=this._replyTo.ReplyToAddress);if(this._flowState===Ut.EditFlow){a.a.extend(d.LayoutOptions,this._state.emailDelivery.LayoutOptions);a.a.extend(d.RecipientOptions,Gt.a.pick(this._state.emailDelivery.RecipientOptions,["Comment","EmailSubject","UseDefaultSubject","Category","MatterNumber","ResearchEvent","ResearchTitle"]));this._isAdmin&&a.a.extend(d,Gt.a.pick(this._state.emailDelivery,["replyTo","sponsorId","unsubscribe"]))}return{format:t,listAsFullText:!0,recipientOptions:{emailSubject:o,body:"",emailAddresses:i},stringifiedData:JSON.stringify({deliveryInfoJson:d,alertsOutOfPlanHistory:{disabled:(new Date).toString()}})}},_getDeliveryFileFortmat:function(e){return e||"Pdf"},_renderOtherDelivery:function(){var e={deliveryInfo:JSON.stringify({detailLevel:"2",noOfItems:"500",termHighlighting:!0})};this._seamlessAuthentication&&this._seamlessAuthentication.OtherDelivery&&this._applySeamlessAuthentication(e);return e},_applySeamlessAuthentication:function(e){e.sponsorId=this._seamlessAuthentication.SponsorId},renderPayload:function(e){var t=a()("#"+this._ids.deliveryType).val(),n=this,o=this._availableTypes.reduce(function(e,o){e[o]=n._isEmail(o)&&n._isEmail(t)||o===t;return e},{}),i={},r={};o.Email?i=this._renderEmailDelivery(e):r=this._renderOtherDelivery();e.delivery={enabledDeliveries:JSON.stringify(o),emailDelivery:i,otherDelivery:r};return a.a.when()}};var wo=To;function Io(e){wo.call(this,e);this._availableTypes=Vt["default"].AlertTypeData[Vt["default"].AlertTypes.PLDocument].AvailableDeliveryTypes;this._localizedMessages.emailAllDocumentsDocAlert=I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.Delivery.EmailAddressDocAlert","Email");this._contentHtml=Gt.a.template('<li class="co_formTextSelect" id="<%-ids.deliveryRecipients%>">\n\t            <label for="<%-ids.addressBook%>"><%-localizedMessages.emailAddress%></label>\n\t            <a id="<%-ids.myContacts%>" class="co_floatRight" href="javascript:void(0);"><%-localizedMessages.myContacts%></a>\n\t            <div id="<%-ids.addressBook%>"></div> \n\t            <div id="<%-ids.addressBookErrorPlaceHolder%>"></div> \n\t        </li>')}Io.prototype={_populateOptions:function(e){a()(e).text(this._localizedMessages.emailAllDocumentsDocAlert)},getPreferencesToSave:function(){return this._flowState===Ut.CreateFlow?wo.prototype.getPreferencesToSave.call(this):{}},renderPayload:function(e){var t={Email:!0},n=this._renderEmailDelivery(e);n["format"]="InlineHtml";e.delivery={enabledDeliveries:JSON.stringify(t),emailDelivery:n,otherDelivery:{}};return a.a.when()},_getDeliveryFileFortmat:function(){return"InlineHtml"},getDeliveryType:function(){return"Email"}};Io.prototype=a.a.extend({},wo.prototype,Io.prototype);var Eo=Io,xo=n("rh0Jeja1");xo["default"]["defaultTimezone"]="Eastern Standard Time";var No=xo["default"],ko=n("wd/RKGTj"),Ao=n.n(ko);function Ro(e){this._alertType=e.alertType;this._flowState=e.flowState;this._parentDiv=null;this._state=e.state&&e.state.schedule||{};this._provider=new jt["default"];this._defaultTimezone=No.defaultTimezone;this._defaultAmExecutionHour=9}Ro.prototype={setParentDiv:function(e){this._parentDiv=a()(e)},draw:function(){},validate:function(){return!0},_getWeekOfMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1).getDay();return Math.floor((t+e.getDate()-1)/7)-1},_getExecutionTime:function(e){var t=Array.apply(null,Array(12)).map(function(){return!1});e>=0&&e<12&&(t[e]=!0);return t},_getState:function(e){var t=this._flowState===Ut.CreateFlow?{amExecutionTime:this._getExecutionTime(this._defaultAmExecutionHour),pmExecutionTime:this._getExecutionTime(),timeZone:this._defaultTimezone,weekOfMonth:["FIRST","SECOND","THIRD","FOURTH","LAST"][this._getWeekOfMonth(e)],weekday:e.getDay()+1}:a.a.extend({},this._state);return a.a.extend(t,{noResultsAlert:!1,frequencySelect:this._getDefaultFrequency()})},_getDefaultFrequency:function(){return"daily"},renderPayload:function(e){var t=a.a.Deferred(),n=I["default"].lookup("SC.Config.Date.Alerts.JsonDateTimeWithTimeZone","MM/DD/YYYY HH:mmZ"),o=Ao()().format(n),i={toTimeZone:this._defaultTimezone,dates:{currentDate:o}},r=this;this._provider.convertTimeZone(i,function(n){if(n.error){t.reject(n.error);return}var o=new Date(n.currentDate);e.schedule=r._getState(o);t.resolve()});return t.promise()}};var Po=Ro;function Bo(e){Po.call(this,e);this._defaultAmExecutionHour=2}Bo.prototype={_getDefaultFrequency:function(){return"continuous"}};Bo.prototype=Object.assign({},Po.prototype,Bo.prototype);var Lo=Bo,Oo=["statusChange"],Mo=n("4D5HjWqR");function Wo(){re["default"].call(this)}Wo.prototype=new re["default"];Wo.prototype.constructor=Wo;Wo.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v4/headnotes/"+e.getDocumentGuid(),o=new se["default"],i=e.getDocumentCollection();ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&o.addParameter("collection",i);var a=o.buildParametersString();ne["default"].isNotNullOrUndefined(a)&&ne["default"].trim(a).length>0&&(n+="?"+a);var r=new E["default"](h["default"].RelatedInfo,n);r.SetTimeout(9e4);r.Headers.Accept="text/html";r.Get(t)};var Fo=Wo;function Ho(){re["default"].call(this)}Ho.prototype=new re["default"];Ho.prototype.constructor=Ho;Ho.prototype.submitWebRequest=function(e,t){var n="/RelatedInfo/v4/count/"+e.getDocumentGuid()+"/"+e.getCategory(),o=new se["default"];o.addParameter("execType","sync");ne["default"].isNotNullOrUndefined(e.getOriginationContext())&&o.addParameter("originationContext",e.getOriginationContext());ne["default"].isNotNullOrUndefined(C["default"].PageContextData)&&o.addParameter("contextData",C["default"].PageContextData);ne["default"].isNotNullOrUndefined(e.getRank())&&o.addParameter("rank",e.getRank());ne["default"].isNotNullOrUndefined(e.getDocSource())&&o.addParameter("docSource",e.getDocSource());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&o.addParameter("collection",e.getDocumentCollection());n+="?"+o.buildParametersString();var i=new E["default"](h["default"].RelatedInfo,n);i.Headers.Accept="application/json";i.SetTimeout(9e4);i.Get(t)};function Go(){re["default"].call(this)}Go.prototype=new re["default"];Go.prototype.constructor=Go;Go.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v3/keycite/subCategories/"+e.getDocumentGuid()+"/"+e.getCategory()+"/",o=new se["default"];ne["default"].isNotNullOrUndefined(e.getContextData())&&o.addParameter("contextData",e.getContextData());ne["default"].isNotNullOrUndefined(e.getDocSource())&&o.addParameter("docSource",e.getDocSource());ne["default"].isNotNullOrUndefined(e.getRank())&&o.addParameter("rank",e.getRank())
;ne["default"].isNotNullOrUndefined(e.getOriginationContext())&&o.addParameter("originationContext",e.getOriginationContext());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&o.addParameter("collection",e.getDocumentCollection());var i=o.buildParametersString();ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&(n+="?"+i);var a=new E["default"](h["default"].RelatedInfo,n);a.Headers.Accept="text/html";a.SetTimeout(9e4);a.Get(t)};function Uo(){re["default"].call(this)}Uo.prototype=new re["default"];Uo.prototype.constructor=Uo;Uo.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v3/keycite/facet/"+e.getDocumentGuid()+"/"+e.getCategory()+"/",o="";ne["default"].isNotNullOrUndefined(e.getAppliedFacets())&&ne["default"].trim(e.getAppliedFacets()).length>0&&(o=o+"facet="+e.getAppliedFacets());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&ne["default"].trim(e.getDocumentCollection()).length>0&&(o=ne["default"].trim(o).length>0?o+"&documentCollection="+e.getDocumentCollection():"documentCollection="+e.getDocumentCollection());ne["default"].isNotNullOrUndefined(e.getNovusMetadata())&&(o=ne["default"].trim(o).length>0?o+"&novusMetadata="+JSON.stringify(e.getNovusMetadata()):"novusMetadata="+JSON.stringify(e.getNovusMetadata()));var i=new E["default"](h["default"].RelatedInfo,n);i.SetTimeout(9e4);i.Headers.Accept="text/html";i.Post(o,t)};function Vo(){re["default"].call(this)}Vo.prototype=new re["default"];Vo.prototype.constructor=Vo;Vo.prototype.submitWebRequest=function(e,t){var n="/RelatedInfo/v1/corporatezone/"+e.getCategory(),o=new x["default"](n);o.addParameter("docGuid",e.getDocumentGuid());o.addParameter("filterGuid",e.getFacetGuid());o.addParameter("docSource",e.getDocSource());o.addParameter("rank",e.getRank());o.addParameter("sortType",e.getSortType());o.addParameter("sortOrder",e.getSortOrder());o.addParameterEmptyValue("clientId",e.getClientId());C["default"].PageContextData&&o.addParameter("contextData",C["default"].PageContextData);var i=ne["default"].getParameterFromUrl("selectedNavMode");o.addParameter("selectedNavMode",i);var a=o.buildUrl(),r=new E["default"](h["default"].RelatedInfo,a);r.SetTimeout(9e4);r.Headers.Accept="application/json";r.Get(t)};var jo=Vo,qo=n("yLLbzwLP");function Ko(){re["default"].call(this);this.isReleased=Q["default"].GetFeatureExposure()===qo["default"].Released}Ko.prototype=new re["default"];Ko.prototype.constructor=Ko;Ko.prototype.submitWebRequest=function(e,t){var n;n="RelatedInfo/v6/keycite/content/"+e.getDocumentGuid()+"/"+e.getCategory()+"/";var o=new x["default"](n);o.addParameter("pageNumber",e.getPageNumber());o.addParameter("pageSize",e.getPageSize());var i=e.getTitleText();ne["default"].isNotNullOrUndefined(i)&&(i=i.substring(0,50));o.addParameter("title",i);o.addParameter("cite",e.getCite());o.addParameter("sortType",e.getSortType());o.addParameter("sortOrder",e.getSortOrder());o.addParameter("facetGuid",e.getFacetGuid());o.addParameter("formFamilyGuid",e.getFormFamilyGuid());o.addParameter("detailLevel",e.getDetailLevel());o.addParameter("warningFlag",e.getWarningFlag());o.addParameter("planIcons",e.getPlanIcons());o.addParameter("contextData",e.getContextData());o.addParameter("docSource",e.getDocSource());o.addParameter("rank",e.getRank());o.addParameter("subFacetGuid",e.getSubFacetGuid());o.addParameter("searchQuery",e.getSearchQuery());ne["default"].isNotNullOrUndefined(e.getExcludeNodBodyTopNav())&&""!=e.getExcludeNodBodyTopNav()&&o.addParameter("excludeNodBody",e.getExcludeNodBodyTopNav());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&""!=e.getDocumentCollection()&&o.addParameter("collection",e.getDocumentCollection());ne["default"].isNotNullOrUndefined(e.getBlockEvent())&&""!=e.getBlockEvent()&&o.addParameter("evt",e.getBlockEvent());o.addParameterEmptyValue("originalContext",e.getOriginalContext());o.addParameterEmptyValue("clientId",e.getClientId());o.addParameterEmptyValue("matterId",e.getMatterId());o.addParameterEmptyValue("matterSeparator",e.getClientMatterSeparator());o.addParameter("processRIHistoryAsync",!0);var a=ne["default"].getParameterFromUrl("selectedNavMode");o.addParameter("selectedNavMode",a);var r=o.buildUrl(),s=new E["default"](h["default"].RelatedInfo,r);s.SetTimeout(9e4);s.Headers.Accept="text/html";s.Get(t)};var zo=Ko,Qo=n("f156cz7L");function $o(){re["default"].call(this)}$o.prototype=new re["default"];$o.prototype.constructor=$o;$o.prototype.submitWebRequest=function(e,t){var n=new E["default"](h["default"].RelatedInfo,"/RelatedInfo/v3/sessionInfo");n.Headers.Accept="application/json";n.SetTimeout(9e4);n.Get(t)};var Jo=$o,Yo=n("csW7qF9b");function Xo(){re["default"].call(this)}Xo.prototype=new re["default"];Xo.prototype.constructor=Xo;Xo.prototype.submitWebRequest=function(e,t){var n,o=(new Yo["default"]).createSelectedTopicsInPlanPrefsParameter(),i=function(){var t;if(!ne["default"].isNotNullOrUndefined(e.getDocumentGuid()))throw new f["CobaltError"](h["default"].RelatedInfo,"docGuid or folderId parameter required");t+="&docGuid="+e.getDocumentGuid();null!=e.getJurisdiction()&&(t+="&topicJuris="+e.getJurisdiction());null!=e.getDocSource()&&(t+="&docSource="+e.getDocSource());t+="&transitionType=RelatedTopics";t+="&contextData="+C["default"].PageContextData;null!=e.getRank()&&(t+="&rank="+e.getRank());if(null!=o){var n=Q["default"].Preference.Get("SAP","WARNING FLAG"),i=Q["default"].Preference.Get("SAP","PLAN ICONS"),a=Q["default"].Preference.Get("SAP","SKIP OUT OF PLAN");t+="&warningFlag="+n;t+="&planIcons="+i;t+="&skipOutOfPlan="+a;t+="&inPlanPreferences="+encodeURIComponent(o)}t+="&topicCount="+e.getTopicCount();return t+="&isSelectedTopic=true"};if(ne["default"].docLevelRecommendationFeatureEnabled()){n="/RelatedInfo/v1/riTopics/docList?oc=alltopicstopnav";n+=i()}else{n="/RelatedInfo/v1/riTopics/topicList?oc=alltopicstopnav";n+=i();if(e.isLight())n+="&load=light&docCount=0";else{n+="&load=full";null!=e.getDocCount()&&(n+="&docCount="+e.getDocCount())}null!=e.getWarningFlag()&&(n+="&warningFlag="+e.getWarningFlag());null!=e.getPlanIcons()&&(n+="&planIcons="+e.getPlanIcons());null!=e.getGlobalJurisdiction()&&(n+="&globalJurisdiction="+e.getGlobalJurisdiction());null!=e.getDocumentCollection()&&(n+="&documentCollection="+e.getDocumentCollection())}var a=new E["default"](h["default"].RelatedInfo,n);a.Headers.Accept="application/json";a.SetTimeout(9e4);a.Get(t)};var Zo=new Xo;function ei(){re["default"].call(this)}ei.prototype=new re["default"];ei.prototype.constructor=ei;ei.prototype.submitWebRequest=function(e,t){var n=new se["default"],o=e.getFacetGuid();ne["default"].isNotNullOrUndefined(o)&&n.addParameter("facetGuid",o);var i=e.getAppliedFacet();if(ne["default"].isNotNullOrUndefined(i)){n.addParameter("appliedFacetJson",JSON.stringify(i));var a=n.buildParametersString(),r=new E["default"](h["default"].RelatedInfo,"RelatedInfo/v3/keycite/appliedfacet/add/");r.Headers.Accept="applicaion/json";r.SetTimeout(9e4);r.Post(a,t)}};function ti(){re["default"].call(this)}ti.prototype=new re["default"];ti.prototype.constructor=ti;ti.prototype.submitWebRequest=function(e,t){var n=new se["default"],o=e.facetGuid;ne["default"].isNotNullOrUndefined(o)&&n.addParameter("facetGuid",o);var i=e.appliedFacets;if(ne["default"].isNotNullOrUndefined(i)){n.addParameter("appliedFacetsJson",JSON.stringify(i));var a=n.buildParametersString(),r=new E["default"](h["default"].RelatedInfo,"RelatedInfo/v3/keycite/appliedfacets/add/");r.Headers.Accept="applicaion/json";r.SetTimeout(9e4);r.Post(a,t)}};function ni(){re["default"].call(this)}ni.prototype=new re["default"];ni.prototype.constructor=ni;ni.prototype.submitWebRequest=function(e,t){var n=new se["default"],o=e.getFacetGuid();ne["default"].isNotNullOrUndefined(o)&&n.addParameter("facetGuid",o);var i=e.getAppliedFacet();ne["default"].isNotNullOrUndefined(i)&&n.addParameter("appliedFacetJson",JSON.stringify(i));var a=n.buildParametersString(),r=new E["default"](h["default"].RelatedInfo,"RelatedInfo/v3/keycite/appliedfacet/remove/");r.Headers.Accept="applicaion/json";r.SetTimeout(9e4);r.Post(a,t)};function oi(){re["default"].call(this)}
oi.prototype=new re["default"];oi.prototype.constructor=oi;oi.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v3/keycite/availablefacets/"+e.getDocumentGuid()+"/"+e.getCategory()+"/",o=new x["default"](n);o.addParameter("facetGuid",e.getFacetGuid());o.addParameter("collection",e.getDocumentCollection());var i=o.buildUrl(),a=new E["default"](h["default"].RelatedInfo,i);a.Headers.Accept="application/json";a.SetTimeout(9e4);a.Get(t)};var ii=oi;function ai(){ai.singletonInstance=this;this.imgElement=null;re["default"].call(this)}ai.prototype=new re["default"];ai.prototype.constructor=ai;ai.prototype.submitWebRequest=function(e,t){if("SVG"===e.getFormat()){var n="RelatedInfo/v4/chart/"+e.getType()+"/"+e.getFormat()+"?"+e.getAllFormatedParams();(o=new E["default"](h["default"].RelatedInfo,n)).SetTimeout(9e4);o.Get(t)}else if("PNG"===e.getFormat()){n="/RelatedInformation/chart/"+e.getType()+"/chart.png?"+e.getAllFormatedParams();n=h["default"].GetUrl(h["default"].Website,n);this.imgElement=a()('<img id="coid_relatedInfo_imageHolder" src="'+n+'" alt="" />');a()(this.imgElement).load(function(){var e=ai.singletonInstance,n={StatusCode:200};n.ImgElement=e.imgElement;t(n)})}else if("ImageMap"===e.getFormat()){var o;n="RelatedInfo/v4/chart/"+e.getType()+"/"+e.getFormat()+"?"+e.getAllFormatedParams();(o=new E["default"](h["default"].RelatedInfo,n)).SetTimeout(9e4);o.Get(t)}};ai.prototype.requestData=function(e,t){if(ne["default"].isNotNullOrUndefined(e)&&ne["default"].isNotNullOrUndefined(t)){var n=this.parametersCache.get(e);if(ne["default"].isNotNullOrUndefined(n))this.invokeCallback(t,n);else{this.callbackHolder.addCallback(e,t);if(1==this.callbackHolder.getCallbackCount(e)){var o=this;this.submitWebRequest(e,function(t){o.parametersCache.add(e,t);var n=o.callbackHolder.getCallbackArray(e);if(ne["default"].isNotNullOrUndefined(n)){for(var i=0;i<n.length;i++)(0,n[i])(t);o.callbackHolder.clearCallbacks(e)}})}}}};var ri=ai,si=n("vSOx2O0z");function li(){re["default"].call(this)}li.prototype=new re["default"];li.prototype.constructor=li;li.prototype.submitWebRequest=function(e,t){var n=new E["default"](h["default"].RelatedInfo,"RelatedInfo/v1/alerts/resolvepublications");c["default"].EnableIpad&&(n.ExcludeFromActiveWebRequestCount=!0);n.Headers.Accept="application/json";n.Headers["Content-Type"]="application/json";n.SetTimeout(9e4);n.Post(e.publicationNames,t)};function di(){re["default"].call(this)}di.prototype=new re["default"];di.prototype.constructor=di;di.prototype.submitWebRequest=function(e,t){var n="/RelatedInfo/v4/tools/"+e.getDocumentGuid()+"/",o=new x["default"](n);o.addParameter("collection",e.getDocumentCollection());var i=new E["default"](h["default"].RelatedInfo,o.buildUrl());i.Headers.Accept="application/json";i.SetTimeout(9e4);i.Get(t)};var ci=di;function ui(){re["default"].call(this);this.sessionExists=!0}ui.prototype=new re["default"];ui.prototype.constructor=ui;ui.prototype.setSessionExists=function(e){this.sessionExists=e};ui.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v4/bigforms/"+e.documentGuid,o=new se["default"],i=e.contextData;ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&o.addParameter("contextData",i);var a=e.docSource;ne["default"].isNotNullOrUndefined(a)&&ne["default"].trim(a).length>0&&o.addParameter("docSource",a);var r=e.rank;ne["default"].isNotNullOrUndefined(r)&&ne["default"].trim(r).length>0&&o.addParameter("rank",r);var s=e.documentCollection;ne["default"].isNotNullOrUndefined(s)&&ne["default"].trim(s).length>0&&o.addParameter("collection",s);var l=o.buildParametersString();ne["default"].isNotNullOrUndefined(l)&&ne["default"].trim(l).length>0&&(n+="?"+l);var d=new E["default"](h["default"].RelatedInfo,n);d.SetTimeout(9e4);d.Headers.Accept="application/json";d.Get(t)};var fi=new ui;function hi(){re["default"].call(this)}hi.prototype=new re["default"];hi.prototype.constructor=hi;hi.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v6/keycite/nod/navigation/"+e.documentGuid,o=new x["default"](n);o.addParameter("contextData",e.getContextData());o.addParameter("collection",e.getDocumentCollection());o.addParameter("searchQuery",e.getSearchQuery());o.addParameter("docSource",e.getDocSource());o.addParameter("rank",e.getRank());o.addParameter("sortType",e.getSortType());var i=o.buildUrl(),a=new E["default"](h["default"].RelatedInfo,i);c["default"].EnableIpad&&(a.ExcludeFromActiveWebRequestCount=!0);a.SetTimeout(9e4);a.Headers["Content-Type"]="application/json";a.Headers.Accept="application/json";a.Get(t)};var pi=new hi;function mi(){re["default"].call(this)}mi.prototype=new re["default"];mi.prototype.constructor=mi;mi.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v6/keycite/nod/preview/"+e.documentGuid,o=new x["default"](n);o.addParameter("contextData",e.getContextData());o.addParameter("collection",e.getDocumentCollection());o.addParameter("sortOrder",e.getSortOrder());o.addParameter("sortType",e.getSortType());o.addParameter("searchQuery",e.getSearchQuery());var i=o.buildUrl(),a=new E["default"](h["default"].RelatedInfo,i);c["default"].EnableIpad&&(a.ExcludeFromActiveWebRequestCount=!0);a.SetTimeout(9e4);a.Headers["Content-Type"]="application/json";a.Headers.Accept="application/json";a.Get(t)};var gi=mi;function vi(){re["default"].call(this)}vi.prototype=new re["default"];vi.prototype.constructor=vi;vi.prototype.submitWebRequest=function(e,t){e.getCategory();var n=null;n="RelatedInfo/v4/keycite/content/deliveryItemData/allResults/"+e.getDocumentGuid()+"/"+e.getCategory()+"/";var o=new x["default"](n);o.addParameter("sortType",e.getSortType());o.addParameter("sortOrder",e.getSortOrder());o.addParameter("facetGuid",e.getFacetGuid());o.addParameter("formFamilyGuid",e.getFormFamilyGuid());o.addParameter("contextData",e.getContextData());o.addParameter("docSource",e.getDocSource());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&""!=e.getDocumentCollection()&&o.addParameter("collection",e.getDocumentCollection());var i=o.buildUrl(),a=new E["default"](h["default"].RelatedInfo,i);a.SetTimeout(9e4);a.Get(t)};var Ci=n("FjCF9LDG");function _i(){re["default"].call(this)}_i.prototype=new re["default"];_i.prototype.constructor=_i;_i.prototype.submitWebRequest=function(e,t){var n="/RelatedInfo/v4/countWithoutKeyword/"+e.getDocumentGuid()+"/"+e.getCategory()+"/"+e.getFacetGuid(),o=new se["default"];o.addParameter("execType","sync");ne["default"].isNotNullOrUndefined(C["default"].PageContextData)&&o.addParameter("contextData",C["default"].PageContextData);ne["default"].isNotNullOrUndefined(e.getRank())&&o.addParameter("rank",e.getRank());ne["default"].isNotNullOrUndefined(e.getDocSource())&&o.addParameter("docSource",e.getDocSource());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&o.addParameter("collection",e.getDocumentCollection());n+="?"+o.buildParametersString();var i=new E["default"](h["default"].RelatedInfo,n);i.Headers.Accept="application/json";i.SetTimeout(9e4);i.Get(t)};function bi(){re["default"].call(this)}bi.prototype=new re["default"];bi.prototype.constructor=bi;bi.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v5/dropdown/"+e.getDocumentGuid()+"/"+e.getCategory(),o=new se["default"];ne["default"].isNotNullOrUndefined(e.getContextData())&&o.addParameter("contextData",e.getContextData());ne["default"].isNotNullOrUndefined(e.getDocSource())&&o.addParameter("docSource",e.getDocSource());ne["default"].isNotNullOrUndefined(e.getRank())&&o.addParameter("rank",e.getRank());ne["default"].isNotNullOrUndefined(e.getOriginationContext())&&o.addParameter("originationContext",e.getOriginationContext());ne["default"].isNotNullOrUndefined(e.getDocumentCollection())&&o.addParameter("collection",e.getDocumentCollection());ne["default"].isNotNullOrUndefined(e.getEntityId())&&o.addParameter("entityId",e.getEntityId());ne["default"].isNotNullOrUndefined(e.getEntityType())&&o.addParameter("entityType",e.getEntityType());var i=o.buildParametersString();ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&(n+="?"+i);var a=new E["default"](h["default"].RelatedInfo,n);a.Headers.Accept="application/json"
;a.SetTimeout(9e4);a.Get(t)};var yi=new bi;function Si(){re["default"].call(this)}Si.prototype=new re["default"];Si.prototype.constructor=Si;Si.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/alerts/documentMetadata?guid="+e.getDocumentGuid(),o=new E["default"](h["default"].RelatedInfo,n);o.SetTimeout(9e4);o.Get(t)};function Di(){re["default"].call(this)}Di.prototype=new re["default"];Di.prototype.constructor=Di;Di.prototype.submitWebRequest=function(e,t){var n=this.getUrl(e),o=new E["default"](h["default"].RelatedInfo,n);o.SetTimeout(9e4);o.Get(t)};Di.prototype.getUrl=function(e){var t=e.getCite(),n=e.getNonUniqueDocumentGuid(),o=e.getSubContentTypeToFilter(),i=e.getJurisdictionsToFilter();return C["default"].Relative({Path:"RelatedInfo/v1/alerts/citations/"+encodeURIComponent(t.replace(/\//,"%2F").replace(/\\/,"%5C"))+"/documents",QueryString:{nonUniqueDocumentGuid:n,filteredSubContentType:o,jurisdictionsToFilter:i}})};function Ti(){re["default"].call(this)}Ti.prototype=new re["default"];Ti.prototype.constructor=Ti;Ti.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/KMHistoryEvent",o=new se["default"],i=e.getDocumentGuid(),a=e.getOriginalContext(),r=e.getClientId();ne["default"].isNotNullOrUndefined(i)&&ne["default"].trim(i).length>0&&o.addParameter("documentGuid",i);a&&o.addParameter("originalContext",a);r&&o.addParameter("clientId",r);var s=o.buildParametersString();ne["default"].isNotNullOrUndefined(s)&&ne["default"].trim(s).length>0&&(n+="?"+s);var l=new E["default"](h["default"].RelatedInfo,n);l.SetTimeout(9e4);l.Headers.Accept="application/json";l.Get(t)};var wi=new Ti;function Ii(){re["default"].call(this)}Ii.prototype=new re["default"];Ii.prototype.constructor=Ii;Ii.prototype.submitWebRequest=function(e,t){var n=new x["default"]("RelatedInfo/v1/alerts/facetInfo");n.addParameter("guid",e.getDocumentGuid());n.addParameter("headnotes",e.getHeadnotes());n.addParameter("officialHeadnotes",e.getOfficialHeadnotes());var o=n.buildUrl(),i=new E["default"](h["default"].RelatedInfo,o);i.SetTimeout(9e4);i.Get(t)};function Ei(){re["default"].call(this)}Ei.prototype=new re["default"];Ei.prototype.constructor=Ei;Ei.prototype.submitWebRequest=function(e,t){var n="Alert/v1/resultHistory/KeyCite/"+e.resultGuid;e.alertGuid&&(n+="?alertGuid="+encodeURIComponent(e.alertGuid));var o=new E["default"](h["default"].Alert,n);c["default"].EnableIpad&&(o.ExcludeFromActiveWebRequestCount=!0);o.SetTimeout(9e4);o.Headers["Content-Type"]="application/json";o.Headers.Accept="application/json";o.Get(t)};var xi=new Ei;function Ni(){re["default"].call(this)}Ni.prototype=new re["default"];Ni.prototype.constructor=Ni;Ni.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/corporatezone/filter",o=e.getFacetGuid();ne["default"].isNotNullOrUndefined(o)&&(n=n+"/"+o);var i=e.getFacet();if(ne["default"].isNotNullOrUndefined(i)){var a=new E["default"](h["default"].RelatedInfo,n);a.SetTimeout(9e4);a.Headers.Accept="application/json";a.Headers["Content-Type"]="application/json";a.Post(JSON.stringify(i),t)}};function ki(){re["default"].call(this)}ki.prototype=new re["default"];ki.prototype.constructor=ki;ki.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/corporatezone/filterList",o=e.getFacetGuid();ne["default"].isNotNullOrUndefined(o)&&(n=n+"/"+o);var i=e.getFacets();if(ne["default"].isNotNullOrUndefined(i)){var a=new E["default"](h["default"].RelatedInfo,n);a.SetTimeout(9e4);a.Headers.Accept="application/json";a.Headers["Content-Type"]="application/json";a.Post(JSON.stringify(i),t)}};function Ai(){re["default"].call(this)}Ai.prototype=new re["default"];Ai.prototype.constructor=Ai;Ai.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/corporatezone/filter",o=e.getFacetGuid();ne["default"].isNotNullOrUndefined(o)&&(n=n+"/"+o);var i=e.getFacet();if(ne["default"].isNotNullOrUndefined(i)){var a=new E["default"](h["default"].RelatedInfo,n);a.SetTimeout(9e4);a.Headers.Accept="application/json";a.Headers["Content-Type"]="application/json";a.Put(JSON.stringify(i),t)}};function Ri(){re["default"].call(this)}Ri.prototype=new re["default"];Ri.prototype.constructor=Ri;Ri.prototype.submitWebRequest=function(e,t){var n="RelatedInfo/v1/corporatezone/"+e.getCategory()+"/facets?docGuid="+e.getDocumentGuid();ne["default"].isNotNullOrUndefined(e.getFacetGuid())&&(n=n+"&filterGuid="+e.getFacetGuid());var o=new E["default"](h["default"].RelatedInfo,n);o.SetTimeout(9e4);o.Headers.Accept="application/json";o.Get(t)};function Pi(){re["default"].call(this);this.isReleased=Q["default"].GetFeatureExposure()===qo["default"].Released}Pi.prototype=new re["default"];Pi.prototype.constructor=Pi;Pi.prototype.submitWebRequest=function(e,t){var n;n="RelatedInfo/v1/statuteHistory";var o=new x["default"](n);o.addParameter("docGuid",e.getDocumentGuid());o.addParameter("clientId",e.getClientId());var i=ne["default"].getParameterFromUrl("selectedNavMode");o.addParameter("selectedNavMode",i);var a=o.buildUrl(),r=new E["default"](h["default"].RelatedInfo,a);r.SetTimeout(9e4);r.Headers.Accept="application/json";r.Get(t)};var Bi={FOLDER_SUGGESTION_PROVIDER:null,HEADNOTES_PROVIDER:null,COUNT_PROVIDER:null,CATEGORY_COUNT_PROVIDER:null,CONTENT_PROVIDER:null,CORPORATE_ZONE_CONTENT_PROVIDER:null,FACET_PROVIDER:null,SESSIONINFO_PROVIDER:null,TOPIC_PROVIDER:null,TOPIC_FOLDER_PROVIDER:null,TOPIC_FOLDER_CALLBACK_PROVIDER:null,ADD_APPLIED_FACET_PROVIDER:null,ADD_APPLIED_FACETS_PROVIDER:null,REMOVE_APPLIED_FACET_PROVIDER:null,RETRIEVE_AVAILABLE_FACETS_PROVIDER:null,CHART_PROVIDER:null,DOCUMENT_HEADNOTE_COUNT_PROVIDER:null,ALERTS_PUBLICATION_RESOLVER_PROVIDER:null,FLAG_PROVIDER:null,SNT_PROVIDER:null,STATUTE_TOOL_PROVIDER:null,BIG_FORMS_PROVIDER:null,NOD_NAVIGATION_PROVIDER:null,NOD_PREVIEW_PROVIDER:null,SELECT_ALL_ITEMS_PROVIDER:null,KEYCITE_ALERTABLE_PROVIDER:null,COUNT_FACET_PROVIDER:null,GATHER_CONTENT_PROVIDER:null,CATEGORY_DROPDOWN_PROVIDER:null,ALERTS_DOCUMENT_METADATA_PROVIDER:null,ALERTS_CITE_VALIDATION_PROVIDER:null,KM_CREATE_HISTORY_EVENT_PROVIDER:null,ALERTS_FACET_INFO_PROVIDER:null,KEYCITE_ALERTS_RESULT_PROVIDER:null,CORPORATEZONE_ADD_APPLIED_FACET_PROVIDER:null,CORPORATEZONE_ADD_APPLIED_FACETS_PROVIDER:null,CORPORATEZONE_REMOVE_APPLIED_FACET_PROVIDER:null,CORPORATEZONE_RETRIEVE_AVAILABLE_FACETS_PROVIDER:null,getFolderSuggestionProvider:function(){return Mo["folderSuggestionProvider"]},getHeadnotesProvider:function(){null===this.HEADNOTES_PROVIDER&&(this.HEADNOTES_PROVIDER=new Fo);return this.HEADNOTES_PROVIDER},getCountProvider:function(){null===this.COUNT_PROVIDER&&(this.COUNT_PROVIDER=new Ho);return this.COUNT_PROVIDER},getCategoryCountProvider:function(){null===this.CATEGORY_COUNT_PROVIDER&&(this.CATEGORY_COUNT_PROVIDER=new Go);return this.CATEGORY_COUNT_PROVIDER},getFacetProvider:function(){null===this.FACET_PROVIDER&&(this.FACET_PROVIDER=new Uo);return this.FACET_PROVIDER},getContentProvider:function(e){var t;switch(e){case"wlnFilingsAndDisclosures":case"wlnFilingsAndDisclosuresTwoStepViaMA":case"wlnFilingsAndDisclosuresExhibits":case"wlnFilingsAndDisclosuresExhibitsTwoStep":case"wlnFilingsAndDisclosuresExhibitsTwoStepViaMAAndFD":case"wlnPefundsFundsFirms":case"wlnFundsInvestments":case"wlnFundsInvestmentsV2":case"wlnFundsInvestmentsTwoStepViaMA":case"wlnFundsInvestmentsTwoStepViaFDAndMA":case"wlnSecCommentLetters":case"wlnSecCommentLettersTwoStep":case"wlnAgreements":case"wlnAgreementsEnh":case"wlnAgreementsTwoStep":case"wlnAgreementsEnhTwoStep":case"wlnAgreementsEnhTwoStepViaMA":case"wlnMergersAndAcquisitions":case"wlnMergersAndAcquisitionsEnhanced":case"wlnMergersAndAcquisitionsEnhancedTwoStep":case"wlnMergersAndAcquisitionsRelated":null===this.CORPORATE_ZONE_CONTENT_PROVIDER&&(this.CORPORATE_ZONE_CONTENT_PROVIDER=new jo);t=this.CORPORATE_ZONE_CONTENT_PROVIDER;break;case"StatuteHistory":t=c["default"].isIacOn("IAC-RI-STATUTE-HISTORY")?new Pi:new zo;break;default:null===this.CONTENT_PROVIDER&&(this.CONTENT_PROVIDER=new zo);t=this.CONTENT_PROVIDER}return t},getGatherContentProvider:function(){return Qo["gatherContentProvider"]},getSessionInfoProvider:function(){null===this.SESSIONINFO_PROVIDER&&(this.SESSIONINFO_PROVIDER=new Jo)
;return this.SESSIONINFO_PROVIDER},getTopicProvider:function(){return Zo},getAddAppliedFacetProvider:function(){null===this.ADD_APPLIED_FACET_PROVIDER&&(this.ADD_APPLIED_FACET_PROVIDER=new ei);return this.ADD_APPLIED_FACET_PROVIDER},getAddAppliedFacetsProvider:function(){null===this.ADD_APPLIED_FACETS_PROVIDER&&(this.ADD_APPLIED_FACETS_PROVIDER=new ti);return this.ADD_APPLIED_FACETS_PROVIDER},getRemoveAppliedFacetProvider:function(){null===this.REMOVE_APPLIED_FACET_PROVIDER&&(this.REMOVE_APPLIED_FACET_PROVIDER=new ni);return this.REMOVE_APPLIED_FACET_PROVIDER},getRetrieveAvailableFacetsProvider:function(){null===this.RETRIEVE_AVAILABLE_FACETS_PROVIDER&&(this.RETRIEVE_AVAILABLE_FACETS_PROVIDER=new ii);return this.RETRIEVE_AVAILABLE_FACETS_PROVIDER},getChartProvider:function(){null===this.CHART_PROVIDER&&(this.CHART_PROVIDER=new ri);return this.CHART_PROVIDER},getDocumentHeadnoteCountProvider:function(){return si["headnoteCountProvider"]},getAlertsPublicationResolverProvider:function(){null===this.ALERTS_PUBLICATION_RESOLVER_PROVIDER&&(this.ALERTS_PUBLICATION_RESOLVER_PROVIDER=new li);return this.ALERTS_PUBLICATION_RESOLVER_PROVIDER},getFlagProvider:function(){return ie["flagProvider"]},getSntProvider:function(){return ce},getStatuteToolsProvider:function(){null===this.STATUTE_TOOL_PROVIDER&&(this.STATUTE_TOOL_PROVIDER=new ci);return this.STATUTE_TOOL_PROVIDER},getBigFormsProvider:function(){return fi},getNodNavigationProvider:function(){return pi},getNodPreviewProvider:function(){null===this.NOD_PREVIEW_PROVIDER&&(this.NOD_PREVIEW_PROVIDER=new gi);return this.NOD_PREVIEW_PROVIDER},getSelectAllItemsProvider:function(){null===this.SELECT_ALL_ITEMS_PROVIDER&&(this.SELECT_ALL_ITEMS_PROVIDER=new vi);return this.SELECT_ALL_ITEMS_PROVIDER},getKeyCiteAlertProvider:function(){return Ci["keyCiteAlertableProvider"]},getCountWithoutKeyWordFacetProvider:function(){null===this.COUNT_FACET_PROVIDER&&(this.COUNT_FACET_PROVIDER=new _i);return this.COUNT_FACET_PROVIDER},getCategoryDropdownProvider:function(){return yi},getAlertsDocumentMetadataProvider:function(){null===this.ALERTS_DOCUMENT_METADATA_PROVIDER&&(this.ALERTS_DOCUMENT_METADATA_PROVIDER=new Si);return this.ALERTS_DOCUMENT_METADATA_PROVIDER},getAlertsCiteValidationProvider:function(){null===this.ALERTS_CITE_VALIDATION_PROVIDER&&(this.ALERTS_CITE_VALIDATION_PROVIDER=new Di);return this.ALERTS_CITE_VALIDATION_PROVIDER},getKMCreateHistoryEventProvider:function(){return wi},getAlertsFacetInfoProvider:function(){null===this.ALERTS_FACET_INFO_PROVIDER&&(this.ALERTS_FACET_INFO_PROVIDER=new Ii);return this.ALERTS_FACET_INFO_PROVIDER},getKeyCiteAlertsResultProvider:function(){return xi},getCorporateZoneAddAppliedFacetProvider:function(){null===this.CORPORATEZONE_ADD_APPLIED_FACET_PROVIDER&&(this.CORPORATEZONE_ADD_APPLIED_FACET_PROVIDER=new Ni);return this.CORPORATEZONE_ADD_APPLIED_FACET_PROVIDER},getCorporateZoneAddAppliedFacetsProvider:function(){null===this.CORPORATEZONE_ADD_APPLIED_FACETS_PROVIDER&&(this.CORPORATEZONE_ADD_APPLIED_FACETS_PROVIDER=new ki);return this.CORPORATEZONE_ADD_APPLIED_FACETS_PROVIDER},getCorporateZoneRemoveAppliedFacetProvider:function(){null===this.CORPORATEZONE_REMOVE_APPLIED_FACET_PROVIDER&&(this.CORPORATEZONE_REMOVE_APPLIED_FACET_PROVIDER=new Ai);return this.CORPORATEZONE_REMOVE_APPLIED_FACET_PROVIDER},getCorporateZoneRetrieveAvailableFacetsProvider:function(){null===this.CORPORATEZONE_RETRIEVE_AVAILABLE_FACETS_PROVIDER&&(this.CORPORATEZONE_RETRIEVE_AVAILABLE_FACETS_PROVIDER=new Ri);return this.CORPORATEZONE_RETRIEVE_AVAILABLE_FACETS_PROVIDER},reset:function(){Object.keys(Bi).forEach(function(e){"function"!=typeof Bi[e]&&(Bi[e]=null)})}},Li=Bi;function Oi(){this.documentGuid=null}Oi.prototype={getDocumentGuid:function(){return this.documentGuid},setDocumentGuid:function(e){this.documentGuid=e},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&e instanceof Oi&&this.getDocumentGuid()==e.getDocumentGuid()&&(t=!0);return t}};var Mi=function(e,t){var n=new Oi,o=Li.getAlertsDocumentMetadataProvider(),i=a.a.Deferred();n.setDocumentGuid(e);o.requestData(n,function(e){var n={};e.error||(n={version:1,startDateRestrictions:e.startDateRestrictions,defaultDate:e.defaultDate,serialNumber:e.serialNumber,docCitation:e.docCitation,userCitation:e.docCitation,pubNumber:e.pubNumber,docFamilyId:e.docFamilyId,citingRefsContentRequest:{limitToNegative:!1,publicationName:null,appliedFacets:[],detailLevel:1}});t&&t(n);e.error?i.reject():i.resolve()},!1);return i.promise()};function Wi(e){this._alertType=e.alertType;this._flowState=e.flowState;this._documentGuid=e.documentGuid;this._documentFamilyGuid=e.documentFamilyGuid;this._documentTitle=e.documentTitle;this._state=e.state&&e.state.content||{};this._parentDiv=null;this._localizedMessages={documentTriggersStatusError:I["default"].lookup("SC.PLCCore.Alerts.Enum.PLDocument.AlertExistsStatusError","Statuses for this Document is not available")}}Wi.prototype={setParentDiv:function(e){this._parentDiv=a()(e)},_getTriggersFromState:function(){var e=[];this._flowState===Ut.EditFlow&&(e=JSON.parse(this._state.plDocumentInfoJson).triggers||[]);return e},draw:function(){return a.a.when()},validate:function(){return a.a.when()},_documentTriggersJSONGenerator:function(e,t){var n=new jt["default"],o=a.a.Deferred(),i=this._localizedMessages.documentTriggersStatusError,r={searchTarget:e,alertType:this._alertType};n.retrieveDocumentTriggers(r,i,function(e){if(e.error)o.reject();else{t(e);o.resolve()}});return o.promise()},_documentAndKeyCiteJsonGenerator:function(e){var t=this;return Mi(this._documentGuid,function(t){e.content.keyCiteInfoJson=t}).pipe(function(){return t._documentTriggersJSONGenerator(t._documentGuid,function(n){e.content.plDocumentInfoJson.triggerStatus=n;e.content.plDocumentInfoJson.documentGuid=t._documentGuid;e.content.keyCiteInfoJson.docGuid=t._documentGuid})})},renderPayload:function(e){var t=Oo,n=a()(".co_documentType > span").first().text();e.content={plDocumentInfoJson:{documentGuid:this._documentGuid,documentFamilyGuid:this._documentFamilyGuid,documentTitle:this._documentTitle,triggers:t,resourceType:n}};if(this._flowState===Ut.EditFlow){e.content.plDocumentInfoJson.triggerStatus=JSON.parse(this._state.plDocumentInfoJson).triggerStatus||{};e.content.keyCiteInfoJson=this._state.keyCiteInfoJson;return a.a.when()}return this._documentAndKeyCiteJsonGenerator(e)}};var Fi=Wi;function Hi(e){var t=new an(e),n=new Eo(e),o=new Fi(e),i=new Lo(e);this.widgets=[t,o,n,i];this.setTitle=function(e){switch(e.flowState){case Ut.CreateFlow:return I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.PLDocument.Title.Create","Create Document Alert");case Ut.EditFlow:return I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.PLDocument.Title.Edit","Edit Document Alert");default:return I["default"].lookup("SC.PLCCore.Alerts.QuickAlert.PLDocument.Title","Practical Law Document Alert")}};this._localizedMessages={title:this.setTitle(e)}}Hi.prototype={getWidgets:function(){return this.widgets}};var Gi=Hi,Ui={Search:1,Browse:2,Document:4,Reserved:8};function Vi(){this.widgetsConfiguration=null}Vi.prototype={create:function(e){e.isBrowse=e.contextFlags&Ui.Browse;e.isSearch=e.contextFlags&Ui.Search;e.isDocument=e.contextFlags&Ui.Document;e.isTopicAlert=e.isBrowse||e.isSearch&&!en["default"].SearchResult.getQuery();this.widgetsConfiguration=this._configureWidgets(e);return this.widgetsConfiguration},_configureWidgets:function(e){if(rn["default"].isPLDocument(e.alertType))return new Gi(e);throw new f["NonUserError"](h["default"].Alert,"Failed to find config for alertType: "+e.alertType)}};var ji=Vi,qi=n("LvDlAkAJ"),Ki=n.n(qi),zi=n("f+r5AMhk"),Qi={_parentDiv:null,MAX_COUNT_CHECKBOX:100,_getCheckBoxStore:function(){return zi["default"].Retrieve(this._centerType+"Store")},_getCheckboxMap:function(){return this._getCheckBoxStore().Get()},setParentDiv:function(e){this._parentDiv=e},draw:function(){var e=I["default"].lookup("SC.Alerts.Center.Toolbar.ScreenReader.CheckAllHoverText","check all"),t=[];t[t.length]='<ul class="co_navOptions">';t[t.length]='<li class="co_navSelectAll">'
;t[t.length]='<input id="checkbox_all_items_select" type="checkbox" title="'+e+'" />';t[t.length]='<label for="checkbox_all_items_select">';t[t.length]=I["default"].lookup("SC.Alerts.Center.Toolbar.SelectAllItems","Select all items");t[t.length]='<span class="co_accessibilityLabel"> ';t[t.length]=I["default"].lookup("SC.Alerts.Center.Toolbar.ScreenReader.InResultList","in result list")+"</span></label>";t[t.length]="</li>";t[t.length]='<li class="co_navItemsSelected">';t[t.length]="</li>";t[t.length]="</ul>";a()(this._parentDiv).append(t.join(""));this._updateCountMessage();a()("input#checkbox_all_items_select").on("click",a.a.proxy(function(){this.toggleAllCheckboxes()},this));a.a.each(this.getSelectedItems(),function(e){var t=a()("div.co_innertube").find("input#checkbox_"+e);t.length>0&&t.attr("checked",!0)});this._updateSelectAll();this.enableSelectAll()},getCheckboxCount:function(){return Xt["default"].countProperties(this.getSelectedItems())},getSelectedItems:function(e){var t=this._getCheckboxMap();if(a.a.isFunction(e)&&!a.a.isEmptyObject(t)){var n={};for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];e(i)&&(n[o]=i)}return n}return t},containsSameValueForAllKeys:function(e,t){var n=this.getSelectedItems();if(a.a.isEmptyObject(n))return!1;for(var o in n)if(n.hasOwnProperty(o)&&(!n[o][e]||n[o][e]!==t))return!1;return!0},isCheckboxChecked:function(e){if(void 0!==this._getCheckboxMap()[e])return!0;return!1},toggleAllCheckboxes:function(){var e=this,t=a()("#checkbox_all_items_select"),n=this._getCheckboxMap();a()(".co_user_alert_item input[type='checkbox'],.co_detailsTable_select input[type='checkbox'],.co_searchResult_list input[type='checkbox']").each(function(o,i){var r=a()(i),s=e._buildItemJson(i);if(t.is(":checked")&&r.is(":not(:checked)")){"true"!==s.hasResultError&&(n[s.guid]=s);r.attr("checked","true"!==s.hasResultError)}else if(t.is(":not(:checked)")&&r.is(":checked")){delete n[s.guid];r.attr("checked",!1)}});this._getCheckBoxStore().Clear();this._getCheckBoxStore().AddAll(n);this.enableSelectAll();this._updateCountMessage()},checkboxChanged:function(e){var t=this._buildItemJson(e),n=this._getCheckboxMap(),o=e.parentElement;if(e.checked)if(this.getCheckboxCount()>=this.MAX_COUNT_CHECKBOX){a()(e).removeAttr("checked");var i=a()(o).find(".co_infoBox");0==i.length?a()(o).prepend('<div class="co_detailsTable_select_inner"><div class="co_infoBox"></div></div>'):i.replaceWith('<div class="co_detailsTable_select_inner"><div class="co_infoBox"></div></div>');var r=a()(o).find(".co_infoBox")[0],s=new M["default"](r,F["default"].None,W["default"].Right,!0,!1,!0),l=I["default"].renderInteger(this.MAX_COUNT_CHECKBOX);s.Draw(I["default"].format("SC.Alerts.History.Items.ItemsSelectedWarning",{Count:l},"Only a maximum of "+l+" selections are allowed."))}else n[t.guid]=t;else delete n[t.guid];this._updateSelectAll();this._getCheckBoxStore().Clear();this._getCheckBoxStore().AddAll(n);this._updateCountMessage()},enableSelectAll:function(){var e=a()(".co_detailsTable,.co_searchResult_list").find("input:checkbox:not(:disabled)").filter(":not(:checked)").length,t=a()("#checkbox_all_items_select");e+this.getCheckboxCount()>this.MAX_COUNT_CHECKBOX&&0!=e?t.prop("disabled",!0):t.prop("disabled",!1)},clearCheckboxes:function(){a()("#checkbox_all_items_select").attr("checked",!1);a()(".co_user_alert_item input[type='checkbox'],.co_detailsTable_select input[type='checkbox'],.co_searchResult_list input[type='checkbox']").each(function(e,t){a()(t).attr("checked",!1)});this._getCheckBoxStore().Clear();this._updateCountMessage();this.enableSelectAll()},_buildItemJson:function(e){var t=a()(e);return{guid:t.attr("guid"),alertType:t.attr("alerttype"),alertName:t.attr("alertname"),alertLocale:t.attr("alertlocale"),hasResultError:t.attr("hasResultError"),alertGuid:t.attr("data-alertguid")||t.attr("guid"),alertStatus:t.attr("alertstatus"),moderationWithinGracePeriod:t.attr("moderationwithingraceperiod"),nextRunDate:t.attr("nextrundate"),gracePeriodLength:t.attr("graceperiodlength"),alertGroup:t.attr("alertgroup"),owner:t.attr("owner"),pubNum:t.attr("data-pubnum"),docFamilyGuid:t.attr("docFamilyGuid"),contenttype:t.attr("contenttype"),subcontenttype:t.attr("subcontenttype")}},_updateSelectAll:function(){var e=a()("#checkbox_all_items_select");if(e.length>0){var t=a()(".co_user_alert_item input[type='checkbox']:not(:checked), .co_detailsTable_select input[type='checkbox']:not(:checked), .co_searchResult_list input[type='checkbox']:not(:checked)");a()(".co_user_alert_item input[type='checkbox'], .co_detailsTable_select input[type='checkbox'], .co_searchResult_list input[type='checkbox']").length>0&&0===t.length?e.attr("checked",!0):e.attr("checked",!1)}},_updateCountMessage:function(){a()("li.co_navItemsSelected").empty();var e=this._getCountMessageControl();y["default"].Publish("Cobalt.Alert.UpdateCountMessage");a()("li.co_navItemsSelected").append(e);a()("a#co_alerts_clearSelected").on("click",a.a.proxy(function(){this.clearCheckboxes()},this))},_getCountMessageControl:function(){var e=[];if(this.getCheckboxCount()>0){e[e.length]='<span id="co_ItemsSelected"><strong>'+this.getCheckboxCount()+"</strong> "+I["default"].lookup("SC.Alerts.Center.Toolbar.ItemsSelected","item(s) selected")+" </span>";e[e.length]='<span id="co_ItemsClear">';e[e.length]='<a id="co_alerts_clearSelected" href="javascript:void(0)">'+I["default"].lookup("SC.Alerts.Center.Toolbar.ClearSelected","clear selected")+"</a>";e[e.length]="</span>"}else e[e.length]='<span id="co_ItemsSelected"> '+I["default"].lookup("SC.Alerts.Center.Toolbar.NoItemsSelected","No items selected")+"</span>";return e.join("")},getSelectedGuidArray:function(){var e=[],t=this.getSelectedItems();for(var n in t)void 0!==n&&e.push(n);return e},getSelectedAlertGuidArray:function(){var e=[],t=this.getSelectedItems();for(var n in t)n&&t[n].alertGuid&&e.push(t[n].alertGuid);return e},getSelectedGuidsMapByType:function(e){var t={},n=this.getSelectedItems(e);for(var o in n)if(void 0!==o){var i=n[o].alertType;t.hasOwnProperty(i)||(t[i]=[]);t[i].push(o)}return this._convertToRequestMap(t)},_convertToRequestMap:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({alertType:n,alertGuids:e[n]});return t},hasAtLeastOneItemSelected:function(){return void 0!==this.getSelectedItems()&&this.getCheckboxCount()>0}};function $i(e){$i._instances[e]||($i._instances[e]=function(e){var t={};a.a.extend(t,Qi);t._centerType=e;y["default"].Subscribe("Cobalt.Alert.ClearPersistentCheckbox."+t._centerType,a.a.proxy(function(){t.clearCheckboxes()},t));return t}(e));return $i._instances[e]}$i._instances={};var Ji={Delete:"Delete",Pause:"Pause",Resume:"Resume",Run:"Run"},Yi=d.a.extend({init:function(e){this._provider=m["default"].GetObject(qt["default"].objectIds.ProviderContentData);this._checkBoxManager=$i(e);this._centerType=e;this._messagePopup=null;this._validGuids=null;this._parentDiv=null;this._centerProgressIndicator="#co_contentColumn #co_subHeader .co_progressIndicator";this._facetProgressIndicator="#co_leftColumn .co_progressIndicator"},setParentDiv:function(e){this._parentDiv=e},draw:function(){throw new f["NonUserError"](h["default"].Alert,"Failed to implement draw for button on toolbar.")},hideAlertCenterAndFacets:function(){a()("#co_alertCenter").hide();a()("#co_alert_leftPaneContent").hide();this._showProgressIndicators()},destroy:function(){this._provider=null;this._validGuids=null;this._parentDiv=null;this.messagePopup&&this.messagePopup.Destroy()},validateGuidSelection:function(e){var t=0,n=0,o=null,i=this._checkBoxManager.getSelectedItems(),r=this._centerType,s=function(){Object(Qt["default"])({message:o,status:F["default"].Warning,referenceElement:a()("#co_alertMessagePlaceHolder")});y["default"].Publish("Cobalt.Alert.ClearPersistentCheckbox."+r)};if(void 0===i||0===this._checkBoxManager.getCheckboxCount()){o=this.getNoSelectionMessage(e);s();return!1}for(var l in i)i.hasOwnProperty(l)&&("true"===i[l].moderationWithinGracePeriod?t++:this._willColide(i[l])&&n++);if(1===t&&1===this._checkBoxManager.getCheckboxCount()&&e!==Ji.Delete&&e!==Ji.Resume){
e===Ji.Pause?o=I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.PauseNewsletter.AwaitingModeration","The Newsletter selected is awaiting moderation. Newsletters may not be paused while moderation is pending."):e===Ji.Run&&(o=I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.RunNowNewsletter.AwaitingModeration","The Newsletter selected is awaiting moderation. Newsletters may not be run while moderation is pending."));s();return!1}if(t+n===this._checkBoxManager.getCheckboxCount()&&e!==Ji.Delete&&e!==Ji.Resume){if(e===Ji.Pause){if(0!==n)return!0;o=I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.PauseNewsletter.AwaitingModeration.Multiple","The Newsletters selected are awaiting moderation. Newsletters may not be paused while moderation is pending.")}else if(e===Ji.Run)if(n>0&&t>0)o=I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.RunNowNewsletter.AwaitingModeration.MultipleAndCollision","The Newsletters selected are awaiting moderation or have a grace period that would overlap with the next scheduled run date. Newsletters may not be run while moderation is pending.");else{if(1===this._checkBoxManager.getCheckboxCount())return!0;o=0===t?I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.RunNowNewsletter.AwaitingModeration.Collision","Eligible Newsletters have been run. Newsletters with grace periods which overlap scheduled Newsletter grace periods have not been run."):I["default"].lookup("SC.Alerts.Toolbar.NotifyAction.RunNowNewsletter.AwaitingModeration.Multiple","The Newsletters selected are awaiting moderation. Newsletters may not be run while moderation is pending.")}s();return!1}return!0},buildSuccessMessage:function(e,t,n,o){return n>1?this.getPluralSuccessMessage(e,t,n):this.getSuccessMessage(e,t,n,o)},_notifyUserOfActionResults:function(e,t,n,o,i){i=i||[];this._hideProgressIndicators();var r,s={};if(e&&e.successGuids&&e.successGuids.length>0){var l=e.successGuids,d=e.failureGuids||[];r=this.buildSuccessMessage(t,l.length,d.length+l.length+i.length,l[0].title);o&&(r=[r,o]);s.message=r}else{s.message=n;s.status=F["default"].Warning}y["default"].Publish("Cobalt.Alert.ClearPersistentCheckbox."+this._centerType);this._publishRedraw(this._centerType,function(){s.referenceElement=a()("#co_alertMessagePlaceHolder");Object(Qt["default"])(s)})},_publishRedraw:function(e,t){var n="Cobalt."+($t["default"][e]||$t["default"].Alert)+".Action.RedrawContent";y["default"].Publish(n,t)},_postUXEvents:function(e,t){var n="Cobalt.Alert."+t;if(!t||a.a.trim(t).length<0)throw new f["NonUserError"](h["default"].Alert,"Failed to post UXEvents for empty eventType");Object(we["postUXEvent"])(n,e)},_willColide:function(e){return this._getCurrentTime().addHours(e.gracePeriodLength)>new Date(e.nextRunDate)},_getCurrentTime:function(){return new Date},_resetAlertCounts:function(){this._moderationNeededAlertCount=0;this._gracePeriodCollisionCount=0;this._unrunableAlertGuids=[]},_showProgressIndicators:function(){a()(this._centerProgressIndicator).first().show();a()(this._facetProgressIndicator).show()},_hideProgressIndicators:function(){a()(this._centerProgressIndicator).first().hide();a()(this._facetProgressIndicator).hide()},getNoSelectionMessage:function(e){return I["default"].lookup("SC.Alerts.Popup."+e+".NoSelection","Select 1 or more items to "+e.toLowerCase()+".")},getSuccessMessage:function(e,t,n,o){var i=null;return i=o?I["default"].format("SC.Alerts.Popup."+e+".Success",{title:o},o+" has been successfully "+e.toLowerCase()+"d"):I["default"].lookup("SC.Alerts.Popup."+e+".Success.NoTitle","Alert has been successfully "+e.toLowerCase()+"d")},getPluralSuccessMessage:function(e,t,n){return I["default"].format("SC.Alerts.Popup."+e+".Success.Plural",{successCount:t,totalCount:n},t+" of "+n+" items have been successfully "+e.toLowerCase()+"d")}});function Xi(){this._lightbox=null;this._escapeDialog=null;this._deferred=a.a.Deferred()}Xi.prototype={draw:function(e){var t=this._lightbox=new ve["default"];t.SetTitle(I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.Title","Delete Alert Groups"));t.SetId("co_delete_item_lightbox");t.SetClass("co_deliveryConfirm co_overlayBox_delivery");t.SetCloseLinkObject({id:"co_delete_item_popupclose",alt:I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.Close","Close"),onclick:a.a.proxy(function(){this._destroy()},this)});this._findOrphanGroups(e,a.a.proxy(function(e){if(e.length){var n=this._generateLightboxMessage(e);t.GetContentDomElement().appendChild(this._drawContent(n));t.GetFooterDomElement().innerHTML=this._drawFooter();t.Draw();this._attachLightBoxEvents()}else this._deferred.resolve()},this));return this._deferred.promise()},_drawContent:function(e){var t=document.createElement("div");t.id="delete_item_content_div";t.innerHTML=e;return t},_generateLightboxMessage:function(e){var t=a.a.map(e,function(e){return Xt["default"].htmlEncode(e.value)}),n='"'+t.slice(0,5).join('", "')+'"';if(t.length>5){var o=t.length-5;n=I["default"].format("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.ConfirmationMessage.AndMore",{groups:n,count:o},n+" and "+o+" more")}return I["default"].format("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.ConfirmationMessage",{groups:n},"<p>This action will delete the alert group(s): "+n+".</p><br><p><strong>Do you wish to continue?</strong></p>")},_findOrphanGroups:function(e,t){m["default"].GetObject(qt["default"].objectIds.ProviderContentData).retrieveAlertGroups(function(n){n.removeAlerts(a.a.map(e,function(e){return e.alertGroup}));t(n.findOrphans())})},_drawFooter:function(){var e=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.Yes","Yes"),t=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.Cancel","Cancel"),n=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.DeleteGroup.HoverText.Cancel","Cancel Delete"),o=[];o.push("<ul>");o.push('<li><label class="co_accLink" for="co_delete_item_yes">');o.push(e);o.push('</label><input id="co_delete_item_yes" class="co_primaryBtn" type="button" value="'+e+'" /></li>');o.push('<li><a href="javascript:void(0);" id="co_delete_item_cancel" class="co_overlayBox_buttonCancel" title="');o.push(n+'">');o.push(t+"</a></li>");o.push("</ul>");return o.join("")},_attachLightBoxEvents:function(){this._attachLightBoxCloseButtonEventHandler();this._attachLightBoxSaveButtonEventHandler();this._escapeDialog=a.a.proxy(function(e){27===e.keyCode&&this._destroy()},this);a()(document).keyup(this._escapeDialog)},_attachLightBoxCloseButtonEventHandler:function(){a()("#co_delete_item_cancel").on("click",a.a.proxy(this._destroy,this))},_attachLightBoxSaveButtonEventHandler:function(){a()("#co_delete_item_yes").on("click",a.a.proxy(function(){this._deferred.resolve();this._destroy()},this))},_destroy:function(){this._deferred.reject();this._escapeDialog&&a()(document).off("keyup",this._escapeDialog);if(this._lightbox){this._lightbox.Remove();this._lightbox=null}}};var Zi=Xi;function ea(){this._lightbox=null;this._unsubscribeCallback=null;this._escapeDialog=null}ea.prototype={_draw:function(e,t,n,o){var i=I["default"].lookup("SC.Alerts.Center.Toolbar.Notify.Delete","Delete"),r=$t["default"].getPluralTitle(e);this._unsubscribeCallback=o;var s=this._lightbox=new ve["default"];s.SetTitle(i+" "+r);s.SetId("co_delete_item_lightbox");s.SetClass("co_deliveryConfirm co_overlayBox_delivery");s.SetCloseLinkObject({id:"co_delete_item_popupclose",alt:I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.Close","Close"),onclick:a.a.proxy(function(){this._doCleanUpOnRemove()},this)});s.GetContentDomElement().appendChild(this._drawContent(t,n));s.GetFooterDomElement().innerHTML=this._drawFooter();s.Draw();this._attachLightBoxEvents(t,n)},_drawContent:function(e,t){var n=document.createElement("div");n.id="delete_item_content_div";var o=[];o[o.length]='<div id="DeleteItemContainer">';o[o.length]=this._generateLightboxMessage(e,t);o[o.length]="</div>";n.innerHTML=o.join("");return n},_generateLightboxMessage:function(e,t){var n=this._getPendingGuidsSize(e),o=null,i=null;a.a.each(t,function(e,t){o=t.alertName;i=t.alertType;return!1})
;var r=$t["default"].getPluralTitle(Vt["default"].AlertTypeData[i].ContentName).toLowerCase(),s=n>1?n+" "+r:o;return I["default"].format("SC.Alerts.Center.Toolbar.DeleteItem.ConfirmationMessage",{item:s},"<p>You are attempting to delete ".concat(s,".  This action cannot be undone.</p><br><p><strong>Do you wish to continue?</strong></p>"))},_getPendingGuidsSize:function(e){for(var t=0,n=0;n<e.length;n++){if(!e[n].alertGuids)throw new f["CobaltError"](h["default"].Website,"Error: alertGuids empty");t+=e[n].alertGuids.length}return t},_drawFooter:function(){var e=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.Yes","Yes"),t=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.Cancel","Cancel"),n=I["default"].lookup("SC.Alerts.Center.Toolbar.DeleteItem.HoverText.Cancel","Cancel Delete"),o=[];o[o.length]="<ul>";o[o.length]='<li><label class="co_accLink" for="co_delete_item_yes">'+e+'</label><input id="co_delete_item_yes" class="co_primaryBtn" type="button" value="'+e+'" /></li>';o[o.length]='<li><a href="javascript:void(0);" id="co_delete_item_cancel" class="co_overlayBox_buttonCancel"title="'+n+'">'+t+"</a></li>";o[o.length]="</ul>";return o.join("")},_attachLightBoxEvents:function(e,t){this._attachLightBoxCloseButtonEventHandler();this._attachLightBoxSaveButtonEventHandler(e,t);this._escapeDialog=a.a.proxy(function(e){27===e.keyCode&&this._doCleanUpOnRemove()},this);a()(document).keyup(this._escapeDialog)},_attachLightBoxCloseButtonEventHandler:function(){a()("#co_delete_item_cancel").on("click",a.a.proxy(function(){this._doCleanUpOnRemove()},this))},_attachLightBoxSaveButtonEventHandler:function(e,t){function n(){var t="Cobalt.Alert.ConfirmedDeleteItem",n=new y["default"].Message(e,{},t,"1.0");y["default"].Publish(t,n)}var o=this;a()("#co_delete_item_yes").on("click",function(){if(Yt["default"].hasAccessToAlertGroups()){o._closeLightBox();(new Zi).draw(t).then(n).always(function(){o._doCleanUpOnRemove()})}else{n();o._doCleanUpOnRemove()}})},_closeLightBox:function(){if(this._lightbox){this._lightbox.Remove();this._lightbox=null}},_doCleanUpOnRemove:function(){this._unsubscribeCallback&&this._unsubscribeCallback();this._escapeDialog&&a()(document).off("keyup",this._escapeDialog);this._closeLightBox()}};var ta=ea;var na=Yi.extend({init:function(e){this._super(e);this._deleteConfirmationSubscribtion=null;this._deleteLightbox=null},draw:function(){if(null===this._parentDiv)throw new f["CobaltError"](h["default"].Alert,"Failed to set parentDiv on Delete.");var e=I["default"].lookup("SC.Alerts.Center.Toolbar.Notify.HoverText.Delete","Delete"),t=I["default"].lookup("SC.Alerts.Center.Toolbar.Notify.HoverText.Delete","Delete"),n=this._userIsEmulating()?"co_disabled":"",o=this._createDeleteButton(n,t,e);a()(this._parentDiv).append(o);this._userIsEmulating()||o.click(a.a.proxy(this._handleDeleteButtonClick,this))},deleteAlerts:function(){var e=this._checkBoxManager.getSelectedGuidsMapByType(),t=this._checkBoxManager.getSelectedItems();this._SubscribeToEvents();this._drawDeleteLightBox(e,t)},_drawDeleteLightBox:function(e,t){this._deleteLightbox=new ta;this._deleteLightbox._draw(this._centerType,e,t,a.a.proxy(this._UnSubscribeFromEvents,this))},_createDeleteButton:function(e,t,n){return a()('<li class="co_deleteItemsButton '.concat(e,'">\n            <a title="').concat(t,'" href="javascript:void(0);" class="co_dock_trash"\n            id="cobalt_ro_detail_trash" name="cobalt_ro_detail_trash">').concat(n,"</a>\n        </li>"))},_confirmedDeleteAlert:function(e,t){this.hideAlertCenterAndFacets();var n=this,o=t.Data,i=function(e){n._notifyUserOfDeleteActionResults(e,o)};this._centerType===$t["default"].Newsletter?this._provider.deleteNewsletters(o,i):this._provider.deleteAlerts(o,i)},_userIsEmulating:function(){return Yt["default"].getCobaltMasterFeatureConfigurations().ISEMULATEUSER},_handleDeleteButtonClick:function(){this.validateGuidSelection(Ji.Delete)&&this.deleteAlerts()},_notifyUserOfDeleteActionResults:function(e){this._hideProgressIndicators();var t={};if(e&&e.successGuids&&e.successGuids.length>0){var n=e.successGuids,o=e.failureGuids||[],i=this.buildSuccessMessage(Ji.Delete,n.length,o.length+n.length,n[0].title);t.message=i;t.destroyOnClickoff=!0;y["default"].Publish("Cobalt.Alert.ClearPersistentCheckbox."+this._centerType)}else{t.message=I["default"].lookup("SC.Alerts.DeleteAlert.Popup.Failure","All selected alerts deletion failed.");t.status=F["default"].Warning}this._publishRedraw(this._centerType,function(){t.referenceElement=a()("#co_alertMessagePlaceHolder");Object(Qt["default"])(t)})},_SubscribeToEvents:function(){this._deleteConfirmationSubscribtion&&this._UnSubscribeFromEvents();this._deleteConfirmationSubscribtion=y["default"].Subscribe("Cobalt.Alert.ConfirmedDeleteItem",this._confirmedDeleteAlert,this)},_UnSubscribeFromEvents:function(){if(this._deleteConfirmationSubscribtion){y["default"].Unsubscribe(this._deleteConfirmationSubscribtion);this._deleteConfirmationSubscribtion=null}}}).extend({init:function(e,t){this._super(e);this._context=t.lightBoxContext;this._closeQuickAlertLightBox=t.closeQuickAlertLightBox;this._deletedAlertResultContent=Ki.a.template('<div class="co_quickAlert_deletedMessage"><span><%=deletedAlert%></span></div>');this._deletedAlertResultFooter=Ki.a.template('<ul class="co_quickAlert_footerContent">\n\t\t\t\t<li><button id="<%-okButtonId%>" class="co_primaryBtn th_flat" type="button" name="<%-okButtonId%>"><%-okButtonText%></button></li>\n\t\t\t</ul>');this._deleteButtonTemplate=Ki.a.template('<button id="coid_quickAlert_delete" class="co_cancelBtn th_flat" type="button" name="coid_quickAlert_delete"><%-deleteLabel%></button>')},_handleDeleteButtonClick:function(){var e=this._context.alertType,t=this._context.state.guid,n=Ki.a.get(this._context,["state","basics","name"],""),o=this._createPendingAlertGuids(e,t),i=this._createPendingAlertObjects(e,t,n);this._SubscribeToEvents();this._drawDeleteLightBox(o,i)},_createPendingAlertGuids:function(e,t){return[{alertType:e,alertGuids:[t]}]},_createPendingAlertObjects:function(e,t,n){return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},t,{guid:t,alertType:e,alertName:n,alertGuid:t})},_notifyUserOfDeleteActionResults:function(e){this._super(e);this._closeQuickAlertLightBox();this._showResultMessage(this._getSettingsForResult())},_createDeleteButton:function(e,t,n){return a()(this._deleteButtonTemplate({deleteHoverText:t,deleteLabel:n}))},_getSettingsForResult:function(){var e=this._context.state.basics.name;return{deletedAlert:I["default"].format("SC.Alerts.QuickAlert.DeletedAlert",{alertName:e},"Your alert <i>".concat(e,"</i> has been deleted")),okButtonText:I["default"].lookup("SC.Alerts.QuickAlert.Ok","OK"),okButtonId:"co_quickAlert_ok",lightboxId:"co_quickAlert_lightboxSavedAlert",closeButtonId:"co_quickAlert_close",cancel:I["default"].lookup("SC.Alerts.QuickAlert.Cancel","Cancel")}},_showResultMessage:function(e){var t=new ve["default"];t.SetId(e.lightboxId);t.SetUseOptionalEventHandling(!0);t.SetCloseLinkObject({alt:e.cancel,onclick:t.Remove.bind(t),id:e.closeButtonId});t.GetContentDomElement().innerHTML=this._deletedAlertResultContent(e);t.GetFooterDomElement().innerHTML=this._deletedAlertResultFooter(e);t.Draw();a()("#"+e.okButtonId).click(function(){t.Remove()})}});var oa=function(e,t,n){var o={};o[Vt["default"].AlertTypes.WestClip]=function(){var e=n.search.searchInfoJson,t=i(n.content),o={query:e.query,smartTermsQuery:e.smartTermsQuery,content:t};e.additionalTerms&&(o.additionalTerms=e.additionalTerms);return o};o[Vt["default"].AlertTypes.POBAlert]=function(){return{citation:n.basics.citation,statuteTitle:n.basics.targetTitle}};o[Vt["default"].AlertTypes.POBWatch]=function(){return{citation:n.basics.citation,statuteTitle:n.basics.targetTitle}};o[Vt["default"].AlertTypes.KeyCite]=function(){var e,o;if(t===Ut.BatchFlow){e="$$CITATION$$";o=n.content.keyciteInfoJson}else{e=n.basics.citation;o=JSON.parse(n.content.keyciteInfoJson)}var i=[];o.filingsContentRequest&&i.push("Filings");o.historyContentRequest&&i.push("History References")
;o.citingRefsContentRequest&&i.push("Citing References");return{citation:e,content:i}};o[Vt["default"].AlertTypes.DocketAlert]=function(){var e="",o=[];if(t===Ut.BatchFlow)e="$$DISPLAY_QUERY$$";else{e=n.search.searchInfoJson.query+(n.search.searchInfoJson.additionalTerms?n.search.searchInfoJson.additionalTerms:"");var a=n.search.searchUIJson;if(a){var s=a.displayquery;s&&(e=s);o=r(a)}}return{query:e,content:i(n.content),company:o}};o[Vt["default"].AlertTypes.DocketTrack]=function(){var e="",t="";n.content&&n.content.contentData&&n.content.contentData.docketNumber&&(e=n.content.contentData.docketNumber);if(n.content&&n.content.docketGuidForLinkCreation)return{docketNumber:e,docketLinkGuid:t=n.content.docketGuidForLinkCreation};return{docketNumber:e}};o[Vt["default"].AlertTypes.PublicationAlert]=function(){return{content:i(n.content)}};var i=function(e){var t=[];e&&e.contentData&&a.a.each(e.contentData,function(e,n){t.push(n.label+s(n.displayFilters,2))});return t},r=function(e){var t=null;if(e){var n=e.companyJson;if(n){var o=n.Company;if(o&&o.length){t=[];a.a.each(o,function(e,n){t.push(n.label)})}}}return t},s=function(e,t){var n="";if(!e||e.length<=0)return n;n+=" - ";for(var o=0,i=!1,a=0;a<e.length;a++){for(var r=e[a],s=0;s<r.values.length;s++){n+=r.values[s];o++;var l=s+1<r.values.length;if(o==t){i=l;break}l&&(n+=", ")}var d=a+1<e.length;if(o==t){i||(i=d);break}d&&(n+=", ")}i&&(n+=", ...");return n};return function(){var t={},i=rn["default"].getMappedAlertType(e);o[i]&&(t=o[i](n));return JSON.stringify(t)}()};var ia=function(e,t,n){var o,i={};i[Vt["default"].AlertTypes.PLDocument]=function(){var e=n.content.plDocumentInfoJson;return{documentFamilyGuid:e.documentFamilyGuid,documentGuid:e.documentGuid,triggers:e.triggers}};var a=rn["default"].getMappedAlertType(e);if(!i[a])return oa(e,t,n);o=i[a](n);return JSON.stringify(o)},aa=function(e){var t=[];e&&e.contentData&&a.a.each(e.contentData,function(e,n){t.push(n.label)});return t},ra=function(e){var t=null;if(e){var n=e.companyJson;if(n){var o=n.Company;if(o&&o.length){t=[];a.a.each(o,function(e,n){t.push(n.label)})}}}return t};var sa=function(e,t,n){var o,i={};i[Vt["default"].AlertTypes.CapitolWatchTrack]=function(){var e=n.basics,t="";e&&e.citation&&(t=e.citation);return{citation:t}};i[Vt["default"].AlertTypes.DealTrack]=function(){return{citation:n.basics.citation}};i[Vt["default"].AlertTypes.CourtWire]=function(){var e=[],t=n.search.searchInfoJson.query+(n.search.searchInfoJson.additionalTerms?n.search.searchInfoJson.additionalTerms:""),o=n.search.searchUIJson;if(o){var i=o.displayquery;i&&(t=i);e=ra(o)}return{query:t,content:aa(n.content),company:e}};i[Vt["default"].AlertTypes.BusinessInvestigator]=function(){var e=n.content,t=[];e&&e.contentData&&e.contentData.contentDisplay&&(t=e.contentData.contentDisplay.split(","));return{content:t}};i[Vt["default"].AlertTypes.PeopleMap]=function(){var e=n.content,t=[];e&&e.contentData&&e.contentData.contentDisplay&&(t=e.contentData.contentDisplay.split(","));return{content:t}};i[Vt["default"].AlertTypes.BusinessLawCenterAlert]=function(){var e=n.search.searchInfoJson,t=aa(n.content),o=n.search.searchUIJson,i={};o&&o.displayquery?i.query=o.displayquery:i.query=e.query;i.content=t;e.smartTermsQuery&&(i.smartTermsQuery=e.smartTermsQuery);return i};var a=rn["default"].getMappedAlertType(e);if(!i[a])return ia(e,t,n);o=i[a](n);return JSON.stringify(o)};function la(e){var t=this;this._context=e;this._lightbox=new ve["default"];this._provider=new jt["default"];this._successfulCreationCallback=this._context.successfulCreationCallback;this._deleteButton=new na($t["default"].Alert,{lightBoxContext:this._context,closeQuickAlertLightBox:function(){return t._lightbox.Remove()}});this._localizedMessages={submitSave:I["default"].lookup("SC.Alerts.QuickAlert.SubmitSave","Save Alert"),cancel:I["default"].lookup("SC.Alerts.QuickAlert.Cancel","Cancel"),myAlertHome:I["default"].lookup("SC.Alerts.QuickAlert.GoToAlertCenter","Go to Alert Center"),okButton:I["default"].lookup("SC.Alerts.QuickAlert.Ok","OK"),continueButton:I["default"].lookup("SC.Alerts.QuickAlert.Continue","Continue"),unexpectedError:I["default"].lookup("SC.Alerts.QuickAlert.UnexpectedError","An unexpected error occurred while saving your Alert")};this._ids={alertName:"co_quickAlert_alertName",lightbox:"co_quickAlert_lightbox",lightboxSavedAlert:"co_quickAlert_lightboxSavedAlert",submitSave:"co_quickAlert_submitSave",cancel:"co_quickAlert_cancel",myAlertHome:"co_quickAlert_myAlertHome",container:"co_quickAlert_container",subheader:"co_quickAlert_subheader",messageOk:"co_quickAlert_messageOk",messageCancel:"co_quickAlert_messageCancel",savedAlertMessage:"co_quickAlert_savedAlertMessage",deleteParent:"co_quickAlert_submitDelete",submitDelete:"coid_quickAlert_delete",messagePlaceholder:"co_alertMessagePlaceHolder",closeLightBox:"coid_lightBox_closeButton"};this._settings={ids:this._ids,localizedMessages:this._localizedMessages};this._contentHtml=Gt.a.template('<div id="<%-ids.subheader%>"></div><ul id="<%-ids.container%>"></ul>');this._footerHtml=Gt.a.template('<ul class="co_quickAlert_footerContent"><li><button id="<%-ids.submitSave%>" class="co_primaryBtn th_flat" type="button" name="SubmitSave"><%-localizedMessages.submitSave%></button></li><li id="<%-ids.deleteParent%>" class="co_hideState"></li><li><button id="<%-ids.cancel%>" class="co_cancelBtn th_flat" type="button" name="Cancel"><%-localizedMessages.cancel%></button></li><li><button id="<%-ids.myAlertHome%>" class="co_cancelBtn th_flat" type="button" name="MyAlertHome"><%-localizedMessages.myAlertHome%></button></li></ul>');this._saveAlertContent=Gt.a.template('<div id="<%-ids.savedAlertMessage%>"><span><%=localizedMessages.savedAlert%></span></div>');this._saveAlertFooter=Gt.a.template('<ul class="co_quickAlert_footerContent"><li><button id="<%-ids.messageOk%>" class="co_primaryBtn th_flat" type="button" name="ok"><%-localizedMessages.okButton%></button></li><% if (showCancel) {%><li><button id="<%-ids.messageCancel%>" class="co_cancelBtn th_flat" type="button" name="Cancel"><%-localizedMessages.cancel%></button></li><%} %></ul>');this._alertName="";var n=new ji;this._configuration=n.create(this._context)}la.prototype={close:function(){a()("#"+this._ids.lightbox).length>0&&this._lightbox.Remove()},draw:function(){this._drawLightBox();this._deleteButton.setParentDiv(a()("#"+this._ids.deleteParent));this._deleteButton.draw();this._attachEvents();a()("#coid_lightboxOverlay").addClass("co_quickAlert_lightboxOverlay");this._renderContent()},_drawLightBox:function(){this._lightbox.SetTitle(this._configuration._localizedMessages.title);this._lightbox.SetId(this._ids.lightbox);this._lightbox.SetUseOptionalEventHandling(!0);this._lightbox.SetCloseLinkObject({alt:this._localizedMessages.cancel,onclick:this.close.bind(this),id:this._ids.closeLightBox});this._lightbox.GetContentDomElement().innerHTML=this._buildContentHtml();this._lightbox.GetFooterDomElement().innerHTML=this._buildFooterHtml();this._lightbox.Draw()},_enableButtons:function(e){var t="#"+this._ids.submitSave,n="#"+this._ids.myAlertHome,o=!e;a()(t).prop("disabled",o);a()(n).prop("disabled",o)},_showDeleteButton:function(){a()("#"+this._ids.deleteParent).removeClass("co_hideState")},_setupEnableButtonHandlers:function(){var e=a()("#".concat(this._ids.container));e.find("input[type=text]").on("keyup paste cut",this._setupEnableButtonHandlersCallback.bind(this));e.find("input[type=checkbox],select").on("change",this._setupEnableButtonHandlersCallback.bind(this));this._enableButtonsOnHubEvents("Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectEmail","Cobalt.Widget.AddressBookContactListBox.Internal.SelectContact","Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectContact","Cobalt.Widget.AddressBookCollaborationBox.GroupAdded","Cobalt.Widget.AddressBookCollaborationBox.Internal.UnselectGroup","Cobalt.Widget.AddressBookCollaborationBox.AutoSuggestValueSelected")},_setupEnableButtonHandlersCallback:function(){this._enableButtons(!0)},_enableButtonsOnHubEvents:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e]
;y["default"].Subscribe(t,this._setupEnableButtonHandlersCallback.bind(this))}},_buildContentHtml:function(){return this._contentHtml(this._settings)},_buildFooterHtml:function(){return this._footerHtml(this._settings)},_attachEvents:function(){var e=this;a()("#"+this._ids.submitSave).on("click",function(){e._saveAlert(e._settingsForSubmit.bind(e))});a()("#"+this._ids.myAlertHome).on("click",function(){e._validationCheckBeforeAlertCenterNavigation()});a()("#"+this._ids.cancel).on("click",this.close.bind(this))},_getAlertName:function(){return this._alertName},_setAlertName:function(){this._alertName=a()("#"+this._ids.alertName).val();return this._alertName},_renderContent:function(){this._showProgressIndicator();var e=a()("#"+this._ids.container),t=[];this._configuration.getWidgets().forEach(function(n){if(n.setParentDiv&&n.draw){n.setParentDiv(e);t.push(n.draw())}});a.a.when.apply(a.a,t).done(this._renderContentDoneCallback.bind(this)).fail(this._drawErrorMessage.bind(this))},_renderContentDoneCallback:function(){this._hideProgressIndicator();if(this._context.flowState&&this._context.flowState===Ut.EditFlow){this._enableButtons(!1);this._setupEnableButtonHandlers();var e=Vt["default"].AlertTypeData[this._context.alertType];e&&e.ShowDeleteButton&&this._showDeleteButton()}},_showProgressIndicator:function(){var e=a()("#"+this._ids.lightbox),t=e.find("#"+this._ids.subheader)[0];this.progressIndctr=new ee["default"](t,"large","");this.progressIndctr.Draw();e.find("#"+this._ids.container).hide()},_hideProgressIndicator:function(){this.progressIndctr.Hide();a()("#"+this._ids.lightbox).find("#"+this._ids.container).show()},_saveAlert:function(e){this._toggleSaveAlertButton(!0);this._setAlertName();var t=this;a.a.when.apply(a.a,this._validate()).done(function(){t._createAlert(function(n){if(n.error){t._drawErrorMessage(n.error);return}a.a.when.apply(a.a,t._savePreferences()).done(function(){t.close();t._successfulCreationCallback&&t._successfulCreationCallback(n);var o=e();t._savedAlertMessage(o)}).fail(t._drawErrorMessage.bind(t))})}).fail(function(e){t._toggleSaveAlertButton(!1);t._drawErrorMessage(e)})},_toggleSaveAlertButton:function(e){a()("#"+this._ids.submitSave).toggleClass("co_disabled",e).prop("disabled",e);a()("#"+this._ids.myAlertHome).toggleClass("co_disabled",e).prop("disabled",e)},_renderPayload:function(e,t){var n=e.pop();if(!n)return a.a.when();return this._renderPayload(e,t).pipe(function(){return n.renderPayload(t)})},_renderRequest:function(){var e={},t=this;return this._renderPayload(this._configuration.getWidgets().slice(),e).pipe(function(){t._context.flowState===Ut.EditFlow&&a.a.extend(e,Gt.a.pick(t._context.state,["subAlertTypes","dataRoomGuid","error","guid","productView","versionSignature"]));e.alertCustomJson=sa(t._context.alertType,t._context.flowState,e,t._context);return{requestObject:e,alertType:t._context.alertType}})},_drawErrorMessage:function(e){if(e){var t={message:e,referenceElement:a()("#"+this._ids.subheader),status:F["default"].Failure};Object(Qt["default"])(t)}},_validate:function(){var e=[];this._configuration.getWidgets().forEach(function(t){t.validate&&e.push(t.validate())});return e},_preferenceSetter:function(e,t){var n=a.a.Deferred();if(!Zn[e]){var o=I["default"].lookup("SC.Alerts.QuickAlert.InvalidPreference","Failed to save the preferences.");n.reject(o);throw new f["NonUserError"](h["default"].Alert,"Alerts UserPreferences."+e+" does not exist.")}Zn[e](t,this._context.alertType,function(){n.resolve()});return n.promise()},_savePreferences:function(){var e=[],t=this;this._configuration.getWidgets().forEach(function(n){n.getPreferencesToSave&&a.a.each(n.getPreferencesToSave(),function(n,o){e.push(t._preferenceSetter(n,o))})});return e},_settingsForSubmit:function(){var e=a.a.extend(!0,{},this._settings);e.showCancel=!1;var t="<i>"+this._getAlertName()+"</i>";e.localizedMessages.savedAlert=this._getLocalizedSavedAlertMessage(t);return e},_validationCheckBeforeAlertCenterNavigation:function(){var e=this;a.a.when.apply(a.a,this._validate()).done(function(){e._savedAlertMessage(e._settingsForAlertCenter())}).fail(function(t){e._drawErrorMessage(t)})},_settingsForAlertCenter:function(){var e=a.a.extend(!0,{},this._settings);e.showCancel=!0;e.localizedMessages.okButton=this._localizedMessages.continueButton;e.localizedMessages.title=this._localizedMessages.myAlertHome;var t="<i>"+this._setAlertName()+"</i>";e.localizedMessages.savedAlert=I["default"].format("SC.Alerts.QuickAlert.SavedMyAlertHome",{name:t},"You are leaving this page, your alert "+t+" will be saved in the alert center.");var n=this;e.okCallback=function(){n._createAlert(function(e){if(e.error){n._drawErrorMessage(e.error);return}a.a.when.apply(a.a,n._savePreferences()).done(function(){n.close();var t={};t.type=n._context.alertType;var o="<i>"+n._getAlertName()+"</i>",i=n._getLocalizedSavedAlertMessage(o);t.message=i;var a=qt["default"].AccordionSuccessKey;zt.getCache().put(a,t);n._gotoAlertCenter(e)}).fail(n._drawErrorMessage.bind(n))})};return e},_getLocalizedSavedAlertMessage:function(e){return I["default"].format("SC.Alerts.QuickAlert.SavedAlert",{name:e},"Your alert "+e+" has been saved")},_returnToAlertHome:function(){var e=C["default"].Page.AlertsCenter({transitionType:"Default",contextData:C["default"].PageContextData});e.QueryString.returnToDescription=I["default"].lookup("SC.Alerts.QuickAlert.ReturnToDescription","Search Results");e.QueryString.returnTo=window.location.pathname+window.location.search;Ce["default"].PageTransition(C["default"].Absolute(e))},_savedAlertMessage:function(e){var t=new ve["default"];t.SetId(this._ids.lightboxSavedAlert);var n=e.localizedMessages.title||this._localizedMessages.title;t.SetTitle(n);t.SetUseOptionalEventHandling(!0);t.SetCloseLinkObject({alt:this._localizedMessages.cancel,onclick:t.Remove.bind(t)});t.SetAccessibleDescription(e.localizedMessages.savedAlert,!0);t.GetContentDomElement().innerHTML=this._saveAlertContent(e);t.GetFooterDomElement().innerHTML=this._saveAlertFooter(e);t.Draw();a()("#"+this._ids.messageOk).on("click",function(){t.Remove();e.okCallback&&e.okCallback()});e.showCancel&&a()("#"+this._ids.messageCancel).on("click",t.Remove.bind(t))},_createAlert:function(e){var t=this;this._renderRequest().done(function(n){var o=n.requestObject.basics.replaceWithAlert,i=t._context.isTopicAlert||t._context.isSearch;if(o&&i){var a=[{alertGuids:[o],alertType:n.alertType}];t._provider.deleteAlerts(a,function(o){o&&o.successGuids.length&&t._provider.createGenericAlert(n,e)})}else t._context.flowState===Ut.EditFlow?t._provider.updateGenericAlert(n,e):t._provider.createGenericAlert(n,e)}).fail(this._drawErrorMessage.bind(this,this._localizedMessages.unexpectedError))},_gotoAlertCenter:function(){this._returnToAlertHome()}};var da=la;function ca(e){da.call(this,e);this._contentHtml=Gt.a.template('<div id="<%-ids.subheader%>"></div>\n\t\t<div id="<%-ids.messagePlaceholder%>"></div>\n\t\t<ul id="<%-ids.container%>"></ul>')}ca.prototype={draw:function(){this._drawLightBox();this._deleteButton.setParentDiv(a()("#"+this._ids.deleteParent));this._deleteButton.draw();this._attachEvents();a()("#coid_lightboxOverlay").addClass("co_quickAlert_lightboxOverlay");this._renderContent()},_enableSaveButton:function(e){var t=!e;a()("#"+this._ids.submitSave).toggleClass("co_disabled",t).prop("disabled",t)},_setupEnableButtonHandlersCallback:function(){this._enableSaveButton(!0)},_renderContentDoneCallback:function(){this._hideProgressIndicator();if(this._context.flowState===Ut.EditFlow){this._setupEnableButtonHandlers();this._enableSaveButton(!1);var e=Vt["default"].AlertTypeData[this._context.alertType];e&&e.ShowDeleteButton&&this._showDeleteButton()}},_isSaveButtonDisabled:function(){return a()("#"+this._ids.submitSave).prop("disabled")},_validationCheckBeforeAlertCenterNavigation:function(){this._context.flowState===Ut.EditFlow&&this._isSaveButtonDisabled()?this._returnToAlertHome():da.prototype._validationCheckBeforeAlertCenterNavigation.call(this)}};ca.prototype=Object.assign({},da.prototype,ca.prototype);var ua=ca;var fa=function(){var e=this;this._ids={bellIcon:"co_newDocumentToolbar_bellIcon",
anchorId:"co_newDocumentToolbar_bellIcon_anchorId"};this._localizedMessages={toolTipCreate:I["default"].lookup("SC.Document.Widget.NewDocumentToolbar.Alerts.CreateAlert","Create Alert"),toolTipEdit:I["default"].lookup("SC.Document.Widget.NewDocumentToolbar.Alerts.EditAlert","Edit Alert")};this.defaultTooltip=this._localizedMessages.toolTipCreate;this._bellIconElement=Gt.a.template('\n\t\t<div id="<%-ids.bellIcon%>">\n\t\t\t<a id="<%-ids.anchorId%>"\n\t\t\t\ttitle="<%-localizedMessages.toolTipCreate%>" \n\t\t\t\thref="javascript:void(0);" class="th_flat_icon icon_bell outline co_hideState">\n\t\t\t\t<span><%-localizedMessages.toolTipCreate%></span>\n\t\t\t</a>\n\t\t</div>');this._parentDiv="";this._document="";this._context={};this.getEnumAlertType=function(){return};this.getProvider=function(){return};this.getQuickAlertContextFlags=function(){return};this._access=function(){return!1};this.retrieveGenericAlert=function(e,t){var n={alertType:this.getEnumAlertType(),guid:a()(e).data("alertExistsStatus")};n.guid&&this.getProvider().retrieveGenericAlert(n,function(e){t(e)})};this.SetParentDiv=function(e){this._parentDiv=e};this.SetDocumentData=function(e){this._document=e};this._toggleExistsStatus=function(){var e=this,t=I["default"].lookup("SC.Document.Widget.NewDocumentToolbar.Alerts.AlertExistsStatusError","Status for this alert is not available"),n=this._initializeWidget();this._parentDiv.appendChild(n.get(0));this.getProvider().retrieveAlertExistsStatus(this.getEnumAlertType(),this._document.DocFamilyGuid,t,function(t){var o=t&&t.exists,i=n.find("a").removeClass("co_hideState");e._initializeContext(o,t,i);e._bindEvents(i);e._handleAlertVisibility(o,t,i)})};this._initializeWidget=function(){return a()(this._bellIconElement({ids:this._ids,localizedMessages:this._localizedMessages}))};this._initializeContext=function(e,t,n){var o=this;this._context={alertType:this.getEnumAlertType(),contextFlags:this.getQuickAlertContextFlags().Document,flowState:e?Ut.EditFlow:Ut.CreateFlow,documentGuid:this._document.DocGuid,documentFamilyGuid:this._document.DocFamilyGuid,documentTitle:this._document.TitleText,successfulCreationCallback:function(e){o._toggleEditFlow(n,e.guid)}}};this._bindEvents=function(e){var t=this;e.click(function(e){t._createQuickAlert(e.target)})};y["default"].Subscribe("Cobalt.Alert.ConfirmedDeleteItem",function(){e._toggleCreateFlow(a()("#"+e._ids.anchorId))});this._handleAlertVisibility=function(e,t,n){if(e){var o=t.alertVisibility[0].id;if(t.alertVisibility.length>1){var i=t.alertVisibility.filter(function(e){return"Adminprivate"===e.visibility});i.length&&(o=i[0].id)}this._toggleEditFlow(n,o)}};this._toggleEditFlow=function(e,t){e.toggleClass("outline",!1);e.attr("title",this._localizedMessages.toolTipEdit);e.find("span").text(this._localizedMessages.toolTipEdit);e.data("alertExistsStatus",t);this._context.flowState=Ut.EditFlow};this._toggleCreateFlow=function(e){e.toggleClass("outline",!0);e.attr("title",this._localizedMessages.toolTipCreate);e.find("span").text(this._localizedMessages.toolTipCreate);this._context.flowState=Ut.CreateFlow};this._createQuickAlert=function(e){var t=this,n=function(){new ua(t._context).draw()};this._context.flowState===Ut.EditFlow?this.retrieveGenericAlert(e,function(e){t._context.state=e;n()}):n();return!1};this.Draw=function(){this._parentDiv&&(this._access()?this._toggleExistsStatus():a()(this._parentDiv).addClass("co_hideState"))}};var ha=function(){fa.call(this);this._provider=new jt["default"];this.getProvider=function(){return this._provider};this.getQuickAlertContextFlags=function(){return Ui};this.getEnumAlertType=function(){return Vt["default"].AlertTypes.PLDocument};this._access=function(){return k["default"].ViewData.FeatureConfigurations[Vt["default"].AlertTypeData.PLDocument.AccessControl]&&!this.isDocumentBlackListed()&&xe["default"].PageData.CobaltPageHeader.ShowAlertsLink};this.isDocumentBlackListed=function(){var e=[],t=this._document.metaInformation.plcResourceName||this._document.metaInformation.subContentType,n=xe["default"].PageData.DocumentTabView.DisplayOptions;t&&(e=n.PLDocumentAlertBlacklistedResourceTypes.filter(function(e){return t.toUpperCase().indexOf(e.toUpperCase())>-1}));return e.length>0};this._bellIconElement=Gt.a.template('\n\t\t<div id="<%-ids.bellIcon%>">\n\t\t\t<a id="<%-ids.anchorId%>"\n\t\t\t\ttitle="<%-localizedMessages.toolTipCreate%>"\n\t\t\t\thref="javascript:void(0);" class="kh_icon icon-alert plCreateAlertOutline co_hideState <%-disabledClass%>">\n\t\t\t\t<span><%-localizedMessages.toolTipCreate%></span>\n\t\t\t</a>\n\t\t</div>');var e=this._toggleEditFlow;this._toggleEditFlow=function(t,n){e.call(this,t,n);t.toggleClass("plCreateAlertOutline",!1)};var t=this._toggleCreateFlow;this._toggleCreateFlow=function(e){t.call(this,e);e.toggleClass("plCreateAlertOutline",!0)};this._bindEvents=function(e){var t=this;e.hasClass("co_disabled")||e.click(function(e){t._createQuickAlert(e.currentTarget)})};this._initializeWidget=function(){var e=c["default"].IsAnonymousSession||o["default"].displayOptions&&o["default"].displayOptions.isAbstractView;return a()(this._bellIconElement({ids:this._ids,localizedMessages:this._localizedMessages,disabledClass:e?"co_disabled":""}))}},pa=n("H773KgNT"),ma=n.n(pa),ga=n("9/ryOT6E"),va=n.n(ga),Ca=n("RV3XwBj4"),_a={_lightbox:null,parentObject:null,warningText:I["default"].lookup("SC.Document.Widget.Feedback.Warning","Please enter your feedback before submitting"),Draw:function(e){this.parentObject=e;this._lightbox&&this._lightbox.Remove();try{var t=I["default"].lookup("SC.Document.Widget.Feedback.Title","Give Us Feedback");this._lightbox=new ve["default"];this._lightbox.SetTitle(t);this._lightbox.SetClass("co_overlayBox_exitFeedbackForm");var n=this;this._lightbox.SetCloseLinkObject({id:"co_overlayBox_exitFeedbackForm_closeLink",alt:I["default"].format("SC.Document.Widget.Feedback.CloseWindow",{pageTitle:t},"Close the "+t+" window"),onclick:function(){n.Close();return!1}});var o=this._lightbox.GetContentDomElement();o.innerHTML=ke.a.template(ma.a)({descriptionText:I["default"].lookup("SC.Document.Widget.Feedback.Description","Tell us how to improve this resource or your experience on the site:"),text:I["default"].lookup("SC.Document.Widget.Feedback.Text","If you need immediate assistance, please call 1-800-733-2889.")});a()(o).find("#co_pageSurveyComment").on("keyup",function(){var e=a()("#co_warning");e.addClass("co_hideState");e.html("");(e=a()("#co_pageSurveyComment")).removeClass("validation-error");e.attr("aria-invalid","false")});var i=this._lightbox.GetFooterDomElement();i.innerHTML=ke.a.template(va.a)({submitText:I["default"].lookup("SC.Document.Widget.Feedback.Submit","Submit"),cancelText:I["default"].lookup("SC.Document.Widget.Feedback.Cancel","Cancel")});a()(i).find("#co_pageFeedbackSubmit").on("click",function(){n.SaveAndClose();return!1});a()(i).find("#co_pageFeedbackCancel").on("click",function(){n.Close();return!1});this._lightbox.Draw()}catch(e){this.TransitionOut()}},Close:function(){if(null!==this._lightbox){this._lightbox.Remove();this._lightbox=null}},TransitionOut:function(){k["default"].RefreshPage()},SaveAndClose:function(){try{var e=a()("#co_pageSurveyComment"),t=e.val();if(0===t.length){e.addClass("validation-error");e.attr("aria-invalid","true");var n=a()("#co_warning");n.removeClass("co_hideState");n.html(this.warningText);return}document.getElementById("co_pageFeedbackSubmit").disabled=!0;var o=this,i={Title:xe["default"].ViewModelData.DocumentTitle,LegacyId:xe["default"].ViewModelData.LegacyId,Comment:t},r=C["default"].Relative(C["default"].Rest.DocumentFeedback(null));to["default"].Post({vertical:h["default"].Website,relativeUrl:r,jsonObject:i,responseIsJson:!0,successCallback:function(){o._lightbox.Remove();o._lightbox=null;var e=I["default"].lookup("SC.Document.Widget.Feedback.SuccessResult","Thank you for your feedback. If you need immediate assistance, please contact the Reference Attorneys at 1-800-733-2889.");new Ca["default"](e,!1,o.parentObject,["bottom","right"],!0)},failedCallback:function(){o.TransitionOut()}})}catch(e){
_e["default"].ConsoleMessage("Error: "+e,_e["default"].Level.Error,"Cobalt.Website.Feedback.SaveAndClose");this.TransitionOut()}}},ba=function(){};ba.prototype={Id:"co_docToolbarFeedback",ToolTip:I["default"].lookup("SC.Website.Feedback.IconTooltip","Provide Feedback"),CssIcon:"icon-comment",Draw:function(){this.Disabled=c["default"].IsAnonymousSession||o["default"].displayOptions&&o["default"].displayOptions.isAbstractView?"co_disabled":"";this.domStructure=a()('<div><a id="feedbackLnk" href="javascript:void(0)" class="kh_icon '.concat(this.CssIcon," ").concat(this.Disabled,'" title="').concat(this.ToolTip,'"><span>').concat(this.ToolTip,"</span></a></div>"));this._parentObject.appendChild(this.domStructure[0]);var e=this,t=this.domStructure.find("a#feedbackLnk");t.hasClass("co_disabled")||t.click(function(){_a.Draw(e.GetParentDiv())})},SetParentDiv:function(e){this._parentObject=e},GetParentDiv:function(){return this._parentObject}};var ya=ba,Sa=n("N/yI5EfV"),Da=n.n(Sa),Ta=d.a.extend({Id:r["default"].ids.coidBackToResults,parentDiv:null,documentNavigation:null,SetParentDiv:function(e){this.parentDiv=e},SetDocumentNavigation:function(e){this.documentNavigation=e},Draw:function(){if(this.documentNavigation&&this.documentNavigation.hasReturnToLink&&this.documentNavigation.returnTo.Url&&this.documentNavigation.returnTo.Title){var e=[];e[e.length]="<a href='"+this.documentNavigation.returnTo.Url+"'>";e[e.length]="<span class='kh_icon "+r["default"].classes.iconReplyArrow+"'>";e[e.length]="Return to "+this.documentNavigation.returnTo.Title;e[e.length]="</span>";e[e.length]="</a>";a()(this.parentDiv).append(e.join(""))}}}),wa=n("2UegGszP"),Ia=n("kGdu/eGP"),Ea=d.a.extend({init:function(e){this.documentDisplay=e;this.docNavigation=new V["default"]},touchStartSearchTermElement:null,isExpanded:!1,isDataReady:!1,isDrawn:!1,parent:null,termNavigation:null,docNavigation:null,searchTermFlag:null,isFirstTermSelected:!1,isLastTermSelected:!1,hasSearchResults:!1,documentDisplay:null,navigateState:"",directionToMove:r["default"].queryParameters.termNavStateForward,$previousTermButton:null,$searchMenu:null,$nextTermButton:null,SerialNumber:null,SetParentDiv:function(e){this.parent=e},DocumentHasTerms:function(){return this.docNavigation.hasTerms},IsTermNavigationValid:function(){return this.docNavigation.hasNavigationData&&this.docNavigation.hasTerms},IsDocumentNavigationDisabled:function(){return!1},CreateTermNavigationByDirection:function(e){var t=this;t.navigateState=e;if(t.SerialNumber){t.navigateState=r["default"].queryParameters.termNavStateForward;t.isDataReady=!0;t.Draw()}else if(t.docNavigation.hasLoadedData){t.isDataReady=!0;t.Draw()}else if(!t.docNavigation.HasListProvider()&&t.DocumentHasTerms()){t.isDataReady=!0;t.Draw()}else y["default"].Subscribe(r["default"].events.docNavDataIsReady,function(){t.isDataReady=!0;t.Draw()})},ToggleTermNavBox:function(e){var t=e.data.currentWidget;if(t.$searchMenu.length){var n=t.$searchMenu.find("#"+r["default"].ids.termNavigationWidgetDropDownTab),o=t.$searchMenu.find("#"+r["default"].ids.termNavigationWidgetDropDownTabArrow),i=t.$searchMenu.find("#kh_termNavContent");if(!t.$searchMenu.find(e.target).length||t.isExpanded){n.removeClass(r["default"].classes.dropdownTabExpanded).addClass(r["default"].classes.dropdownTabCollapsed);o.removeClass(r["default"].classes.dropdownArrowExpanded).addClass(r["default"].classes.dropdownArrowCollapsed);i.removeClass(r["default"].classes.dropdownBoxExpanded).addClass(r["default"].classes.dropdownBoxCollapsed);t.isExpanded=!1}else{n.removeClass(r["default"].classes.dropdownTabCollapsed).addClass(r["default"].classes.dropdownTabExpanded);o.removeClass(r["default"].classes.dropdownArrowCollapsed).addClass(r["default"].classes.dropdownArrowExpanded);i.removeClass(r["default"].classes.dropdownBoxCollapsed).addClass(r["default"].classes.dropdownBoxExpanded);t.isExpanded=!0}}},UpdateTermNavigationPreference:function(e){var t=e.data.currentWidget,n=t.GetNavigationPreferenceValues(null),i=t.GetNavigationPreferenceValues(a()(e.target).closest("a").get(0));t.termNavigation.searchPreference=i.prefs;o["default"].SaveTermNavigationPreference(i.prefs);t.UpdateTermNavigationPreferenceUI(n,i)},UpdateTermNavigationPreferenceUI:function(e,t){var n=this.$searchMenu.find("#kh_termNavContent"),o=this.$searchMenu.find("#kh_termNav_titleText"),i=this.$searchMenu.find("#kh_termNav_titleIcon"),a=null;if(e&&e.prefs){a=e.prefs;n.find("a").removeClass("is-active");i.removeClass(e.className)}this.ToggleHighlights(a,t.prefs);this.CheckForNextPreviousLinks();var r=t.className;n.find("."+r).parent().addClass("is-active");o.text(t.text);i.addClass(r)},DeterminePreferenceValues:function(e){return e===r["default"].prefs.searchTermsOnly?{text:r["default"].texts.originalTerms,className:"icon-light-highlight",prefs:e}:e===r["default"].prefs.searchWithinTermsOnly?{text:r["default"].texts.searchWithinTerms,className:"icon-dark-highlight",prefs:e}:e===r["default"].prefs.hideSearchTerms?{text:r["default"].texts.hideHighlighting,className:"icon-highlight disabled",prefs:e}:{text:r["default"].texts.allSearchTerms,className:"icon-highlight",prefs:e}},GetNavigationPreferenceValues:function(e){var t=null;if(this.termNavigation)if(e){var n=null;switch(e.className.split(" ",1)[0]){case"kh_termNav_orignal":n="searchTermsOnly";break;case"kh_termNav_searchWithin":n="searchWithinTermsOnly";break;case"kh_termNav_hide":n="hideSearchTerms";break;case"kh_termNav_all":n="allSearchTerms"}n&&(t=r["default"].prefs[n])}else t=this.termNavigation.searchPreference;return this.DeterminePreferenceValues(t)},GetTermNavigationHtml:function(){var e=[],t=this.docNavigation.secondaryHighlightedTerms&&this.docNavigation.secondaryHighlightedTerms.length>0,n=this.docNavigation.highlightedTerms&&this.docNavigation.highlightedTerms.length>0;if(n||t){e[e.length]="<a href='javascript:void(0);' id='"+r["default"].ids.searchTermNavigationPrevious+"' class='kh_icon icon-left-arrow co_floatLeft'>";e[e.length]=I["default"].lookup("SC.Document.TermNavigation.PreviousTerm","Previous Term")+"</a>";e[e.length]="<div id='"+r["default"].ids.searchTermMenu+"'>";e[e.length]="<div id='"+r["default"].ids.termNavigationWidgetDropDownTab+"' class='"+r["default"].classes.dropdownTabCollapsed+"'>";e[e.length]="<div class='"+r["default"].classes.dropdownTab+"'>";e[e.length]="<a href='javascript:void(0);' class='co_dropDownAnchor'>";e[e.length]="<span id='kh_termNav_titleIcon' class='kh_icon'></span>";e[e.length]="<span id='kh_termNav_titleText'/></a>";e[e.length]="</div></div>";e[e.length]="<div id='kh_termNavContent' class='"+r["default"].classes.dropdownBoxCollapsed+"'>";e[e.length]="<h3 class='co_dropDownMenuLabel'>Term Navigation</h3><ul class='co_dropDownMenuList icons'>";if(t&&n){e[e.length]="<li><a href='javascript:void(0);' class='kh_termNav_all'>";e[e.length]="<span class='kh_icon icon-highlight'></span>";e[e.length]="All Terms</a></li>"}if(t){e[e.length]="<li><a href='javascript:void(0);' class='kh_termNav_searchWithin'>";e[e.length]="<span class='kh_icon icon-dark-highlight'></span>";e[e.length]=this.docNavigation.searchWithinQuery+"</a></li>"}if(n){e[e.length]="<li><a href='javascript:void(0);' class='kh_termNav_orignal'>";e[e.length]="<span class='kh_icon icon-light-highlight'></span>";e[e.length]=this.docNavigation.searchQuery+"</a></li>"}e[e.length]="<li><a href='javascript:void(0);' class='kh_termNav_hide'>";e[e.length]="<span class='kh_icon icon-highlight disabled'></span>";e[e.length]=r["default"].texts.hideHighlighting+"</a></li>";e[e.length]="</ul>";e[e.length]="</div></div>";e[e.length]="<a href='javascript:void(0);' id='"+r["default"].ids.searchTermNavigationNext+"' class='kh_icon icon-right-arrow'>";e[e.length]=I["default"].lookup("SC.Document.TermNavigation.NextTerm","Next Term")+"</a>"}e[e.length]="<div id='"+r["default"].ids.termNavigationToasterMessageBox+"' class='";e[e.length]=r["default"].classes.messageBoxContainer+" "+r["default"].classes.hideState+"'>";e[e.length]="<div class='"+r["default"].classes.messageBox+"'><div class='"+r["default"].classes.messageBoxContent
;e[e.length]="' id='"+r["default"].ids.termNavigationToasterMessage+"'>&nbsp;</div></div></div>";return e.join("")},Draw:function(){var e=this;if(e.isDrawn)return;if(!e.isDataReady)return;if(!e.IsTermNavigationValid())return;e.isDrawn=!0;e.termNavigation=new wa["default"](e.navigateState,e.documentDisplay);var t=a()("<div id='"+r["default"].ids.searchTermNavigation+"'>");t.html(e.GetTermNavigationHtml());e.parent.appendChild(t.get(0));e.$previousTermButton=t.find("#"+r["default"].ids.searchTermNavigationPrevious);e.$searchMenu=t.find("#"+r["default"].ids.searchTermMenu);e.$nextTermButton=t.find("#"+r["default"].ids.searchTermNavigationNext);e.isFirstTermSelected=!(e.navigateState==r["default"].queryParameters.termNavStateBackward);e.isLastTermSelected=e.navigateState==r["default"].queryParameters.termNavStateBackward;e.ClickEvent({selector:e.$previousTermButton,func:e.ClickPrevious,params:{currentWidget:e}});e.ClickEvent({selector:e.$nextTermButton,func:e.ClickNext,params:{currentWidget:e}});e.ClickEvent({selector:e.$searchMenu.find(".kh_termNav_all"),func:e.UpdateTermNavigationPreference,params:{currentWidget:e}});e.ClickEvent({selector:e.$searchMenu.find(".kh_termNav_orignal"),func:e.UpdateTermNavigationPreference,params:{currentWidget:e}});e.ClickEvent({selector:e.$searchMenu.find(".kh_termNav_searchWithin"),func:e.UpdateTermNavigationPreference,params:{currentWidget:e}});e.ClickEvent({selector:e.$searchMenu.find(".kh_termNav_hide"),func:e.UpdateTermNavigationPreference,params:{currentWidget:e}});if(e.$previousTermButton.length&&c["default"].EnableIpad){var n=a.a.find("div#"+r["default"].ids.document);n.on("touchstart",e.TouchStartHandler);n.on("touchend",e.TouchEndHandler)}y["default"].Subscribe(r["default"].events.noSearchTermsOnDocument,function(){e.NoSearchTermsFound()});y["default"].Subscribe(r["default"].events.onlySearchTermOnDocument,function(){e.OneSearchTermFound()});y["default"].Subscribe(r["default"].events.firstSearchTermOnDocument,function(){e.OnFirstSearchTermOnDocument()});y["default"].Subscribe(r["default"].events.lastSearchTermOnDocument,function(){e.OnLastSearchTermOnDocument()});y["default"].Subscribe(r["default"].events.moveToNextSearchDocument,function(){e.MoveToNextSearchDocument()});y["default"].Subscribe(r["default"].events.moveToPreviousSearchDocument,function(){e.MoveToPreviousSearchDocument()});var o=e.DeterminePreferenceValues(e.termNavigation.searchPreference);e.UpdateTermNavigationPreferenceUI(null,o);a()(document.body).on("click",{currentWidget:e},e.ToggleTermNavBox)},ToggleHighlights:function(e,t){if(t==e)return;var n=r["default"].classes.searchTerm,o=r["default"].classes.currentSearchTerm,i=r["default"].classes.locateTerm,s=r["default"].classes.hideSearchTerm,l=r["default"].classes.hideCurrentSearchTerm,d=r["default"].classes.hideLocateTerm,c=a()(a()("#co_document").find("span"));c=c.add(a()("#kh_tocContainer").find("span"));var u=new RegExp(/[lL]ocateTerm/),f=c.filter(function(){return u.exec(this.className)});u=new RegExp(/[sS]earchTerm/);var h=c.filter(function(){return u.exec(this.className)}).not(f);u=new RegExp(/[cC]urrent/);var p=h.filter(function(){return u.exec(this.className)});h=h.not(p);var m=f.filter(function(){return u.exec(this.className)});f=f.not(m);if(t==r["default"].prefs.hideSearchTerms){f.removeClass(i+" "+n).addClass(d+" "+s);m.removeClass(i+" "+o).addClass(d+" "+l);h.removeClass(n).addClass(s);p.removeClass(n).addClass(s);p.removeClass(o).addClass(l)}else if(t==r["default"].prefs.searchWithinTermsOnly){f.removeClass(d+" "+s).addClass(i+" "+n);m.removeClass(d+" "+l).addClass(i+" "+o);h.removeClass(n).addClass(s);p.removeClass(n).addClass(s);p.removeClass(o).addClass(l)}else if(t==r["default"].prefs.searchTermsOnly){f.removeClass(i+" "+n).addClass(d+" "+s);m.removeClass(i+" "+o).addClass(d+" "+l);h.removeClass(s).addClass(n);p.removeClass(s).addClass(n);p.removeClass(l).addClass(o)}else if(t==r["default"].prefs.allSearchTerms){f.removeClass(d+" "+s).addClass(i+" "+n);m.removeClass(d+" "+l).addClass(i+" "+o);h.removeClass(s).addClass(n);p.removeClass(s).addClass(n);p.removeClass(l).addClass(o)}},TouchStartHandler:function(e){var t=e.changedTouches[0].target,n=b["default"].GetAncestorOrSelfElement(t,"span",r["default"].classes.searchTerm);n&&(this.touchStartSearchTermElement=n)},TouchEndHandler:function(e){var t=e.changedTouches[0].target,n=b["default"].GetAncestorOrSelfElement(t,"span",r["default"].classes.searchTerm);if(n&&this.touchStartSearchTermElement===n){this.termNavigation.setCurrentSearchTermFromElement(n);this.termNavigation.MoveToNextTerm();e.preventDefault()}n=""},ClickPrevious:function(e){var t=e.data.currentWidget;if(t.$previousTermButton.hasClass("disabled"))return;t.HideMessage();t.isFirstTermSelected=!1;t.isLastTermSelected=!1;t.termNavigation.MoveToPreviousTerm();t.AreNextOrPreviousLinksValid()},ClickNext:function(e){var t=e.data.currentWidget;if(t.$nextTermButton.hasClass("disabled"))return;t.HideMessage();t.isFirstTermSelected=!1;t.isLastTermSelected=!1;t.termNavigation.MoveToNextTerm();t.AreNextOrPreviousLinksValid()},NoSearchTermsFound:function(){if(this.docNavigation.highlightedTerms&&this.docNavigation.highlightedTerms.length>0){this.ShowMessage(r["default"].texts.noTermsOnDocument);setTimeout(this.HideMessage.bind(this),r["default"].timeouts.navigateToDocumentMesssage)}this.isFirstTermSelected=!1;this.isLastTermSelected=!1;this.searchTermFlag="zero";this.AreNextOrPreviousLinksValid()},OneSearchTermFound:function(){this.isFirstTermSelected=!0;this.isLastTermSelected=!0;this.searchTermFlag="one";this.AreNextOrPreviousLinksValid()},OnFirstSearchTermOnDocument:function(){var e=r["default"].texts.firstTermInDocument;if("one"===this.searchTermFlag){e=r["default"].texts.oneTermInDocument;this.isLastTermSelected=!0}this.isFirstTermSelected=!0;this.ShowMessage(e);setTimeout(this.HideMessage.bind(this),r["default"].timeouts.navigateToDocumentMesssage);this.AreNextOrPreviousLinksValid()},OnLastSearchTermOnDocument:function(){var e=r["default"].texts.lastTermInDocument;if("one"===this.searchTermFlag){e=r["default"].texts.oneTermInDocument;this.isFirstTermSelected=!0}this.isLastTermSelected=!0;this.ShowMessage(e);setTimeout(this.HideMessage.bind(this),r["default"].timeouts.navigateToDocumentMesssage);this.AreNextOrPreviousLinksValid()},HideMessage:function(){g["default"].AddClass(this.GetMessageBoxElement(),r["default"].classes.hideState)},ShowMessage:function(e){var t=this.GetMessageElement();if(t){t.innerHTML=e;g["default"].RemoveClass(this.GetMessageBoxElement(),r["default"].classes.hideState)}},GetMessageBoxElement:function(){return document.getElementById(r["default"].ids.termNavigationToasterMessageBox)},GetMessageElement:function(){return document.getElementById(r["default"].ids.termNavigationToasterMessage)},AreNextOrPreviousLinksValid:function(){if(!this.$previousTermButton.length)return;var e=r["default"].classes.hideState,t=a()(this.parent),n=this.$previousTermButton,o=this.$searchMenu,i=this.$nextTermButton;t.removeClass(e);n.removeClass("disabled "+e);o.removeClass("disabled "+e);i.removeClass("disabled "+e);var s=this.docNavigation,l=this.termNavigation;if(this.ShouldHideWidget()){n.addClass(e);o.addClass(e);i.addClass(e);t.addClass(e);return}if(this.searchTermFlag||this.IsDocumentNavigationDisabled()||l.searchPreference==r["default"].prefs.hideSearchTerms){n.addClass("disabled");i.addClass("disabled");"zero"===this.searchTermFlag&&o.addClass("disabled");return}s.IsFirstDocument()&&!this.termNavigation.IsSearchTermNavigationLooped()&&(this.isFirstTermSelected||this.IsFirstSearchTermViewable())&&n.addClass("disabled");s.IsLastDocument()&&!this.termNavigation.IsSearchTermNavigationLooped()&&(this.isLastTermSelected||this.IsLastSearchTermViewable())&&i.addClass("disabled")},ShouldHideWidget:function(){var e=this.docNavigation,t=e.highlightedTerms,n=e.secondaryHighlightedTerms,o=this.termNavigation.searchTermsInDocument;return ke.a.isEmpty(t)&&ke.a.isEmpty(n)||ke.a.isEmpty(o)},IsFirstSearchTermViewable:function(){var e=!0;this.termNavigation&&(e=this.termNavigation.IsSearchTermViewable(r["default"].searchTerm.first));return e},
IsLastSearchTermViewable:function(){var e=!0;this.termNavigation&&(e=this.termNavigation.IsSearchTermViewable(r["default"].searchTerm.last));return e},MoveToNextSearchDocument:function(){var e=this;if(e.IsDocumentNavigationDisabled())return;if(!e.docNavigation.IsLastDocument()){e.directionToMove=r["default"].queryParameters.termNavStateForward;var t=e.GetCitingReferenceSkipLinkOutMessage("next");e.docNavigation.NavigateToNextUrl(function(t){e.MoveToUrl(t)},t)}},MoveToUrl:function(e){if(e){var t=e.replace(/originationContext=[^&#]*/gi,"originationContext=PreviousNextSearchTerm");this.ChangeUrl(t,this.directionToMove)}},MoveToPreviousSearchDocument:function(){var e=this;if(e.IsDocumentNavigationDisabled())return;if(!e.docNavigation.IsFirstDocument()){e.directionToMove=r["default"].queryParameters.termNavStateBackward;var t=e.GetCitingReferenceSkipLinkOutMessage("previous");e.docNavigation.NavigateToPreviousUrl(function(t){e.MoveToUrl(t)},t)}},GetCitingReferenceSkipLinkOutMessage:function(e){var t="";if(this.docNavigation.IsCitingReference())switch(e){case"next":t=I["default"].format("SC.Document.Navigation.SkipLinkOutMessage.Next",{ProductName:Ia["ProductName"]},"The next document is not yet available on ".concat(Ia["ProductName"],". Do you wish to return to the reference list or skip to the next available document?"));break;case"previous":t=I["default"].format("SC.Document.Navigation.SkipLinkOutMessage.Previous",{ProductName:Ia["ProductName"]},"The previous document is not yet available on ".concat(Ia["ProductName"],". Do you wish to return to the reference list or skip to the previous available document?"))}return t},ChangeUrl:function(e,t){var n=r["default"].queryParameters.termNavState+"="+t;n=e.split("?").length>1?"&"+n:"?"+n;var o=e.split("#");window.location.href=o[0]+n},CheckForNextPreviousLinks:function(){var e=this;if(e.termNavigation.FinishedInitializing)e.AreNextOrPreviousLinksValid();else{var t=r["default"].classes.hideState,n=a()("#"+r["default"].ids.searchTermNavigation);n.addClass(t);y["default"].Subscribe(r["default"].events.termNavFinishedInitializing,function(){n.removeClass(t);e.AreNextOrPreviousLinksValid()})}},ClickEvent:function(e){if(!(e.selector&&e.selector.length&&e.func))return;e.isRemoveEvent?c["default"].EnableIpad?e.selector.off("touchend",e.func):e.selector.off("click",e.func):c["default"].EnableIpad?e.selector.on("touchend",e.params,e.func):e.selector.on("click",e.params,e.func)}}),xa=d.a.extend({init:function(){this.stickyOffset=-250},documentDisplay:null,parentObject:null,Name:"TermNavigation",Id:r["default"].ids.coidearchTermNavigation,termNavWidget:null,SetParentDiv:function(e){this.parentObject=e},SetDocumentDisplay:function(e){this.documentDisplay=e},Draw:function(){this.termNavWidget=new Ea(this.documentDisplay);this.termNavWidget.SetParentDiv(this.parentObject);this.termNavWidget.SerialNumber=this.documentDisplay.SourceSerial;this.termNavWidget.CreateTermNavigationByDirection(this.documentDisplay.TermNavigationState);window.scrollBy(0,this.stickyOffset)},setStickyOffset:function(e){this.stickyOffset=e},getStickyOffset:function(){return this.stickyOffset}}),Na=n("qPRTrp4p"),ka=d.a.extend({init:function(){this.tocWidget=new Na["default"];var e=this.tocWidget;this.tocWidget.tocInformationRetrieved=function(t){e.tocXhtml=t.flyoutXhtml;null!=e.tocXhtml&&""!=e.tocXhtml&&e.drawTableOfContentsLink("TOC")}},documentDisplay:null,parentObject:null,Name:"TOC",Id:r["default"].ids.docToolbarTocFlyout,termNavWidget:null,SetParentDiv:function(e){this.parentObject=e},SetDocumentDisplay:function(e){this.documentDisplay=e},Draw:function(){this.tocWidget.SetParentDiv(this.parentObject);this.tocWidget.SetGuid(this.documentDisplay.DocumentGuid);(new T["default"]).GetTocInformation(this.documentDisplay.DocumentGuid,this.tocWidget.tocInformationRetrieved)}}),Aa=function(){};Aa.prototype={Id:r["default"].ids.coidBreadCrumbContainer,ClassName:r["default"].classes.coDocBreadcrumbContainer+" "+r["default"].classes.floatLeft,parentDiv:null,breadCrumbs:[],SetParentDiv:function(e){this.parentDiv=e},AddBreadCrumb:function(e,t){this.breadCrumbs.push({Title:e,Link:t})},ClearBreadCrumbs:function(){this.breadCrumbs=[]},Draw:function(){for(var e=a()(this.parentDiv),t=0;t<this.breadCrumbs.length;++t){0!=t&&a()("<span>&raquo;</span>").appendTo(e);var n,o=this.breadCrumbs[t];n=o.Link?'<a href="'+o.Link+'">'+o.Title+"</a>":o.Title;e.append(n)}}};var Ra=Aa,Pa=n("Ci3UP7Ia"),Ba=d.a.extend({Id:r["default"].ids.coidFullTocTitle,parentDiv:null,fullToc:null,documentGuid:null,SetParentDiv:function(e){this.parentDiv=e},SetFullToc:function(e){this.fullToc=e},SetDocumentGuid:function(e){this.documentGuid=e},Draw:function(){if(this.fullToc&&this.fullToc.SetCategoryPageUrl&&this.documentGuid){a()(this.parentDiv).append('<h1><a class="co_fullTocPublicationHeader"></a></h1>');this.fullToc.SetCategoryPageUrl(".co_fullTocPublicationHeader",this.documentGuid)}}}),La=function(){};La.prototype={Id:r["default"].ids.coidRulebookHeader,Draw:function(){a()("body").addClass("co_hasPageHeader");a()(this._parentObject).addClass("th_dark");var e={rulebookName:this.RulebookName(),rulebookBreadcrumb:this.GetRulebookBreadcrumb()},t="<div class='co_clear'></div><h1 id='co_browsePageLabel'>"+e.rulebookName+"</h1><% if (model.rulebookBreadcrumb) { %><div id='coid_website_breadCrumbTrail' class='co_website_browseBreadCrumbTrail'>"+e.rulebookBreadcrumb+"</div><% } %>";this._parentObject.innerHTML=ke.a.template(t)({model:e})},SetParentDiv:function(e){this._parentObject=e},GetParentDiv:function(){return this._parentObject},SetDocumentDisplay:function(e){this._documentDisplay=e},GetDocumentDisplay:function(){return this._documentDisplay},RulebookName:function(){return o["default"].ViewData.NortTableOfContents.NortLabel.Title},GetRulebookBreadcrumb:function(){if("sec_rule"===Oa(o["default"].ViewData.NortTableOfContents)){var e=Ma(o["default"].ViewData.NortTableOfContents,o["default"].ViewData.DocumentGuid);e.reverse();e.pop();var t=0;e.forEach(function(e){t+=e.length});if(t>180){var n=e.slice(0,e.length);e.shift();return"<span class='breadCrumbTrail_metadata' title='"+n.join(">")+"' >"+e.join(">")+"</span>"}return e.join(">")}}};var Oa=function e(t){if(t.NortLabel.SectionType)return t.NortLabel.SectionType;if(t.Children){for(var n=0;n<t.Children.length;n++){var o=e(t.Children[n]);if(o)return o}return null}return null},Ma=function e(t,n){if(t.DocGuid===n)return[t.NortLabel.Title];if(t.Children){for(var o=0;o<t.Children.length;o++){var i=e(t.Children[o],n);if(i){i.push(t.NortLabel.Title);return i}}return null}return null},Wa=La,Fa=n("CYSsrNyy"),Ha=n("9RA8qIzU"),Ga=n("gDeXh8DW"),Ua=n("/Mj9r7UK"),Va=n("1ZvnjlSQ"),ja=function(e){this.widgetType=e;this.widgetType===r["default"].texts.addNewAnnotationWidget?this.Id=r["default"].ids.newDocumentToolbarAddNewAnnotationWidgetId:this.widgetType===r["default"].texts.annotationShowHideWidget&&(this.Id=r["default"].ids.newDocumentToolbarAnnotationTogglerId)};ja.SHOW_ANNOTATIONS_PREFERENCE_KEY="ShowAnnotationsPreferenceKey";ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED="checked";ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED="unchecked";(ja.prototype={widgetObject:null,parentObject:null,documentDisplay:null,showAnnotations:!0,widgetName:"ToggleAnnotation",wrapperId:null,Draw:function(){var e="",t="",n="",o="",i="";if(void 0!==this.widgetType&&null!==this.widgetType){this.showAnnotations=Q["default"].Preference.Get("Foldering",ja.SHOW_ANNOTATIONS_PREFERENCE_KEY);if(this.widgetType===r["default"].texts.addNewAnnotationWidget){this.Id=r["default"].ids.newDocumentToolbarAddNewAnnotationWidgetId;this.wrapperId=r["default"].ids.newDocumentToolbarAddNewAnnotationWrapperId;e="";n=I["default"].lookup("SC.Document.Widget.Annotation.NewAnnotationIconToolTip",r["default"].texts.newAnnotationIconToolTip);t="kh_icon icon-add-note";o='<span id="'+r["default"].ids.actionMenuBarAddAnnotationWidgetTextSpanId+'"> '+I["default"].lookup("SC.Document.Widget.Annotation.AddAnnotationWidgetSpanText",r["default"].texts.addAnnotationWidgetSpanText)+" </span>"}else if(this.widgetType===r["default"].texts.annotationShowHideWidget){
if(this.showAnnotations===ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED){e=r["default"].classes.annotationShowHideToggle;i=I["default"].lookup("SC.Document.Widget.Annotation.HideAnnotationWidgetSpanText",r["default"].texts.toggleHideAnnotationWidgetSpanText);this.ShowAnnotationsContainer()}else{i=I["default"].lookup("SC.Document.Widget.Annotation.ShowAnnotationWidgetSpanText",r["default"].texts.toggleAnnotationWidgetSpanText);this.HideAnnotationsContainer()}this.Id=r["default"].ids.newDocumentToolbarAnnotationTogglerId;this.wrapperId=r["default"].ids.newDocumentToolbarAnnotationWrapperId;n=I["default"].lookup("SC.Document.Widget.Annotation.AnnotationIconToolTip",r["default"].texts.toggleAnnotationIconToolTip);t="kh_icon icon-notes";o='<span id="'+r["default"].ids.actionMenuBarShowHideAnnotationWidgetTextSpanId+'"> '+i+" </span>"}this.widgetObject=a()('<div id="'+this.wrapperId+'" class="'+e+'" title="'+n+'"> <a href="javascript:void(0);" class = "'+t+'" >'+o+"</a> </div>");this.parentObject.appendChild(this.widgetObject[0]);this._bindEvents();this._subscribeEvents()}},SetParentDiv:function(e){this.parentObject=e},GetAnnotationsContainer:function(){return this._annotationsContainer},SetAnnotationsContainer:function(e){this._annotationsContainer=e},HideAnnotationsContainer:function(){a()(this._annotationsContainer).addClass("co_hideAnnotations")},ShowAnnotationsContainer:function(){a()(this._annotationsContainer).removeClass("co_hideAnnotations")},CheckAnnotationIcon:function(){a()(this.widgetObject).addClass(r["default"].classes.annotationShowHideToggle);a()(this.widgetObject).find("#"+r["default"].ids.actionMenuBarShowHideAnnotationWidgetTextSpanId).text(I["default"].lookup("SC.Document.Widget.Annotation.HideAnnotationWidgetSpanText",r["default"].texts.toggleHideAnnotationWidgetSpanText))},UncheckAnnotationIcon:function(){a()(this.widgetObject).removeClass(r["default"].classes.annotationShowHideToggle);a()(this.widgetObject).find("#"+r["default"].ids.actionMenuBarShowHideAnnotationWidgetTextSpanId).text(I["default"].lookup("SC.Document.Widget.Annotation.ShowAnnotationWidgetSpanText",r["default"].texts.toggleAnnotationWidgetSpanText))},SetWidgetType:function(e){this.widgetType=e},GetWidgetType:function(){return this.widgetType},SetWrapperId:function(e){this.wrapperId=e}})._bindEvents=function(){var e=this;a()(e.widgetObject).click(function(){e.widgetType===r["default"].texts.annotationShowHideWidget?e.showAnnotations===ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED?e._hideDocumentAnnotaion():e._showDocumentAnnotaion():e.widgetType===r["default"].texts.addNewAnnotationWidget&&(Va["default"].isAnnotationsLimitExceeded()?Va["default"].drawAnnotationsLimitLightBox():e._publishEvents())})};ja.prototype._updateUserPreferenceShowAnnotations=function(e,t){Q["default"].Preference.Set("Foldering",e,t,function(){},function(){})};ja.prototype._publishEvent=function(e){var t=new y["default"].Message({},{},e,"1.0");y["default"].Publish(e,t)};ja.prototype._subscribeEvents=function(){var e=this,t="";if(e.widgetType===r["default"].texts.annotationShowHideWidget){t="Cobalt.Foldering.NoteMenu.AddDocumentNoteEvent";y["default"].Subscribe(t,function(){e._showDocumentAnnotaion()});t="Cobalt.DocumentHighlighting.AnnotationsRetrievedEvent";y["default"].Subscribe(t,function(t,n){e._countAnnotations(n.EventData);Va["default"].updateNotesCount(n.EventData)});t="Cobalt.Document.Highlighting.AnnotationAdded";y["default"].Subscribe(t,function(){e._showDocumentAnnotaion()})}if(e.widgetType===r["default"].texts.addNewAnnotationWidget){t="Cobalt.Foldering.Note.Add";y["default"].Subscribe(t,function(t,n){e._increaseAnnotationCount(n)});t="Cobalt.Foldering.Note.Delete";y["default"].Subscribe(t,function(t,n){e._decreaseAnnotationCount(n)});t="Cobalt.Foldering.Note.Undo";y["default"].Subscribe(t,function(t,n){e._increaseAnnotationCount(n)});t="Cobalt.Document.Highlighting.AnnotationAdded";y["default"].Subscribe(t,function(t,n){"Highlight"===n.Data.AnnotationType&&e._increaseAnnotationCount(n)});t="Cobalt.Document.Hightlighting.DeletedHighlight";y["default"].Subscribe(t,function(t,n){e._decreaseAnnotationCount(n)})}};ja.prototype._publishEvents=function(){this.widgetType===r["default"].texts.addNewAnnotationWidget&&this._publishEvent("Cobalt.Foldering.NoteMenu.AddDocumentNoteEvent")};ja.prototype._increaseAnnotationCount=function(){var e=a()("span[id='co_ToggleAnnotationCount']"),t=parseInt(e.text());t++;e.text(t)};ja.prototype._decreaseAnnotationCount=function(){var e=a()("span[id='co_ToggleAnnotationCount']"),t=parseInt(e.text());t--;e.text(t)};ja.prototype._showDocumentAnnotaion=function(){this.ShowAnnotationsContainer();this._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent");this.CheckAnnotationIcon();this.showAnnotations=ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED;this._updateUserPreferenceShowAnnotations(Ua["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,Ua["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED)};ja.prototype._hideDocumentAnnotaion=function(){this.HideAnnotationsContainer();this._publishEvent("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent");this.UncheckAnnotationIcon();this.showAnnotations=ja.SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED;this._updateUserPreferenceShowAnnotations(Ua["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,Ua["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED)};ja.prototype._countAnnotations=function(e){var t=parseInt(null!==e.documentLevelNotes?e.documentLevelNotes.length:0)+parseInt(null!==e.inlineHighlightsAndNotes?e.inlineHighlightsAndNotes.length:0)+parseInt(null!==e.orphanHighlightsAndNotes?e.orphanHighlightsAndNotes.length:0);a()(this.widgetObject).find("span[id='"+r["default"].ids.actionMenuBarShowHideAnnotationWidgetTextSpanId+"']").after("<span id='co_ToggleAnnotationCount'>"+t+"</span>")};var qa=ja,Ka=n("vHt/AHgd"),za=function(){};za.prototype=a.a.extend({},Ka["default"].prototype,{Download:function(e,t){this.Initialize();this.SetRequestContext(e);this._singleDocumentTitle=this.GetDocHeader();this._requestContext.Medium=pn["default"].Download;this._emailAndPrintSelected=!1;try{var n=0,o="QuickDraft",i=null;if(p["default"].Instance)for(var r=p["default"].Instance.GetChunkCount(),s=0;s<r;s++){var l=a()(p["default"].Instance.chunks[s]).find(".kh_standardDocumentAttachment a");if(l.length>0){i=l.attr("href");n++}}else if(1===a()(".kh_standardDocumentAttachment a").length){i=a()(".kh_standardDocumentAttachment a").attr("href");n++}if(1===n){this._singleDocumentTitle.length>0&&(o=this._singleDocumentTitle.replace(/\W+/g," "));window.open(i+"&imageFileName="+o,"_parent")}else{this.OpenDeliveryWaitDialog();var d=C["default"].Relative(C["default"].Rest.InitiateQuickDraftDelivery(null));t.Medium===pn["default"].DownloadMatterMapImage&&(d=C["default"].Relative(C["default"].Rest.InitiateMatterMapImageDelivery(null)));var c=this;to["default"].Post({relativeUrl:d,jsonObject:this._requestContext,trmrWidgetName:"Cobalt.Website.Delivery",trmrWidgetAction:"InitiateQuickDraftDelivery",responseIsJson:!0,successCallback:function(e){c._InitiateDeliverySuccessCallback(e,!1,!1,!1)},failedCallback:function(e){c.ReportUnexpectedDeliveryFailure(e)}})}}catch(e){this.ReportUnexpectedDeliveryFailure(e)}},GetDocHeader:function(){var e=a()("#co_docHeaderContainer .co_title");return null!==e?e.text():"Quick Draft"},OpenDeliveryWaitDialog:function(){var e=I["default"].lookup("SC.Website.Delivery.PreparingForDownload","Preparing For Download"),t=I["default"].format("SC.Website.Delivery.PreparingForDownloadSingleDocument",{Title:this._singleDocumentTitle},"<em>".concat(this._singleDocumentTitle,"</em> is being prepared for download."));this._messageBox.ShowWaitMessage(e,t,!1)}});var Qa=za,$a=n("dBnPS5SA");function Ja(){var e=this;this.deliveryOption=null;this.documentDisplay=null;this._instance=null;this.parentObject=null;this.Id=null;this.defaultContentType="KNOWHOW";this.tooltip=null;this.SetParentDiv=function(t){e.parentObject=t};this.SetDocumentDisplay=function(t){e.documentDisplay=t};this.SetDeliveryOptions=function(e){this.deliveryOption=e
;this.deliveryOption.Medium===pn["default"].DownloadQuickDraft?this.Id=r["default"].ids.newDocumentToolbarDownloadQuickDraftId:this.Id=r["default"].ids.docToolbarDeliveryWidget+this.deliveryOption.Medium};this.Draw=function(){null==e._instance&&(e._instance=(Ja._NextDeliveryNum++).toString());Ja._ObjectMap[this._instance]=this;if(this.deliveryOption.HasAccess){var t=I["default"].lookup("SC.Website.Delivery.Medium."+this.deliveryOption.Medium,this.deliveryOption.Medium),n=a()("<div>").attr("id","co_"+this.deliveryOption.Medium+"Widget"),o="",i="<span>"+t+"</span>";this.tooltip=I["default"].lookup("SC.Website.Delivery.Medium."+this.deliveryOption.Medium+"Tooltip");(void 0===this.tooltip||Object(u["IsNullOrEmpty"])(this.tooltip))&&(this.tooltip=t);this.deliveryOption.Medium===pn["default"].Email?o="kh_icon icon-envelope":this.deliveryOption.Medium===pn["default"].Print?o="kh_icon icon-print":this.deliveryOption.Medium===pn["default"].Download?o="kh_icon icon-download-arrow":this.deliveryOption.Medium===pn["default"].DownloadQuickDraft?o="kh_icon icon-draft-word":this.deliveryOption.Medium===pn["default"].DownloadMatterMapImage&&(o="kh_icon icon-matter-map");if(this.deliveryOption.Medium===pn["default"].DownloadQuickDraft&&this._MultipleDownloadQuickDraftsExist()){this.tooltip=r["default"].texts.toggleDownloadQuickDraftIconToolTip;e.parentObject.appendChild(this._BuildWidgetStructure()[0]);this._BindMainDownloadQuickDraftEvent()}else{a()("<a>").attr({id:"deliveryLinkRow"+this.deliveryOption.Medium,title:this.tooltip,href:"javascript:void(0);"}).html(i).addClass(o).click(function(){Ja.Get(e._instance).DeliverySelected(e.deliveryOption.Medium)}).appendTo(n);e.parentObject.appendChild(n.get(0))}}};this.BuildRequestContext=function(e){var t;if(ge["default"].Instance){t=m["default"].GetObject(r["default"].objectIds.provider).GetDocumentDeliveryMetaInfo(e).ContextData;this.documentDisplay.RulebookMode&&(t.RulebookMode=this.documentDisplay.RulebookMode)}else{var n=[];(t=new hn["default"]).SelectedItems=n;var o=new $a["default"];o.DocumentGuid=this.documentDisplay.DocumentGuid;o.ContentType=this.defaultContentType;n.push(o)}t.Medium=e;t.ContextView=mn["default"].SingleDocument;e===pn["default"].DownloadQuickDraft&&(t.IsQuickDraftDelivery=!0);if(e===pn["default"].DownloadMatterMapImage){var i=0,s=0,l=a()("div.co-TaskBoard").height();a()("div.co-TaskBoard-column").each(function(){var e=parseInt(a()(this).width(),10);e<205&&(e=205);s+=e});var d=a()("#co_docHeaderContainer .co_title").height();l<250&&(l=250);i=3*d+l;s<820&&(s=820);var c=a()("div#coid_website_documentWidgetDiv"),u=c.hasClass("co_disOpt_textSizeSmall"),f=c.hasClass("co_disOpt_textSizeMedium"),h=c.hasClass("co_disOpt_textSizeExtraLarge"),p=1;u?p=1.35:f?p=1.12:h&&(p=.75);t.WebKitHeight=Math.ceil(i/2.6*p);t.WebKitWidth=Math.ceil(s/3.78)}return t};this.DeliverySelected=function(t){this.PublishDeliveryMediumSelectedEvent(t);var n=e.BuildRequestContext(t);if("Generating"==n)return;if(!n||20!==n.Version)throw new f["CobaltError"](h["default"].Website,"The generated delivery request context is invalid.");t===pn["default"].DownloadQuickDraft||t===pn["default"].DownloadMatterMapImage?this.InitiateQuickDraftDownload(n):this.LaunchOptionsDialog(n)};this._MultipleDeliverySelected=function(e){var t=e.target.getAttribute("data-url"),n=null!==a()(".co_title")?a()(".co_title").text():"Quick Draft";this._HideDownloadQuickDraftOptionsModal();window.open(t+"&imageFileName="+n.replace(/\W/g,""),"_parent")};this.PublishDeliveryMediumSelectedEvent=function(e){var t={DeliveryMedium:e},n=new y["default"].Message(t,{},"Cobalt.Website.DeliveryOption.Clicked","1.0");y["default"].Publish("Cobalt.Website.DeliveryOption.Clicked",n)};this.LaunchOptionsDialog=function(e){var t=m["default"].GetObject("Cobalt.Delivery.DeliveryOptionsDialog");t.Initialize();t.SetRequestContext(e);t.RequestHtmlAndDraw()};this.InitiateQuickDraftDownload=function(e){(new Qa).Download(e,this.deliveryOption)};this._BuildWidgetStructure=function(){var e,t=r["default"].ids.actionMenuBarDownloadQuickDraftWidgetTextSpanId,n=r["default"].texts.toggleDownloadQuickDraftIconToolTip;return e=a()('<div id="'+r["default"].ids.downloadQuickDraftToggleWidgetContainer+'" >  <a id="'+r["default"].ids.downloadQuickDraftToggleWidgetAnchorToggle+'" href="javascript:void(0)" class="kh_icon icon-draft-word" title="'+this.tooltip+'"> <span id="'+t+'">'+n+'</span> </a>  <div id="'+r["default"].ids.downloadQuickDraftOptionsModalContainerId+'">      <div id="'+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId+'"> </div>  </div> </div>')};this._BindMainDownloadQuickDraftEvent=function(){var e=this;a()(e.parentObject).find("a#"+r["default"].ids.downloadQuickDraftToggleWidgetAnchorToggle).click(function(){e._BuildOptionsModalStructure();a()("#"+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId).html().trim().length?a()("#"+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId).hasClass(r["default"].classes.hideState)?e._ShowDownloadQuickDraftOptionsModal():e._HideDownloadQuickDraftOptionsModal():a()("#"+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId)[0].appendChild(e.modalDomStructure[0])})};this._BuildOptionsModalStructure=function(){this.modalDomStructure=a()("<div class='"+r["default"].classes.dropdownBoxExpanded+"'>    \x3c!-- toggle between co_dropDownBoxCollapsed and co_dropdownBoxExpanded to show/hide --\x3e     <div class='"+r["default"].classes.dropdownBoxHeader+"'></div>    <div class='"+r["default"].classes.dropdownBoxContent+"'>        <a id='"+r["default"].ids.downloadQuickDraftOptionsModalContainerCloseId+"' class='"+r["default"].classes.widgetCloseIcon+"' href='javascript:void(0);'>Close</a>        <div class='"+r["default"].classes.dropdownBoxContentRight+"'>            <ul>"+this._BuildModalListItems()+"            </ul>            <div class='"+r["default"].classes.clear+"'></div>        </div>    </div>    <div class='"+r["default"].classes.dropdownBoxFooter+"'></div></div>");this._BindOptionsModalEvent()};this._BuildModalListItems=function(){var e=this,t="",n=this._FindStandardDocumentAttachment();null!==n&&n.length>=1&&n.each(function(){var n=a()(this).attr("data-language"),o=a()("<li>"),i=a()("<a>").attr({class:r["default"].classes.downloadQuickDraftAnchor,title:a()(this).text(),href:"javascript:void(0);","data-language":n,"data-url":a()(this).attr("href")}).html(e._CapitalizeFirstLetter(n));o.append(i);t+=o.get(0).outerHTML});return t};this._FindStandardDocumentAttachment=function(){var e=null,t=null;(t=b["default"].GetElementsByClassName("kh_standardDocumentAttachment","div",document.getElementById(r["default"].ids.document))).length>0&&(e=a()(t[0].element).find("a"));return e};this._CapitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};this._MultipleDownloadQuickDraftsExist=function(){var e=!1,t=this._FindStandardDocumentAttachment();null!==t&&t.length>1&&(e=!0);return e};this._BindOptionsModalEvent=function(){var e=this;e.modalDomStructure.find("a#"+r["default"].ids.downloadQuickDraftOptionsModalContainerCloseId).click(function(){e._HideDownloadQuickDraftOptionsModal()});e.modalDomStructure.find("a."+r["default"].classes.downloadQuickDraftAnchor).click(function(t){e._MultipleDeliverySelected(t)})};this._ShowDownloadQuickDraftOptionsModal=function(){a()("#"+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId).removeClass(r["default"].classes.hideState)};this._HideDownloadQuickDraftOptionsModal=function(){a()("#"+r["default"].ids.downloadQuickDraftOptionsModalContainerInnerId).addClass(r["default"].classes.hideState)};Ja._NextDeliveryNum=1;Ja._ObjectMap={};Ja.Get=function(e){return Ja._ObjectMap[e]}}var Ya=function(){};(Ya.prototype={Id:r["default"].ids.newDocumentToolbarRuleBookRedlineId,ToolTipShowRedline:r["default"].texts.toggleShowRuleBookRedlineIconToolTip,ToolTipHideRedline:r["default"].texts.toggleHideRuleBookRedlineIconToolTip,Draw:function(){var e=this;this.Name="RuleBookRedline";this.toggleKeyClass="co_"+this.Name+"Expanded";this.anchorId="co_Toggle"+this.Name+"Widget";this._buildWidgetStructure();this._bindAllRuleBookRedlineToggleEvent()
;Q["default"].Preference.Get("Document","RuleBookRedline")?this._displayRuleBookRedline(e):this._hideRuleBookRedline(e);y["default"].Subscribe("ShowRedlineRelated",function(){e._displayRuleBookRedline(e)});y["default"].Subscribe("HideRedlineRelated",function(){e._hideRuleBookRedline(e)})},SetParentDiv:function(e){this._parentObject=e},GetParentDiv:function(){return this._parentObject},SetDocumentDisplay:function(e){this._documentDisplay=e},GetDocumentDisplay:function(){return this._documentDisplay},RuleBookRedlineExistInDOM:function(){return a()(".co_ruleBookRedline").length}})._buildWidgetStructure=function(){var e=r["default"].ids.actionMenuBarRuleBookRedlineWidgetTextSpanId,t=r["default"].texts.toggleShowRuleBookRedlineWidgetSpanText;this.domStructure=a()('<div id="'.concat(this.anchorId,'" >\n\t\t\t\t\t\t\t  <a href="javascript:void(0)" class="kh_icon icon-pencil-history" title="').concat(this.ToolTipShowRedline,'"> <span id="').concat(e,'">').concat(t,"</span> </a>\n\t\t\t\t\t\t\t</div>"));this._parentObject.appendChild(this.domStructure[0])};Ya.prototype._bindAllRuleBookRedlineToggleEvent=function(){var e=this;a()(e.domStructure).click(function(){if(!a()(e.domStructure).hasClass(e.toggleKeyClass)){e._displayRuleBookRedline(e);y["default"].Publish("ShowRedlineToolbarClicked");Object(we["postUXEvent"])("Cobalt.Document.Rulebook.Redline",{action:"On"})}else{e._hideRuleBookRedline(e);y["default"].Publish("HideRedlineToolbarClicked");Object(we["postUXEvent"])("Cobalt.Document.Rulebook.Redline",{action:"Off"})}})};Ya.prototype._displayRuleBookRedline=function(e){var t=e;if(p["default"].Instance)for(var n=0;n<p["default"].Instance.chunks.length;n++){a()(p["default"].Instance.chunks[n]).find(".co_document del").removeClass("co_hideState");a()(p["default"].Instance.chunks[n]).find(".co_document ins").removeAttr("style")}else{a()(".co_document del").removeClass("co_hideState");a()(".co_document ins").removeAttr("style");a()("#coid_redlineShowHeaderMessage").addClass("co_hideState");if(0===a()("#coid_redlineHeaderMessage").length){var o={message:"Reflecting most recent amendments made "+a()("#redlineStartdate").text()+". ",toolTip:this.ToolTipHideRedline};a()("#co_docHeaderContainer").append(ke.a.template("<ul id='coid_redlineHeaderMessage' class='co_inlineList'><li><%-model.message%></li><li><a id='hideAmendments' title='<%-model.toolTip%>' href='javascript:void(0)'>Hide Amendments</a></li></ul>")({model:o}));a()("#hideAmendments").on("click",function(){t._hideRuleBookRedline(t);y["default"].Publish("HideRedlineToolbarClicked")})}else a()("#coid_redlineHeaderMessage").removeClass("co_hideState")}a()("#co_ToggleRuleBookRedlineWidget>a").removeClass("is-active");a()(e.domStructure).addClass(e.toggleKeyClass);Q["default"].Preference.Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.ruleBookRedlinePref,!0,function(){},function(){});a()(e.domStructure).find("#"+r["default"].ids.actionMenuBarRuleBookRedlineWidgetTextSpanId).text(r["default"].texts.toggleHideRuleBookRedlineWidgetSpanText).parent().attr("title",this.ToolTipHideRedline)};Ya.prototype._hideRuleBookRedline=function(e){var t=e;if(p["default"].Instance)for(var n=0;n<p["default"].Instance.chunks.length;n++){a()(p["default"].Instance.chunks[n]).find(".co_document del").addClass("co_hideState");a()(p["default"].Instance.chunks[n]).find(".co_document ins").css("background-color","white")}else{a()(".co_document del").addClass("co_hideState");a()(".co_document ins").css("background-color","white");a()("#coid_redlineHeaderMessage").addClass("co_hideState");if(0===a()("#coid_redlineShowHeaderMessage").length){var o={message:"Show Amendments",toolTip:this.ToolTipShowRedline};a()("#co_docHeaderContainer").append(ke.a.template("<ul id='coid_redlineShowHeaderMessage' class='co_inlineList'><li><a id='showAmendments' title='<%-model.toolTip%>' href='javascript:void(0)'><%-model.message%></a></li></ul>")({model:o}));a()("#showAmendments").on("click",function(){t._displayRuleBookRedline(t);y["default"].Publish("ShowRedlineToolbarClicked")})}else a()("#coid_redlineShowHeaderMessage").removeClass("co_hideState")}a()("#co_ToggleRuleBookRedlineWidget>a").addClass("is-active");a()(e.domStructure).removeClass(e.toggleKeyClass);Q["default"].Preference.Set(r["default"].prefs.documentPreferenceSpace,r["default"].prefs.ruleBookRedlinePref,!1,function(){},function(){});a()(e.domStructure).find("#"+r["default"].ids.actionMenuBarRuleBookRedlineWidgetTextSpanId).text(r["default"].texts.toggleShowRuleBookRedlineWidgetSpanText).parent().attr("title",this.ToolTipShowRedline)};var Xa=Ya,Za=n("AN91zA3h"),er=function(){};er.prototype={Id:"DummyWidget",ToolTip:"DummyWidget",CssIcon:"",Draw:function(){this.domStructure=a()('<div><a href="javascript:void(0)" class="kh_icon '.concat(this.CssIcon,' co_disabled" title="').concat(this.ToolTip,'"><span>').concat(this.ToolTip,"</span></a></div>"));this._parentObject.appendChild(this.domStructure[0])},SetDummyInfo:function(e,t,n){this.Id=e;this.ToolTip=t;this.CssIcon=n},SetParentDiv:function(e){this._parentObject=e},GetParentDiv:function(){return this._parentObject}};var tr=er;var nr=d.a.extend({init:function(){},parentObject:null,Id:r["default"].ids.docMatterMapsWidget,linkoutDomain:"CustomMatterMaps",SetParentDiv:function(e){this.parentObject=e},SetDocumentGuid:function(e){this.documentGuid=e},GetLinkoutDomain:function(){return"CustomMatterMaps"},Draw:function(){var e=this,t=I["default"].lookup("SC.Document.Widget.MatterMaps.ToolbarButtonText",r["default"].texts.matterMapsEditButtonText),n="/Transfer.html?domainKey="+this.linkoutDomain+"&uri=/mattermaps/perm-guid/"+this.documentGuid,o=a()('<div id="co_docToolbarMatterMapsButtonContainer"><a id="co_matterMapsLink" title="'+t+'" href="'+n+'" class="kh_icon icon-matter-map-edit" target="_blank"><span>'+t+"</span></a></div>");o.on("click",function(){e.PostUXEvent();k["default"].ViewData.FeatureConfigurations["BLOCKSESSIONPAUSEDISPLAY"]||Object(Z["website_ShowResumeResearchLightbox"])("pause",!0)});a()(this.parentObject).append(o)},PostUXEvent:function(){var e="Cobalt.Website.MatterTemplates.ProjectXLinkOut",t=new y["default"].Message({},{},e,"1.0");y["default"].SendClientEvent(t,e)}}),or=n("oBJ49ltx"),ir=d.a.extend({init:function(){this.parentObject=null;this.documentGuid="";this.Name="MatterMaps";this.Id=r["default"].ids.docToolbarMatterMapsWidget},SetParentDiv:function(e){this.parentObject=e},SetDocumentGuid:function(e){this.documentGuid=e},Draw:function(){this.matterMapsWidget=new nr;this.matterMapsWidget.SetParentDiv(this.parentObject);this.matterMapsWidget.SetDocumentGuid(this.documentGuid);this.matterMapsWidget.Draw()},ShowWidget:function(){var e=or["default"],t=e.getItem("HasCustomizeMatterMapAccess"),n=!1;c["default"].isIacOn("IAC-MATTERMAPS-FORCELINKOUTBUTTON")||t&&"GRANT"==t?n=!0:t&&"DENY"==t?n=!1:a.a.ajax({url:"/V1/CustomerInfo/ProductAccess/PROJECTX",async:!1}).done(function(o){n=o.HasAccess;t=n?"GRANT":"DENY";e.setItem("HasCustomizeMatterMapAccess",t)}).fail(function(){n=!1});return n}}),ar=n("bAHpW9UW");function rr(){this.topParentObject=null;this.rightParentObject=null;this.bottomParentObject=null;this.widgetErrors=[];this.rightToolbarSubWidgets=null;this.topToolbarSubWidgets=null;this.featureConfigurations=null;this.alreadyDrawn=!1;this.documentDisplay=null;this.documentData=null;this.documentNavigation=null;this.searchGradingId=null;this.keyCiteAlertWarning="None";this.docketTrackWarning="None";this._isEmailDownloadAvailable=!0;this._isDownloadEnabled=!0;this._quickDraftingFeatureAvailable=!0;this._matterMapImageFeatureAvailable=!1;this.DeliveryMedia=null;this._deliveryHeaderLocation=0;this._viewingHeaderLocation=0;var e=this;this.keyrulesId="23";this.fermiContentTypeIdForUKBooks="102";this.whatsMarket="483";this.selfRegulatoryOrganization="521";this.commentaryIndices="569";this.SetParentDivs=function(t,n,o){e.topParentObject=t;e.rightParentObject=n;e.bottomParentObject=o};this.setFeatureConfigurations=function(t){e.featureConfigurations=t};this.SetDocumentDisplay=function(t){e.documentDisplay=t};this.SetSearchGradingId=function(t){e.searchGradingId=t};this.SetKeyCiteAlertWarning=function(t){
e.keyCiteAlertWarning=t};this.SetIsDownloadEnabled=function(){this._isDownloadEnabled=!e.documentDisplay.IsUserDocument};this.SetDocketTrackWarning=function(t){e.docketTrackWarning=t};this.SetDocumentData=function(t){e.documentData=t};this.ConfigureQuickDraftingFeature=function(){var t=r["default"].collections.standardDocuments;-1!=ke.a.indexOf(t,this.documentData.Collection)?e._quickDraftingFeatureAvailable=!0:e._quickDraftingFeatureAvailable=!1};this.ConfigureMatterMapImageFeature=function(){var t=document.getElementById(r["default"].ids.matterMapImage);e._matterMapImageFeatureAvailable=null!=t};this.SetupRightToolbarDraw=function(){if(!e.documentDisplay.FinishedRendering){var t=r["default"].events.documentRenderComplete;y["default"].Subscribe(t,e.Draw);return}null==e.documentNavigation&&(e.documentNavigation=new V["default"]);if(!e.documentNavigation.hasLoadedData&&!e.documentNavigation.isRefreshingExpiredData){t=r["default"].events.docNavDataIsReady;y["default"].Subscribe(t,e.Draw);if(e.documentNavigation.FetchNextPreviousData(e.documentDisplay.listSource,e.documentDisplay.navigationPath,e.documentDisplay.list,e.documentDisplay.rank))return}e.setWidgets()};this.SetupTopToolbarDraw=function(){var t,n=[];(t=new Ta).SetParentDiv(e.topParentObject);t.SetDocumentNavigation(e.documentNavigation);n.push(t);if(e.documentData.metaInformation.contentTypeId===e.fermiContentTypeIdForUKBooks&&e.FullToc){var i=new Pa["default"];e.FullToc(e.topParentObject,a()("#co_leftColumn"),i);if(!e.featureConfigurations["SMART BREADCRUMB DISPLAY"]){(t=new Ba).SetParentDiv(e.topParentObject);t.SetFullToc(i);t.SetDocumentGuid(e.documentDisplay.DocumentGuid);n.push(t)}}else if(e.documentData.metaInformation.subContentTypeId===e.keyrulesId){(t=new ka).SetDocumentDisplay(e.documentDisplay);n.push(t)}var r=this.createTermNavigationWidget();n.push(r);if(e.documentData.metaInformation.subContentTypeId!==e.keyrulesId&&!this.documentDisplay.RulebookMode&&e.documentData.metaInformation.subContentTypeId!==e.selfRegulatoryOrganization&&e.featureConfigurations["PRACTICAL LAW"]&&(t=e.GeneratePracticalLawBreadCrumbsWidget())){t.SetParentDiv(e.topParentObject);n.push(t)}if(e.documentData.metaInformation.subContentTypeId===e.keyrulesId){(t=new Ra).SetParentDiv(e.topParentObject);t.AddBreadCrumb("Home","/Browse/Home?contextData=(sc.Default)&amp;transitionType=Default");t.AddBreadCrumb("KeyRules","/Browse/Home/SecondarySources/KeyRules?contextData=(sc.Default)&amp;transitionType=Default");t.AddBreadCrumb("Document");n.push(t)}if(o["default"].ViewData.RulebookMode&&o["default"].ViewData.RulebookModeContent&&null!=o["default"].ViewData.NortTableOfContents){(t=new Wa).SetParentDiv(e.topParentObject);n.push(t)}e.SetTopToolbarSubWidgets(n)};this.GeneratePracticalLawBreadCrumbsWidget=function(){return new Ra};this.SetupBottomToolbarDraw=function(){};this.setWidgets=function(){var t=[];if(c["default"].IsAnonymousSession||o["default"].displayOptions&&o["default"].displayOptions.isAbstractView){t.push(this.createDummyWidget("co_docToolbarSearchWithinDocument","Search Within","icon-search"));t.push(this.createDummyWidget("co_docToolbarAddNewAnnotationWidget","New Annotation...","icon-add-note"));t.push(this.createDummyWidget("co_docToolbarToggleAnnotationWidget","Show Annotation","icon-notes"));t.push(this.createDummyWidget("co_docToolbarSaveToWidget","Add To Folder","icon-folder-check"));t.push(this.createDummyWidget("co_docToolbarDeliveryWidgetEmail","Email","icon-envelope"));t.push(this.createDummyWidget("co_docToolbarDeliveryWidgetPrint","Print","icon-print"));t.push(this.createDummyWidget("co_docToolbarDeliveryWidgetDownload","Download","icon-download-arrow"));this._deliveryHeaderLocation+=7;e.SetRightToolbarSubWidgets(t);return}if(!0===e.featureConfigurations.PRERELCONTENTFEAT){var n=new Fa["default"];n.SetDocumentDisplay(e.documentDisplay);t.push(n);var i=new Ha["default"];i.SetDocumentDisplay(e.documentDisplay);t.push(i);var a=new Ga["default"];a.SetDocumentDisplay(e.documentDisplay);t.push(a);this._deliveryHeaderLocation=3}this.createSearchWithinWidget(t);if(e.featureConfigurations.ANNOTATIONS){var s=new qa(r["default"].texts.addNewAnnotationWidget),l=e.documentDisplay.DomId,d=document.getElementById(l);s.SetAnnotationsContainer(d);t.push(s);this._deliveryHeaderLocation++}if(e.featureConfigurations.ANNOTATIONS){s=new qa(r["default"].texts.annotationShowHideWidget),l=e.documentDisplay.DomId,d=document.getElementById(l);s.SetAnnotationsContainer(d);t.push(s)}if(e.featureConfigurations.FOLDERS&&!this.documentDisplay.IsUserDocument&&b["default"].IsFolderable(document)){var u=m["default"].GetObject(r["default"].objectIds.provider).GetFolderingWidget();u.SetDocumentGuid(e.documentDisplay.DocumentGuid);u.SetDocumentDisplay(e.documentDisplay);u.SetShowFolderedStatus(!0);t.push(u);this._viewingHeaderLocation=this._deliveryHeaderLocation+1}this.CheckContentRestriction();this.DeliveryMedia={Email:{Medium:pn["default"].Email,HasAccess:e.featureConfigurations.EMAILDELIVERY&&this._isEmailDownloadAvailable},Print:{Medium:pn["default"].Print,HasAccess:e.featureConfigurations.PRINTDELIVERY},Download:{Medium:pn["default"].Download,HasAccess:e.featureConfigurations.DOWNLOADDELIVERY&&this._isDownloadEnabled&&this._isEmailDownloadAvailable},DownloadQuickDraft:{Medium:pn["default"].DownloadQuickDraft,HasAccess:this.HasDownloadQuickDraftAccess()},DownloadMatterMapImage:{Medium:pn["default"].DownloadMatterMapImage,HasAccess:e.featureConfigurations.DOWNLOADDELIVERY&&this._isDownloadEnabled&&this._isEmailDownloadAvailable&&this._matterMapImageFeatureAvailable}};if(this.DeliveryMedia.Email.HasAccess){var f=new Ja;f.SetDocumentDisplay(e.documentDisplay);f.SetDeliveryOptions(this.DeliveryMedia.Email);t.push(f);this._viewingHeaderLocation++}if(this.DeliveryMedia.Print.HasAccess){var h=new Ja;h.SetDocumentDisplay(e.documentDisplay);h.SetDeliveryOptions(this.DeliveryMedia.Print);t.push(h);this._viewingHeaderLocation++}if(this.DeliveryMedia.Download.HasAccess){var p=new Ja;p.SetDocumentDisplay(e.documentDisplay);p.SetDeliveryOptions(this.DeliveryMedia.Download);t.push(p);this._viewingHeaderLocation++}if(this.DeliveryMedia.DownloadQuickDraft.HasAccess){var g=new Ja;g.SetDocumentDisplay(e.documentDisplay);g.SetDeliveryOptions(this.DeliveryMedia.DownloadQuickDraft);t.push(g);this._viewingHeaderLocation++}if(this.DeliveryMedia.DownloadMatterMapImage.HasAccess&&c["default"].isIacOn("IAC-MATTERMAPS-DELIVER-IMAGE")){var v=new Ja;v.SetDocumentDisplay(e.documentDisplay);v.SetDeliveryOptions(this.DeliveryMedia.DownloadMatterMapImage);t.push(v);this._viewingHeaderLocation++}e.featureConfigurations.PATRONHELP&&this._viewingHeaderLocation++;var C=new at;if(C.DraftingNotesExistInDOM()){C.SetDocumentDisplay(e.documentDisplay);t.push(C);this._viewingHeaderLocation++}if(this.documentDisplay.RulebookModeContent){var _=new Xa;if(_.RuleBookRedlineExistInDOM()){_.SetDocumentDisplay(e.documentDisplay);t.push(_);this._viewingHeaderLocation++}}if(c["default"].isIacOn("IAC-MATTERMAPS-EDITMAP")&&this.documentData.metaInformation.isSearchable){if(null!=document.getElementById(r["default"].ids.matterMapImage)){var y=new ir;if(y.ShowWidget()){y.SetDocumentGuid(e.documentDisplay.DocumentGuid);t.push(y);this._viewingHeaderLocation++}}}if(e.documentData.metaInformation.subContentTypeId===e.keyrulesId){var S=new Za["default"];S.SetAllowDisplayOptionsOnly(!0);S.SetDisplayOptionsDivClass("kh_icon");var D=new Ot["default"];D.SetReadingModeManager(S);t.push(D)}if(xe["default"].PageData&&xe["default"].PageData.LinkBuilderParameters){var T=new ar["default"];T.Initialize(xe["default"].PageData.LinkBuilderParameters);t.push(T)}e.SetRightToolbarSubWidgets(t)};this.createSearchWithinWidget=function(t){var n=m["default"].GetObject(r["default"].objectIds.widget$ToolbarSearchWithinDocument,[{Val:e.documentDisplay}]);n.SetDocumentDisplay(e.documentDisplay);n.SetHideRecentSearches(!0);t.push(n);this._deliveryHeaderLocation++;a()(document).on("click","#co_docToolbarVerticalMenuRight > li > div > a, #co_docToolbarVerticalMenuRight > li > a",function(e){var t=a()("#co_docSearchWithinDropdownContainerInnerContent").hasClass("co_dropdownBoxExpanded")
;!("co_docSearchWithinContainer"===a()(e.currentTarget).parent().attr("id"))&&t&&n.Hide()})};this.createTermNavigationWidget=function(){var t=new xa;t.SetParentDiv(e.topParentObject);t.SetDocumentDisplay(e.documentDisplay);return t};this.createDummyWidget=function(e,t,n){var o=new tr;o.SetDummyInfo(e,t,n);return o};this.HasDownloadQuickDraftAccess=function(){return e.featureConfigurations.DOWNLOADDELIVERY&&this._isDownloadEnabled&&this._isEmailDownloadAvailable&&this._quickDraftingFeatureAvailable};this.Draw=function(){e.SetupRightToolbarDraw();e.SetupTopToolbarDraw();e.SetupBottomToolbarDraw();if(e.documentNavigation.isRefreshingExpiredData||e.alreadyDrawn)return;if(!e.topParentObject)throw new f["CobaltError"](h["default"].Document,"DocToolbar: parentElement is undefined. Call SetParentDiv before calling Draw");var t=document.createElement("div"),n=document.createElement("ul"),i=null;n.id=r["default"].ids.docToolbarVerticalMenuRight;t.appendChild(n);if(null!==e.rightToolbarSubWidgets)for(var s=0;s<e.rightToolbarSubWidgets.length;s++)if(null!=(i=e.rightToolbarSubWidgets[s])){var l=e.getElement(i,n.id,null,"li",s);n.appendChild(l);e.drawWidget(i,l)}var d="<li id='"+r["default"].ids.docToolbarDeliverySubHeader+"' class='"+r["default"].classes.docToolbarSubHeads+"'>"+r["default"].texts.deliveryOptionsActionMenuHeaderText+"</li>",c="<li id='"+r["default"].ids.docToolbarViewingSubHeader+"' class='"+r["default"].classes.docToolbarSubHeads+"'>"+r["default"].texts.ViewingOptionsActionMenuHeaderText+"</li>";a()(n).find("li:eq("+e._deliveryHeaderLocation+")").before(d);a()(n).find("li:eq("+e._viewingHeaderLocation+")").before(c);e.rightParentObject&&e.rightParentObject.appendChild(t);e.alreadyDrawn=!0;var u=new function(){var e=this;this.parent=null;this.documentDisplay=null;this.Name="DocumentNavigation";this.Id="co_docToolbar"+this.Name+"Widget";this.WrapperId="co_"+this.Name+"Widget";this.docNavigation=null;this.isDataReady=!1;this.SetParentDiv=function(t){e.parent=t};this.SetDocumentDisplay=function(t){e.documentDisplay=t};this.Draw=function(){if(!e.isDataReady){if(e.docNavigation)return;if(!e.documentDisplay)return;e.docNavigation=new V["default"];if(e.docNavigation.hasLoadedData)e.isDataReady=!0;else{y["default"].Subscribe(r["default"].events.docNavDataIsReady,function(){e.isDataReady=!0;e.Draw()});var t=e.documentDisplay.NavigationProperties;e.docNavigation.FetchNextPreviousData(t.ListSource,t.NavigationPath,t.List,t.Rank)}}if(!e.docNavigation.hasNavigationData||!e.parent)return;var n=e.GetTitleForDocument(!1),o=I["default"].lookup("SC.Document.DocumentNavigation.PreviousDocument","Previous Document");n||(n=o);var i=e.GetTitleForDocument(!0),s=I["default"].lookup("SC.Document.DocumentNavigation.NextDocument","Next Document");i||(i=s);var l=this.docNavigation,d=l.returnTo?'<a class="'.concat(r["default"].classes.pageFlipperBackToResults,'\n            " href="').concat(l.returnTo.Url,'"><span class="kh_icon \n\t\t\t').concat(r["default"].classes.iconReplyArrow," ").concat(r["default"].classes.floatLeft,'\n\t\t\t">Return to ').concat(l.returnTo.Title,"</span></a>"):"",c=a()('<div id="'.concat(this.WrapperId,'">\n\t\t\t\t<div id="').concat(r["default"].ids.leftPageFlipper,'" class="').concat(r["default"].classes.pageFlipper,'" tabindex="0">\n\t\t\t\t').concat(this.WrapWithClickAnchor('<span class="'.concat(r["default"].classes.pageFlipperHandleStationary,' kh_icon icon-left-arrow">').concat(o,"</span>")),'\n\t\t\t\t<span class="').concat(r["default"].classes.pageFlipperAccordian,'">\n\t\t\t\t').concat(this.WrapWithClickAnchor(n),"\n\t\t\t\t").concat(d,'\n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div id="').concat(r["default"].ids.rightPageFlipper,'" class="').concat(r["default"].classes.pageFlipper,'" tabindex="0">\n\t\t\t\t<span class="').concat(r["default"].classes.pageFlipperAccordian,'">\n\t\t\t\t').concat(this.WrapWithClickAnchor(i),"\n\t\t\t\t").concat(d,"\n\t\t\t\t</span>\n\t\t\t\t").concat(this.WrapWithClickAnchor('<span class="'.concat(r["default"].classes.pageFlipperHandleStationary,' kh_icon icon-right-arrow">').concat(s,"</span>")),"\n   \t\t\t\t</div>\n   \t\t\t</div>")).appendTo(e.parent),u=r["default"].classes.disabled,f=c.find("#"+r["default"].ids.leftPageFlipper);f.find("."+r["default"].classes.pageFlipperNav).click(function(){e.ClickPrevious();return!1});l.IsFirstDocument()&&f.addClass(u);var h=c.find("#"+r["default"].ids.rightPageFlipper);h.find("."+r["default"].classes.pageFlipperNav).click(function(){e.ClickNext();return!1});l.IsLastDocument()&&h.addClass(u);a()(document).ready(function(){a()(".co_pageFlipper").hover(function(){a()(this).toggleClass("is-active")})})};this.IsLeftNavEnabled=function(){return e.IsFlipperEnabled(r["default"].ids.leftPageFlipper)};this.IsRightNavEnabled=function(){return e.IsFlipperEnabled(r["default"].ids.rightPageFlipper)};this.GetTitleForDocument=function(t){var n=e.docNavigation;return n.useInPlanDocumentsOnly?n[t?"nextDocumentInPlanTitle":"previousDocumentInPlanTitle"]:n[t?"nextDocumentUrlAndTitle":"previousDocumentUrlAndTitle"].Title};this.IsFlipperEnabled=function(e){var t=a()("#"+e+"."+r["default"].classes.pageFlipper);if(!t.length)return!1;return!t.hasClass(r["default"].classes.disabled)};this.ClickNext=function(){if(!e.docNavigation.IsLastDocument()){var t="";e.docNavigation.IsCitingReference()&&(t=I["default"].format("SC.Document.Navigation.SkipLinkOutMessage.Next",{ProductName:Ia["ProductName"]},"The next document is not yet available on ".concat(Ia["ProductName"],". Do you wish to return to the reference list or skip to the next available document?")));e.docNavigation.NavigateToNextUrl(e.ChangeUrl,t,!0)}};this.ClickPrevious=function(){if(!e.docNavigation.IsFirstDocument()){var t="";e.docNavigation.IsCitingReference()&&(t=I["default"].format("SC.Document.Navigation.SkipLinkOutMessage.Previous",{ProductName:Ia["ProductName"]},"The previous document is not yet available on ".concat(Ia["ProductName"],". Do you wish to return to the reference list or skip to the previous available document?")));e.docNavigation.NavigateToPreviousUrl(e.ChangeUrl,t,!0)}};this.ChangeUrl=function(e){Object(wt["default"])(e)};this.WrapWithClickAnchor=function(e){return'<a class="'.concat(r["default"].classes.pageFlipperNav,'" href="javascript:void(0);">').concat(e,"</a>")}};u.SetDocumentDisplay(e.documentDisplay);u.SetParentDiv(t);u.Draw();(t=document.createElement("div")).id=r["default"].ids.coidDocTopToolbarInner;t.className=r["default"].classes.coDocTopToolbarInner;e.topParentObject.appendChild(t);if(null!==e.topToolbarSubWidgets)for(s=0;s<e.topToolbarSubWidgets.length;s++)if(null!==(i=e.topToolbarSubWidgets[s])){var p=e.getElement(i,t.id,null,"div",s);t.appendChild(p);e.drawWidget(i,p)}if(e.documentDisplay.RulebookModeContent){o["default"].displayOptions.isNewDocumentView&&y["default"].Publish("Cobalt.Widget.Document.Rulebook.Bootstrap");var m=document.createElement("div");m.setAttributeNode(document.createAttribute("related-content-summary-widget"));a()(".co_section").prepend(m)}try{if(o["default"].displayOptions.isNewDocumentView){Da.a.bootstrap(Da.a.element("#co_contentWrapper")[0],["document"]);e.RenderRelatedContent()}}catch(t){var g="Error loading angular bootstrap: "+t.toString();e.widgetErrors.push(g)}0==a()("#"+r["default"].ids.docToolbarDeliverySubHeader).children().length&&a()("#"+r["default"].ids.docToolbarDeliverySubHeader).css("display","none");0==a()("#"+r["default"].ids.docToolbarViewingSubHeader).children().length&&a()("#"+r["default"].ids.docToolbarViewingSubHeader).css("display","none");if(e.widgetErrors.length>0)throw new f["CobaltError"](h["default"].Document,e.widgetErrors.join("\n"));e.SetupUtilityWidgets();e.ChunkedDocumentsWidgetBinder()};this.ChunkedDocumentsWidgetBinder=function(){var e=this;y["default"].Subscribe(r["default"].events.chunkRendered,function(){e.RenderRelatedContent();e.SetupUtilityWidgets()})};this.SetupUtilityWidgets=function(){if(!0===m["default"].IsRegistered(r["default"].objectIds.widget$KnowHowDocumentShared)){var e=m["default"].GetObject(r["default"].objectIds.widget$KnowHowDocumentShared);e.PracticalLawDocumentHistorySetup()
;e.JurisdictionsExpandCollapseSetup()}};this.RenderRelatedContent=function(){var e='<a id="kh_relatedContentOffset"></a>';e+='<div class="related-content-widget co_excludeAnnotations co_disableHighlightFeatures"></div>';if(0===Da.a.element(document.querySelector('.related-content-widget[ng-show="hasData"]')).length){var t=a()("[id ^= co_docContentBody]");if(t.length>0){t.append(e);var n=Da.a.element(document.querySelector("#co_document")).injector(),o=Da.a.element(document.querySelector(".related-content-widget"));n.invoke(["$compile",function(e){var t=o.scope();e(o)(t)}])}}};this.SetRightToolbarSubWidgets=function(e){this.rightToolbarSubWidgets=e};this.SetTopToolbarSubWidgets=function(e){this.topToolbarSubWidgets=e};this.drawWidget=function(t,n){try{t.SetParentDiv(n);t.Draw()}catch(n){var o="Error loading "+t.Name+" widget: "+n.toString();e.widgetErrors.push(o)}};this.getElement=function(e,t,n,o,i){var a=document.createElement(o);a.id=Object(u["IsNotNullOrEmpty"])(e.Id)?e.Id:t+r["default"].texts.childWidget+i;Object(u["IsNotNullOrEmpty"])(n)?a.className=n:Object(u["IsNotNullOrEmpty"])(e.ClassName)&&(a.className=e.ClassName);return a};this.CheckContentRestriction=function(){this.SetIsDownloadEnabled();if(null!=e.documentDisplay.DocumentGuid&&e.featureConfigurations["CONTENT DLVRY RSTRCT"]){var t=new E["default"](h["default"].Website,C["default"].Relative(C["default"].Rest.IsDocumentContentRestricted({guid:e.documentDisplay.DocumentGuid})));t.SetTimeout(1e4);var n=t.SynchronousGet();JSON.parse(n.ResponseText).IsContentRestricted&&(this._isEmailDownloadAvailable=!1)}this.ConfigureQuickDraftingFeature();this.ConfigureMatterMapImageFeature()}}var sr={Document:"Document",DualSearchDocument:"DualSearchDocument",DocumentUnavailable:"DocumentUnavailable",DocumentPersisted:"DocumentPersisted"};var lr=n("W+JnEuI7");function dr(){this.documentGuid=null;this.category=null;this.contextData=null;this.originationContext=null;this.rank=null;this.docSource=null;this.documentCollection=null;this.entityId=null;this.entityType=null}dr.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setOriginationContext:function(e){this.originationContext=e},getOriginationContext:function(){return this.originationContext},setCategory:function(e){this.category=e},getCategory:function(){return this.category},setContextData:function(e){this.contextData=e},getContextData:function(){return this.contextData},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setRank:function(e){this.rank=e},getRank:function(){return this.rank},setDocumentCollection:function(e){this.documentCollection=e},getDocumentCollection:function(){return this.documentCollection},setEntityId:function(e){this.entityId=e},getEntityId:function(){return this.entityId},setEntityType:function(e){this.entityType=e},getEntityType:function(){return this.entityType},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&e instanceof dr&&this.documentGuid===e.getDocumentGuid()&&this.category===e.getCategory()&&this.contextData===e.getContextData()&&this.originationContext===e.getOriginationContext()&&this.rank===e.getRank()&&this.docSource===e.getDocSource()&&this.documentCollection===e.getDocumentCollection()&&this.entityId===e.getEntityId()&&this.entityType===e.getEntityType()&&(t=!0);return t}};var cr=n("FUXVrSqe"),ur=n("e+NcN1ex");function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(e,o.key,o)}}function pr(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var vr=function(e){(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&gr(e,t)})(t,cr["default"]);function t(e){var n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);(n=pr(this,mr(t).call(this,e)))._initializeEventHandlers();return n}(function(e,t,n){t&&hr(e.prototype,t);n&&hr(e,n)})(t,[{key:"_initializeEventHandlers",value:function(){this._handleClickOnDropdownItems=this._handleClickOnDropdownItems.bind(this);this._handleKeydownOnDropdownItems=this._handleKeydownOnDropdownItems.bind(this)}},{key:"_attachEventListeners",value:function(){this.$dropdownItems=this.$menuContainer.find("."+ur["MenuDefaults"].itemClass+" > a");this.$dropdownItems.off("click",this._handleClickOnDropdownItems);this.$dropdownItems.off("keydown",this._handleKeydownOnDropdownItems);this.$dropdownItems.click(this._handleClickOnDropdownItems);this.$dropdownItems.keydown(this._handleKeydownOnDropdownItems)}},{key:"_handleSelectMenuItem",value:function(){this._triggerEvent("collapse");return!0}},{key:"_handleClickOnDropdownItems",value:function(e){a()(e.target).closest("li").hasClass(ur["MenuDefaults"].disabledItemClass)?e.preventDefault():this._handleSelectMenuItem()}},{key:"_handleKeydownOnDropdownItems",value:function(e){var t=a()(e.target),n=this.$dropdownItems.first(),o=this.$dropdownItems.last(),i=a()(e.target).parent().prev().find("a"),r=a()(e.target).parent().next().find("a");switch(e.which){case ao["default"].ESCAPE:this._triggerEvent("collapse");break;case ao["default"].UP:if(t.is(n)){o.focus();this._triggerEvent("focus",o)}else{i.focus();this._triggerEvent("focus",i)}e.preventDefault();break;case ao["default"].DOWN:if(t.is(o)){n.focus();this._triggerEvent("focus",n)}else{r.focus();this._triggerEvent("focus",r)}e.preventDefault();break;case ao["default"].HOME:e.preventDefault();n.focus();this._triggerEvent("focus",n);break;case ao["default"].END:e.preventDefault();o.focus();this._triggerEvent("focus",o);break;case ao["default"].TAB:e.shiftKey&&e.preventDefault();this._triggerEvent("collapse")}}},{key:"itemType",get:function(){return ur["ItemTypes"].navigation}}]);return t}(),Cr=n("NVwz6vXo");function _r(){this.menuOpts={disabledItemClass:"co_disabled"};this.buttonOpts={dropdownIdPrefix:"coid_relatedInfo_subCategory_",shouldExpandOnHover:!0}}_r.prototype.getTabNavNoCountObject=function(){throw new f["NonUserError"](h["default"].Website,"AbstractListPreviewWidget.getTabNavNoCountObject must be overridden.")};_r.prototype.draw=function(e){var t=this,n=a()("#co_".concat(e.category,"NavAnchor"));n.attr({role:"button",tabindex:"0"});this.opts=e;this.buttonOpts.existingButton=n;this.menuOpts.ariaLabelForContentContainer=n.text();return this._fetchItems().then(function(e){var n=e.map(function(e){return t._processMenuItem(e)});t.menuOpts.items=n;t.menu=new vr(t.menuOpts);t.menuButton=new Cr["default"](t.menu,t.buttonOpts);t.menuButton.draw()})};_r.prototype._getCategoryDropdownParams=function(){var e=new dr;e.setDocumentGuid(this.opts.documentGuid);e.setCategory(this.opts.category);e.setContextData(C["default"].PageContextData);e.setOriginationContext(this.opts.originationContext);e.setDocSource(this.opts.docSource);e.setRank(this.opts.rank);e.setDocumentCollection(this.opts.documentCollection);e.setEntityId(this.opts.entityId);e.setEntityType(this.opts.entityType);return e};_r.prototype._fetchItems=function(){var e=this._getCategoryDropdownParams(),t=a.a.Deferred();yi.requestData(e,function(e){t.resolve(e)});return t.promise()};_r.prototype._processMenuItem=function(e){var t=this.getTabNavNoCountObject(),n="coid_relatedInfo_subCategory_link".concat(e.id),o=e.link,i=e.displayName
;"wlnIPToolsOverview.PatentFamilyTree"===e.id&&(o+="#PatentFamilyTree=patAndAppCount=".concat(e.count));t[e.id]||(i=I["default"].format("SC.Website.Views.Shared.TabViews.TabName",{TabName:e.displayName,count:e.count},"".concat(e.displayName," (").concat(e.count,")")));return{content:i,id:n,href:o,isDisabled:0===e.count&&!t[e.id]}};function br(){this.parentElement=null;this.documentGuid=null;this.category=null;this.selectedCategory=null;this.originationContext=null;this.docSource=null;this.rank=null;this.documentCollection=null;this.contentElement=null;this.previewItem=null;this.entityId=null;this.entityType=null}br.prototype.setRank=function(e){this.rank=e};br.prototype.setDocSource=function(e){this.docSource=e};br.prototype.setParentElement=function(e){this.parentElement=e};br.prototype.setDocumentGuid=function(e){this.documentGuid=e};br.prototype.setCategory=function(e){this.category=e};br.prototype.setSelectedCategory=function(e){this.selectedCategory=e};br.prototype.setOriginationContext=function(e){this.originationContext=e};br.prototype.setDocumentCollection=function(e){this.documentCollection=e};br.prototype.setContentElement=function(e){this.contentElement=e};br.prototype.setPreviewItem=function(e){this.previewItem=e};br.prototype.setEntityId=function(e){this.entityId=e};br.prototype.setEntityType=function(e){this.entityType=e};br.prototype.getTabNavNoCountObject=function(){throw"AbstractListPreviewWidget.prototype.getTabNavNoCountObject must be overridden."};br.prototype.showDropdown=function(){y["default"].Publish("Cobalt.RelatedInfo.Widget.Preview.AbstractListPreviewWidget.showDropdown",new y["default"].Message({category:this.category}));var e=document.getElementById("co_"+this.category+"NavAnchor");void 0!==e&&null!==e&&(e.style.display="block")};br.prototype.draw=function(){var e=this,t=new dr;t.setDocumentGuid(e.documentGuid);t.setCategory(e.category);t.setContextData(C["default"].PageContextData);t.setOriginationContext(e.originationContext);t.setDocSource(e.docSource);t.setRank(e.rank);t.setDocumentCollection(e.documentCollection);t.setEntityId(e.entityId);t.setEntityType(e.entityType);yi.requestData(t,function(t){e.addListItemsCallback.call(e,t)})};br.prototype.addListItemsCallback=function(e){var t=document.createElement("ul");if(ne["default"].isNotNullOrUndefined(e)&&e.length>0)for(var n=this.getTabNavNoCountObject(),o=0;o<e.length;o++){var i=e[o],a=document.createElement("li");this.selectedCategory===i.id&&(a.className="co_relatedInfo_Selected_NavItem");var r=i.displayName;if(ne["default"].isNotNullOrUndefined(n[i.id])&&n[i.id]){var s=document.createElement("a");s.id="coid_relatedInfo_subCategory_link"+i.id;s.className="co_relatedInfo_primaryLink";s.href=i.link;s.innerHTML=r;a.appendChild(s)}else if("wlnIPToolsOverview.ClaimsHistory"===i.id||"wlnIPToolsOverview.ClaimsLocator"===i.id)if(i.count>0){(l=document.createElement("a")).id="coid_relatedInfo_subCategory_link"+i.id;l.className="co_relatedInfo_primaryLink";l.href=i.link;l.innerHTML=r;"wlnIPToolsOverview.PatentFamilyTree"===i.id&&(l.href+="#PatentFamilyTree=patAndAppCount="+i.count);a.appendChild(l)}else{(d=document.createElement("div")).id="coid_relatedInfo_ListPreviewItem_"+i.id;d.innerHTML=r;a.appendChild(d)}else if(i.count>0){var l;(l=document.createElement("a")).id="coid_relatedInfo_subCategory_link"+i.id;l.className="co_relatedInfo_primaryLink";l.href=i.link;l.innerHTML=r+" ("+I["default"].renderInteger(i.count)+")";a.appendChild(l)}else{var d;(d=document.createElement("div")).id="coid_relatedInfo_ListPreviewItem_"+i.id;d.innerHTML=r+" (0)";a.appendChild(d)}t.appendChild(a);this.showDropdown()}this.parentElement.appendChild(t)};var yr,Sr=br,Dr=yr=c["default"].isIacOn("IAC-A11Y-DROPDOWN-DOCUMENT-TABS")?_r:Sr;function Tr(){Dr.call(this)}Tr.prototype=new Dr;Tr.prototype.constructor=Tr;Tr.prototype.getTabNavNoCountObject=function(){var e={StatuteHistory:!0,"StatuteHistory.Graphical":!0,riLegislativeTimeline:!0};return e};var wr=Tr;function Ir(){Dr.call(this)}Ir.prototype=new Dr;Ir.prototype.constructor=Ir;Ir.prototype.getTabNavNoCountObject=function(){var e={ContextAnalysis:!0};return e};var Er=Ir;function xr(){Dr.call(this)}xr.prototype=new Dr;xr.prototype.constructor=xr;xr.prototype.getTabNavNoCountObject=function(){var e={ContextAnalysis:!0};return e};var Nr=xr;function kr(){Dr.call(this)}kr.prototype=new Dr;kr.prototype.constructor=kr;kr.prototype.getTabNavNoCountObject=function(){return{}};var Ar=kr;function Rr(){Dr.call(this)}Rr.prototype=new Dr;Rr.prototype.constructor=Rr;Rr.prototype.getTabNavNoCountObject=function(){var e={"StatuteHistory.Graphical":!0};return e};Rr.prototype.draw=function(e){this.getRelatedProfilesCallback(e)};Rr.prototype.getRelatedProfilesCallback=function(e){var t=e.RelatedProfiles.Profiles,n=document.createElement("ul");this.parentElement.appendChild(n);for(var o=0;o<t.length;o++)this.getListItemForRelatedProfile(n,t[o].ProfileType,t[o].ProfileName,t[o].url,t[o].isCurrentDoc)};Rr.prototype.getListItemForRelatedProfile=function(e,t,n,o,i){var a=document.createElement("li");a.id="coid_relatedProfiles_ListPreviewItem_"+t;if(i){var r=document.createElement("div");a.appendChild(r);r.id="coid_relatedInfo_ListPreviewItem_"+t;r.innerHTML=n}else{r=document.createElement("a");a.appendChild(r);r.id="coid_relatedProfiles_subCategory_link"+t;r.href=o;r.className="co_relatedInfo_primaryLink";r.innerHTML=n}e.appendChild(a)};var Pr=Rr;function Br(){Dr.call(this)}Br.prototype=new Dr;Br.prototype.constructor=Br;Br.prototype.getTabNavNoCountObject=function(){return{}};var Lr=Br;function Or(){Dr.call(this)}Or.prototype=new Dr;Or.prototype.constructor=Or;Or.prototype.getTabNavNoCountObject=function(){return{}};var Mr=Or;function Wr(){Dr.call(this)}Wr.prototype=new Dr;Wr.prototype.constructor=Wr;Wr.prototype.getTabNavNoCountObject=function(){return{}};var Fr=Wr;function Hr(){Dr.call(this)}Hr.prototype=new Dr;Hr.prototype.constructor=Hr;Hr.prototype.getTabNavNoCountObject=function(){var e={wlnIPToolsOverview:!0};return e};var Gr=Hr;function Ur(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(e,o.key,o)}}var Vr=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e);this.opts={docSource:t,rank:n}}(function(e,t,n){t&&Ur(e.prototype,t);n&&Ur(e,n)})(e,[{key:"addTabPreview",value:function(e){if(!this._isValidCategory(e.category))return;var t=this._overrideWidget(e.category);if(t){var n=Object.assign({},e,this.opts);t.draw(n)}}},{key:"_overrideWidget",value:function(e){var t;switch(e){case"StatuteHistory":t=new wr;break;case"ContextAnalysis":t=new Er;break;case"riContextAnalysis":t=new Nr;break;case"StatuteCitingReferences":t=new Ar;break;case"Profiler":t=new Pr;break;case"wlncCitingReferences":t=new Lr;break;case"kcCitingReferences":t=new Mr;break;case"riMedicalReferences":t=new Fr;break;case"wlnIPToolsOverview":t=new Gr}return t}},{key:"_isValidCategory",value:function(e){return["StatuteHistory","ContextAnalysis","riContextAnalysis","Profiler","wlncCitingReferences","kcCitingReferences","StatuteCitingReferences","riMedicalReferences","wlnIPToolsOverview"].indexOf(e)>=0}}]);return e}(),jr=n("tAjEPIkd"),qr=n("88X6RTIu"),Kr=n("UM4/E5wA"),zr=n.n(Kr);function Qr(){this._poweredByLightbox=null;this._contentHtml=ke.a.template(zr.a)(this.buildFlagInfoData());this._footerHtml='<ul>  <li><a class="co_primaryBtn" id="co_poweredByKeyCiteClose" href="#" onclick="">'+I["default"].lookup("SC.Website.PoweredByKeyCiteBox.CloseButton","Close")+"</a></li></ul>"}Qr.prototype.buildFlagInfoData=function(){var e={yellowFlag:{imageUrl:h["default"].GetUrl(h["default"].Images,"/images/v1/flag_yellow_small.png"),imageHint:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.KeyCiteYellowFlag","KeyCite Yellow Flag"),casesAndAdministrativeDecisions:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph4.YellowFlag.CasesAndAdministrativeDecisions","• Cases & Administrative Decisions - some negative treatment, but not reversed or overruled"),
statutesAndRegulations:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph4.YellowFlag.StatutesAndRegulations","• Statutes & Regulations - proposed legislation or rule available, court decision has questioned validity, or prior version received negative treatment from a court"),patentsAndTrademarks:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph4.YellowFlag.PatentsAndTrademarks","• Patents & Trademarks - not infringed, but did not rule on its validity, all or part valid and not infringed, held a trademark was not diluted, or held a trademark was not violated by unfair competition")},redFlag:{imageUrl:h["default"].GetUrl(h["default"].Images,"/images/v1/flag_red_small.png"),imageHint:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.KeyCiteRedFlag","KeyCite Red Flag"),casesAndAdministrativeDecisions:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph5.RedFlag.CasesAndAdministrativeDecisions","• Cases & Administrative Decisions - no longer good for at least one point of law"),statutesAndRegulations:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph5.RedFlag.StatutesAndRegulations","• Statutes & Regulations - amended, repealed, superseded, or held unconstitutional or preempted in whole or in part"),patentsAndTrademarks:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph5.RedFlag.PatentsAndTrademarks","• Patents & Trademarks - all or part is invalid, invalid and not infringed, all or part of a patent is unenforceable due to the patentee's inequitable conduct, or a trademark is cancelled")},blueFlag:{imageUrl:h["default"].GetUrl(h["default"].Images,"/images/v1/flag_blue_small.png"),imageHint:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.KeyCiteBlueFlag","KeyCite Blue Flag"),description:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph6","A blue-striped flag indicates a document has been appealed to the U.S. Courts of Appeals or the U.S. Supreme Court (excluding appeals originating from agencies).")},paragraphs:{keyCiteDescription:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph1","KeyCite is the powerful citation research service available exclusively on Westlaw. Use KeyCite at every step of your research to help you find, understand, and update the law."),keyCiteWestKeyNumberIntegration:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph2","The KeyCite citation network is integrated with the West Key Number system. This integration allows KeyCite to connect documents that discuss the same legal issues with the analytical materials that explain those issues."),keyCiteFlags:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph3","Once you have found a document upon which to base your legal argument, KeyCite Flags alert you to negative references or events that may impact the validity of that document."),keyCiteReferences:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.Paragraph7","KeyCite citing references help you investigate how other authorities have interpreted that document.  If your document is a court decision, KeyCite History tells you if that decision was reversed or upheld in a later appeal."),forMoreInfo:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.ForMoreInfo","For more information on using KeyCite,  please see the KeyCite tutorial in the Training & Support Center.")}};qr["default"].isKeyCiteOverrulingsAllowed()&&(e.overrulingFlag={imageUrl:h["default"].GetUrl(h["default"].Images,"/images/v1/caution_orange_small.png"),imageHint:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.KeyCiteOverrulingFlag","Implied Overruling Risk Warning"),description:I["default"].lookup("SC.Website.PoweredByKeyCiteBox.KeyCiteOverrulingFlag.Description","The Overruling Risk warning indicates that a document may no longer be good for at least one point of law based on its reliance on an overruled or otherwise invalid prior decision.")});return e};Qr.prototype.closeDialog=function(){if(null!=this._poweredByLightbox){this._poweredByLightbox.Remove();this._poweredByLightbox=null}};Qr.prototype.openDialog=function(){var e=this;this._poweredByLightbox=new ve["default"];this._poweredByLightbox.SetId("co_keycitePowered");this._poweredByLightbox.SetClass("co_searchWidget_poweredby_lightboxclass");this._poweredByLightbox.SetCloseLinkObject({id:"co_searchWidget_poweredby_popupclose",alt:"Close",onclick:function(){e.closeDialog()}});this._poweredByLightbox.SetTitle(I["default"].lookup("SC.Website.KeyCite.Lightbox.Title","KeyCite&reg;"));this._poweredByLightbox.GetContentDomElement().innerHTML=this._contentHtml;this._poweredByLightbox.GetFooterDomElement().innerHTML=this._footerHtml;this._poweredByLightbox.SetIsExpandedView(!0,!0);this._poweredByLightbox.Draw();var t=document.getElementById("co_poweredByKeyCiteClose");a()(t).on("click",function(){e.closeDialog()});var n=a()("#co_keycitePowered").get(0);Object(jr["addEscapeListener"])(n,this.closeDialog.bind(this))};Qr.prototype.setContent=function(e){this._contentHtml=e};var $r=Qr,Jr=function(){this.documentGuid=null;this.token=null;this.citation=null;this.legacyId=null;this.firmName=null;this.firmLogoUri=null;this.searchTranId=null;this.visible=!1;this.startIndex=null;this.paginationWidgetDiv=null;this.facetWidgetDiv=null;this.toolbarWidgetDiv=null;this.contentWidgetDiv=null;this.docSource=null;this.rank=null;this.serverProtocol=null};Jr.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setServerProtocol:function(e){this.serverProtocol=e},getServerProtocol:function(){return this.serverProtocol},setRank:function(e){this.rank=e},getRank:function(){return this.rank},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setToken:function(e){this.token=e},getToken:function(){return this.token},setCitation:function(e){this.citation=e},getCitation:function(){return this.citation},setLegacyId:function(e){this.legacyId=e},getLegacyId:function(){return this.legacyId},setFirmName:function(e){this.firmName=e},getFirmName:function(){return this.firmName},setFirmLogoUri:function(e){this.firmLogoUri=e},getFirmLogoUri:function(){return this.firmLogoUri},setSearchTranId:function(e){this.searchTranId=e},getSearchTranId:function(){return this.searchTranId},setVisible:function(e){this.visible=e},isVisible:function(){return this.visible},setStartIndex:function(e){this.startIndex=e},getStartIndex:function(){return this.startIndex},setPaginationWidgetDiv:function(e){this.paginationWidgetDiv=e},getPaginationWidgetDiv:function(){return this.paginationWidgetDiv},setFacetWidgetDiv:function(e){this.facetWidgetDiv=e},getFacetWidgetDiv:function(){return this.facetWidgetDiv},setToolbarWidgetDiv:function(e){this.toolbarWidgetDiv=e},getToolbarWidgetDiv:function(){return this.toolbarWidgetDiv},setContentWidgetDiv:function(e){this.contentWidgetDiv=e},getContentWidgetDiv:function(){return this.contentWidgetDiv}};var Yr=Jr,Xr=n("LfLoflzY");function Zr(e){var t=this,n=e;this.retriesRemaining=1;var o=1e3,i="The provided SearchId does not match any current searches.";this.retrieveSearchStatus=function(e,a,l){var d=n.getSearchTranId();if(d){var c="km/api/v1/search/{searchId}/status?token={authToken}&callback=?",u={};u.searchId=d;u.authToken=n.getToken();(function e(a,r,l,d,c){var u=r-(new Date).getTime();u<=0||t.invokeKmRequest(function(f){if(null!=f.Message&&f.Message==i&&t.retriesRemaining>0){t.retriesRemaining=t.retriesRemaining-1;n.setSearchTranId(null);t.citationSearch(l,d)}else{s(f,"StatusCode",d,a);if(s(f,"StatusCode",d,a))if(2==f.StatusCode){var h=Math.min(o,u);setTimeout(function(){e(a,r,l,d,c)},h)}else 0==f.StatusCode||-1==f.StatusCode?l(f):f.StatusCode}},a,u,d)})(c=r(c,u),(new Date).getTime()+3e4,e,l,a);return}t.citationSearch(e,l);return};this.retrieveSortFields=function(e,o){var i="km/api/v1/search/sortfields?searchId={searchId}&token={authToken}&callback=?",a={};a.searchId=n.getSearchTranId();a.authToken=n.getToken();i=r(i,a);t.invokeKmRequest(function(t){e(t)},i,3e4,o)};this.resetAllFacets=function(e,o){var i="km/api/v1/search/{searchId}/limits?token={authToken}&command=1&callback=?",a={};a.searchId=n.getSearchTranId()
;a.authToken=n.getToken();i=r(i,a);t.invokeKmRequest(function(t){e(t)},i,3e4,o)};this.retrieveFacets=function(e,o){var i="km/api/v1/search/{searchId}/limits?token={authToken}&callback=?",a={};a.searchId=n.getSearchTranId();a.authToken=n.getToken();i=r(i,a);t.invokeKmRequest(function(t){e(t)},i,3e4,o)};this.sort=function(e,o,i,a){var s="km/api/v1/search/{searchId}/sort?sortby={currentSortOption}&order={currentSortOrder}&token={authToken}&callback=?",l={};l.searchId=n.getSearchTranId();l.authToken=n.getToken();l.currentSortOption=e;l.currentSortOrder=o+"";s=r(s,l);t.invokeKmRequest(function(e){i(e)},s,3e4,a)};this.sort=function(e,o,i,a){var s="km/api/v1/search/{searchId}/sort?sortby={currentSortOption}&order={currentSortOrder}&token={authToken}&callback=?",l={};l.searchId=n.getSearchTranId();l.authToken=n.getToken();l.currentSortOption=e;l.currentSortOrder=o+"";s=r(s,l);t.invokeKmRequest(function(e){i(e)},s,3e4,a)};this.updateFacets=function(e,o,i,a,s){var l="km/api/v1/search/{searchId}/limit?limitField={facetKey}&command={command}&value={facetValue}&token={authToken}&callback=?",d={};d.searchId=n.getSearchTranId();d.authToken=n.getToken();d.facetKey=encodeURIComponent(e);d.command=i;d.facetValue=encodeURIComponent(o);l=r(l,d);t.invokeKmRequest(function(e){a(e)},l,3e4,s)};this.updateDepthFacet=function(e,o,i,a,s,l){var d="km/api/v1/search/{searchId}/limit?limitField={facetKey}&command={command}&value={facetValue}&token={authToken}&callback=?",c={};c.searchId=n.getSearchTranId();c.authToken=n.getToken();c.facetKey=encodeURIComponent(e);c.command=i;c.facetValue=encodeURIComponent(o);d=r(d,c);for(var u=0;u<a.length;u++)a[u]==o&&a.splice(u,1);var f=function(e){s(e)};if(0==i||0==a.length)t.invokeKmRequest(f,d,3e4,l);else{t.invokeKmRequest(function(){},d,3e4,l);for(u=0;u<a.length;u++){d="km/api/v1/search/{searchId}/limit?limitField={facetKey}&command=0&value="+a[u]+"&token={authToken}&callback=?";d=r(d,c);u+1>=a.length?t.invokeKmRequest(f,d,3e4,l):t.invokeKmRequest(function(){},d,3e4,l)}}};this.retrieveSearchResults=function(e,o,i,a){var s="km/api/v1/search/{searchId}/results?start={startIndex}&end={endIndex}&token={authToken}&callback=?",l={};l.searchId=n.getSearchTranId();l.authToken=n.getToken();l.startIndex=""+e;l.endIndex=""+o;s=r(s,l);t.invokeKmRequest(function(e){i(e)},s,3e4,a)};this.citationSearch=function(e,o){var i="km/api/v1/search/keycite/start?cite={citation}&normalized=true&citingRef={citingRef}&token={token}&callback=?",a={citation:n.getCitation(),token:n.getToken(),citingRef:n.isVisible()?"1":"0"};i=r(i,a);t.invokeKmRequest(function(a){if(s(a,"SearchTranId",o,i)){n.setSearchTranId(a.SearchTranId);t.retrieveSearchStatus(e,!1,o)}else if("KM.CiteRecognitionDomain.Exceptions.WestkmKeyCiteTranslationException"==a.Exception){a.Count=0;e(a)}},i,3e4,o)};var r=function(e,t){return e.replace(/\{([^{}]*)\}/g,function(e,n){var o=t[n];return"string"==typeof(o="function"==typeof o?o():o)?o:e})};this.invokeKmRequest=function(e,t,o){var i=h["default"].GetHost(h["default"].KM),r=n.getServerProtocol();ne["default"].isBlank(r)&&(r="string"==typeof Xr["default"].Protocol?Xr["default"].Protocol:"HTTP");var s=C["default"].Absolute({Protocol:r,Host:i,Path:t,QueryString:void 0});s=s+"&cachePrevent="+ne["default"].createUniqueValue();a.a.ajax({url:s,dataType:"jsonp",timeout:o,success:e})};function s(e,t,n,o,i){if(null==e||void 0===e[t]||void 0!==i&&i!=e[t]){JSON.stringify(e);return!1}return!0}}var es=n("GQm0BCpH"),ts={Instance:void 0},ns={createTextCell:function(e,t,n){var o=document.createElement("td");ne["default"].isNotNullOrUndefined(n)&&""!=n?o.className="co_detailsTable_"+n:o.className="co_detailsTable_cell";if(ne["default"].isNotNullOrUndefined(e)&&e.length>0)o.innerHTML=e;else{o.className=o.className+" empty";o.appendChild(ne["default"].createDash())}return o},createCheckBoxCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_select";var n=e.guid,o=e.contentType;ne["default"].isNullOrUndefined(n)&&(n=e.documentGuid);ne["default"].isNotNullOrUndefined(e.deliveryContentType)&&(o=e.deliveryContentType);if(ne["default"].isNotNullOrUndefined(n)&&""!==n){var i=document.createElement("div");i.className="co_relative";var a=document.createElement("input");a.type="checkbox";a.id="coid_relatedInfo_resultList_checkbox_"+n;a.className="coid_relatedInfo_resultList_checkbox";a.setAttribute("title",e.title);a.setAttribute("guid",n);a.setAttribute("contentType",o);var r=n;if(ne["default"].isNotNullOrUndefined(e.itemIdentifier)&&""!=e.itemIdentifier){a.setAttribute("itemIdentifier",e.itemIdentifier);r=e.itemIdentifier}else if(ne["default"].isNotNullOrUndefined(e.relationshipGuid)&&""!=e.relationshipGuid){a.setAttribute("itemIdentifier",e.relationshipGuid);r=e.relationshipGuid}ne["default"].isNotNullOrUndefined(e.navigationPath)&&a.setAttribute("navigationPath",e.navigationPath);ne["default"].isNotNullOrUndefined(e.listSource)&&a.setAttribute("listSource",e.listSource);ne["default"].isNotNullOrUndefined(e.list)&&a.setAttribute("list",e.list);ne["default"].isNotNullOrUndefined(e.rank)&&a.setAttribute("rank",e.rank);if(ts.Instance.isCheckboxChecked(r)){a.checked=!0;a.setAttribute("defaultChecked","defaultChecked")}a.onclick=function(){ts.Instance.checkBoxChanged(a)};i.appendChild(a);t.appendChild(i)}else{t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}return t},createDepthCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_depth";var n=ts.Instance,o=e.depthCode;if(ne["default"].isNotNullOrUndefined(e)){var i,a,r=!1,s=document.createElement("div");s.id="coid_relatedInfo_dotBar_"+o;s.className="co_relatedInfo_dotBar_"+o;var l=n.docMetaData.TitleText;(ne["default"].isNullOrUndefined(a)||ne["default"].isBlank(a))&&(a=e.title);if("1"===o)i=l+" Mentioned by "+a;else if("2"===o)i=l+" Cited by "+a;else if("3"===o)i=l+" Discussed by "+a;else if("4"===o)i=l+" Examined by "+a;else{r=!0;t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}if(!r){s.title=i;s.innerHTML=i;t.appendChild(s)}}return t},createKCAResultDepthCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_depth";var n=e.depthCode;if(ne["default"].isNotNullOrUndefined(e))if(0!=n&&1!=n&&2!=n&&3!=n&&4!=n){t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}else{var o=document.createElement("div");o.id="coid_relatedInfo_dotBar_"+n;o.className="co_relatedInfo_dotBar_"+n;o.innerHTML=n;t.appendChild(o)}return t},createKMDepthCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_depth";var n=e.depthCode;if(ne["default"].isNotNullOrUndefined(e))if(0!=n&&1!=n&&2!=n&&3!=n&&4!=n){t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}else{var o=document.createElement("div");o.id="coid_relatedInfo_dotBar_"+n;o.className="co_relatedInfo_dotBar_"+n;o.innerHTML=n;t.appendChild(o)}return t},createKMTreatmentCell:function(e,t){var n=document.createElement("td");n.className="co_detailsTable_treatment";var o=document.createElement("span");o.id="coid_relatedInfo_grid_treatment_"+t;o.className="co_relatedInfo_grid_treatment";if(void 0!==e.treatment&&null!=e.treatment&&e.treatment.length>0)o.innerHTML=e.treatment;else{n.className=n.className+" empty";n.appendChild(ne["default"].createDash())}""!=o.innerHTML&&n.appendChild(o);return n},createHeadnoteCell:function(e,t){var n=ts.Instance,o=document.createElement("td");o.className="co_detailsTable_headnotes";if(ne["default"].isNotNullOrUndefined(e)){var i=e.headnoteInfoList;(ne["default"].isNullOrUndefined(i)||ne["default"].isNullOrUndefined(i[0]))&&(i=e.headnoteInfos);var r=e.guid;ne["default"].isNullOrUndefined(r)&&(r=e.documentGuid);if(void 0!==i&&void 0!==i[0]){var s=document.createElement("div");s.id="coid_relatedInfo_grid_headnote_"+t;s.className="co_relatedInfo_grid_headnote";for(var l=[],d=0;d<i.length;d++){var u=i[d],f=document.createElement("ol");f.className="co_relatedInfo_grid_headnoteList";var h=document.createElement("span");h.innerHTML=u.abbreviation;for(var p=0;p<u.headnotes.length;p++){
var m=u.headnotes[p],g=m.sequenceNumber,v=u.type,C=document.createElement("li"),_="coid_relatedInfo_grid_headnote_item_"+t+"_"+v+g;C.id=_;C.className="co_disabled";var b=document.createElement("span");b.setAttribute("title","Headnote "+m.sequenceNumber+" of Cited Case");b.seqNum=g;b.type=v;b.innerHTML=m.sequenceNumber;var S=m.linkUrl;if(void 0!==S&&null!==S&&""!==S){var D=document.createElement("div");D.appendChild(b);C.appendChild(D);var T=document.createElement("span");b.appendChild(T);a()(T).css({top:"auto",overflow:"hidden",left:"-10000px",position:"absolute",height:"1px",width:"1px"});var w={seqNum:g,type:v,elementId:_,linkUrl:S,headnoteElement:b,hoverSpanElement:T};l.push(w);if("StatuteCitingReferences"!==n.category&&!c["default"].EnableIpad){a()(b).mouseenter(function(e){n.headnotesWidget.lookupHeadnote(r,e.target,e.target)});a()(D).focus(function(e){var t=a()(e.target).children("span");t.length>0&&n.headnotesWidget.lookupHeadnote(r,t[0],e.target)})}}else C.appendChild(b);f.appendChild(C)}y["default"].Subscribe("Cobalt.RelatedInfo.Headnotes.Complete",function(){n.headnotesWidget.addHeadnoteTextToElements(l)});s.appendChild(f);s.appendChild(h)}o.appendChild(s)}else{o.className=o.className+" empty";o.appendChild(ne["default"].createDash())}}return o},createKCAResultHeadnoteCell:function(e,t){var n=document.createElement("td");n.className="co_detailsTable_headnotes";if(ne["default"].isNotNullOrUndefined(e)){var o=e.headnoteInfoList;(ne["default"].isNullOrUndefined(o)||ne["default"].isNullOrUndefined(o[0]))&&(o=e.headnoteInfos);var i=e.guid;ne["default"].isNullOrUndefined(i)&&(i=e.documentGuid);if(ne["default"].isNotNullOrUndefined(o))if(void 0!==o&&void 0!==o[0]){var a=document.createElement("div");a.id="coid_relatedInfo_grid_headnote_"+t;a.className="co_relatedInfo_grid_headnote";for(var r=0;r<o.length;r++){var s=o[r],l=document.createElement("ol");l.className="co_relatedInfo_grid_headnoteList";var d=document.createElement("span");d.innerHTML=s.abbreviation;for(var c=0;c<s.headnotes.length;c++){var u=s.headnotes[c],f=u.sequenceNumber,h=s.type,p=document.createElement("li"),m="coid_relatedInfo_grid_headnote_item_"+t+"_"+h+f;p.id=m;var g=document.createElement("span");g.setAttribute("title","Headnote "+u.sequenceNumber+" of Cited Case");g.seqNum=f;g.type=h;g.innerHTML=u.sequenceNumber;var v=u.linkUrl;if(void 0!==v&&null!==v&&""!==v){var C=document.createElement("a");C.setAttribute("href",v);C.setAttribute("class","co_relatedInfo_grid_headnoteAnchor");C.setAttribute("target","_blank");C.appendChild(g);p.appendChild(C)}else p.appendChild(g);l.appendChild(p)}a.appendChild(l);a.appendChild(d)}n.appendChild(a)}else{n.className=n.className+" empty";n.appendChild(ne["default"].createDash())}else{n.className=n.className+" empty";n.appendChild(ne["default"].createDash())}}return n},createPdfCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_pdf";var n=e.pdfLink;if(ne["default"].isNotNullOrUndefined(n)&&""!==n){var o=document.createElement("a");o.className="co_blobLink";o.type="application/pdf";o.href=n;o.target="_blank";var i=document.createElement("img");i.className="co_relatedInfo_pdfIcon";i.src=h["default"].GetUrl(h["default"].Images,"/images/v1/co_pdf-icon.gif");i.alt="PDF Download for "+e.primaryCitation;o.setAttribute("title","Download");o.appendChild(i);t.appendChild(o)}else{t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}return t},createTreatmentCell:function(e,t,n){var o=document.createElement("td");o.className="co_detailsTable_treatment";var i=document.createElement("span");i.id="coid_relatedInfo_grid_treatment_"+t;i.className="co_relatedInfo_grid_treatment";if(void 0!==e.treatment&&e.treatment.length>0)i.innerHTML=e.treatment;else{var a="";if("1"==e.depthCode)a="Mentioned by";else if("2"==e.depthCode)a="Cited by";else if("3"==e.depthCode)a="Discussed by";else if("4"==e.depthCode)a="Examined by";else{o.className=o.className+" empty";o.appendChild(ne["default"].createDash())}""!=a&&(o.innerHTML=a)}""!=i.innerHTML&&o.appendChild(i);if(!n&&!e.positive){var r=document.createElement("div"),s=h["default"].GetUrl(h["default"].Images,"/images/co_icon_treatmentLabel_negative.gif"),l=document.createElement("img");l.src=s;r.appendChild(l);r.className="co_textCenter";o.appendChild(r)}return o},createNODTopicsCell:function(e){var t=document.createElement("td");t.className="co_detailsTable_topics";if(null!=e&&e.length>0){var n=[],o=document.createElement("ul");o.className="co_detailsTable_topics_full";for(var i=0;i<e.length;i++){var a=I["default"].format("SC.RelatedInfo.CitingReferences.Content.NODTopics",{nodnumber:e[i].nodnumber,nodtext:e[i].nodtext},e[i].nodnumber+". "+e[i].nodtext);n.push(a);(s=document.createElement("li")).textContent=a;o.appendChild(s)}t.appendChild(o);if(n.length>3){o.style.display="none";var r=document.createElement("ul");r.className="co_detailsTable_topics_short";for(i=0;i<3;i++){var s;(s=document.createElement("li")).textContent=n[i];r.appendChild(s)}var l=document.createElement("a");l.href="javascript:void(0);";l.textContent=I["default"].lookup("SC.RelatedInfo.CitingReferences.NODTopics.ViewAllLink","View all");l.addEventListener("click",function(){var e=this.parentElement,t=this.parentElement.getElementsByClassName("co_detailsTable_topics_full")[0];t.style.display="";e.innerHTML="";e.appendChild(t)});t.appendChild(r);t.appendChild(l)}}else{t.className=t.className+" empty";t.appendChild(ne["default"].createDash())}return t}};function os(){os.singletonInstance=this;var e=this,t=ne["default"].createElement;this.data=null;this.parentDiv=null;this.CREATED_DATE_FACET_NAME="pf_createddatetime";this.MODIFIED_DATE_FACET_NAME="pf_modifieddatetime";this.LOCATE_FACET_NAME="profile_locate";this.dragDropGroupId=null;this.kmDocLinks;this.featureConfigurations=k["default"].ViewData.FeatureConfigurations;this.noFacetInfo=null;this.setData=function(t){e.data=t};this.setNoFacetInfo=function(t){e.noFacetInfo=t};this.setParentDiv=function(t){e.parentDiv=t};this.draw=function(){e.parentDiv.appendChild(o());n()};var n=function(){if(!(null!==e.featureConfigurations&&!e.featureConfigurations.FOLDERS)&&!c["default"].EnableIpad){e.kmDocLinks=g["default"].GetElementsByClassName("co_realatedInfo_km_document");if(null!=e.dragDropGroupId)es["DestroyDraggables"](e.dragDropGroupId);else{e.dragDropGroupId=es["CreateDragDrop"]();e.sendGroupIdToDock(e.dragDropGroupId)}var t={DragStart:function(){},Helper:function(){var t=void 0,n=e.getSelectedDragItems(this),o=n.length;if(1==o){var i=this.getAttribute("title");if(void 0===i||null===i){var a=this.getElementsByTagName("a");i=a[a.length-1].getAttribute("title")}i&&(t=i)}return Pn["default"].createDraggable(t,o,n)}};es["RegisterDraggables"](e.dragDropGroupId,e.kmDocLinks,t)}};this.getSelectedDragItems=function(e){var t=[],n=[];if(ne["default"].isNotNullOrUndefined(e)){var o=e.getAttribute("docguid"),i=e.getAttribute("title");(s={}).id=e.id;s.TitleText=i;s.DocGuid=o;s.Type="KM";t.push(s);n=a()('input:not([docguid="'+o+'"])[id^="co_relatedInfo_km_document_checkbox_"]:checked')}else n=a()('input[id^="co_relatedInfo_km_document_checkbox_"]:checked');for(var r=0;r<n.length;r++){var s,l=n[r];(s={}).id=l.getAttribute("id");s.TitleText=l.getAttribute("title");s.DocGuid=l.getAttribute("docguid");s.Type="KM";t.push(s)}return t};this.sendGroupIdToDock=function(e){var t={UID:e},n=new y["default"].Message(t,{},"Cobalt.RelatedInfo.ResultList.DraggableUID","1.0");y["default"].Publish("Cobalt.RelatedInfo.ResultList.DraggableUID",n)};var o=function(){if(e.data.parsedDataArray.length>0){var n=document.createElement("div");n.id="coid_relatedinfo_KM_container";n.className="co_relatedInfo_citingRefsTable";var o=document.createElement("table");o.id="co_relatedInfo_table_KMcitingRefs";o.className="co_detailsTable";n.appendChild(o);var r=t("tbody"),s=t("thead");s.className="co_detailsTable_select";o.appendChild(s);o.appendChild(r);for(var l=[{text:"",name:"select"},{text:"Title & Citation",name:"content"},{text:"KM Treatment",name:"treatment"},{text:"Depth of KM Treatment",name:"depth"}],d=0;d<l.length;d++){var u=t("col");o.appendChild(u)}var f=t("tr");s.appendChild(f)
;for(d=0;d<l.length;d++){var h=l[d];if("select"==h.name){(m=t("th")).className="co_detailsTable_"+h.name;f.appendChild(m);if(!c["default"].EnableIpad){var p=t("input",{type:"checkbox",id:"co_relatedInfo_selectAll_checkbox"});m.appendChild(p);a()(p).click(function(){this.checked?a()('input[id^="co_relatedInfo_km_document_checkbox_"]').attr("checked",!0):a()('input[id^="co_relatedInfo_km_document_checkbox_"]').attr("checked",!1)})}}else{var m,g=h.text;(m=t("th",{},g)).className="co_detailsTable_"+h.name;f.appendChild(m)}}for(d=0;d<e.data.parsedDataArray.length;d++){var v=e.data.parsedDataArray[d],C=i(v,d);r.appendChild(C)}return n}var _=document.createElement("div"),b="",y=!1;if(e.noFacetInfo){for(d=0;d<e.data.facetData.length;d++){var S=e.data.facetData[d];if(S.Key==e.CREATED_DATE_FACET_NAME||S.Key==e.MODIFIED_DATE_FACET_NAME||S.Key==e.LOCATE_FACET_NAME)for(var D=0;D<S.Values.length;D++){var T=S.Values[D];if(T.IsApplied){b="Custom"==T.DisplayValue?y?b+" and "+T.Value:T.Value:y?b+" and "+T.Value:T.DisplayValue;y=!0}}}_.innerHTML="No KM results were found for "+b+"."}else _.innerHTML="No KM results were found for the applied facet(s).";return _},i=function(e,n){var o=t("tr"),i=t("td");i.className="co_detailsTable_select";if(!c["default"].EnableIpad){var r=t("input",{id:"co_relatedInfo_km_document_checkbox_"+n,type:"checkbox",docguid:e.profileId,title:e.title});a()(r).click(function(){0==a()('input[id^="co_relatedInfo_km_document_checkbox_"]').not(":checked").length?a()("#co_relatedInfo_selectAll_checkbox").attr("checked",!0):a()("#co_relatedInfo_selectAll_checkbox").attr("checked",!1)});i.appendChild(r)}o.appendChild(i);var s=ns.createTextCell(e.titleAndCitation,n);o.appendChild(s);var l=ns.createKMTreatmentCell(e,n);o.appendChild(l);var d=ns.createKMDepthCell(e,n);o.appendChild(d);return o}}var is=n("wYjnsfpz"),as=n("wg122GJj"),rs=n("dCykvzrd");function ss(){var e=ne["default"].createElement,t=this;this.DEPTH_OF_TREAMENT_FACET_NAME="profile_depthoftreatment";this.CREATED_DATE_FACET_NAME="pf_createddatetime";this.MODIFIED_DATE_FACET_NAME="pf_modifieddatetime";this.JURISDICTION_FACET_NAME="xmlf_jurisdiction";this.LOCATE_FACET_NAME="profile_locate";this.SIX_MONTHS="{6_MONTHS}";this.TWELVE_MONTHS="{12_MONTHS}";this.THREE_YEARS="{3_YEARS}";this.CUSTOM="Custom";this.appliedDepthFacets=[];this.data=null;this.parentDiv=null;this.appliedFacetCount=0;this.noFacetInfo=null;this.searchWithinFacet=null;this.dateWidget=null;this.depthWidget=null;this.facetsList=[];this.searchWithinWidget=null;this.KMFacetsList=[];this.notAssignedPlaceHolder="notassignedplaceholder";this.facetsActiveOnLoad=[];this.searchDateWidget=null;this.setData=function(e){t.data=e};this.setParentDiv=function(e){t.parentDiv=e};this.setNoFacetInfo=function(e){this.noFacetInfo=e};this.createAccordionFacetWrapperElement=function(e,t){var n=document.createElement("h3");n.className="co_facetCollapsed";n.setAttribute("facetId",e);var o=document.createElement("a");o.href="#";o.innerHTML=t;n.appendChild(o);return n};this.draw=function(){var d=e("div",{id:"co_relatedinfo_facets"}),u=e("div",{class:"co_genericBox"});d.appendChild(u);var f=e("div",{class:"co_genericBoxContent"});f.id="coid_relatedInfo_facets_list_KMCitingReferences";f.appendChild(n());u.appendChild(f);t.parentDiv.appendChild(d);if(t.noFacetInfo){(v=a()("<a/>").addClass("co_btnGray co_btnBack").attr("id","co_relatedInfo_km_remove_all_facets_link").attr("href","javascript:void(0);")).html("<i></i>Undo Filters");(C=a()("<div></div>").addClass("co_undoAll").attr("id","co_undoAllSelections")).append(v);f.appendChild(C[0]);t.wireEvents()}else try{for(var h=0;h<t.data.facetData.length;h++){for(var p=t.data.facetData[h],m=0;m<p.Values.length;m++)if(p.Values[m].IsApplied){var g=!0;break}if(g)break}if(g){var v,C;(v=a()("<a/>").addClass("co_btnGray co_btnBack").attr("id","co_relatedInfo_km_remove_all_facets_link").attr("href","javascript:void(0);")).html("<i></i>Undo Filters");(C=a()("<div></div>").addClass("co_undoAll").attr("id","co_undoAllSelections")).append(v);f.appendChild(C[0])}for(var _=0;_<t.data.facetData.length;_++){var b=t.data.facetData[_];if(0==b.Values.length)continue;b.Key==t.DEPTH_OF_TREAMENT_FACET_NAME?this.depthWidget=r(b):b.Key==t.CREATED_DATE_FACET_NAME||b.Key==t.MODIFIED_DATE_FACET_NAME?this.dateWidget=s(b):b.Key==t.LOCATE_FACET_NAME?this.searchWithinFacet=o(b):(b.Key,t.JURISDICTION_FACET_NAME,l(b))}if(null!=this.searchWithinFacet){if(c["default"].EnableIpad){var y=this.createAccordionFacetWrapperElement("co_searchWithinWidget","Search within results");f.appendChild(y)}f.appendChild(this.searchWithinFacet)}if(null!=this.depthWidget){if(c["default"].EnableIpad){y=this.createAccordionFacetWrapperElement("co_depthOfTreatmentWidget","Depth Of Treatment");f.appendChild(y)}f.appendChild(this.depthWidget)}if(null!=this.dateWidget){if(c["default"].EnableIpad){y=this.createAccordionFacetWrapperElement("co_dateWidget","Date");f.appendChild(y)}f.appendChild(this.dateWidget)}i(f);t.wireEvents();t.wireFacet();null!=t.searchDateWidget&&t.searchDateWidget.initialize()}catch(e){_e["default"].ConsoleMessage("Error: "+e,_e["default"].Level.Error,"Cobalt.RelatedInfo.KM.Widget.KMFacetWidget.draw")}};var n=function(){var t=e("h3",{class:"co_genericBoxHeader"});if(!c["default"].EnableIpad){var n=e("span",{}),o=e("strong",{},"NARROW");n.appendChild(o);t.appendChild(n)}return t},o=function(n){var o=n.Values,i=e("div",{class:"co_divider"}),a=e("div",{class:"co_facet_group"});a.appendChild(e("strong",{},"Search within results"));i.appendChild(a);for(var r,s=!1,l=0;l<o.length;l++){r=o[l].Value;s=o[l].IsApplied}var d=new is["default"];d.hideHelp();t.searchWithinWidget=d;s&&!ne["default"].isBlank(r)&&d.setQuery(r);d.setActivateCallback(function(e){var n=t.LOCATE_FACET_NAME;t.data.client.updateFacets(n,e,"0",function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})});d.setDeactivateCallback(function(){var e=t.LOCATE_FACET_NAME;t.data.client.updateFacets(e,"","1",function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})});i.innerHTML=d.createHtml();return i},i=function(e){var n=new d,o=document.createElement("div");o.className="co_undoAll";var i=document.createElement("div");i.id="co_narrowRelatedResultsBy";e.appendChild(i);var a=new rs["default"](i,n,{undoDomElement:o,multiFacetCapable:!1});a.drawMultiFacetLinks=function(){return""};a.setFacets(t.KMFacetsList);a.draw()};this._convertToSearchID=function(e){var t=escape(e);return(t=(t=(t=(t=(t=(t=(t=t.replace(/\+/gi,"%2B")).replace(/-/gi,"%2D")).replace(/\*/gi,"%2A")).replace(/\//gi,"%2F")).replace(/\./gi,"%2E")).replace(/_/gi,"%5F")).replace(/@/gi,"%40")).replace(/%/gi,"_")};this._convertFromSearchID=function(e){var t=e.replace(/_/gi,"%");return unescape(t)};var r=function(n){var o=n.Values,i=e("div",{class:"co_divider"}),a=e("div",{class:"co_facet_group"});a.appendChild(e("strong",{},"Depth Of Treatment"));i.appendChild(a);for(var r=e("ul",{class:"co_facet_treatmentTree"}),s=e("li"),l=e("li"),d=e("li"),c=e("li"),u=!1,f=!1,h=!1,p=!1,m=0;m<o.length;m++){var g=o[m],v=e("span",{class:"co_facetCount"},g.Count),C=e("a",{name:"co_realtedInfo_checkbox_anchor",facetValue:g.Value,facetKey:n.Key,checkedValue:g.IsApplied});C.id="coid_relatedinfo_DepthOfTreatment"+g.Value+"_link";if(g.IsApplied){C.className="co_checkbox_selected";t.appliedDepthFacets.push(g.Value)}else C.className="co_checkbox_unselected";var _=e("div",{class:"co_relatedInfo_dotBar_"+g.Value},"Depth of Treatment Facet value "+g.Value);C.appendChild(_);if(1==g.Value){s.appendChild(v);s.appendChild(C);p=!0}else if(2==g.Value){l.appendChild(v);l.appendChild(C);h=!0}else if(3==g.Value){d.appendChild(v);d.appendChild(C);f=!0}else if(4==g.Value){c.appendChild(v);c.appendChild(C);u=!0}}u&&r.appendChild(c);f&&r.appendChild(d);h&&r.appendChild(l);p&&r.appendChild(s)
;i.appendChild(r);return i},s=function(n){var o=n.Values,i=n.Key,a=e("div",{class:"co_divider"}),r=e("div",{class:"co_facet_group"});r.appendChild(e("strong",{},"pf_createddatetime"==i?"Created Date":"Modified Date"));a.appendChild(r);for(var s=[],l=0,d=0,c=0,u=!1,f=!1,h=!1,p=!1,m=0;m<o.length;m++){var g=o[m];if(g.Value==t.SIX_MONTHS){l=g.Count;u=g.IsApplied}else if(g.Value==t.TWELVE_MONTHS){d=g.Count;f=g.IsApplied}else if(g.Value==t.THREE_YEARS){c=g.Count;h=g.IsApplied}else g.DisplayValue==t.CUSTOM&&(p=g.IsApplied)}l>0&&s.push({id:"co_relatedInfo_km_date_facet_6_months_"+i,label:"Last 6 months",count:ne["default"].addCommas(l)});d>0&&s.push({id:"co_relatedInfo_km_date_facet_12_months_"+i,label:"Last 12 months",count:ne["default"].addCommas(d)});c>0&&s.push({id:"co_relatedInfo_km_date_facet_3_years_"+i,label:"Last 3 years",count:ne["default"].addCommas(c)});s.push({id:"co_relatedInfo_km_date_facet_all_"+i,label:"All"});var v=new as["default"]("co_relatedInfo_km_date_facet_"+i,i);t.searchDateWidget=v;v.fixedRangeTypeList=s;if(u)v.selectedRangeTypeId="co_relatedInfo_km_date_facet_6_months_"+i;else if(f)v.selectedRangeTypeId="co_relatedInfo_km_date_facet_12_months_"+i;else if(h)v.selectedRangeTypeId="co_relatedInfo_km_date_facet_3_years_"+i;else if(p){v.selectedRangeTypeId=v.CUSTOM;if(g.Value.indexOf("1700")>-1){v.selectedCustomRangeSubTypeId=v.BEFORE;v.selectedCustomRangeDate=g.Value.split("|")[1]}else if(g.Value.indexOf("|")==g.Value.length-1){v.selectedCustomRangeSubTypeId=v.AFTER;v.selectedCustomRangeDate=g.Value.split("|")[0]}else if(-1==g.Value.indexOf("|")){v.selectedCustomRangeSubTypeId=v.ON;v.selectedCustomRangeDate=g.Value}else{v.selectedCustomRangeSubTypeId=v.FROM_UNTIL;var C=g.Value.split("|"),_=C[0],b=C[1];b=(b=b.replace("-","/")).replace("-","/");v.selectedCustomRangeDate=_;v.selectedCustomRangeDateUntil=b}}else v.selectedRangeTypeId="co_relatedInfo_km_date_facet_all_"+i;a.innerHTML=a.innerHTML+v.createHtml(function(e,n){var o=null,a="0";if(n.selectedRangeTypeId==n.CUSTOM){if(n.selectedCustomRangeSubTypeId==n.FROM_UNTIL)o=n.selectedCustomRangeDate+"|"+n.selectedCustomRangeDateUntil;else if(n.selectedCustomRangeSubTypeId==n.ON)o=n.selectedCustomRangeDate;else if(n.selectedCustomRangeSubTypeId==n.BEFORE)o="1/1/1700|"+n.selectedCustomRangeDate;else{if(n.selectedCustomRangeSubTypeId!=n.AFTER)throw"invalid custom date range subtype '"+n.selectedCustomRangeSubTypeId+"'";o=n.selectedCustomRangeDate+"|"}o=(o=o.replace("-","/")).replace("-","/")}else if(n.selectedRangeTypeId=="co_relatedInfo_km_date_facet_6_months_"+i)o=t.SIX_MONTHS;else if(n.selectedRangeTypeId=="co_relatedInfo_km_date_facet_12_months_"+i)o=t.TWELVE_MONTHS;else if(n.selectedRangeTypeId=="co_relatedInfo_km_date_facet_3_years_"+i)o=t.THREE_YEARS;else if(n.selectedRangeTypeId=="co_relatedInfo_km_date_facet_all_"+i)if(u){o=t.SIX_MONTHS;a="1"}else if(f){o=t.TWELVE_MONTHS;a="1"}else if(h){o=t.THREE_YEARS;a="1"}else if(p){o="custom";a="1"}t.data.client.updateFacets(i,o,a,function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})});return a},l=function(e){for(var n=[],o=[],i=[],a=0;void 0!==e.Values[a];a++){var r=""==(u=e.Values[a]).Value?t.notAssignedPlaceHolder:u.Value;r=t._convertToSearchID(r);var s={};s.name=u.DisplayValue;s.id=r;s.dataOptions={kmValue:u.Value,count:u.Count+"",id:r};if(u.IsApplied){s.dataOptions.active=!0;n.push(s);var l={kmValue:u.Value,searchValue:r};i.push(l)}o.push(s)}i.length>0&&(t.facetsActiveOnLoad[e.Key]=i);var d={selected:n,available:o},c=t._convertToSearchID(e.Key),u={key:e.Key,name:e.Name,data:d,displayOptions:{id:c,plural:e.Name,selector:"multipleXBoxes"}};t.KMFacetsList.push(u)},d=function(){this.apply=function(e,n,o){var i=t._convertFromSearchID(o),a=t.facetsActiveOnLoad[i];if(e)if(0==n.length){if(void 0!=a&&null!=a)for(u=0;u<a.length;u++)t.data.client.updateFacets(i,a[u].kmValue,"1",function(){})}else{var r=[];for(u=0;u<n.length;u++){var s=n[u];s.id==o&&(r=s.data)}c=this.buildFacetsToRemoveList(r,a);r=this.removeAlreadyAppliedFacets(r,a);for(var l=0;l<r.length;l++){var d=r[l];d=t._convertFromSearchID(d);d=t.notAssignedPlaceHolder==d?"":d;t.data.client.updateFacets(i,d,"0",function(){})}for(l=0;l<c.length;l++){d=c[l];d=t._convertFromSearchID(d);d=t.notAssignedPlaceHolder==d?"":d;t.data.client.updateFacets(i,d,"1",function(){})}}else{var c=[];if(void 0!=a&&null!=a)for(var u=0;u<a.length;u++){var f=a[u];0!=n.length&&this.arrayContains(f.searchValue,n[0].data)||c.push(f.kmValue)}for(var u=0;u<c.length;u++){var h=c[u];t.data.client.updateFacets(i,h,"1",function(){})}}y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1})};this.buildFacetsToRemoveList=function(e,t){var n=[];if(void 0!=t&&null!=t){for(var o=[],i=0;i<t.length;i++)o.push(t[i].searchValue);for(var a=0;a<o.length;a++){var r=o[a];this.arrayContains(r,e)||n.push(r)}}return n};this.removeAlreadyAppliedFacets=function(e,t){var n=[];if(void 0==t||null==t)return e;for(var o=[],i=0;i<t.length;i++)o.push(t[i].searchValue);for(var a=0;a<e.length;a++){var r=e[a];this.arrayContains(r,o)||n.push(r)}return n};this.arrayContains=function(e,t){for(var n=!1,o=0;o<t.length;o++){if(e==t[o]){n=!0;break}}return n};this.removeAll=function(){return""}};this.wireEvents=function(){null!=t.searchWithinWidget&&t.searchWithinWidget.initialize();a()("a[name^=co_realtedInfo_checkbox_anchor]").click(function(){var e=a()(this).attr("checkedValue"),n="1";"false"!=e&&e||(n="0");var o=a()(this).attr("facetValue"),i=a()(this).attr("facetKey");t.data.client.updateDepthFacet(i,o,n,t.appliedDepthFacets,function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1})})});a()(".co_relatedInfo_km_checkbox_facet").click(function(){var e=this.checked?"0":"1",n=a()(this).attr("facetValue"),o=a()(this).attr("facetKey");t.data.client.updateFacets(o,n,e,function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1})})});a()("#co_relatedInfo_km_locate_button").click(function(){var e=a()("#co_relatedInfo_km_facet_locate").val(),n=t.LOCATE_FACET_NAME;t.data.client.updateFacets(n,e,"0",function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})});a()("#co_realatedInfo_km_locate_facet_remove").click(function(){var e=t.LOCATE_FACET_NAME;t.data.client.updateFacets(e,"","1",function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})});a()("#co_relatedInfo_km_remove_all_facets_link").click(function(){t.data.client.resetAllFacets(function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1,transitionType:"ListViewType"})})})};this.wireFacet=function(e,t,n){a.a.isFunction(n)||(n=function(){return!1});a()(".co_facetCollapsed").click(function(){var e=this;a()(this).next().slideToggle(300,function(){a()(e).toggleClass("co_facetExpanded").toggleClass("co_facetCollapsed");ne["default"].iScrollRefresh()});return!1}).next().each(function(e,t){n(t)?a()(t).prev().toggleClass("co_facetExpanded").toggleClass("co_facetCollapsed"):a()(t).hide()});ne["default"].iScrollRefresh()}}
var ls=n("mK3po4ec"),ds=n.n(ls);function cs(){var e=ne["default"].createElement,t=this;this.data=null;this.parentDiv=null;this.hasPrevious=!1;this.hasNext=!1;this.setData=function(e){t.data=e};this.setParentDiv=function(e){t.parentDiv=e};this.draw=function(){t.parentDiv.appendChild(n());t.wireEvents()};var n=function(){var n,o=e("div");o.className="co_navFooter";o.id="coid_navFooterDiv";var i,r,s=e("div"),l=e("ul");l.className="co_navFooter_pagination";l.id="coid_navFooter_pagination";if(t.data.indexToPageMap.length>2){if(t.data.startIndex>1){var d=e("li");d.appendChild(function(){var t=e("a",{id:"co_relatedinfo_km_pagination_first_Button",class:"co_first",href:"#"}),n=e("img");n.alt="First Page";n.src=h["default"].GetUrl(h["default"].Images,"/images/v1/co_documentFooterArrowFirst.png");t.appendChild(n);return t}());l.appendChild(d);var u=e("li");u.appendChild(function(){var t=e("a",{id:"co_relatedinfo_km_pagination_back_Button",class:"co_prev"}),n=e("img");n.alt="Previous Page";n.src=h["default"].GetUrl(h["default"].Images,"/images/v1/co_documentFooterArrowPrevious.png");t.appendChild(n);return t}());l.appendChild(u);t.hasPrevious=!0}for(var f=1;f<t.data.indexToPageMap.length;f++)t.data.indexToPageMap[f]==t.data.startIndex&&(n=f);if(t.data.indexToPageMap.length>10&&n>6)for(var p=n-6;p<t.data.indexToPageMap.length&&p<n+3;p++){var m=e("li");p==n?(v=e("strong")).innerHTML=p:(v=e("a",{index:t.data.indexToPageMap[p],class:"co_relatedInfo_km_page_link"})).innerHTML=p;m.appendChild(v);l.appendChild(m)}else for(var g=1;g<t.data.indexToPageMap.length&&g<10;g++){var v;m=e("li");g==n?(v=e("strong")).innerHTML=g:(v=e("a",{index:t.data.indexToPageMap[g],class:"co_relatedInfo_km_page_link"})).innerHTML=g;m.appendChild(v);l.appendChild(m)}if(n!=t.data.indexToPageMap.length-1){var C=e("li"),_=function(){var t=e("a",{id:"co_relatedinfo_km_pagination_next_Button",class:"co_next",href:"#"}),n=e("img");n.alt="Next Page";n.src=h["default"].GetUrl(h["default"].Images,"/images/v1/co_documentFooterArrowNext.png");t.appendChild(n);return t}();C.appendChild(_);l.appendChild(C);var b=e("li");b.appendChild(function(){var t=e("a",{id:"co_relatedinfo_km_pagination_last_Button",class:"co_last",href:"#"}),n=e("img");n.alt="Last Page";n.src=h["default"].GetUrl(h["default"].Images,"/images/v1/co_documentFooterArrowLast.png");t.appendChild(n);return t}());l.appendChild(b);t.hasNext=!0}}s.appendChild(l);if(!c["default"].EnableIpad){var y=t.data.docsPerPage;a()(s).append((i=y,r=I["default"].lookup("SC.RelatedInfo.Pagination.ItemsPerPage","items/page: "),Ki.a.template(ds.a)({options:[20,50,100],size:i,itemsPerPageLabel:r})))}o.appendChild(s);return o};this.wireEvents=function(){a()(".co_relatedInfo_km_page_link").click(function(){var e=parseInt(a()(this).attr("index"));t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})});if(t.hasPrevious){a()("#co_relatedinfo_km_pagination_back_Button").click(function(){for(var e=null,n=0;n<t.data.indexToPageMap.length;n++)t.data.indexToPageMap[n]==t.data.startIndex&&(e=parseInt(t.data.indexToPageMap[n-1]));t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})});a()("#co_relatedinfo_km_pagination_first_Button").click(function(){var e=parseInt(t.data.indexToPageMap[1]);t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})})}if(t.hasNext){a()("#co_relatedinfo_km_pagination_next_Button").click(function(){for(var e=null,n=0;n<t.data.indexToPageMap.length;n++)t.data.indexToPageMap[n]==t.data.startIndex&&(e=parseInt(t.data.indexToPageMap[n+1]));t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})});a()("#co_relatedinfo_km_pagination_last_Button").click(function(){var e=parseInt(t.data.indexToPageMap[t.data.indexToPageMap.length-1]);t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})})}c["default"].EnableIpad||a()("#co_RI_ResultsPerPage").change(function(e){Q["default"].Preference.Set("Global","ResultsPerPage",e.target.value,function(){});t.data.client.retrieveSearchResults(1,parseInt(e.target.value),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:1})})})}}var us=n("PYM6+u89");function fs(){var e=ne["default"].createElement,t=this;this.data=null;this.parentDiv=null;this.hasPrevious=!1;this.hasNext=!1;this.setData=function(e){this.data=e};this.setParentDiv=function(e){this.parentDiv=e};this.draw=function(){this.parentDiv.appendChild(n());this.parentDiv.appendChild(o());t.wireEvents()};var n=function(){var n=e("ul",{id:"co_docToolbarMenuLeft"}),o=e("li",{id:"co_categoryLabelContainer",class:"co_categoryLabelWidget"}),i=ne["default"].addCommas(t.data.totalDocCount),a=e("h3",{},"West km Citing References ("+i+")");o.appendChild(a);n.appendChild(o);o=e("li",{id:"co_paginationListItem_id",class:"co_paginationListItem_class"});if(t.data.startIndex>1){o.appendChild(function(){var t=h["default"].GetHost(h["default"].Images),n=e("a",{id:"co_relatedinfo_km_toolbar_back_Button"}),o=e("img",{alt:"Previous Page",src:"http://"+t+"/images/v1/co_documentFooterArrowPrevious.png"});n.appendChild(o);return n}());t.hasPrevious=!0}var r=e("h3",{},ne["default"].addCommas(t.data.startIndex)+"-"+ne["default"].addCommas(t.data.lastIndex)+" of "+ne["default"].addCommas(t.data.totalDocCount));o.appendChild(r);if(t.data.lastIndex<t.data.totalDocCount){o.appendChild(function(){var t=h["default"].GetHost(h["default"].Images),n=e("a",{id:"co_relatedinfo_km_toolbar_next_Button",href:"#"}),o=e("img",{alt:"Next Page",src:"http://"+t+"/images/v1/co_documentFooterArrowNext.png"});n.appendChild(o);return n}());t.hasNext=!0}n.appendChild(o);o=e("li");for(var s=e("select",{id:"co_realtedInfo_km_sort_options",class:"co_realtedInfo_km_sort_options"}),l=t.data.sortByOptions,d=0;d<l.length;d++){var c=e("option",{value:l[d].Key},l[d].Name);l[d].Applied&&c.setAttribute("selected","selected");s.appendChild(c)}o.appendChild(s);n.appendChild(o);return n},o=function(){var t=e("ul",{id:"co_docToolbarMenuRight"}),n=new function(){this.isKMList=!1;var e=this;this.setControlsList=function(e){this.controlsList=e};this.setPlaceHolderElement=function(e){this.placeHolderElement=e};this.draw=function(e){null!=e&&void 0!=e&&(this.isKMList=e);var t=document.createElement("li");t.id="co_docToolbarSaveToWidget";var n=document.createElement("div");n.id="co_saveTo";t.appendChild(n);this.createSaveToWidget(n);void 0!==this.controlsList&&null!==this.controlsList?this.controlsList.appendChild(t):void 0!==this.placeHolderElement&&null!==this.placeHolderElement&&a()(this.placeHolderElement).replaceWith(t)};this.createSaveToWidget=function(e){var t=new us["default"];if(void 0!==t){t.SetContentCallback(this.getSelectedItems);t.SetDomElement(e);t.Draw()}};this.getSelectedItems=function(){
if(e.isKMList&&void 0!==os.singletonInstance)return os.singletonInstance.getSelectedDragItems();if(void 0!==ts.Instance.checkBoxWidget)return ts.Instance.checkBoxWidget.getSelectedItems();throw new f["NonUserError"](h["default"].RelatedInfo,"No instance of Checkbox widget was found.")}};n.setControlsList(t);n.draw(!0);return t};this.wireEvents=function(){a()(".co_realtedInfo_km_sort_options").change(function(e){t.data.client.sort(e.target.value,1,function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:t.data.startIndex,transitionType:"ListViewType"})})});t.hasPrevious&&a()("#co_relatedinfo_km_toolbar_back_Button").click(function(){for(var e=null,n=0;n<t.data.indexToPageMap.length;n++)t.data.indexToPageMap[n]==t.data.startIndex&&(e=parseInt(t.data.indexToPageMap[n-1]));t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})});t.hasNext&&a()("#co_relatedinfo_km_toolbar_next_Button").click(function(){for(var e=null,n=0;n<t.data.indexToPageMap.length;n++)t.data.indexToPageMap[n]==t.data.startIndex&&(e=parseInt(t.data.indexToPageMap[n+1]));t.data.client.retrieveSearchResults(e,e+parseInt(t.data.docsPerPage),function(){y["default"].Publish("Cobalt.RelatedInfo.KM.FirmCitingReferences",{rank:t.data.context.rank,docSource:t.data.context.docSource,transitionType:"ListViewType",count:t.data.context.count,searchTranId:t.data.context.searchTranId,startIndex:e})})})}}function hs(){this.documentGuid=null;this.originalContext=null;this.clientId=null}hs.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setOriginalContext:function(e){this.originalContext=e},getOriginalContext:function(){return this.originalContext},setClientId:function(e){this.clientId=e},getClientId:function(){return this.clientId},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&(e instanceof hs||this.documentGuid!==e.getDocumentGuid()||this.originalContext!==e.getOriginalContext()||this.clientId!==e.getClientId())||(t=!0);return t}};var ps=function e(){var t=this;e.singletonInstance=this;this.docSource=null;this.rank=null;this.documentCollection=null;this.preViewData=null;this.previewItemCache={};this.setDocSource=function(e){this.docSource=e};this.setRank=function(e){this.rank=e};this.setDocumentCollection=function(e){this.documentCollection=e};this.addTabPreview=function(t,n,o,i,a,r,s,l,d){var c=e.singletonInstance;if("StatuteHistory"===i||"ContextAnalysis"===i||"riContextAnalysis"===i||"StatuteCitingReferences"===i||"Profiler"===i||"wlncCitingReferences"===i||"kcCitingReferences"===i||"riMedicalReferences"===i||"wlnIPToolsOverview"===i){var u={};u.tabAnchorElement=s;u.anchorElement=t;u.contentElement=n;u.documentGuid=o;u.category=i;u.selectedCategory=a;u.hasBeenPopulated=!1;u.originationContext=r;u.showing=!1;u.timeoutId=null;u.entityId=l;u.entityType=d;c.previewItemCache[i]=u;if("StatuteCitingReferences"===i){var f=document.getElementById("co_"+i+"NavAnchor");if(void 0!==f&&null!==f){f.style.display="none";c.drawInContentElement(u,u.contentElement,u.documentGuid,u.category,u.selectedCategory,u.originationContext,c.docSource,c.rank,c.documentCollection,c.preViewData,u.entityId,u.entityType);u.hasBeenPopulated=!0}}else c.enableDropdown(i)}};this.enableDropdown=function(t){var n=e.singletonInstance,o=n.previewItemCache[t],i=function(e){if(13===e.which){e.preventDefault();o.showing?n.hideAfterDelay(o.category):n.showAfterDelay(o.category);return!1}},r=function(){n.hideAfterDelay(o.category)},s=function(){n.showAfterDelay(o.category)};a()(o.tabAnchorElement).keyup(i);a()(o.tabAnchorElement).keypress(i);a()(o.tabAnchorElement).keydown(i);a()(o.tabAnchorElement).focusout(r);a()(o.tabAnchorElement).mouseenter(s);a()(o.tabAnchorElement).mouseleave(r);a()(o.anchorElement).focusin(s);a()(o.anchorElement).focusout(r);a()(o.anchorElement).mouseenter(s);a()(o.anchorElement).mouseleave(r);a()(o.contentElement).focusin(s);a()(o.contentElement).focusout(r);a()(o.contentElement).mouseenter(s);a()(o.contentElement).mouseleave(r)};this.hideAfterDelay=function(t){var n=e.singletonInstance.previewItemCache[t];if(null!==n.timeoutId){clearTimeout(n.timeoutId);n.timeoutId=null}n.timeoutId=setTimeout(function(){if(n.showing){n.showing=!1;n.anchorElement.className="co_dropdownArrowCollapsed";n.contentElement.style.display="none"}},250)};this.showAfterDelay=function(t){var n=e.singletonInstance,o=n.previewItemCache[t];if(null!==o.timeoutId){clearTimeout(o.timeoutId);o.timeoutId=null}o.timeoutId=setTimeout(function(){if(!o.hasBeenPopulated){n.drawInContentElement(o,o.contentElement,o.documentGuid,o.category,o.selectedCategory,o.originationContext,n.docSource,n.rank,n.documentCollection,n.preViewData,o.entityId,o.entityType);o.hasBeenPopulated=!0}if(!o.showing){o.showing=!0;o.anchorElement.className="co_dropdownArrowCollapsed";o.contentElement.className="co_dropdownBoxExpanded";o.contentElement.style.display="block"}},250)};this.drawInContentElement=function(e,t,n,o,i,a,r,s,l,d,c,u){var f=null;"StatuteHistory"===o?f=new wr:"ContextAnalysis"===o?f=new Er:"riContextAnalysis"===o?f=new Nr:"StatuteCitingReferences"===o?f=new Ar:"Profiler"===o?f=new Pr:"wlncCitingReferences"===o?f=new Lr:"kcCitingReferences"===o?f=new Mr:"riMedicalReferences"===o?f=new Fr:"wlnIPToolsOverview"===o&&(f=new Gr);if(null!==f&&void 0!==f){var h=document.createElement("div");h.className="co_dropdownBoxExpanded_inner";t.appendChild(h);f.setParentElement(h);f.setDocumentGuid(n);f.setCategory(o);f.setSelectedCategory(i);f.setOriginationContext(a);f.setDocSource(r);f.setRank(s);f.setDocumentCollection(l);f.setContentElement(t);f.setPreviewItem(e);f.setEntityId(c);f.setEntityType(u);"Profiler"!==o?f.draw():f.draw(d)}};y["default"].Subscribe("Cobalt.RelatedInfo.Widget.Preview.AbstractListPreviewWidget.showDropdown",function(e,n){t.enableDropdown(n.Data.category)})};function ms(){this.documentGuid=null;this.jurisdiction=null;this.topicCount=null;this.docCount=null;this.light=null;this.planIcons=null;this.warningFlag=null;this.globalJurisdiction=null;this.docSource=null;this.rank=null;this.documentCollection=null}ms.prototype={setGlobalJurisdiction:function(e){this.globalJurisdiction=e},getGlobalJurisdiction:function(){return this.globalJurisdiction},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setWarningFlag:function(e){this.warningFlag=e},getWarningFlag:function(){return this.warningFlag},setPlanIcons:function(e){this.planIcons=e},getPlanIcons:function(){return this.planIcons},setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setDocumentCollection:function(e){this.documentCollection=e},getDocumentCollection:function(){return this.documentCollection},setJurisdiction:function(e){this.jurisdiction=e},getJurisdiction:function(){return this.jurisdiction},setTopicCount:function(e){this.topicCount=e},getTopicCount:function(){return this.topicCount},setDocCount:function(e){this.docCount=e},getDocCount:function(){return this.docCount},setRank:function(e){this.rank=e},getRank:function(){return this.rank},setLight:function(e){this.light=e},isLight:function(){return this.light},equals:function(e){if(!(ne["default"].isNotNullOrUndefined(e)&&e instanceof ms))return!1;return this.documentGuid===e.getDocumentGuid()&&this.topicCount===e.getTopicCount()&&this.docCount===e.getDocCount()&&this.rank===e.getRank()&&this.light===e.isLight()&&this.docSource===e.getDocSource()&&this.documentCollection===e.getDocumentCollection()}};function gs(){this.documentGuid=null;this.docSource=null;this.rank=null;this.contextData=null;this.documentCollection=null}gs.prototype={equals:function(e){var t=!1
;ne["default"].isNotNullOrUndefined(e)&&e instanceof gs&&this.documentGuid===e.documentGuid&&this.docSource===e.docSource&&this.rank===e.rank&&this.contextData===e.contextData&&this.documentCollection===e.documentCollection&&(t=!0);return t}};var vs={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},Cs={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},_s="[aeiouy]",bs="[^aeiou][^aeiouy]*",ys=_s+"[aeiou]*",Ss="^("+bs+")?"+ys+bs,Ds="^("+bs+")?"+ys+bs+"("+ys+")?$",Ts="^("+bs+")?"+ys+bs+ys+bs,ws="^("+bs+")?"+_s;var Is=function(e){var t,n,o,i,a,r,s;if(e.length<3)return e;"y"==(o=e.substr(0,1))&&(e=o.toUpperCase()+e.substr(1));a=/^(.+?)([^s])s$/;(i=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(i,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2"));a=/^(.+?)(ed|ing)$/;if((i=/^(.+?)eed$/).test(e)){var l=i.exec(e);if((i=new RegExp(Ss)).test(l[1])){i=/.$/;e=e.replace(i,"")}}else if(a.test(e)){t=(l=a.exec(e))[1];if((a=new RegExp(ws)).test(t)){e=t;a=/(at|bl|iz)$/;r=new RegExp("([^aeiouylsz])\\1$");s=new RegExp("^"+bs+_s+"[^aeiouwxy]$");if(a.test(e))e+="e";else if(r.test(e)){i=/.$/;e=e.replace(i,"")}else s.test(e)&&(e+="e")}}if((i=/^(.+?)y$/).test(e)){t=(l=i.exec(e))[1];(i=new RegExp(ws)).test(t)&&(e=t+"i")}if((i=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)){t=(l=i.exec(e))[1];n=l[2];(i=new RegExp(Ss)).test(t)&&(e=t+vs[n])}if((i=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)){t=(l=i.exec(e))[1];n=l[2];(i=new RegExp(Ss)).test(t)&&(e=t+Cs[n])}a=/^(.+?)(s|t)(ion)$/;if((i=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)){t=(l=i.exec(e))[1];(i=new RegExp(Ts)).test(t)&&(e=t)}else if(a.test(e)){t=(l=a.exec(e))[1]+l[2];(a=new RegExp(Ts)).test(t)&&(e=t)}if((i=/^(.+?)e$/).test(e)){t=(l=i.exec(e))[1];i=new RegExp(Ts);a=new RegExp(Ds);r=new RegExp("^"+bs+_s+"[^aeiouwxy]$");(i.test(t)||a.test(t)&&!r.test(t))&&(e=t)}i=/ll$/;a=new RegExp(Ts);if(i.test(e)&&a.test(e)){i=/.$/;e=e.replace(i,"")}"y"==o&&(e=o.toLowerCase()+e.substr(1));return e},Es={};var xs=n("+3n1BQpy");function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(){var e=this;this.originalDocLink=null;this.parentDocGuid=null;this.parentDiv=null;this.recommendedDocs=null;this.transitionType=null;this.highlightTerms=null;this.setParentDiv=function(e){this.parentDiv=e};this.setRecommendedDocs=function(e){this.recommendedDocs=e};this.setParentDocGuid=function(e){this.parentDocGuid=e};this.initializeView=function(){this.draw()};this.draw=function(){var i="",s="",l=!1,d=[],c=C["default"].Parse(window.location.href);ne["default"].docLevelRecommendationFeatureEnabled()?e.transitionType="DocLevelRelatedDocItem":e.transitionType="RecommendedDocumentItem";var p=c.QueryString;e.highlightTerms=function(e){if(null!=e.navigationPath){var t=b["default"].getEmbeddedDocNavInfoFromDom(e.listSource,e.navigationPath,e.list,e.rank);if(null!=t)return t.HighlightTerms}return null}(p);var m=p.transitionType,g=p.navigationPath,v=p.contextData;e.originalDocLink=C["default"].Relative(C["default"].Page.Document({guid:e.parentDocGuid,viewType:"FullText",contextData:v,transitionType:e.transitionType,listSource:p.listSource,list:p.list,rank:p.rank,listPageSource:p.listPageSource,navigationPath:g}));if(m&&g&&m===e.transitionType&&v.indexOf("sc.Recommended")>0){var _=new function(){var e=this;this.returnToDocLink=null;this.parentDiv=null;this.setParentDiv=function(e){this.parentDiv=e};this.setReturnToDocLink=function(e){this.returnToDocLink=e};this.draw=function(){if(!e.parentDiv)throw new f["NonUserError"](h["default"].Document,"Could Not Draw ReturnToDoc: parentElement was null or undefined");e.AddReturnToDocWidget(e.parentDiv)};this.AttachWidgetToParentDiv=function(e,t,n,o){var i=a()("#"+e),r=a()('<li id="co_docToolbarBackToResults"></li>'),s=a()("<div></div>");s.attr("id",n);s.append(o);r.append(s);i.empty();i.append(r)};this.AddReturnToDocWidget=function(t){var n="Previous Document",o=a()("<a class='co_tbButton' href='"+decodeURIComponent(e.returnToDocLink)+"'><span class='icon25 icon_back_arrow btnOffset'></span>"+I["default"].format("SC.Document.Widget.BackToResults.ReturnToButtonText",{Title:n},"Return to ".concat(n))+"</a>");e.AttachWidgetToParentDiv(t,"div",r["default"].ids.breadcrumb,o)}};_.setParentDiv("co_docToolbarMenuLeft");_.setReturnToDocLink(g);_.draw()}for(var y in e.recommendedDocs)d.push(y);for(var S=0;S<d.length;S++){var D=e.recommendedDocs[d[S]];if("object"!==Ns(D))continue;var T=t(d[S]);if(!e.isDisplayableContentTypeList(T))continue;if(ne["default"].isNotNullOrUndefined(D)&&D.length>0){for(var w=0,E=0;E<D.length&&w<3;E++)if(e.isDisplayableContentTypeItem(D[E])){i+='<li role="none">\n                               '.concat(0===w?"<h3>".concat(T,"</h3>"):"","\n                               ").concat(n(D[E],E+1),"\n                             </li>");w++}s=o(T,D)}if(""!==s){l=!0;i+=s;i+='<li role="none" class="co_relatedDocs_seeMore">\n                                 <a href="javascript:void(0)" data-contenttype="'.concat(T,'">\n                                   ').concat(I["default"].format("SC.RelatedInfo.RelatedDocuments.SeeMore",{contentType:T},"See More ".concat(T)),"\n                                 </a>\n                               </li>");s=""}}if(Object(u["IsNotNullOrEmpty"])(i)){var x='<div class="co_genericBox">\n                          <ol class="co_searchResult_list co_genericBoxContent">\n                            '.concat(i,'\n                          </ol>\n                          <div class="co_genericBoxFooter">\n                            <span></span>\n                          </div>\n                        </div>');a()(e.parentDiv).html(x)}l&&a()("li.co_relatedDocs_seeMore a").click(function(){var e=a()(this).data("contenttype"),t=e.split(" ").join("_");if(a()(this).html()==I["default"].format("SC.RelatedInfo.RelatedDocuments.SeeMore",{contentType:e},"See More ".concat(e))){a()("li#co_relatedDocs_"+t+".co_relatedDocs_expandable").css("display","list-item");a()(this).html(I["default"].format("SC.RelatedInfo.RelatedDocuments.SeeLess",{contentType:e},"See Less ".concat(e)))}else{a()("li#co_relatedDocs_"+t+".co_relatedDocs_expandable").css("display","none");a()(this).html(I["default"].format("SC.RelatedInfo.RelatedDocuments.SeeMore",{contentType:e},"See More ".concat(e)));a()(this).focus()}return!1})};this.isDisplayableContentTypeList=function(){return!0};this.isDisplayableContentTypeItem=function(){return!0};function t(e){if("analyticalRecommendedItems"===e)return xs["default"].getDisplayName("ANALYTICAL");if("briefRecommendedItems"===e)return xs["default"].getDisplayName("BRIEF");if("pmmRecommendedItems"===e)return xs["default"].getDisplayName("PMM");return null}function n(t,n){var o=C["default"].Relative(C["default"].Page.Document({guid:t.docGuid,viewType:"FullText",transitionType:e.transitionType,originationContext:e.recommendedDocs.reRankerUsed,contextData:"(sc.Recommended)",navigationPath:encodeURIComponent(e.originalDocLink)})),a=null!=t.docTitle&&t.docTitle.length>0?t.docTitle:t.shortTitle,r="";!1===t.inPlan&&(r='<span class="co_outOfPlanLabel">Out of Plan</span>');var s="".concat(r,'\n                           <h3>\n                             <a id="cobalt_result_title').concat(n,'"\n                               class="draggable_document_link"\n                               href="').concat(o,'"\n                               docguid="').concat(t.docGuid,'"\n                               subcontenttype="analytical">\n                               ').concat(i(a),"\n                             </a>\n                           </h3>")
;"Secondary Sources"===t.contentType?s+='<div class="co_searchResults_citation">\n                              <span>'.concat(i(t.cite),"</span>\n                            </div>"):s+='<div class="co_searchResults_citation">\n                              <span>'.concat(i(t.cite),"</span><br />\n                              <span>").concat(i(t.shortTitle),"</span><br />\n                              <span>").concat(i(t.courtAbbrev),"</span><br />\n                              <span>").concat(i(t.dateFile),"</span>\n                            </div>");return s+='<div id="co_snippet_'.concat(n,'" class="co_snippet">\n            ').concat(i(function(e){if(e.length<=200)return"..."+e;return"..."+e.substring(0,201)+"..."}(t.docSummary)),"\n          </div>")}function o(t,o){for(var i="",a="",r=0,s=0;s<o.length;s++)e.isDisplayableContentTypeItem(o[s])&&++r>3&&(a+='<li role="none">\n                                        '.concat(n(o[s],s+1),"\n                                      </li>"));if(""!==a){var l=t.split(" ").join("_");i+='<li role="none" id="co_relatedDocs_'.concat(l,'"\n                              class="co_relatedDocs_item co_relatedDocs_expandable" style="display: none;">\n                              <ol class="co_searchResult_list">\n                                ').concat(a,"\n                              </ol>\n                            </li>")}return i}function i(t){if(null==t)return null;return function(e,t,n,o){var i,a=Is,r=[];if(null===e||void 0===e||!(e instanceof Array)||0===e.length)return t;if(null===t||void 0===t||"string"!=typeof t)return null;for(var s=0;s<e.length;s++){var l=e[s].replace(/[^\w]/g,"").toLowerCase(),d=a(l);r.push(d);Es[l]=d}null!==n&&void 0!==n&&"string"==typeof n&&0!==n.length||(n="span");i=null!==o&&void 0!==o&&o instanceof Array&&0!==o.length?"<"+n+' class="'+o.join(" ")+'">':"<"+n+">";for(var c="</"+n+">",u=t.split("\n"),f="",h=0;h<u.length;h++){var p=u[h].split(" ");for(s=0;s<p.length;s++){var m=p[s],g=m.replace(/[^\w]/g,"").toLowerCase();null==Es[g]&&(Es[g]=a(g));for(var v=!1,C=0;C<r.length;C++)if(Es[g]===r[C]){v=!0;break}if(v){var _=m.match(/^[^\w]+/);if(null!=_){f+=_[0];m=m.substring(_[0].length,m.length)}f+=i;var b=m.match(/[^\w]+$/),y=c;if(null!=b){y+=b[0];m=m.substring(0,m.length-b[0].length)}f+=m+y}else f+=m;s!=p.length-1&&(f+=" ")}h!=u.length-1&&(f+="\n")}return f}(e.highlightTerms,Object(u["EncodeHtml"])(t),"span",["co_searchTerm"])}}function As(){this.documentGuid=null;this.contextData=null;this.documentCollection=null;this.sortOrder=null;this.sortType=null;this.searchQuery=null;this.facetGuid=null;this.subFacetGuid=null;this.docSource=null;this.rank=null}As.prototype={setDocumentGuid:function(e){this.documentGuid=e},getDocumentGuid:function(){return this.documentGuid},setDocumentCollection:function(e){this.documentCollection=e},getDocumentCollection:function(){return this.documentCollection},setContextData:function(e){this.contextData=e},getContextData:function(){return this.contextData},setSortOrder:function(e){this.sortOrder=e},getSortOrder:function(){return this.sortOrder},setSortType:function(e){this.sortType=e},getSortType:function(){return Object(u["IsNotNullOrEmpty"])(this.sortType)?this.sortType:"alphabetical"},setSearchQuery:function(e){this.searchQuery=e},getSearchQuery:function(){return this.searchQuery},setFacetGuid:function(e){this.facetGuid=e},getFacetGuid:function(){return this.facetGuid},setSubFacetGuid:function(e){this.subFacetGuid=e},getSubFacetGuid:function(){return this.subFacetGuid},setDocSource:function(e){this.docSource=e},getDocSource:function(){return this.docSource},setRank:function(e){this.rank=e},getRank:function(){return this.rank},equals:function(e){var t=!1;ne["default"].isNotNullOrUndefined(e)&&this.documentGuid===e.documentGuid&&this.contextData===e.contextData&&this.documentCollection===e.documentCollection&&this.sortOrder===e.sortOrder&&this.sortType===e.sortType&&this.searchQuery===e.searchQuery&&this.facetGuid===e.facetGuid&&this.subFacetGuid===e.subFacetGuid&&this.docSource===e.docSource&&this.rank===e.rank&&(t=!0);return t}};function Rs(e){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ps(){var e=this;this.parentDiv=null;this.docRecommendDiv=null;this.docGuid=null;this.docSource=null;this.rank=null;this.docSource=null;this.docMetaData=null;this.documentCollection=null;this.progressIndicator=null;this.topicContainer=null;this.setDocMetaData=function(e){this.docMetaData=e};this.setDocSource=function(e){this.docSource=e};this.setDocSource=function(e){this.docSource=e};this.setRank=function(e){this.rank=e};this.setDocRecommendDiv=function(e){this.docRecommendDiv=e};this.setParentDiv=function(e){this.parentDiv=e};this.setDocGuid=function(e){this.docGuid=e};this.setDocumentCollection=function(e){this.documentCollection=e};this.draw=function(){this.parentDiv.innerHTML=" ";try{if("Statutes"==e.docMetaData.ContentType)e.drawStatuteRightRailWidget();else if("w_profiler_wldpr"==e.docMetaData.Collection){var t=new function e(){e.singletonInstance=this;var t=this;this.widgetName="ProfilerTools";this.parentDiv=null;this.docGuid=null;this.docSource=null;this.rank=null;this.docSource=null;this.documentCollection=null;this.progressIndicator=null;this.topicContainer=null;this.expertName=null;this.setExpertName=function(e){this.expertName=e};this.setDocSource=function(e){this.docSource=e};this.setDocSource=function(e){this.docSource=e};this.setRank=function(e){this.rank=e};this.setParentDiv=function(e){this.parentDiv=e};this.setDocGuid=function(e){this.docGuid=e};this.setDocumentCollection=function(e){this.documentCollection=e};this.draw=function(){if("w_profiler_wldpr"!=this.documentCollection){y["default"].Publish("Cobalt.Document.RelatedWidget.Loaded",{widgetName:this.widgetName});return}var e=document.createElement("div");e.className="co_genericBox co_relatedinfo_topic_container";e.id="co_relatedinfo_topic_container";this.topicDiv=e;this.progressIndicator=new ee["default"](this.topicDiv,"small");this.progressIndicator.Draw();t.topicDiv.innerHTML=" ";t.parentDiv.appendChild(t.topicDiv);var n=document.createElement("h3");t.topicDiv.appendChild(n);n.className="co_genericBoxHeader";var o=document.createElement("span");o.innerHTML=I["default"].lookup("SC.RelatedInfo.ProfilerTools.Header","<strong>Related</strong> Tools");n.appendChild(o);var i=document.createElement("div");i.className="co_genericBoxContent";t.topicDiv.appendChild(i);var r=document.createElement("a");r.id="co_relatedInfo_professionals_findlaw_link";r.innerHTML=I["default"].lookup("SC.RelatedInfo.ProfilerTools.SighOnToFindLaw","Sign on to FindLaw to Update Your Profile");i.appendChild(r);a()(r).click(function(){Object(Z["website_LinkoutAndShowTimeoutLightboxExternal"])("http://flcas.findlaw.com/auth.jsp?tk=nUOoB6Cpmtfd3AbrwsLQPjBAuxmbCa39&app=3041","Sign on to Findlaw")});var s=document.createElement("div");s.className="co_genericBoxFooter";t.topicDiv.appendChild(s);s.appendChild(document.createElement("span"))}};t.setParentDiv(e.parentDiv);t.setDocGuid(e.docGuid);t.setDocSource(e.docSource);t.setExpertName(e.docMetaData.TitleText);t.setDocumentCollection(e.docMetaData.Collection);t.draw()}else{if("NewsAlert"==this.docMetaData.SubContentType)return;e.drawTopTopics()}var n=new function(){var e=this;this.createEl=ne["default"].createElement;this.parentDiv=null;this.docGuid=null;this.docSource=null;this.bigFormsContainer=null;this.documentCollection=null;this.topTopicsComplete=!1;this.data=null;this.drawComplete=!1;y["default"].Subscribe("Cobalt.RelatedInfo.TopTopics.Complete",function(){e.topTopicsComplete=!0;null==e.data||e.drawComplete||e.drawBigForms()});this.setParentDiv=function(e){this.parentDiv=e};this.setDocGuid=function(e){this.docGuid=e};this.setDocSource=function(e){this.docSource=e};this.setDocumentCollection=function(e){this.documentCollection=e};this.draw=function(){var t=new gs;t.documentGuid=e.docGuid;t.docSource=e.docSource;t.rank=e.rank;t.contextData=C["default"].PageContextData
;t.documentCollection=e.documentCollection;fi.requestData(t,e.drawCallback)};this.drawCallback=function(t){e.data=t;e.topTopicsComplete&&!e.drawComplete&&e.drawBigForms()};this.drawBigForms=function(){var t=this.createEl("div");t.className="co_genericBox co_relatedinfo_topic_container";t.id="co_relatedinfo_formfamilies_container";this.bigFormsContainer=t;this.parentDiv.appendChild(t);if(ne["default"].isNotNullOrUndefined(e.data.contentResult)){var n=e.data.contentResult.formFamilies,o=e.createEl("ul"),i=e.createEl("div");i.className="co_genericBoxContent";if(ne["default"].isNotNullOrUndefined(n)&&n.length>0){var a=document.createElement("h3");e.bigFormsContainer.appendChild(a);a.className="co_genericBoxHeader";var r=document.createElement("span");r.innerHTML="<strong>Form</strong> Families";a.appendChild(r);i.appendChild(o);e.bigFormsContainer.appendChild(i);for(var s=0;s<n.length;s++){var l=n[s],d=e.createEl("li",{},l.topic+" - "+l.jurisdiction);d.className="co_relatedInfo_topic_item";o.appendChild(d);var c=l.formPhases,u=e.createEl("ul");u.className="co_relatedInfo_topic_itemList";d.appendChild(u);if(ne["default"].isNotNullOrUndefined(c))for(var f=0;f<c.length;f++){var h=c[f],p=e.createEl("li",{},h.phaseText);p.className="co_relatedInfo_topic_item";u.appendChild(p);var m=h.formTitles,g=e.createEl("ul");g.className="co_relatedInfo_topic_itemList";p.appendChild(g);if(ne["default"].isNotNullOrUndefined(m))for(var v=0;v<m.length;v++){var C=m[v],_=e.createEl("li");_.className="co_relatedInfo_topic_item";var b=e.createEl("div");b.className="co_relatedInfo_topics_document_title";_.appendChild(b);var y=e.createEl("a",{},C.titleText);y.className="co_relatedInfo_topics_document_title";y.href=C.titleLink;b.appendChild(y);g.appendChild(_)}}}i.appendChild(o);var S=document.createElement("div");S.className="co_genericBoxFooter";e.bigFormsContainer.appendChild(S);S.appendChild(document.createElement("span"))}}this.drawComplete=!0};this.renderErrorMessage=function(t){var n=document.getElementById(e.parentDiv),o=new A["default"](n);o.SetListItemIdPrefix("coid_relatedInfo_errors_topTopics");o.Draw();o.SetMessage(I["default"].lookup("SC.RelatedInfo.GetTopTopicsMessage","Related Concepts are not available at this time."));o.SetHiddenMessage(t.ErrorMessage+" ("+t.ErrorType+")")}};n.setDocGuid(e.docGuid);n.setParentDiv(e.parentDiv);n.setDocSource(e.docSource);n.setDocumentCollection(e.documentCollection);n.draw()}catch(t){e.renderErrorMessage({ErrorType:-5,ErrorMessage:("undefined"==typeof message?"undefined":Rs(message))+": "+t.message})}};this.drawStatuteRightRailWidget=function(){var t=new function(){var e=this;this.parentDiv=null;this.docGuid=null;this.docSource=null;this.docMetaData=null;this.nodData=null;this.nodDiv=null;this.documentCollection=null;this.rank=null;this.setDocMetaData=function(e){this.docMetaData=e};this.setDocSource=function(e){this.docSource=e};this.setParentDiv=function(e){this.parentDiv=e};this.setDocGuid=function(e){this.docGuid=e};this.setDocumentCollection=function(e){this.documentCollection=e};this.setRank=function(e){this.rank=e};this.draw=function(){var t=document.createElement("div");t.className="co_genericBox co_relatedinfo_rrnod_container";t.id="co_relatedinfo_rrnod_container";this.nodDiv=t;this.parentDiv.appendChild(t);this.progressIndicator=new ee["default"](t,"small");this.progressIndicator.Draw();var n=new As;n.setDocumentGuid(this.docGuid);n.setContextData(C["default"].PageContextData);n.setDocumentCollection(this.documentCollection);n.setDocSource(this.docSource);n.setRank(this.rank);pi.requestData(n,e.drawCallback)};this.drawCallback=function(t){if(void 0!==t&&null!==t&&void 0!==t.contentResponse&&null!==t.contentResponse){if(0!=t.ErrorType){e.renderErrorMessage(t);return}e.nodData=t;e.drawCallback2(null)}else e.nodDiv.innerHTML=" "};this.drawCallback2=function(){e.nodDiv.innerHTML=" ";var t=e.nodData.contentResponse.notesOfDecisionsBlocks;if(void 0!==t&&e.nodData.contentResponse.documentCount>0){for(var n=!1,o=0;void 0!==t[o];o++)if(void 0!==t[o].navigationItems&&null!==t[o].navigationItems&&t[o].navigationItems.length>0){n=!0;break}if(n){var i=document.createElement("h3");e.nodDiv.appendChild(i);i.className="co_genericBoxHeader";var a=document.createElement("span");a.innerHTML="<strong>Notes of Decisions</strong> ("+e.nodData.contentResponse.documentCount+")";i.appendChild(a);var r=document.createElement("div");r.className="co_genericBoxContent";e.nodDiv.appendChild(r);1!==t.length||1!==t[0].navigationItems.length||void 0!==t[0].navigationItems[0].title&&""!==t[0].navigationItems[0].title?e.drawNODTopLevels(t,r):e.drawNODHierarchy(t[0].navigationItems[0].subItems,r);var s=document.createElement("div");s.className="co_genericBoxFooter";s.appendChild(document.createElement("span"));e.nodDiv.appendChild(s)}}};this.drawNODTopLevels=function(e,t){var n=document.createElement("ul");n.className="co_relatedInfo_rrnod_list";t.appendChild(n);for(var o=0;void 0!==e[o];o++)for(var i=e[o],a=0;void 0!==i.navigationItems[a];a++){var r=i.navigationItems[a],s=document.createElement("li");n.appendChild(s);s.className="co_relatedInfo_rrnod_item";s.id="ci_relatedInfo_rrnod_item_"+r.itemId;var l=document.createElement("a");l.id="co_relatedInfo_rrnod_link_"+r.itemId;l.className="co_relatedInfo_rrnod_link";l.href=r.linkPersistentUrl;l.appendChild(document.createTextNode(r.title));s.appendChild(l)}};this.drawNODHierarchy=function(e,t){var n=null,o=document.createElement("ul");o.className="co_relatedInfo_rrnod_list";t.appendChild(o);for(var i=0;void 0!==e[i];i++){var a=e[i],r=o;if("1"==a.indentLevel)n=null;else if("3"==a.indentLevel)continue;var s=document.createElement("li");s.className="co_relatedInfo_rrnod_item";s.id="co_relatedInfo_rrnod_item_"+a.itemId;r.appendChild(s);var l=document.createElement("a");l.id="co_relatedInfo_rrnod_link_"+a.itemId;l.className="co_relatedInfo_rrnod_link";l.href=a.linkPersistentUrl;l.appendChild(document.createTextNode(a.title));s.appendChild(l);null==n&&(n=s)}}};t.setParentDiv(e.parentDiv);t.setDocGuid(e.docGuid);t.setDocSource(e.docSource);t.setDocMetaData(e.docMetaData);t.setDocumentCollection(e.documentCollection);t.setRank(e.rank);t.draw()};this.drawTopTopics=function(){var t=new ms;t.setTopicCount(10);t.setDocCount(0);t.setLight(!0);t.setDocSource(e.docSource);t.setRank(e.rank);t.setDocumentCollection(e.documentCollection);if(!ne["default"].isNotNullOrUndefined(e.docGuid))throw new f["CobaltError"](h["default"].RelatedInfo,"docGuid required");e.topicOrigin="DocWidgetTopicLink";e.allTopicsOrigin="DocWidgetAllTopicsLink";t.setDocumentGuid(e.docGuid);var n=document.createElement("div");n.className="co_genericBox co_relatedinfo_topic_container";n.id="co_relatedinfo_topic_container";this.topicDiv=n;this.progressIndicator=new ee["default"](this.topicDiv,"small");this.progressIndicator.Draw();Zo.requestData(t,e.drawTopTopicsCallback)};this.drawTopTopicsCallback=function(t){if(0!=t.ErrorType){e.renderErrorMessage(t);return}e.topicDiv.innerHTML=" ";e.drawRecommendedDocs(t.docRecommendation);e.drawTopicsList(t.topicList);e.fireTopTopicsCompleteEvent(t);y["default"].Publish("Cobalt.TopTopicsWidget.Loaded")};this.drawRecommendedDocs=function(t){if(t&&ne["default"].docLevelRecommendationFeatureEnabled()&&e.docRecommendDiv){e.docRecommendDiv.innerHTML=" ";var n=new ks;n.setParentDocGuid(e.docGuid);n.setRecommendedDocs(t);n.setParentDiv(e.docRecommendDiv);n.draw()}};this.drawTopicsList=function(t){if(void 0!==t.topics&&t.topics.length>0){e.parentDiv.appendChild(e.topicDiv);var n=document.createElement("h3");e.topicDiv.appendChild(n);n.className="co_genericBoxHeader";var o=document.createElement("span");ne["default"].docLevelRecommendationFeatureEnabled()?o.innerHTML="<strong>Selected</strong> Topics":o.innerHTML="<strong>Related</strong> Topics";n.appendChild(o);if("Jury Verdicts"===e.docMetaData.ContentType){var i=document.createElement("div");i.className="co_genericBoxContent";e.topicDiv.appendChild(i);new function(e){this.draw=function(){var t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("li");t.appendChild(n);t.appendChild(o);n.className="co_relatedInfo_topic_item"
;var i=document.createElement("a");i.innerHTML=I["default"].lookup("SC.RelatedInfo.CaseEvaluatorWidget.Link","Case Evaluator");i.href=C["default"].Relative(C["default"].Page.CaseEvaluator({transitionType:C["default"].DefaultTransitionType,contextData:C["default"].PageContextData}));n.appendChild(i);var r=document.createElement("ul");r.className="co_relatedInfo_topic_itemList";var s=document.createElement("li");r.appendChild(s);s.className="co_relatedInfo_topic_item";s.appendChild(document.createTextNode(I["default"].lookup("SC.RelatedInfo.CaseEvaluatorWidget.Description","Generates a report that compares the outcomes of comparable cases")));o.appendChild(r);a()(e).html(t)}}(i).draw()}var r=document.createElement("div");r.className="co_genericBoxContent";e.topicDiv.appendChild(r);if(void 0!==t.topicsSummary){var s=document.createElement("h4");r.appendChild(s);s.id="co_relatedInfo_topics_summary";s.className="co_relatedInfo_topics_summary";s.innerHTML=t.topicsSummary}var l=e.generateTopicTree(t.topics);e.drawTopicsListHierarchy(l,r)}};this.drawTopicsListHierarchy=function(t,n){var o=[];t.childNode.ul=document.createElement("ul");n.appendChild(t.childNode.ul);o.push(t.childNode);while(o.length>0){var i=o.pop(),a=document.createElement("li");a.className="co_relatedInfo_topic_item";i.ul.appendChild(a);if(null===i.topic)a.appendChild(document.createTextNode(i.label));else{a.id="co_relatedInfo_topic_item_"+i.topic.guid;a.appendChild(e.buildTopicLink(i.label,i.topic,e.docGuid,i.topic.jurisdiction,e.topicOrigin,e.docSource,e.rank,i.topic.href))}if(null!=i.nextNode){i.nextNode.ul=i.ul;o.push(i.nextNode)}if(null!=i.childNode){i.childNode.ul=document.createElement("ul");i.childNode.ul.className="co_relatedInfo_topic_itemList";a=document.createElement("li");i.ul.appendChild(a);a.appendChild(i.childNode.ul);o.push(i.childNode)}}var r=document.createElement("div");r.className="co_genericBoxFooter";e.topicDiv.appendChild(r);r.appendChild(document.createElement("span"))};this.fireTopTopicsCompleteEvent=function(e){var t=new y["default"].Message(e,{},"Cobalt.RelatedInfo.TopTopics.Complete","1.0",e);y["default"].Publish("Cobalt.RelatedInfo.TopTopics.Complete",t)};this.buildTopicLink=function(e,t,n,o,i,a,r,s){var l=document.createElement("div");l.id="co_relatedInfo_topics_topic_"+t.guid;l.className="co_relatedInfo_topics_topic";var d=document.createElement("a");d.id="co_relatedInfo_topics_topics_link_"+t.guid;d.className="co_relatedInfo_topics_document_title";var c=e;void 0==c&&(c=t.guid);d.innerHTML=c;d.href=s;l.appendChild(d);return l};this.generateTopicTree=function(e){for(var t=function(e){return{label:e,nextNode:null,childNode:null,topic:null}},n={childNode:null},o=0;o<e.length;o++){for(var i=e[o],a=i.label.split("/"),r=n,s=0;s<a.length;s++){var l=a[s];null===r.childNode&&(r.childNode=t(l));r=r.childNode;while(r.label!==l){null===r.nextNode&&(r.nextNode=t(l));r=r.nextNode}}r.topic=i}return n};this.renderErrorMessage=function(t){var n=new A["default"](e.parentDiv);n.SetListItemIdPrefix("coid_relatedInfo_errors_topTopics");n.Draw();n.SetMessage(I["default"].lookup("SC.RelatedInfo.GetTopTopicsMessage","Related Concepts are not available at this time."));n.SetHiddenMessage(t.ErrorMessage+" ("+t.ErrorType+")")}}var Bs={};Bs.AddTopTopicsWidget=function(e,t,n,o,i,a,r){if(!e)throw new f["NonUserError"](h["default"].Website,"parentDivId was not supplied");if(null==t||0==t.length)throw new f["NonUserError"](h["default"].Website,"docGuid is null or empty");try{var s=new function(){Ps.call(this);var e=this.draw;this.draw=function(){this.parentDiv.innerHTML=" ";var t=!1,n=!1;if(this.docMetaData.metaInformation){t=this.docMetaData.metaInformation.isPublicRecordsDocument;n=this.docMetaData.metaInformation.isGatewayDocument}if(t||n)return;e.call(this)}};s.setParentDiv(document.getElementById(e));s.setDocRecommendDiv(document.getElementById(r));s.setDocGuid(t);s.setDocSource(o);s.setDocMetaData(a);s.setRank(i);s.draw()}catch(e){_e["default"].ConsoleMessage("Error creating TopTopicsWidget widget: "+e,_e["default"].Level.Error,"Cobalt.Website.RelatedInfoPage.CreationError");k["default"].WidgetFailure("TopTopicsWidget widget failed to render.",!1)}};Bs.LoadKMRelatedInformationCounts=function(e,t,n,o,i,a){var r=new Yr;r.setDocumentGuid(a);r.setToken(e);r.setServerProtocol(t);r.setCitation(n);r.setFirmName(o);r.setFirmLogoUri(i);r.setVisible(!1);var s=new function(){var e=this;this.CONSTANT_20=20;this.CONSTANT_50=50;this.CONSTANT_100=100;this.parentDiv=null;this.transformedKMCiteData=null;this.docsPerPage=null;this.client=null;this.facetData=null;this.facetIsApplied=!1;this.kmContext=null;this.setKMContext=function(t){e.kmContext=t};this.init=function(){e.client=new Zr(e.kmContext);var o=function(o){var s={count:o.Count,statusCode:o.StatusCode,searchTranId:o.searchTranId};new ne["default"].EventWrapper("Cobalt.RelatedInfo.KM.ContentLoaded",s).publish();if(e.kmContext.isVisible()){var l=e.kmContext.getStartIndex();null==l&&(l=1);var d=(l=parseInt(l))+r()-1;e.client.retrieveSearchResults(l,d,function(o){e.client.retrieveFacets(function(r){e.facetData=r;for(var s=0;s<e.facetData.length;s++)for(var l=e.facetData[s],d=0;d<l.Values.length;d++){var c=l.Values[d];c.DisplayValue=t(c.DisplayValue);c.IsApplied&&(e.facetIsApplied=!0)}if(0==o.Results.length){e.transformedKMCiteData={};e.transformedKMCiteData.facetData=e.facetData;e.transformedKMCiteData.client=e.client;e.transformedKMCiteData.context=e.kmContext;e.transformedKMCiteData.parsedDataArray={};i()}else{e.transformedKMCiteData=a(o);n()}})})}};null==e.kmContext.getSearchTranId()?e.client.retrieveSearchStatus(o,!1):e.client.retrieveSearchStatus(function(t){if(-1==t.StatusCode){e.kmContext.setSearchTranId(null);e.client.retrieveSearchStatus(o,!1)}else o(t)},!0)};var t=function(e){var t=e;null!=t&&void 0!=t&&(t=t.replace(":",": "));return t},n=function(){var t=new fs;t.setParentDiv(e.kmContext.toolbarWidgetDiv);t.setData(e.transformedKMCiteData);t.draw();var n=new os;n.setParentDiv(e.kmContext.contentWidgetDiv);n.setData(e.transformedKMCiteData);n.draw();var i=new ss;i.setParentDiv(e.kmContext.facetWidgetDiv);i.setData(e.transformedKMCiteData);i.draw();var a=new cs;a.setParentDiv(e.kmContext.paginationWidgetDiv);a.setData(e.transformedKMCiteData);a.draw();o()},o=function(){var t={guid:e.kmContext.getDocumentGuid()},n={documentMetaData:{DocGuid:e.kmContext.getDocumentGuid()},relatedInfoType:"KMCitingReferences",km:!0,historyType:"KeyCite",itemAddedToHistoryAsynchronously:!0},o=new y["default"].Message(t,n,"Cobalt.RelatedInfo.Document","1");y["default"].Publish("Cobalt.RelatedInfo.Render.Complete",o);var i=new hs,a=Q["default"].GetClientMatter();ne["default"].isNotNullOrUndefined(a)&&i.setClientId(a.ClientId);i.setDocumentGuid(e.kmContext.getDocumentGuid());i.setOriginalContext(C["default"].GetResearchOrganizerOriginalContext());wi.submitWebRequest(i,function(){})},i=function(){var t=new ss;t.setParentDiv(e.kmContext.facetWidgetDiv);t.setData(e.transformedKMCiteData);t.setNoFacetInfo(!e.facetIsApplied);t.draw();var n=new os;n.setParentDiv(e.kmContext.contentWidgetDiv);n.setData(e.transformedKMCiteData);n.setNoFacetInfo(!e.facetIsApplied);n.draw()},a=function(t){var n=[],o=[],i=null,a=null,s=null,l=null,d=null,c=null,u=t.Results,f=null;f=e.facetIsApplied?t.FilteredCount:t.Count;for(var h in u){s=u[h];0==h&&(l=s.Index);var p={guid:s.DocumentContext.Id,viewType:"FullText",transitionType:"KMDocument",contextData:C["default"].PageContextData,kmSearchId:t.Id,listSource:"RelatedInfo"},m=C["default"].Absolute(C["default"].Page.KMDocument(p)),g=s.ProfileId,v="<a href='"+m+"'id='co_relatedInfo_km_link"+h+"' title='"+s.Title+"' subcontenttype='km' docguid='"+g+"' class='co_realatedInfo_km_document ui-draggable'><div> <h3>"+s.Title+"</h3> </div> </a>",_=s.FieldData.Fields;v+="<span id ='co_relatedInfo_km_citations' class='co_detailLevel_3'>";for(var b in _){var y=_[b]
;if(ne["default"].isNotNullOrUndefined(y.Values)&&y.Values.length>0&&0!=y.Values[0].length)if("profile_depthoftreatment"!=y.Key)v=b>1?v+'  |  <strong class="co_relatedInfo_km_field_title">'+y.DisplayName+"</strong>: "+y.Values[0]:v+'<strong class="co_relatedInfo_km_field_title">'+y.DisplayName+": </strong> "+y.Values[0];else if(parseInt(y.Values[0])){i=y.Values[0];a=y.Values[1]}else{i=y.Values[1];a=y.Values[0]}}var S={treatment:a,depthCode:i,titleAndCitation:v,profileId:g,title:s.Title};n.push(S)}d=null!=s?s.Index:0;c=t.SortFields;var D=null;D=f/r();f%r()>0&&D++;D=Math.floor(D);for(var T=1;T<D+1;T++){var w=1+(T-1)*r();o[T]=w}return{client:e.client,context:e.kmContext,results:t,docsPerPage:r(),startIndex:l,lastIndex:d,totalDocCount:f,parsedDataArray:n,indexToPageMap:o,sortByOptions:c,facetData:e.facetData}},r=function(){if(null==e.docsPerPage){var t=Q["default"].Preference.Get("Global","ResultsPerPage");c["default"].EnableIpad||c["default"].EnableIphone?t=e.CONSTANT_20:null!=t&&t!=e.CONSTANT_20&&t!=e.CONSTANT_50&&t!=e.CONSTANT_100&&(t=e.CONSTANT_20);e.docsPerPage=t}return parseInt(e.docsPerPage)}};s.setKMContext(r);s.init()};Bs.DisplayKMRelatedInformationCounts=function(e,t){var n=a()("#KMCitingReferencesTab");if(null===n)return;var o=n.find("span")[0],i=a()(o).text(),r=t.Data.count;if(r>0){i+=" ("+I["default"].renderInteger(r)+")";n.removeClass("co_tabInactive");n.find("a.co_tabLink").each(function(){var e=this.attributes["hiddenHref"].value;e&&(this.href=e)})}else if(0==r){i+=" ("+r+")";n.addClass("co_done")}a()(o).text(i)};y["default"].Subscribe("Cobalt.RelatedInfo.KM.ContentLoaded",Bs.DisplayKMRelatedInformationCounts);Bs.LoadRelatedInformationCounts=function(e,t,n,o,i,r,s){if(!c["default"].EnableIpad){if(!c["default"].EnableIpad){var l=new ps;l.setDocSource(t);l.setRank(n)}if(l&&void 0!==o&&o){l.preViewData=i;l.addTabPreview(document.getElementById("co_ProfilerNavAnchor"),document.getElementById("co_ProfilerNavContent"),e,"Profiler",null,"documentTab",document.getElementById("coid_DocumentTab_link"),r,s)}}var d=!0,f=[];a()("li[categoryEnum]").each(function(){var e=this.attributes["categoryEnum"].value;d=d&&"complete"==this.attributes["countStatus"].value;e&&Object(u["IsNotNullOrEmpty"])(e)&&f.push(e)});if(!c["default"].EnableIpad&&!0===d)for(var h=0;h<f.length;h++)l.addTabPreview(document.getElementById("co_"+f[h]+"NavAnchor"),document.getElementById("co_"+f[h]+"NavContent"),e,f[h],null,"documentTab",document.getElementById("coid_relatedInfo_"+f[h]+"_link"),r,s);if(f.length>0&&!0!==d){var p=f.join(",");Bs.CallRIServiceAndGetCounts(e,p,"async",r,function(t){var n=Bs._processCompletedCategoryCounts(t,e,l,r,s);n&&n.length>0&&Bs.CallRIServiceAndGetCounts(e,n,"sync",r,function(t){Bs._processCompletedCategoryCounts(t,e,l,r,s)})})}var m=document.getElementById("co_powByKC");null!=m&&a()(m).on("click",function(){Bs.HandlePoweredByKeyCiteClick()})};Bs.countReturnedHandler=function(e,t,n,o,i,r,s){var l=a()(t).find("span")[0],d=a()(l).text();if(void 0!==n.count){n.count.count>=0&&-1==d.indexOf("(")&&"wlnIPToolsOverview"!==e&&"kcTableOfAuthorities"!==e&&"laDocketMotions"!==e&&(d+=" ("+I["default"].renderInteger(n.count.count)+")");a()(l).text(d);if(0!==n.count.count){if(n.count.count<0&&"StatuteHistory"!==e){var u="Potential error in data supplied from Related Info: negative category count received. docGuid: "+o+" category: "+e+" count: "+n.count.count,p=new f["CobaltError"].EventData(h["default"].Website,u),m="Cobalt.Website.Error",g=new y["default"].Message(p,null,m,"1.0");y["default"].Publish(m,g)}Bs.ActivateTabs(t,n);Bs.AttachUXEvents(t,o);c["default"].EnableIpad||i.addTabPreview(document.getElementById("co_"+e+"NavAnchor"),document.getElementById("co_"+e+"NavContent"),o,e,null,"documentTab",document.getElementById("coid_relatedInfo_"+e+"_link"),r,s)}else{a()(t).addClass("co_done");a()(t).removeClass("co_dropdownTab");var v=t.find("a");if(v.length){var C=v.text().trim(),_=I["default"].format("SC.Website.Views.Shared.TabViews.UnavailableLink",{Link:C},C+" unavailable");v.attr("aria-label",_)}}}};Bs._processCompletedCategoryCounts=function(e,t,n,o,i){var r,s=[];0==e.ErrorType&&a.a.each(e.countStatusList,function(e,l){if("complete"==l.status){r=a()("li[categoryenum="+l.categoryId+"]");Bs.countReturnedHandler(l.categoryId,r,l,t,n,o,i)}else if("error"==l.status){r=a()("li[categoryenum="+l.categoryId+"]");Bs.ActivateTabs(r)}else s.push(l.categoryId)});return s.join(",")};Bs.CallRIServiceAndGetCounts=function(e,t,n,o,i){var r="RelatedInfo/v4/counts/"+e+"/?categories="+t+"&execType="+n+"&entityId="+o;to["default"].Get({vertical:h["default"].RelatedInfo,relativeUrl:r,responseIsJson:!0,excludeFromActiveWebRequestCount:!0,successCallback:function(e){i(e)},timedOutCallback:function(){for(var e=t.split(","),n=0;n<e.length;n++){var o=a()("li[categoryenum="+e[n]+"]");Bs.ActivateTabs(o)}},timeoutMillisecs:9e4})};Bs.ActivateTabs=function(e){a()(e).find("a.co_tabLink").each(function(){var e=this.attributes["hiddenHref"].value;e&&(this.href=e)});a()(e).removeClass("co_tabInactive")};Bs.AttachUXEvents=function(e,t){var n=m["default"].GetObject(r["default"].objectIds.provider);a()(e).find("#coid_relatedInfo_StatuteHistory_link").click(function(){n.GetMetaInformation(t,function(e){Bs.PostUXEvent("Cobalt.Relatedinfo.Judicial.History",{docGuid:t,contentType:e.ContentType})})});a()(e).find("#coid_relatedInfo_kcJudicialHistory_link").click(function(){n.GetMetaInformation(t,function(e){Bs.PostUXEvent("Cobalt.Relatedinfo.Judicial.History",{docGuid:t,contentType:e.ContentType})})});a()(e).find("#coid_relatedInfo_kcCitingReferences_link").click(function(){n.GetMetaInformation(t,function(e){Bs.PostUXEvent("Cobalt.Relatedinfo.Citing.References",{docGuid:t,contentType:e.ContentType})})})};Bs.PostUXEvent=function(e,t){var n=new y["default"].Message({},{},e,"1.0",t);y["default"].SendClientEvent(n,e)};Bs.HandlePoweredByKeyCiteClick=function(){(new $r).openDialog()};Bs.HandleKeyciteAlertClick=function(e,t){var n=t.Data.cite,o=t.Data.serialNumber,i=C["default"].Relative(C["default"].Page.AlertCenterKeyCiteWizard({citation:n,serialNumber:o,transitionType:"Default",contextData:C["default"].PageContextData}));Object(wt["default"])(i)};var Ls=Bs;function Os(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(e,o.key,o)}}var Ms,Ws=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e);this.opts={originationContext:"documentTab",categoryNames:[],countsKnown:!0,selectedCategory:null}}(function(e,t,n){t&&Os(e.prototype,t);n&&Os(e,n)})(e,[{key:"AddTopTopicsWidget",value:function(e,t,n,o,i,a,r){Ls.AddTopTopicsWidget(e,t,n,o,i,a,r)}},{key:"LoadKMRelatedInformationCounts",value:function(e,t,n,o,i,a){Ls.LoadKMRelatedInformationCounts(e,t,n,o,i,a)}},{key:"LoadRelatedInformationCounts",value:function(e,t,n,o,i,a,r){if(c["default"].EnableIpad){Ls.LoadRelatedInformationCounts(e,t,n,o,i,a,r);return}var s=new Vr(t,n);this.opts={docGuid:e,docSource:t,entityId:a,entityType:r,tabPreviewWidget:s};this.opts.categoryNames=[];s&&o&&"null"!==i?this._processSubTab(i):this._processTabs()}},{key:"_countReturnedHandler",value:function(e,t,n){var o=this.opts,i=o.docGuid,r=o.entityId,s=o.entityType,l=o.tabPreviewWidget,d=o.selectedCategory,c=o.originationContext;if(this._checkForCountReturnedErrors(e,t,n))return;a()("#co_docPrimaryTabNavigation").find("h2.co_tabRight").each(function(e,t){return a()(t).attr({role:"none"})});this._setTabTitle(t,n.count.count,e);this._activateTabs(t,n);this._attachUXEvents(t,i);l.addTabPreview({documentGuid:i,category:e,selectedCategory:d,originationContext:c,entityId:r,entityType:s})}},{key:"_processTabs",value:function(){var e=this;this._activatePoweredByKc();this._setCategoryNames();var t=this.opts,n=t.countsKnown,o=t.categoryNames;n?this._processTabsIfCountsKnown(o):!n&&o.length>0&&this._callRIServiceAndGetCounts().then(function(t){e._processCompletedCategoryCounts(t)}).fail(function(){return e.opts.categoryNames.forEach(function(t){var n=a()("li[categoryenum=".concat(t,"]"));e._activateTabs(n)})})}},{
key:"_processCompletedCategoryCounts",value:function(e){var t=this;if(0!==e.ErrorType)return;e.countStatusList.forEach(function(e){var n=e.categoryId,o=e.status,i=a()("li[categoryenum=".concat(n,"]"));"complete"===o?t._countReturnedHandler(n,i,e):"error"===o&&t._activateTabs(i)})}},{key:"_callRIServiceAndGetCounts",value:function(){var e=a.a.Deferred(),t=this.opts.categoryNames.join(","),n="RelatedInfo/v4/counts/".concat(this.opts.docGuid,"/?categories=").concat(t,"&entityId=").concat(this.opts.entityId,"&execType=async");to["default"].Get({vertical:h["default"].RelatedInfo,relativeUrl:n,responseIsJson:!0,excludeFromActiveWebRequestCount:!0,successCallback:function(t){e.resolve(t)},timedOutCallback:function(){return e.reject()},timeoutMillisecs:9e4});return e.promise()}},{key:"_activateTabs",value:function(e){a()(e).find("a.co_tabLink").each(function(e,t){var n=t.attributes["hiddenHref"].value;n&&(t.href=n)});a()(e).removeClass("co_tabInactive")}},{key:"_attachUXEvents",value:function(e,t){var n=this,o=m["default"].GetObject(r["default"].objectIds.provider);a()(e).find("#coid_relatedInfo_StatuteHistory_link").click(function(){o.GetMetaInformation(t,function(e){n._postUxEvents("Cobalt.Relatedinfo.Judicial.History",{docGuid:t,contentType:e.ContentType})})});a()(e).find("#coid_relatedInfo_kcJudicialHistory_link").click(function(){o.GetMetaInformation(t,function(e){n._postUxEvents("Cobalt.Relatedinfo.Judicial.History",{docGuid:t,contentType:e.ContentType})})});a()(e).find("#coid_relatedInfo_kcCitingReferences_link").click(function(){o.GetMetaInformation(t,function(e){n._postUxEvents("Cobalt.Relatedinfo.Citing.References",{docGuid:t,contentType:e.ContentType})})})}},{key:"_postUxEvents",value:function(e,t){var n=new y["default"].Message({},{},e,"1.0",t);y["default"].SendClientEvent(n,e)}},{key:"_setCategoryNames",value:function(){var e=this;a()("li[categoryEnum]").each(function(t,n){var o=n.attributes["categoryEnum"].value,i=n.attributes["countStatus"].value;e.opts.countsKnown=e.opts.countsKnown&&"complete"===i;o&&e.opts.categoryNames.push(o)})}},{key:"_processSubTab",value:function(e){var t=this.opts,n=t.docGuid,o=t.entityId,i=t.entityType,a=t.tabPreviewWidget,r=t.originationContext,s=t.selectedCategory;a.preViewData=e;a.addTabPreview({documentGuid:n,category:"Profiler",selectedCategory:s,originationContext:r,entityId:o,entityType:i})}},{key:"_setTabTitle",value:function(e,t,n){var o=a()(e).find("span").eq(0),i=o.text();t>=0&&-1===i.indexOf("(")&&"wlnIPToolsOverview"!==n&&"kcTableOfAuthorities"!==n&&(i+=" (".concat(I["default"].renderInteger(t),")"));o.text(i)}},{key:"_publishError",value:function(e){var t="Potential error in data supplied from Related Info: negative category count received. \n                         docGuid: ".concat(this.opts.docGuid," \n                         category: ").concat(this.opts.categoryId," \n                         count: ").concat(e.count.count),n=new f["CobaltError"].EventData(h["default"].Website,t),o="Cobalt.Website.Error",i=new y["default"].Message(n,null,o,"1.0");y["default"].Publish(o,i)}},{key:"_processTabsIfCountsKnown",value:function(e){var t=this.opts,n=t.docGuid,o=t.entityId,i=t.entityType,a=t.tabPreviewWidget,r=t.selectedCategory,s=t.originationContext;for(var l in e)a.addTabPreview({documentGuid:n,category:e[l],selectedCategory:r,originationContext:s,entityId:o,entityType:i})}},{key:"_checkForCountReturnedErrors",value:function(e,t,n){if(void 0===n.count)return!0;if(n.count.count<0&&"StatuteHistory"!==e)this._publishError(n);else if(0===n.count.count){this._setTabTitle(t,n.count.count,e);a()(t).addClass("co_done");a()(t).removeClass("co_dropdownTab");return!0}return!1}},{key:"_activatePoweredByKc",value:function(){var e=a()("#co_powByKC"),t=new $r;e.length&&e.on("click",function(){return t.openDialog()})}},{key:"HandleKeyciteAlertClick",value:function(e,t){Ls.HandleKeyciteAlertClick(e,t)}}]);return e}(),Fs=c["default"].isIacOn("IAC-A11Y-DROPDOWN-DOCUMENT-TABS"),Hs=a()("#coid_website_professionalsViewData").data("professionalsviewdata"),Gs=Ms=!Fs||xe["default"].PageData.ReportPage||Hs?Ls:new Ws,Us={_lightbox:null,_title:null,_formTitle:"",_formGuid:"",_assembleFormLightBoxId:"coid_nextPreviewAndBuild_lightbox",_assembleFormLightBoxClassName:"co_overlayBox_container",_continueButtonId:"coid_contacts_closeButton",_cancelButtonId:"coid_contacts_cancelLink",Draw:function(){Us._lightbox&&Us._lightbox.Remove();Us._lightbox=new ve["default"];Us._lightbox.SetId(Us._assembleFormLightBoxId);Us._lightbox.SetTitle(Us._title);Us._lightbox.GetContentDomElement().innerHTML="Would you like to preview and build the form: <em>"+Us._formTitle+"</em> in Westlaw Form Builder?";Us._lightbox.GetFooterDomElement().innerHTML="<ul><li><input type='button' value='Continue' id='coid_assembleForm_continue'  class='co_primaryBtn'></li><li><a href='javascript:void(0);' class='co_overlayBox_buttonCancel' id='coid_assembleForm_cancel'>Cancel</a></li><li class='co_previewLinkMessage'>Note: There is no charge to preview the form.</li></ul>";Us._lightbox.Draw();a()("#coid_assembleForm_continue").click(Us.ContinueAndClose);a()("#coid_assembleForm_cancel").click(Us.Close)},SetFormTitle:function(e){Us._formTitle=e},SetFormGuid:function(e){Us._formGuid=e},ContinueAndClose:function(){Object(Z["website_LinkoutAndShowTimeoutLightboxInternal"])("WestlawFormsBuilder",Us._formGuid+"/FormPreview.html?transitionType=Default&contextData="+C["default"].PageContextData,"FormsBuilder",!0);Us.Close()},Close:function(){Us._lightbox&&Us._lightbox.Remove();Us._lightbox=null;Us._title=null;Us._formTitle="";Us._formGuid=""}},Vs=Us;function js(e,t){for(var n=0;n<p["default"].Instance.GetChunkCount();n++){var o=a()(p["default"].Instance.GetChunkAt(n)).find(e);if(o.length>0){var i=o.first();p["default"].Instance.RenderChunkAt(n);a()("#"+r["default"].ids.websiteWidgetDiv).removeClass("co_hideAnnotations");q["default"].DisplayAllHighlights();a()("div#co_foldering_previousInteractions").css("display","none");Ks(i,t);break}}}function qs(){if(c["default"].IsIndigoDisplayEnabled&&c["default"].isIacOn("IAC-INDIGO-NARROW-TOC-DISPLAY")){var e="Cobalt.Foldering.NoteMenu.TriggerShowAllAnnotations";y["default"].Publish(e,new y["default"].Message({},{},e,"1.0"))}else{var t="Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent";y["default"].Publish(t,new y["default"].Message({},{},t,"1.0"));var n=a()("#"+r["default"].ids.websiteWidgetDiv);if(n.hasClass("co_hideAnnotations")){n.removeClass("co_hideAnnotations");q["default"].DisplayAllHighlights()}}}function Ks(e,t){if(e.is(":visible")){var n=e.offset().top+t;a()("html, body").animate({scrollTop:n},800)}else{y["default"].Publish("Cobalt.Document.ScrollElementIsHidden",{Data:{scrollLocation:e.attr("data-annotationid")}})}}function zs(){var e=a()("#co_headerWrapper").height(),t=a()("#"+r["default"].ids.documentHeader).height(),n=a()("#"+r["default"].ids.documentToolbar).height(),o=0,i=a()("#"+r["default"].ids.documentContentHeader);i&&(o=i.height()+30);return-1*(e+t+n+o+45)}function Qs(){y["default"].Subscribe("Cobalt.Document.FormAssemble.LinkOut",function(e,t){Vs.SetFormTitle(t.title);Vs.SetFormGuid(t.guid);Vs.Draw()});y["default"].Subscribe("Cobalt.Document.EmailWithReference",function(e,t){var n=new hn["default"];n.IPadSnippetHtml=a()("<div/>").text(t.Data.snippet.htmlText).html();n.IPadSnippetText=t.Data.snippet.plainText;n.IPadSubject=t.Data.subject;n.Medium=pn["default"].EmailWithReference;n.ContextView=mn["default"].SingleDocument;var o=m["default"].GetObject("Cobalt.Delivery.DeliveryOptionsDialog");o.Initialize();o.SetRequestContext(n);o.RequestHtmlAndDraw()});y["default"].Subscribe("Cobalt.Document.SearchWithinDocument.TermsFound",lr["TransferToSearchWithinDocumentResult"]);y["default"].Subscribe("Cobalt.Document.ScrollToHighlightedText",function(e,t){(function(e){if(e){var t=zs(),n="[data-annotationid^='"+e+"']",o=a()("#co_document").find(n);0===o.length&&(o=a()("#co_documentNotes").find(n));if(o.length>0){qs();a()("div#co_foldering_previousInteractions").css("display","none");Ks(o.first(),t)}else if(p["default"].Instance&&q["default"].AreNotesFinishedLoading())js(n,t);else{
a()("div#co_foldering_previousInteractions").addClass("co_loading");y["default"].Subscribe(r["default"].events.notesAndHighlightsFinishedLoading,function(){js(n,t)})}}})(t.Data.scrollLocation)})}var $s=n("FSlep2dZ"),Js={_lightbox:null,_continueResearchingButtonId:"coid_docketsWaitMessage_continueButton",_continueResearchingButtonContainerId:"coid_docketsWaitMessage_continue",_currentFooterButton:"",SubscribeToDocketSingleUpdateEvent:function(){y["default"].Subscribe("Cobalt.Document.Docket.Update",function(e,t,n){t.persistedDocGuid=Js._ViewData.PersistedDocumentGuid;t.searchId="";t.listPageSourceKey=Js._ViewData.DocumentSource.ListPageSourceKey;t.contextData=C["default"].PageContextData;Js.SaveSingleDocketUpdate(e,t,n)})},SubscribeToDocketBatchUpdateEvent:function(){y["default"].Subscribe("Cobalt.Dockets.BatchUpdate",function(e,t,n){Js.SaveBatchDocketUpdate(e,t,n)})},SaveSingleDocketUpdate:function(e,t){Js.ShowWaitMessage("Update",I["default"].lookup("SC.Website.Dockets.UpdateDialogText","The docket is being updated"),!1,!0);var n=C["default"].Relative(C["default"].Rest.GetSingleDocketUpdateDataV1(null));to["default"].Post({relativeUrl:n,jsonObject:t,trmrWidgetName:"Cobalt.Website.Dockets",trmrWidgetAction:"DocketBatchUpdate",responseIsJson:!0,successCallback:function(e){var t=e[0],n=a.a.inArray("AncillaryWarning",t.updateWarningBlockTypes)>-1,o=a.a.inArray("SurchargeWarning",t.updateWarningBlockTypes)>-1,i=a.a.inArray("AncillaryBlock",t.warningBlockTypes)>-1,r=a.a.inArray("AuthorizationBlock",t.warningBlockTypes)>-1;n||o?Js.RenderDocketSingleWarnHtml(e):i||r?Js.RenderDocketSingleBlockHtml(e):Js.InitiateDocketUpdate(e,!0,!1)},failedCallback:function(){Js.ShowFailureMessage()}})},SaveBatchDocketUpdate:function(e,t){if(t.Data.length>40){var n='<div class="co_infoBox failure" role="status" tabindex="-1"><div class="co_infoBox_container"><div class="co_infoBox_outer"><div class="co_infoBox_inner"><div class="co_infoBox_message">'+I["default"].lookup("SC.Website.Dockets.BatchUpdateLimitExceededDialogText","Select no more than 40 dockets.")+"</div></div></div></div></div>";Js.ShowWaitMessage("Update",n,!0);Js.DrawFooterButtons()}else{Js.ShowWaitMessage("Update Requests",I["default"].lookup("SC.Website.Dockets.BatchUpdateDialogText","Preparing dockets for update"),!1,!0);var o=C["default"].Relative(C["default"].Rest.GetBatchDocketUpdateDataV1(null));to["default"].Post({relativeUrl:o,jsonObject:t.Data,trmrWidgetName:"Cobalt.Website.Dockets",trmrWidgetAction:"DocketBatchUpdate",responseIsJson:!0,successCallback:function(e){Js.RenderDocketUpdateHtml(e)},failedCallback:function(){Js.ShowFailureMessage()}})}},RenderDocketSingleBlockHtml:function(){var e='<div class="co_genericBox co_systemErrorBox" id="co_blockedBox">';e+='<div class="co_genericBoxHeader"><span></span></div><div class="co_genericBoxContent">';e+="<p> You do not have access to update the Docket because it is not authorized under your subscription agreement.</p>";e+='<p><a id="co_blockedBackLinkId" class="co_blockedBackLink" href="javascript:void(0);"><< Back</a></p>';e+='</div><div class="co_genericBoxFooter"><span></span></div></div>';Js.UpdateWaitMessage("Update Request",e,!0);a()("#co_blockedBackLinkId").click(function(){Js.Remove();return!1})},RenderDocketSingleWarnHtml:function(e){var t='<div class="co_scrollWrapper"><div id="co_docWarning_text">';t+="<p><strong>Viewing this document will incur additional charges.</strong></p>";t+='<p class="co_pricingInfo">To learn more about WestlawNext Charges, view our <a target="_blank" href="/Subscriber.html?transitionType=Default&contextData=(sc.Default)">Pricing Guide.</a></p>';t+='<div id="co_warning_clientId">';t+='<span class="co_clientIDInline_label">Client ID:</span>';t+='<span class="co_clientIDInline_recent">COBALTTEST</span>';t+='<a class="co_clientIDInline_change" href="javascript:void(0);" id="co_clientIDInline_change">Change</a>';t+="</div></div></div>";var n=Js._lightbox.GetFooterDomElement();a()(n).children("#co_docketUpdateContinue").hide();a()(n).children("#co_docketSubmit").show();a()(n).find("#co_docketUpdateSubmitButton").click(function(){Js.InitiateDocketUpdate(e,!0,!1)});Js.UpdateWaitMessage("This Update is Out of Plan",t,!0);a()("#co_clientIDInline_change").click(ft["website_PublishInlineClientIdChangeLinkClickedEvent"])},RenderDocketUpdateHtml:function(e){var t,n,o,i,r,s,l,d=k["default"].ViewData.FeatureConfigurations,c=d.USERISTRANSACTIONAL&&d.SHOWCHARGEONWARNINGSCREEN,u=!1,f=0,h=0,p=0;for(l=0;l<e.length;l++){t=e[l];n=a.a.inArray("AncillaryBlock",t.warningBlockTypes)>-1;o=a.a.inArray("AuthorizationBlock",t.warningBlockTypes)>-1;i=t.canUpdate;r=a.a.inArray("AncillaryWarning",t.updateWarningBlockTypes)>-1;s=a.a.inArray("SurchargeWarning",t.updateWarningBlockTypes)>-1;if(r||s){f++;u=!0}else if(n||o){h++;u=!0}else if(!i){p++;u=!0}}var m="";m+='<table id="co_docketUpdatesTable" class="co_detailsTable"><thead><tr><th class="co_detailsTable_select"><input type="checkbox" id="co_toggleDocketUpdateCbxs" checked="checked"></th><th class="co_detailsTable_content">Case Title</th><th class="co_detailsTable_docketNumber">Docket Number</th><th class="co_detailsTable_court">Court</th>'+(u?'<th class="co_detailsTables_updateNotice">Update Notice</th>':"")+(c?'<th class="co_detailsTable_ChargeAmount">Price</th>':"")+"</tr></thead><tbody>";var g=0;if(e.length>0){g=e.length;for(l=0;l<e.length;l++){t=e[l];n=a.a.inArray("AncillaryBlock",t.warningBlockTypes)>-1;o=a.a.inArray("AuthorizationBlock",t.warningBlockTypes)>-1;var v=a.a.inArray("AncillaryWarning",t.warningBlockTypes)>-1,C=a.a.inArray("SurchargeWarning",t.warningBlockTypes)>-1;i=t.canUpdate;r=a.a.inArray("AncillaryWarning",t.updateWarningBlockTypes)>-1;s=a.a.inArray("SurchargeWarning",t.updateWarningBlockTypes)>-1;m+='<tr><td class="co_detailsTable_select"><input type="checkbox" id="cobalt_docket_checkbox_'+l+'"'+(r||s?'class = "co_outOfPlanUpdate"':"")+(n||o||!i?'disabled = "disabled"':'checked = "checked" ')+'></td><td class="co_detailsTable_content">'+(r||s?'<div class="co_outOfPlanLabel" id="cobalt_docket_outofplanlabel_'+l+'">Out of Plan</div>':"")+t.caseTitle+(i?"":" *")+'</td><td class="co_detailsTable_docketNumber">'+t.caseNumber+'</td><td class="co_detailsTable_court">'+t.signon+"</td>";if(u){m+='<td class="co_detailsTable_updateNotice">';n||o?m+="Blocked per subscription agreement":i?(r||s)&&(m+=v||C?"Will incur update and view charge":"Will incur update charge"):m+="Update not offered by the court";m+="</td>"}c&&(m+=null!=t.chargeAmount?'<td class="co_detailsTable_chargeAmount">'+t.chargeAmount+"</td>":'<td class="co_detailsTable_chargeAmount">&nbsp;</td>');m+="</tr>";i?(n||o)&&g--:g--}}else m+='<tr><td colspan="7" class="empty">No updates available.</td></tr>';m+="</tbody></table>";var _="";_+='<ul class="co_navOptions co_docketUpdateWaitMessageNotes co_textLeft">';f>0&&(_+='<li><strong id="co_warningCount">'+f+'</strong> selected <span id="co_warningMultiple">docket'+(f>1?"s":"")+'</span> will incur additional charges when updated <a id="co_docketUpdatesTableLinkId">clear selected</a></li>');_+='<li><span id="co_totalUpdateCount"><strong>'+g+"</strong> item"+(g>1?"s":"")+' selected </span><a id="co_docketUpdatesAllTableLinkId">clear all selected</a></li>';u&&(_+="<li>* Not eligible for updates</li>");_+="</ul>";if(h>0||p>0){_+='<ul class="co_navOptions co_docketUpdateWaitMessageNotes co_textLeft">';h>0&&(_+="<li><strong>"+h+"</strong> blocked per subscription agreement</li>");p>0&&(_+="<li><strong>"+p+"</strong> updates not offered by the court</li>");_+="</ul>"}m=_+m;Js.UpdateWaitMessage("Update Requests ("+e.length+")",m,!0);a()("#co_toggleDocketUpdateCbxs").click(function(){Js.ToggleAllUpdateCheckboxes(this.checked)});a()('[id^="cobalt_docket_checkbox_"]').click(Js.UpdateDialogCounts);a()("#co_docketUpdatesTableLinkId,#co_docketUpdatesAllTableLinkId").click(function(){a()("table#co_docketUpdatesTable :checkbox").each(function(){this.checked=!1});Js.UpdateDialogCounts()});var b=Js._lightbox.GetFooterDomElement();a()(b).children("#co_docketUpdateContinue").hide();a()(b).children("#co_docketSubmit").show()
;if(g>0)a()(b).find("#co_docketUpdateSubmitButton").click(function(){Js.InitiateDocketUpdate(e,!0,!0)});else{a()(b).find("#co_docketUpdateSubmitButton").addClass("co_disabled")}},ToggleAllUpdateCheckboxes:function(e){a()("table#co_docketUpdatesTable :checkbox:not(:disabled)").each(function(){a()(this).attr("checked",e)});Js.UpdateDialogCounts()},UpdateDialogCounts:function(){var e=a()("table#co_docketUpdatesTable :checkbox.co_outOfPlanUpdate:checked").length;a()("#co_warningCount").html(e);1==e?a()("#co_warningMultiple").html("docket"):a()("#co_warningMultiple").html("dockets");var t=a()('table#co_docketUpdatesTable :checkbox[id^="cobalt_docket_checkbox_"]:checked').length;1==t?a()("#co_totalUpdateCount").html("<strong>"+t+"</strong> item selected "):a()("#co_totalUpdateCount").html("<strong>"+t+"</strong> items selected ");a()("#co_toggleDocketUpdateCbxs")[0].checked=0!=t},InitiateDocketUpdate:function(e,t,n){var o=Js._lightbox.GetFooterDomElement();a()(o).children("#co_docketUpdateContinue").show();a()(o).children("#co_docketSubmit").hide();Js.ShowContinueLink();if(n){var i=[];a()('#co_docketUpdateWaitMessageContent input[id!="co_toggleDocketUpdateCbxs"]:checkbox').each(function(t){if(a()(this).is(":checked")){if(Js._ViewData.SearchWidgetParameters){e[t].searchId=Js._ViewData.SearchWidgetParameters.results.searchId;e[t].batchSearchId=Js._ViewData.SearchWidgetParameters.results.batchSearchGuid;e[t].listPageSourceKey=""}e[t].contextData=C["default"].PageContextData;i.push(e[t])}});var r="",s='<div id="co_docketUpdateWaitMessageContent" class="co_deliveryWaitMessageContent"><div id="co_docketUpdateWaitProgress" class="co_deliveryWaitProgressImg">'+(r=1==(e=i).length?I["default"].lookup("SC.Website.Dockets.BatchOneUpdateInProgress","Your request for 1 update is processing."):I["default"].format("SC.Website.Dockets.BatchUpdateInProgress",{updateCount:e.length},"Your request for ".concat(e.length," updates is processing.")))+"</div></div>";Js.UpdateWaitMessage("Update",s,!1)}else Js.UpdateWaitMessage("Update",I["default"].lookup("SC.Website.Dockets.UpdateInProgress","Your request is processing."),!1);var l=C["default"].Relative(C["default"].Rest.DocketUpdateV1(null));to["default"].Post({relativeUrl:l,jsonObject:e,trmrWidgetName:"Cobalt.Website.Docket",trmrWidgetAction:"DocketUpdate",responseIsJson:!0,successCallback:function(e){if("Dockets Update Succeeded"==e.Message)t&&d(e);else{Js.DrawFooterButtons();Js.ShowFailureMessage()}},failedCallback:function(){Js.DrawFooterButtons();Js.ShowFailureMessage()}});var d=function(t){if(Js.IsDisplayed()&&t.UrmIds){var o=e.length-t.UrmIds.length;t.UrmIds.length>0&&(n?function t(n,o,i,a){if(Js.IsDisplayed()){var r=C["default"].Relative(C["default"].Rest.DocketBatchUpdateStatusV1(null)),s=[];to["default"].Post({relativeUrl:r,jsonObject:n.UrmIds,trmrWidgetName:"Cobalt.Website.DocketUpdate",trmrWidgetAction:"GetDocketUpdateStatus",responseIsJson:!0,successCallback:function(r){var l=0;if(r.StatusDictionary&&r.StatusDictionary!=={}){o=i=0;for(var d in r.StatusDictionary){l++;var c=r.StatusDictionary[d];if("complete"==c.toLowerCase()){o++;s.push(d)}else"pending"==c.toLowerCase()||"failed"==c.toLowerCase()&&i++}}if(l==o+i){var u="";u+='<div class="co_infoBox success" role="status" tabindex="-1"><div class="co_infoBox_container"><div class="co_infoBox_outer"><div class="co_infoBox_inner"><div class="co_infoBox_message">'+I["default"].format("SC.Website.Dockets.BatchUpdateComplete",{updateCount:e.length,successCount:o,failureCount:i},"Your request for ".concat(e.length," updates is finished.<br />").concat(o," completed, ").concat(i," failed"))+"</div></div></div></div></div>";var f=C["default"].Relative(C["default"].Page.DocketUpdateList({transitionType:"Default",contextData:C["default"].PageContextData}));Js.DrawFooterButtons("View the Docket Requests page",f);Js.UpdateWaitMessage("Update",u,!0)}else if(1==e.length&&1==o){u="";u+='<div class="co_infoBox success" role="status" tabindex="-1"><div class="co_infoBox_container"><div class="co_infoBox_outer"><div class="co_infoBox_inner"><div class="co_infoBox_message">'+I["default"].lookup("SC.Website.Dockets.SingleBatchUpdateComplete","Your request for 1 update is complete.")+"</div></div></div></div></div>";f=C["default"].Relative(C["default"].Page.DocketUpdatedView({urmid:s[0],docguid:e[0].guid,transitionType:"Default",contextData:C["default"].PageContextData}));Js.DrawFooterButtons("View the updated docket",f);Js.UpdateWaitMessage("Update",u,!0)}else if(1!=e.length||1!=i&&1!=a){var h="";u='<div id="co_docketUpdateWaitMessageContent" class="co_deliveryWaitMessageContent"><div id="co_docketUpdateWaitProgress" class="co_deliveryWaitProgressImg">'+(h=1==e.length?I["default"].lookup("SC.Website.Dockets.BatchOneUpdateInProgress","Your request for 1 update is processing."):I["default"].format("SC.Website.Dockets.BatchUpdateRequestedInProgress",{updateCount:e.length,successCount:o,failureCount:i},"Your request for ".concat(e.length," updates is processing. <br /> ").concat(o," completed, ").concat(i," failed")))+"</div></div>";Js.UpdateWaitMessage("Update",u,!1);setTimeout(function(){t(n,o,i,a)},15e3)}else{Js.DrawFooterButtons();Js.ShowFailureMessage()}}})}}(t,0,o,0):function e(t,n){if(Js.IsDisplayed()){var o=C["default"].Relative(C["default"].Rest.GetDocketUpdateStatusV1({urmId:t}));to["default"].Get({relativeUrl:o,trmrWidgetName:"Cobalt.Website.DocketUpdate",trmrWidgetAction:"GetDocketUpdateStatus",responseIsJson:!0,successCallback:function(o){if("complete"==o.Status.toLowerCase()){var i=C["default"].Relative(C["default"].Page.DocketUpdatedView({urmid:o.PersistId,docguid:n,transitionType:"Default",contextData:C["default"].PageContextData}));Object(wt["default"])(i)}else setTimeout(function(){e(t,n)},5e3)},failedCallback:function(){}})}}(t.UrmIds[0],t.DocumentGuids[0]))}}},ShowWaitMessage:function(e,t,n,o){Js._lightbox&&Js.Remove();Js._lightbox=new ve["default"];Js._lightbox.SetId("co_docketsWaitDialog");Js._lightbox.SetClass("co_overlayBox_delivery");if(Object(u["IsNotNullOrEmpty"])(e)){Js._lightbox.SetTitle('<div id="co_docketUpdateWaitDialogTitle">'+e+"<div>");Js._lightbox.SetCloseLinkObject({id:"co_docketUpdateWaitDialogCloseLink",alt:"Close this window",onclick:function(){Js.Remove()}})}Js._lightbox.GetContentDomElement().innerHTML='<div id="co_docketUpdateWaitMessageContent" class="co_searchWaitMessageContent">'+t;n||(Js._lightbox.GetContentDomElement().innerHTML+='<div id="co_docketUpdateWaitProgress" class="co_deliveryWaitProgressImg"></div></div>');var i=Js._lightbox.GetFooterDomElement();a()(i).empty();if(void 0!=o&&!o){var r=document.createElement("div");r.id="co_docketUpdateContinue";var s=document.createElement("input");s.setAttribute("type","button");s.id="co_docketUpdateContinueButton";s.className="co_primaryBtn";s.value=I["default"].lookup("SC.Website.Delivery.ContinueResearching","Minimize and Continue Researching");s.onclick=function(){Js.ContinueWorkingHandler()};r.appendChild(s);i.appendChild(r)}if(o){var l=document.createElement("div");l.id="co_docketSubmit";l.style.display="none";var d=document.createElement("ul"),c=document.createElement("li"),f=document.createElement("input");f.setAttribute("type","submit");f.id="co_docketUpdateSubmitButton";f.className="co_primaryBtn";f.value="Submit";c.appendChild(f);var h=document.createElement("li"),p=document.createElement("a");p.setAttribute("href","javascript:void(0);");p.id="coid_docketsUpdate_cancelLink";p.className="co_overlaybox_buttonCancel";p.innerHTML="Cancel";p.onclick=function(){Js.Remove()};h.appendChild(p);d.appendChild(c);d.appendChild(h);l.appendChild(d);i.appendChild(l)}Js._lightbox.Draw()},UpdateWaitMessage:function(e,t,n){document.getElementById("co_docketUpdateWaitDialogTitle").innerHTML=e;document.getElementById("co_docketUpdateWaitMessageContent").innerHTML=t;var o=document.getElementById("co_docketUpdateWaitProgress");if(o)if(n){o.style.display="none";var i=document.getElementById("co_docketUpdateContinue");i&&(i.style.display="none")}else o.style.display="block"},ShowFailureMessage:function(){
var e='<div class="co_infoBox failure" role="status" tabindex="-1"><div class="co_infoBox_container"><div class="co_infoBox_outer"><div class="co_infoBox_inner"><div class="co_infoBox_message">'+I["default"].lookup("SC.Website.Dockets.UpdateFailureDialogText","Your update request failed.")+"</div></div></div></div></div>";Js.UpdateWaitMessage("Update",e,!0)},DrawFooterButtons:function(e,t){if(Js._currentFooterButton!==e){var n=Js._lightbox.GetFooterDomElement();n.innerHTML="";var o=document.createElement("div");o.id="co_docketComplete";var i=document.createElement("ul");if(e){var r=document.createElement("li"),s=document.createElement("input");s.setAttribute("type","submit");s.id="co_docketUpdateCompleteButton";s.className="co_primaryBtn";s.value=e;s.onclick=function(){Object(wt["default"])(t)};r.appendChild(s);i.appendChild(r)}var l=document.createElement("li"),d=document.createElement("input");d.setAttribute("type","submit");d.id="coid_docketsUpdate_closeButton";d.value="Close";d.onclick=function(){Js.Remove()};l.appendChild(d);i.appendChild(l);o.appendChild(i);Js._lightbox.GetFooterDomElement().appendChild(o);a()(n).children("#"+Js._continueResearchingButtonContainerId).hide();Js._lightbox.RedrawCloseLinkObject({id:this._minimize_ButtonId,alt:"Continue Researching",onclick:function(){Js.Remove()},className:"co_overlayBox_closeButton"});Js._currentFooterButton=e}},ShowContinueLink:function(){Js._lightbox.RedrawCloseLinkObject({id:this._minimize_ButtonId,alt:"Continue Researching",onclick:function(){Js.ContinueWorkingHandler()},className:"co_overlayBox_minimizeButton"});var e=Js._lightbox.GetFooterDomElement();a()(e).empty();Js._continueWorking=!1;var t=document.createElement("div");t.id=Js._continueResearchingButtonContainerId;var n=document.createElement("input");n.setAttribute("type","button");n.id=Js._continueResearchingButtonId;n.className="co_primaryBtn";n.value=I["default"].lookup("SC.Website.Delivery.ContinueResearching","Minimize and Continue Researching");Js._currentFooterButton=n.value;n.onclick=function(){Js.ContinueWorkingHandler()};t.appendChild(n);e.appendChild(t)},ContinueWorkingHandler:function(){try{var e=Js._lightbox.GetLightboxDomElement(),t="#"+e.id;Js._lightbox.RemoveBackgroundLayer();a()(t).animate({width:"3px",height:"3px",top:"95%",left:"45%"},900,"swing",function(){e&&(e.style.display="none");Js.Remove()})}catch(e){_e["default"].ConsoleMessage("Error: "+e,_e["default"].Level.Error,"Cobalt.Widget.DocketsMessageBox.ContinueWorkingHandler")}},AlertDQWidget:function(){try{if(!document.getElementById("co_deliveryQueueContainer")){k["default"].DeliveryQueueWidget=new $s["default"];k["default"].DeliveryQueueWidget.SetParentElement(document.body)}k["default"].DeliveryQueueWidget.SetPollingInterval(10);k["default"].DeliveryQueueWidget.Draw(!0)}catch(e){_e["default"].ConsoleMessage("Error: "+e,_e["default"].Level.Error,"Cobalt.Widget.DocketsMessageBox.AlertDQWidget")}},Remove:function(){if(null!=Js._lightbox){Js.AlertDQWidget();Js._lightbox.Remove();Js._lightbox=null}},RemoveAfterTimeout:function(e){setTimeout(function(){Js.Remove()},e)},IsDisplayed:function(){return Js._lightbox&&!0},HasContinued:function(){return Js._continueWorking},SetViewData:function(e){Js._ViewData=e}},Ys=Js;var Xs=n("ZDDxJanG"),Zs=n("B8+jQc17"),el=63,tl={assembleTocAndScrollBehavior:function(){var e,t=a()(window),n=a()(document),i=a()("#co_leftColumn"),s=a()("#co_rightColumn"),l=a()("#kh_toc-wrapper"),d=a()("#kh_tocContainer"),c=a()(".kh_toc-inner"),u=a()(".kh_toc-list").find("a"),f=a()("#co_docContentHeader"),h=a()("#co_docHeaderContainer").find(".co_title");m();tl.addRelatedContentLinkListener();y["default"].Subscribe("RelatedContentLoaded",function(){t.resize()});function m(){e=a()("div[id^=co_docContentBody]").find("a[id^='co_anchor_']").filter(function(){return u.filter("a[href='#"+a()(this).attr("id")+"']").length})}y["default"].Subscribe(r["default"].events.chunkRendered,m);var g=l.hasClass("co_toc-keepHidden");if(d.length){if(l.length&&t.width()>tl.minimizedWindowWidth){g||i.addClass("is-active");a()(".content-group, #co_contentWrapper, body.th_lightGray #co_docToolbarContainer").addClass("sidebar-is-active")}if(!g){a()("#co_leftColumn  .co_innertube").append(l);l.removeClass("co_hideState")}a()(".kh_toc-header .kh_icon.icon-cross").click(function(e){e.preventDefault();e.stopPropagation();i.removeClass("is-active");a()("#co_contentWrapper, #co_docToolbarContainer").removeClass("sidebar-is-active");nl()});a()(".menu-toggle").click(tl.toggleTocMenu);n.keyup(function(e){if(l.length>0&&e.ctrlKey&&e.altKey){var t=e.which;13==t&&e.preventDefault();if(84==t){i.toggleClass("is-active");a()("#co_contentWrapper").toggleClass("sidebar-is-active");a()("#co_docToolbarContainer").toggleClass("sidebar-is-active")}}});u.click(function(e){var n=e.currentTarget.hash;if(p["default"].Instance){var r=p["default"].Instance.FindElementInChunkById(n,!1);b["default"].ScrollToChunkedElement(r,null,!1)}if(t.width()<tl.minimizedWindowWidth){i.removeClass("is-active");a()("#co_contentWrapper, #co_docToolbarContainer").removeClass("sidebar-is-active")}else{f.hasClass(tl.floatingHeaderClass)||f.addClass(tl.floatingHeaderClass);h.removeClass("noTOC");if(h.has(".clone.subSectionTitle").length)a()(".clone.subSectionTitle").html(this.innerHTML);else{o["default"].addInfoToTitle(h,'<div class="clone subSectionTitle">'+this.innerHTML+"</div>");ll()}}var s=tl.calculateHeaderOffset(function(){var e=0;if(p["default"].Instance){var n=a()("#co_chunkNavOne").outerHeight(!0);e=0===t.scrollTop()?n+n/2+4:10}return e}(),f,t.width(),t.scrollTop()),l=a()(a()(this).attr("href")).offset().top-s;a()("body.th_lightGray").removeClass("noscroll");a()("html, body").animate({scrollTop:l},250);return!1});tl.originalHeightToc=c.outerHeight(!0);tl.docHeaderThreshold=tl.calculateDetachThreshold();t.resize(function(){i.hasClass("is-active")?a()("body.th_lightGray").addClass("noscroll"):a()("body.th_lightGray").removeClass("noscroll");tl.tocHeight();tl.docHeaderThreshold=tl.calculateDetachThreshold()});var v=null;t.bind("scroll load",function(){tl.adjustToc();t.width()>tl.minimizedWindowWidth&&tl.headerAndToolbarUnattachTop();s.hasClass(tl.floatingHeaderClass)||s.addClass(tl.floatingHeaderClass);sl(h);if(t.scrollTop()+t.height()==n.height())tl.toggleStyle("a:last");else if(0==t.scrollTop()){tl.toggleStyle("a:first");h.find(".clone.subSectionTitle").remove();f.removeClass(tl.floatingHeaderClass);a()("#redlineStartdate").show()}else{var i,r=Number.MAX_VALUE,l=o["default"].getMaxRelativeOffsetToChangeHeaderTitle();e.each(function(){var e=parseInt(Math.abs(tl.calculateDistanceBetweenAnchorAndBoundaryLine(this,266)));if(e<r){r=e;i=this}});if(i){var d="";if(a()(i).offset().top>tl.findBoundaryLinePosition(266)+l){var c;u.each(function(){var e="#"+a()(i).attr("id");if(a()(this).attr("href")==e){v=c;return!1}c=a()(this)});d="a[href='"+a()(v).attr("href")+"']"}else d="a[href='#"+a()(i).attr("id")+"']";tl.toggleStyle(d)}}})}else{var C=tl.shouldUnattachToolbar();if(t.scrollTop()>0){rl();nl()}h.addClass("noTOC");C&&(tl.docHeaderThreshold=tl.calculateDetachThreshold());t.resize(function(){il(g);C&&(tl.docHeaderThreshold=tl.calculateDetachThreshold())});t.scroll(function(){il(g);sl(h);C&&t.width()>tl.minimizedWindowWidth&&tl.headerAndToolbarUnattachTop()})}y["default"].Subscribe(r["default"].events.documentMayHaveChangedSize,function(){tl.docHeaderThreshold=tl.calculateDetachThreshold()});y["default"].Subscribe(r["default"].events.beforeScrollToSearchTerm,function(){al()});o["default"].bindInlineTOCEvents()},calculateTocPosition:function(e){return a()("#"+r["default"].ids.document).height()-e},addBookmarkSetup:function(e){if(k["default"].IsInfrastructureAccessControlOn("IAC-FAVORITE-DOCUMENT")){var t=a()(".co_documentActions .icon-bookmark");if(!t.length)return;t.click(function(){if(!e.documentData)return;var t=new Xs["default"];t.setId(e.ViewData.DocumentGuid);t.setResourceType("NOVUS_DOCUMENT");t.setUrl(location.pathname+location.search);var n=e.documentData.TitleText;t.setDisplayName(n);t.setUniqueName(n);new Zs["default"](t).Draw()})}},toggleStyle:function(e){
var t=a()("#kh_tocContainer"),n=a()("#co_docHeaderContainer").find(".co_title"),i=a()("#co_docContentHeader"),r=t.find(e);if(r.length&&r.attr("href")!==tl.previousTocHref){tl.previousTocHref=r.attr("href");if(i.hasClass(tl.floatingHeaderClass)){n.removeClass("noTOC");if(n.has(".clone.subSectionTitle").length)a()(".clone.subSectionTitle").html(r.html());else{o["default"].addInfoToTitle(n,'<div class="clone subSectionTitle">'+r.html()+"</div>");ll()}}else{n.addClass("noTOC");a()(".clone.subSectionTitle").remove();o["default"].removeInfoFromTitle()}}else if(!r.length&&i.hasClass(tl.floatingHeaderClass)){n.removeClass("noTOC");a()(".clone.subSectionTitle").remove();tl.previousTocHref=null;n.has("div:empty").length||n.append("<div/>");o["default"].addInfoToTitle(n);ll()}},previousTocHref:null,calculateHeaderOffset:function(e,t,n,i){var a=0;a=n<tl.minimizedWindowWidth?0===i?el:e:o["default"].getHeaderFullOuterHeight(e,t);return a},calculateDistanceBetweenAnchorAndBoundaryLine:function(e,t){return e.offsetTop-t-a()(window).scrollTop()},findBoundaryLinePosition:function(e){return a()(window).scrollTop()+e},addRelatedContentLinkListener:function(){o["default"].displayRelatedContentLink()&&a()(".co_relatedContentLink").length>0&&a()(".co_relatedContentLink").on("click",function(){a()("#kh_relatedContentOffset").length>0&&a()("#kh_relatedContentOffset").css({display:"block",position:"relative",visibility:"hidden",top:-1*(a()("#co_docHeaderContainer").height()+46)})})},calculateDetachThreshold:function(){return a()("#"+r["default"].ids.document).height()-tl.originalHeightToc},headerAndToolbarUnattachTop:function(){var e=a()(window),t=a()("#co_docContentHeader"),n=a()("#co_docTopToolbar"),o=t.add(n).add(a()("#"+r["default"].ids.docToolbarVerticalMenuRight)),i=e.scrollTop(),s=tl.docHeaderThreshold;if(i>s&&s>0){o.hasClass(tl.notStickyClass)||o.addClass(tl.notStickyClass);o.css("top",s)}else{o.removeClass(tl.notStickyClass);o.css("top","")}},adjustToc:function(e){rl();ol(e);nl()},tocHeight:function(){var e=a()(window),t=e.height(),n=a()(".kh_toc-content"),o=a()("#kh_tocContainer"),i=a()(".kh_toc-list"),r=a()(".kh_toc-header"),s=a()(".kh_toc-inner"),l=o.offset().top+n.position().top,d=parseFloat(i.css("padding-top"));i.css("height",t-l-d);if(e.width()<tl.minimizedWindowWidth){var c=i.position().top,u=a()("#co_header").height();i.css("height",t-u-c-d)}i.css("max-height",a()("#co_document").height()-d-r.outerHeight(!0));s.hasClass("setHeight")||s.addClass("setHeight")},toggleFloatingHeader:il,addStickyHeader:al,toggleTocMenu:function(e){e.preventDefault();e.stopPropagation();a()("#co_leftColumn").toggleClass("is-active");a()("#co_contentWrapper, #co_docToolbarContainer").toggleClass("sidebar-is-active");y["default"].Publish(r["default"].events.documentMayHaveChangedSize);nl();tl.tocHeight()},originalHeightToc:0,docHeaderThreshold:0,minimizedWindowWidth:1024,notStickyClass:"not-sticky",floatingHeaderClass:"is-sticky",shouldUnattachToolbar:function(){return!1}};function nl(){var e=a()("#co_docContentHeader"),t=a()("#co_mainContainer");e.position().top>0?t.hasClass("scrolling")||t.addClass("scrolling"):t.removeClass("scrolling")}function ol(e){var t=a()(".kh_toc-list"),n=a()(window),o=a()(".kh_toc-inner");if(!e){var i=0;t.children().each(function(){i+=a()(this).outerHeight(!0)});if(!i)return;var r=n.scrollTop(),s=tl.calculateTocPosition(i);if(r>s&&s>0){o.hasClass(tl.notStickyClass)||o.addClass(tl.notStickyClass);t.css("max-height","");o.removeClass("setHeight");a()("#coid_floatingRelatedContentLink").length>0&&(s-=o.outerHeight(!0)-i);o.css("top",s)}else{o.removeClass(tl.notStickyClass);tl.tocHeight();o.css("top","")}}}function il(e){var t=a()(window),n=a()("#co_docContentHeader"),i=a()("#co_docHeaderContainer").find(".co_title");if(0==t.scrollTop()||o["default"].isWholeDocumentInWindow()){n.removeClass(tl.floatingHeaderClass);a()("#redlineStartdate").show();o["default"].removeInfoFromTitle()}else{al();i.has("div:empty").length||i.append("<div/>");o["default"].addInfoToTitle(i);ll()}ol(e);nl()}function al(){if(o["default"].displayOptions.stickyHeader){var e=a()("#co_docContentHeader");if(!e.hasClass(tl.floatingHeaderClass)){e.addClass(tl.floatingHeaderClass);tl.docHeaderThreshold=tl.calculateDetachThreshold();a()("#redlineStartdate").hide()}}}function rl(){var e=a()("#kh_tocContainer"),t=a()(window),n=a()("#co_docContentHeader");e.hasClass(tl.floatingHeaderClass)||e.addClass(tl.floatingHeaderClass);t.scrollTop()>0?al():n.removeClass(tl.floatingHeaderClass)}function sl(e){var t=a()("#co_chunkNavOne");if(t.parent("#coid_website_documentWidgetDiv").length){t.addClass("co_floatRight").insertBefore(e);a()("#co_topChunkNav").removeClass("co_hideState")}0==a()(window).scrollTop()?t.addClass("co_hideState"):t.hasClass("co_hideState")&&t.removeClass("co_hideState")}function ll(){a()("#kh_relatedContentOffset").length>0&&a()("#kh_relatedContentOffset").removeAttr("style")}var dl=tl.calculateDetachThreshold,cl=tl.adjustToc,ul=tl.tocHeight,fl=tl.toggleTocMenu;tl.shouldUnattachToolbar=b["default"].isPracticalLawUsDocument;tl.calculateDetachThreshold=function(){return b["default"].isPracticalLawUsDocument()?a()("#"+r["default"].ids.document).height()-a()("#co_docToolbarVerticalMenuRight").height()-a()("#coid_docTopToolbarInner").height():dl()};tl.adjustToc=function(){if(c["default"].isIacOn("IAC-PLUS-TABLEOFCONTENT")){setTimeout(function(){tl.tocHeight()},0);a()(window).scrollTop()>0?tl.addStickyHeader():a()("#co_docContentHeader").removeClass(tl.floatingHeaderClass)}else cl()};tl.tocHeight=function(){if(c["default"].isIacOn("IAC-PLUS-TABLEOFCONTENT")){var e,t=a()(".kh_toc-list"),n=a()(".kh_toc-content"),o=a()(".kh_toc-inner").outerHeight(),i=a()("#coid_docTopToolbarInner").outerHeight(),r=a()("#co_newHeader").outerHeight(),s=window.innerHeight;if(a()(window).width()<tl.minimizedWindowWidth){e=s-n.offset().top;t.css("height",e)}else if(function(){var e=a()(window).scrollTop(),t=e+a()(window).height(),n=parseInt(a()("#co_body").css("padding-bottom")),o=a()("#co_footerContainer").offset().top+n;return o<=t&&o>=e}()){var l=parseInt(a()("#co_body").css("padding-bottom")),d=a()("#co_footerContainer").outerHeight();e=s-i-r-o-l-d-35;n.css("position","fixed");t.css("height",e);t.scrollTop(t[0].scrollHeight)}else{e=s-i-r-o-35;n.css("position","fixed");t.css("height",e)}}else ul()};tl.toggleTocMenu=function(e){fl(e);var t=a()(".kh_toc-list .tocHighlightedElement");t.length>0?t[0].scrollIntoView(!0):a()(".kh_toc-list").scrollTop(0)};var hl={pageContext:en["default"],getDocDisplayName:function(e){switch(e){case"Trial Court Documents":return I["default"].lookup("SC.Search.Snapshots.DocTypes.TrialCourtDocuments","Trial Ct. Docs");case"Appellate Court Documents":return I["default"].lookup("SC.Search.Snapshots.DocTypes.AppellateCourtDocuments","App. Ct. Docs");case"Jury Verdicts & Settlements":return I["default"].lookup("SC.Search.Snapshots.DocTypes.JuryVerdicts&Settlements","JV & Settlem");case"Administrative Decisions":return I["default"].lookup("SC.Search.Snapshots.DocTypes.AdministrativeDecisions","Admin Decisions");case"Trial Court Orders":return I["default"].lookup("SC.Search.Snapshots.DocTypes.TrialCourtOrders","Trial Ct. Orders");default:return e}},bindDocLink:function(e,t,n){if(t){var o,i,a,r,s=xe["default"].PageData.CobaltPage.ViewData.SearchWidgetParameters;if(s&&s.results){o=s.results.searchId;i=s.results.listPageSource;r="Search/v1/results/navigation/"+o+"?Nav="+(a=s.search.filters.content)+"&fragmentIdentifier="+t+"&startIndex=1"}var l=C["default"].Relative(C["default"].Page.Document({guid:t,viewType:"FullText",originationContext:"snapshot",transitionType:"Snapshot",contextData:"(sc.Default)",navigationPath:r,listSource:"Search",listPageSource:i,list:a,rank:"1"}));e.attr("href","javascript:void(0);");this.appendClickEvent(e,l,n)}},bindUrlLink:function(e,t,n){var o=C["default"].Absolute(C["default"].Page.BrowseRoot({"*catchall":t,viewType:"FullText",originationContext:"snapshot",transitionType:"Snapshot",contextData:"(sc.Snapshot)"}));e.attr("href","javascript:void(0);");this.appendClickEvent(e,o,n)},getLpaSearchForMoreLink:function(){
return I["default"].lookup("SC.Search.Snapshots.SearchForPerson","<a>Search for people in Profiler</a>")},getOaSearchForMoreLink:function(){return I["default"].lookup("SC.Search.Snapshots.SearchForCompany","<a>Search for companies in Company Investigator</a>")},addLpaSearchForMoreLink:function(e){e.append(I["default"].lookup("SC.Search.Snapshots.LookingForDiffPerson","<strong>Looking for a different person?<strong>"));var t=this.getLpaSearchForMoreLink(),n=a()(t);hl.bindUrlLink(n,"Home/Profiler");e.append(n)},addOaSearchForMoreLink:function(e){e.append(I["default"].lookup("SC.Search.Snapshots.LookingForDiffCompany","<strong>Looking for a different company?<strong>"));var t=this.getOaSearchForMoreLink(),n=a()(t);hl.bindUrlLink(n,"Home/CompanyInvestigator");e.append(n)},addSearchForMoreLink:function(e,t){var n=a()("<div id='co_snapshotViewMoreLink'></div>");"lpa"===e?this.addLpaSearchForMoreLink(n):"oa"===e&&this.addOaSearchForMoreLink(n);this.insertSearchForMoreLink(t,n)},insertSearchForMoreLink:function(e,t){a()(e).append(t)},appendClickEvent:function(e,t,n){e.on("click",function(){Object(we["postUXEvent"])(n,{accessMethod:"Snapshot"},function(){Ce["default"].PageTransition(t)})})}},pl=hl;function ml(){var e=this;e.POPULARNAME_CLICK_EVENT_NAME="Cobalt.Search.Snapshot.Overview.PopularName.Clicked";this.drawPopularName=function(t,n,o){if(!o&&c["default"].isIacOn("IAC-SNAPSHOT-POPULAR-NAMES-MIDDLE")){n=a()("<div id='co_popularNameSnapshot'></div>");a()("#coid_website_searchAvailableFacets","#co_subHeader").before(n)}var i="";i+="<div id='co_popularName_"+t.guid+"' class='co_snapshotOverview co_popularNameSnapshot'>";i+="<div id='popularNameHeader_"+t.guid+"' class='co_snapshotOverviewSection'></div>";i+="<div id='popularNamePublicLaws' class='co_snapshotOverviewSection'><div><strong>"+I["default"].lookup("SC.Search.Snapshots.PopularName.PublicLaws","Public Laws")+"</strong></div></div>";i+="<div id='popularNameCitingCases' class='co_snapshotOverviewSection'></div>";i+="</div>";n.append(i);(function(t,n,o){var i=a()("#popularNameHeader_"+t,o),r="";if(n){r+="<div class='co_snapshotOverviewItem'>";r+="<h4><a id='co_popularNameTitle'>"+n+"</a></h4>";r+="</div>"}i.append(r);e.bindDocLink(a()("#co_popularNameTitle"),t,e.POPULARNAME_CLICK_EVENT_NAME)})(t.guid,t.title,n);(function(e,t,n,o,i){var r=a()("#popularNameHeader_"+e,i),s="";if(t){var l=[];n&&n.length&&n.forEach(function(e){e.singleTitle!==t&&l.push(e.singleTitle)});o&&o.length&&o.forEach(function(e){e.title!==t&&l.push(e.title)})}if(l.length){var d=l.join(I["default"].lookup("SC.Search.Snapshots.PopularName.AkaTitlesSeparater",",&nbsp;"));s+="<div class='co_snapshotOverviewItem'>"+I["default"].format("SC.Search.Snapshots.PopularName.Aka",{akaTitleArray:d},"<strong>AKA: </strong>"+d)+"</div>"}r.append(s)})(t.guid,t.title,t.singleTitles,t.titles,n);(function(e,t){var n=a()("#popularNameHeader_"+e),o="";if(t){o+="<div class='co_snapshotOverviewItem'>";o+="<strong>Citations: </strong>";o+="<span>";ke.a.each(t,function(e){var t=Object.keys(e)[0];e[t].indexOf("/Link/Document")>-1?o+="<a href='"+e[t]+"&transitionType=Snapshot&contextData=(sc.Snapshot)'>"+t+"</a>":o+=" "+t+" "});o+="</span>";o+="</div>"}n.append(o)})(t.guid,t.citationsUrlMap);(function(e,t,n){var o=a()("#popularNameHeader_"+e,n),i="";i+="<div class='co_snapshotOverviewItem'>";i+=I["default"].lookup("SC.Search.Snapshots.PopularName.Summary","<strong>Summary: </strong>");if(t&&t.length>150&&!c["default"].isIacOn("IAC-SNAPSHOT-POPULAR-NAMES-MIDDLE")){var r=t.substr(0,150),s=r.substr(0,Math.min(r.length,r.lastIndexOf(" "))),l=t.substr(s.length,t.length);i+=s;i+="<a id='summaryShow' class='co_popularNameSummary'>... "+I["default"].lookup("SC.Search.Snapshots.PopularName.ShowSummary","Show")+"</a>";i+="<span id='remainingSummary' style='display: none'>"+l+"<a id='summaryHide' class='co_popularNameSummary co_hideState'>"+I["default"].lookup("SC.Search.Snapshots.PopularName.HideSummary","Hide")+" (-)</a></span>"}else t&&(i+=t);i+="</div>";o.append(i);a()(".co_popularNameSummary",n).click(function(){if(a()("#remainingSummary",n).is(":visible")){a()("#summaryHide",n).addClass("co_hideState");a()("#remainingSummary",n).toggle();a()("#summaryShow",n).removeClass("co_hideState")}else{a()("#summaryShow",n).addClass("co_hideState");a()("#remainingSummary",n).toggle();a()("#summaryHide",n).removeClass("co_hideState")}})})(t.guid,t.summary,n);(function(e,t){var n=a()("#popularNameCitingCases","#popularNameHeader_"+e),o="";if(t&&t.length){o+="<div class='co_snapshotOverviewItem'>";o+="<ul>";var i=0;ke.a.each(t,function(e){if(i<=2){o+="<li class='co_2Column'>";o+="<div class='co_column co_80Percent'><strong>"+e.citingDocument.docType+"</strong></div>";o+="<div class='co_column co_20Percent'><span class='co_floatRight'>"+I["default"].renderInteger(e.citingDocument.count)+"</span></div>";o+="</li>"}i++});o+="</ul>";o+="</div>"}n.append(o)})(t.guid,t.citingDocuments);(function(e,t){var n=a()("#popularNamePublicLaws","#co_popularName_"+e),o="";if(t){o+="<div class='co_snapshotOverviewItem'>";o+=I["default"].format("SC.Search.Snapshots.PopularName.Enacting",{enactingLaw:t},"Enacting: <span>"+t+"</span>");o+="</div>"}n.append(o)})(t.guid,t.enactingLaw);(function(e){var t=a()("#popularNameViewMore","#co_popularName_"+e);t.click(function(){if(a()("#popularNamePublicLaws").is(":visible")){a()(this).children().remove();a()(this).append(I["default"].lookup("SC.Search.Snapshots.PopularName.ShowMore","<div>Show More</div>"))}else{a()(this).children().remove();a()(this).append(I["default"].lookup("SC.Search.Snapshots.PopularName.ShowLess","<div>Show Less</div>"))}a()("#popularNamePublicLaws").slideToggle();a()("#popularNameCitingCases").slideToggle()});t.append(I["default"].lookup("SC.Search.Snapshots.PopularName.ShowMore","<div>Show More</div>"))})(t.guid);a()(".co_snapshotOverview").children().each(function(){!a()(this).children().filter(".co_snapshotOverviewItem").size()>0&&"popularNameViewMore"!==this.id&&a()(this).remove()})}}ml.prototype=Object.create(pl);function gl(){function e(e,t){var n=C["default"].Parse(t.currentTarget.href),i=n.QueryString["refType"];if(!i)return;if(-1!==a.a.inArray(i.toLowerCase(),["a2","aJ","ap","ew","jp","mc","me","pi","rq","wk"])){var r=n.QueryString["cite"];n.Path="/Document/GetProfileSummary";var s=C["default"].Absolute(n);"mouseenter"===t.type?e.data("timeout",setTimeout(function(){var t={url:s,citation:r,element:e};o.onLinkProfileHover(t)},500)):clearTimeout(e.data("timeout"))}}function t(){var e=a()(this);a()(".snapShotMaintainedBox").remove();var t=o._showMaintainedDefintion();a()(".co_doc_content_extras").after(t);var n=function t(n){if(!a()(n.target).is("#popBox")&&!a()(n.target).is(e)&&!a()(n.target).is(".co_infoBox_message")){a()(document).unbind("click",t);a()("#popBox").remove()}};a()(document).click(n);a()(".co_infoBox_closeButton").on("click",function(e){n(e)}).keyup(function(e){13==e.which&&n(e)})}function n(e,t){var n=C["default"].Parse(window.location.href.toString());n.Path="/RelatedInformation/"+e+"/riProfessionalReferences.html";n.QueryString={};n.QueryString["originationContext"]="snapshotHover";t&&(n.QueryString["facetGuid"]=t);n.QueryString["transitionType"]="Snapshot";n.QueryString["contextData"]="(sc.default)";Ce["default"].PageTransition(C["default"].Absolute(n))}var o={onLinkProfileHover:function(e){var t=ke.a.find(o._dataCache,function(t){return t.key===e.citation});t?o.showHoverView(t.value,e.element):a.a.get(e.url,function(t){e.docGuid=t.docGuid;o._getPersonSnapshotDataFromSearch(e)}).fail(function(){throw new f["CobaltError"](h["default"].Website,"Error getting profile id")})},showHoverView:function(e,t){a()(".snapShotBox").remove();var n=e,i=o._buildInfoBox(n);t.before(i);var r=t.position(),s=a()("#popBox").height()+6;a()("#popBox").css("top",r.top-s);a()("#popBox").css("left",r.left);a()(".snapShotBox").on("click",function(){a()(this).remove()});a()("#linkToProfile").on("click",function(){(function(e,t){if(t){var n=C["default"].Page.Document({guid:t,viewType:"FullText",originationContext:"snapshot",transitionType:"Snapshot",contextData:"(sc.Default)"})
;xe["default"].PageData.DocumentTabView&&xe["default"].PageData.DocumentTabView.UserDocumentData&&(n.QueryString.analyticGuid=xe["default"].PageData.DocumentTabView.UserDocumentData.documentGuid);var o=C["default"].Relative(n);e.attr("href","javascript:void(0);");Ce["default"].PageTransition(o)}})(a()(this),n.docGuid)});o.bindProfileLink()},navigateToProfilerReferencesFacet:n,bindProfileLink:function(){a()(".snapShotNumCount").on("click",function(e){o._onSnapshotCountClick(e)})},initSnapshotPersonHover:function(){a()("a.co_link").on("mouseenter mouseleave",function(t){e(a()(this),t)})},initSnapshotMaintainedClick:function(e){e.click(t);e.parent().keyup(function(e){13==e.which&&t()})},initFamousNameSummary:function(e){var t="/Search/v1/snapshot/guid?guid="+e+"&indexType=famousName";a.a.ajax({cobaltHost:h["default"].Search,timeout:5e3,contentType:"application/json",dataType:"json",url:t,success:function(e){if(e.snapshotResponse){var t=new ml;t.drawPopularName(e.snapshotResponse,a()("#co_rightColumn .co_innertube"),!0)}},error:function(){}})},displayMaintained:t,_showMaintainedDefintion:function(){var e=[];e.push("<div id='popBox'class='co_infoBox top center snapShotMaintainedBox' tabIndex='-1'>");e.push("<a href='javascript:void(0)' class='co_infoBox_closeButton'>"+I["default"].lookup("SC.Website.Views.DocumentSnapshot.Close","Close")+"</a>");e.push("<div class='co_infoBox_message' role='dialog' aria-labelledby='popBox'>");e.push(I["default"].lookup("SC.Website.Views.DocumentSnapshot.MaintainedDefinition","This resource is maintained, meaning we continually monitor and revise it for any necessary changes due to legal, market, or practice developments."));e.push("</div>");e.push("</div>");return a()(e.join(""))},_attachEvents:e,_getPersonSnapshotDataFromSearch:function(e){var t="/Search/v1/snapshot/guid?guid="+e.docGuid+"&indexType=person";a.a.ajax({cobaltHost:h["default"].Search,timeout:5e3,contentType:"application/json",dataType:"json",url:t,success:function(t){e.result=t.snapshotResponse;o._saveRecievedDataToCache(e)},error:function(e){throw new f["CobaltError"](h["default"].Website,e.responseText)}})},_saveRecievedDataToCache:function(e){var t=e.result;if(!t)return;var n={name:t.fullName,relatedDocCounts:t.relatedDocCounts,docGuid:e.docGuid};o.showHoverView(n,e.element);o._dataCache.push({key:e.citation,value:n})},_onSnapshotCountClick:function(e){var t=a()(e.srcElement).attr("facetKey"),o=a()(e.srcElement).attr("docId"),i=[{key:"DocumentType",children:[{key:t.replace(/\s+/g,"")}]}],r=new E["default"](h["default"].RelatedInfo,"RelatedInfo/v1/filters");r.Headers.Accept="application/json";r.Headers["Content-Type"]="application/json";r.SetTimeout(9e4);r.Post(JSON.stringify(i),function(e){if(e.TimedOut||200!==e.StatusCode){var t="Getting search facet error. "+e.ResponseText+"\r\n Status code: "+e.StatusCode+".";throw new f["CobaltError"](h["default"].Website,t)}var i=JSON.parse(e.ResponseText);n(o,i.filterGuid)})},_buildInfoBox:function(e){var t=[];t.push("<div id='popBox' class='co_infoBox top center snapShotBox co_excludeAnnotations co_disableHighlightFeatures' role='status' tabIndex='-1'>");t.push("<a class='co_infoBox_closeButton'>Close</a>");t.push("<div class='co_infoBox_message'>");t.push("<h3>"+e.name+"</h3>");var n=0;ke.a.each(e.relatedDocCounts,function(o,i){if(o>0&&n<3){t.push("<div class='co_2Column'>");t.push("<div class='co_column co_64Percent'>"+i+":</div>");t.push("<a class='co_column co_36Percent co_textRight snapShotNumCount' docId='"+e.docGuid+"' facetKey='"+i+"'>"+o+"</a>");t.push("</div>");n++}});t.push("<a id='linkToProfile'>See Full Profile</a>");t.push("</div>");t.push("</div>");return a()(t.join(""))},_dataCache:[]};return o}function vl(){this._sectionOutlineSelector="div.co_body>div.co_subsection>div.co_paragraph";this._sectionSearchBtn='<li id="co_sectionSearch"><div id="co_docToolbarTocFlyoutContainer"><a id="co_tocLink" class="co_tbButton" href="javascript:void(0);">'+I["default"].lookup("SC.Document.Widget.DocumentSectionOutline.GoToLink","Go To")+"</a></div></li>";this._lightBoxTitle="Section Outline";this._sectionLinkContainer="<div><ul><%= items %></ul></div>";this._linkSectionHtml="<li><a class='sectionLink' id='#<%- id %>' href='javascript:void(0);'><%- text %></a></li>"}vl.prototype={InitializeWidget:function(){var e=this.GetSectionLinkFromDocumentHtml();e.length>0&&this.AppendSectionOutlineControl(e)},GetSectionLinkFromDocumentHtml:function(){return a()(this._sectionOutlineSelector)},AppendSectionOutlineControl:function(e){var t=this;a()("#co_docToolbarMenuRight").prepend(this._sectionSearchBtn);a()("#co_sectionSearch").on("click",function(){t.AddDocumentSectionScrollLinks(e)})},AddDocumentSectionScrollLinks:function(e){var t=this.BuildSectionHtmlContent(e);this.ShowSectionOutlineDialog(t)},BuildSectionHtmlContent:function(e){var t=this,n="";ke.a.each(e,function(e){var o=t.FilterNotDeletedText(e);if(o){var i=o.length>110?o.substring(0,110)+"...":o;n+=ke.a.template(t._linkSectionHtml)({id:e.id,text:i})}});return ke.a.template(this._sectionLinkContainer)({items:n})},FilterNotDeletedText:function(e){return a()(e).find("div.co_paragraphText").contents().filter(function(e,t){return!t.tagName||"del"!==t.tagName.toLowerCase()}).text()},ShowSectionOutlineDialog:function(e){var t=this,n=new ve["default"];n.SetId(r["default"].ids.tocLightBoxId);n.SetCloseLinkObject({id:r["default"].ids.tocPopUpClose,alt:r["default"].texts.closeTocFlyout,onclick:function(){n.Remove()}});n.SetTitle("Section Outline");var o=document.createElement("div");o.setAttribute("class",r["default"].classes.scrollWrapper);var i=document.createElement("div");i.id=r["default"].ids.tocScrollInnerWrapper;i.innerHTML=e;o.appendChild(i);n.GetContentDomElement().appendChild(o);var s='<li><a class="'+r["default"].classes.submitButton+'" id="'+r["default"].ids.tocFlyoutCloseButton+'" href="javascript:void(0);">'+r["default"].texts.close+"</a></li>",l=document.createElement("ul");l.innerHTML=s;var d=l.getElementsByTagName("a")[0];n.GetFooterDomElement().appendChild(l);b["default"].AttachClickHandler(d,function(){n.Remove();return!1});d.onclick=function(){return!1};n.SetIsExpandedView(!1,!0);n.Draw();a()(".sectionLink").on("click",function(){n.Remove();var e=b["default"].FindOffsetTopForElement(a()(this.id).get(0))+t.GetDocumentHeaderOffset();a()("html, body").animate({scrollTop:e},1500)})},GetDocumentHeaderOffset:function(){var e=(c["default"].UsePageHeaderV2?a()("#"+r["default"].ids.websiteNewHeader):a()("#"+r["default"].ids.websiteHeader)).height(),t=a()("#"+r["default"].ids.documentHeader).height(),n=a()("#"+r["default"].ids.documentToolbar).height(),o=a()("#"+r["default"].ids.documentContentHeader);return 25-(e+t+n+(o.length?o.height():0)+30)}};var Cl=vl;function _l(){Cl.call(this)}_l.prototype=Object.create(Cl.prototype);_l.prototype.constructor=_l;_l.prototype.GetSectionLinkFromDocumentHtml=function(){return a()("div.co_body>div.co_subsection").toArray().map(function(e){return a()(e).find("div.co_paragraph")[0]}).filter(Boolean)};var bl=_l;function yl(){this._documentRibbonBar="#co_docToolbarMenuRight";this._extractCitationSection='<li id="co_saveToContainer"><a role="button" id="extractCitationsBtn" class="icon25 icon_research_report" href="javascript:void(0);" title="'+I["default"].lookup("SC.Document.ExtractCitation.LightBoxTitle","Extract Citations")+'">'+I["default"].lookup("SC.Document.ExtractCitation.LightBoxTitle","Extract Citations")+"</a></li>";this.dialogHtml="<div>"+I["default"].lookup("SC.Document.ExtractCitation.LightBoxBody","Citations will be created as new folder under your current document folder.")+"</div>";this._extractCitationBtn="#extractCitationsBtn";this._lightBox=null;this._responseData=null;this._extractCitationBatchNumber=1}yl.prototype={InitializeWidget:function(){var e=this,t=[];ke.a.each(a()("a.co_link"),function(e){var n=C["default"].Parse(e.href).QueryString["normalizedCite"];-1===t.indexOf(n)&&t.push(n)});if(t.length>0){a()(e._documentRibbonBar).prepend(e._extractCitationSection);a()(e._extractCitationBtn).on("click",function(){e.ShowLightBoxCitationCount()})}},ShowLightBoxCitationCount:function(){var e=this
;this._lightBox=e.ShowLightBoxDialog();e._SetLightBoxBody(e.dialogHtml);var t=e._getLightBoxButtonsFooter(!0);e._SetLightBoxFooter(t);a()("#proceedBtn").on("click",function(){e.ProceedExtract()})},ExtractCiationHttp:function(e,t,n){var i=o["default"].documentData.DocGuid,a=o["default"].documentData.metaInformation.containerId,r=o["default"].documentData.TitleText;r.length>19&&(r=r.substring(0,20));var s=C["default"].Relative(C["default"].Rest.ExtractCitations({folderId:a,documentId:i,documentTitle:r,batchNumber:e}));to["default"].Get({relativeUrl:s,trmrWidgetName:"Cobalt.Website.Platform.Web.Document",trmrWidgetAction:"ExtractCitations",responseIsJson:!0,timeoutMillisecs:18e4,successCallback:function(e){t(e)},failedCallback:function(e){n(e)}})},ProceedExtract:function(){var e=this;e._SetLightBoxToLoadingMode();e.ExtractCiationHttp(e._extractCitationBatchNumber,function(t){e._processSuccessExtract(t)},function(){e._SetLightBoxToDoneExtractCitation("<div>"+I["default"].lookup("SC.Document.ExtractCitation.ExtractErrorText","Error while extracting citations.")+"</div>",!0)})},_processSuccessExtract:function(e){var t=this;if(e.TotalCitations>200*t._extractCitationBatchNumber){var n=e.TotalCitations-200*t._extractCitationBatchNumber,o=n>1?I["default"].format("SC.Document.ExtractCitation.MoreThanOneCitationText",{textValue:n},"are "+n+" more citations"):I["default"].lookup("SC.Document.ExtractCitation.SingleCitationToProcessText","is one more citation"),i="<div>"+I["default"].format("SC.Document.ExtractCitation.MoreThanOneBodyText",{textValue1:e.Data.length,textValue2:e.NewFolderName},e.Data.length+" citations has been extracted to folder name: "+e.NewFolderName+".")+" <div>"+I["default"].format("SC.Document.ExtractCitation.NumberOfExtractLeftText",{textValue:o},"** There "+o+" remain that can be extracted. Do you want to proceed?")+"<div></div>";t._SetLightBoxBody(i);var r=t._getLightBoxButtonsFooter(!1);t._SetLightBoxFooter(r);a()("#proceedBtn").on("click",function(){++t._extractCitationBatchNumber;t.ProceedExtract()})}else{var s;if(1===e.Data.length)s="<div>"+I["default"].format("SC.Document.ExtractCitation.SuccessTextForOneCite",{textValue:e.NewFolderName},"1 citation has been extracted to folder name: "+e.NewFolderName+".")+"</div>";else{s=("<div>{0} "+I["default"].format("SC.Document.ExtractCitation.SuccessTextForMoreThanOneCite",{textValue:e.NewFolderName},"citations have been extracted to folder name: "+e.NewFolderName+".")+"</div>").replace("{0}",e.Data.length)}t._SetLightBoxToDoneExtractCitation(s,!1)}},_SetLightBoxBody:function(e){var t=document.createElement("div");t.setAttribute("class",r["default"].classes.scrollWrapper);var n=document.createElement("div");n.id=r["default"].ids.tocScrollInnerWrapper;n.innerHTML=e;t.appendChild(n);a()(this._lightBox.GetContentDomElement()).html(t)},_SetLightBoxToLoadingMode:function(){a()(this._lightBox.GetContentDomElement()).html('<div class="co_deliveryWaitProgressImg"></div>');a()(this._lightBox.GetFooterDomElement()).html("")},_SetLightBoxToDoneExtractCitation:function(e,t){var n=t?I["default"].lookup("SC.Document.ExtractCitation.CancelButtonText","Cancel"):I["default"].lookup("SC.Document.ExtractCitation.DoneButtonText","Done");a()(this._lightBox.GetContentDomElement()).html(e);var o='<li><a class="'+r["default"].classes.submitButton+'" id="'+r["default"].ids.closeButton+'" href="javascript:void(0);">'+n+"</a></li>";this._SetLightBoxFooter(o)},_getLightBoxButtonsFooter:function(e){var t=e?I["default"].lookup("SC.Document.ExtractCitation.CancelButtonText","Cancel"):I["default"].lookup("SC.Document.ExtractCitation.DoneButtonText","Done");return'<li><a class="'+r["default"].classes.submitButton+'" id="'+r["default"].ids.closeButton+'" href="javascript:void(0);">'+t+'</a></li><li><a class="'+r["default"].classes.submitButton+'" id=\'proceedBtn\' href="javascript:void(0);">'+I["default"].lookup("SC.Document.ExtractCitation.ProceedButtonText","Proceed")+"</a></li>"},_SetLightBoxFooter:function(e){var t=this,n=document.createElement("ul");n.innerHTML=e;var o=n.getElementsByTagName("a")[0];a()(t._lightBox.GetFooterDomElement()).html(n);t._Cobalt$Document.Utilities.AttachClickHandler(o,function(){t._lightBox.Remove();return!1});o.onclick=function(){return!1}},ShowLightBoxDialog:function(){var e=new ve["default"];e.SetId(r["default"].ids.tocLightBoxId);e.SetTitle(I["default"].lookup("SC.Document.ExtractCitation.LightBoxTitle","Extract Citations"));e.SetIsExpandedView(!1,!0);e.Draw();return e}};var Sl=yl;function Dl(e,t,n,o,i){this._guid=e;this._fileName=encodeURIComponent(t);this._containerGuid=n;this._containerType=o;this._accountKey=i}Dl.prototype={Draw:function(){var e="";e=this._containerGuid?C["default"].Relative(C["default"].Resource.DownloadUserDocumentFromContainer({guid:this._guid,fileName:this._fileName,containerType:this._containerType,containerGuid:this._containerGuid,accountKey:this._accountKey})):C["default"].Relative(C["default"].Resource.DownloadUserDocument({guid:this._guid,fileName:this._fileName}));a()(document.createElement("a")).attr("href",e).html(I["default"].lookup("SC.Website.UploadedDocument.DownloadDocument","Download original document")).appendTo(this._parent)},SetParent:function(e){this._parent=a()(e)}};var Tl=Dl;var wl=Da.a.module("redlineService",[]),Il=n("h2EqtdKC"),El=n("LT1bhBfT");wl.factory("RedlineProvider",function(){return Il["default"]});wl.factory("RedlineConfig",function(){return El["default"]});n("TSQz0m59");var xl=n("aT1Aky20"),Nl=n.n(xl),kl=Da.a.module("redlineModal",["redlineService","ngSanitize"]).run(["$templateCache",function(e){e.put("templates/redlineModal.html",Nl.a)}]);kl.controller("newSnippetFormController",["$scope","$rootScope","$q","RedlineProvider","RedlineConfig",function(e,t,n,o,i){var a=0;n.when(i.getSettings()).then(function(e){a=e.comparisonItemsCountLimit});e.saveButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.SaveAction","Save");e.cancelButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.CancelAction","Cancel");e.snippetNameLabelText=I["default"].lookup("SC.Document.Redline.ComparisonTool.SnippetNameLabel","Snippet Name");e.copyPasteSnippetLabelText=I["default"].lookup("SC.Document.Redline.ComparisonTool.CopyPasteSnippetLabel","Copy/Paste Snippet");e.invalidFieldWarningMessageText=I["default"].lookup("SC.Document.Redline.ComparisonTool.RequiredFieldMessage","This field is required");e.confirmButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.ConfirmAction","Ok");var r=I["default"].lookup("SC.Document.Redline.ComparisonTool.ShowHtmlText","Show HTML"),s=I["default"].lookup("SC.Document.Redline.ComparisonTool.ShowTextText","Show Text");e.parameters={};e.snippet={};e.showLoading=!0;e.showHtmlText=r;var l=null;e.$on("newSnippetFormOpened",function(){Object.keys(e.parameters).length||n.when(o.GetComparisonItemsCount()).then(function(t){d(t);e.$emit("hideRedlineToolError")},function(){e.$emit("showRedlineToolError");e.$emit("cancelNewSnippetForm")})});e.$on("comparisonItemsCount",function(e,t){d(t)});e.$on("snippetTextTypeChanged",function(e,t){l=t});var d=function(t){var n=I["default"].format("SC.Document.Redline.ComparisonTool.NotAllowedAddingItemMessage",{limitCount:t},"There are "+t+" items in the list. Delete at least one in order to add a new item.");if(t>=a){e.parameters.allowedToAddSnippet=!1;e.parameters.notAllowedMessage=n;e.setTab(1)}else e.parameters.allowedToAddSnippet=!0;e.showLoading=!1};e.saveNewSnippet=function(a,r){if(r.$valid){a.itemType=i.itemTypes.userEnteredText;a.textType=l;e.showLoading=!0;n.when(o.AddComparisonItem(a)).then(function(n){u(r);t.$broadcast("addedNewComparisonItem",n);e.$emit("cancelNewSnippetForm");e.$emit("hideRedlineToolError")},function(){e.$emit("showRedlineToolError")}).finally(function(){e.showLoading=!1})}};e.cancelNewSnippetForm=function(t){t&&u(t);e.$emit("cancelNewSnippetForm")};var u=function(t){e.$broadcast("clearNewSnippetForm");e.snippet=Da.a.copy({});t.$setPristine()};e.showTextEditorToolbar=c["default"].isIacOn("IAC-BLC-REDLINING-TEXTEDITOR");e.textEditorOptions={toolbar:e.showTextEditorToolbar?"toolbar":"",parserRules:i.parserRules,
useLineBreaks:!1};e.updateSnippetTextFromTextEditor=function(){this.getValue()?e.snippet.text=this.getValue():void 0!=e.snippet.text&&(e.snippet.text="");e.$apply()};e.$on("textEditorViewChanged",function(t,n){"composer"===n?e.showHtmlText=r:"textarea"===n&&(e.showHtmlText=s);e.$apply()})}]);kl.controller("comparisonItemsTabController",["$scope","$rootScope","$q","RedlineProvider","RedlineConfig",function(e,t,n,o,i){var a=this;e.startCompare=function(){var t=e.getSelectedItems(e.listOfComparisonItems);if(t&&t.originalItem&&t.revisedItem){var i={originalComparisonItemGuid:t.originalItem.itemGuid,revisedComparisonItemGuid:t.revisedItem.itemGuid};e.setComparisonProcessInProgress(!0);n.when(o.AddReport(i)).then(a.completeReportGeneration,function(){e.setComparisonProcessInProgress(!1);e.$emit("showRedlineToolError")})}};e.getSelectedItems=function(e){var t,n,o=[];for(var i in e){var a=e[i];if(a.selected){o.push(a);"original"==a.markAs?t=a:"revised"==a.markAs&&(n=a)}}return{itemList:o,originalItem:t,revisedItem:n}};this.completeReportGeneration=function(t){if(t.completionStatus&&"completed"!==t.completionStatus){e.setComparisonProcessInProgress(!1);e.$emit("notCompletedReportCreated",t)}else if(t.status===i.statuses.reportBlocked){e.setComparisonProcessInProgress(!1);a.showBlockedMessage()}else if(t.status===i.statuses.reportShowWarn){e.setComparisonProcessInProgress(!1);a.showWarningMessage(t)}else{var n=I["default"].lookup("SC.Document.Redline.ComparisonTool.LoadingMessageRedirectingToReport","Redirecting to Report View, please wait");e.setComparisonProcessInProgress(!0,n);window.location.href="/Redline/Report/"+t.itemGuid+"/FullText.html?transitionType=Default&contextData=(sc.Default)"}};this.showBlockedMessage=function(){e.$emit("showBlockedMessage")};this.showWarningMessage=function(e){t.$broadcast("showWarningMessage",e)}}]);kl.controller("reportsTabController",["$sce","$interval","$scope","$rootScope","$q","RedlineProvider","RedlineConfig",function(e,t,n,o,i,a,r){var s,l=this;this.intervalPromise=null;var d=I["default"].lookup("SC.Document.Redline.ComparisonTool.ReportCompletedMessage","Report generation has been completed"),c=I["default"].lookup("SC.Document.Redline.ComparisonTool.ReportStartedMessage",'Your report is in progress.  You may close this window and return at a later time to view your report, which will remain accessible from the<br/>"View Saved Comparisons" tab until you run another report.');n.showMessage=function(e,t){n.showInformationMessage=!0;n.informationMessage={text:e,type:t}};n.startStatusChecking=function(){l.checkNotCompletedReport();l.intervalPromise=t(l.checkNotCompletedReport,r.checkReportStatusInterval)};this.stopStatusChecking=function(){if(l.intervalPromise){t.cancel(l.intervalPromise);l.intervalPromise=null}};n.$on("reportCreated",function(e,t){if(t){if(n.reportsLoaded){n.listOfTemporaryReports=[];n.listOfTemporaryReports.push(t)}n.showMessage(c,r.messages.types.info)}});n.redlineToolLightbox.AddEventListener("close",function(){l.stopStatusChecking()});this.checkNotCompletedReport=function(){if(s)return;var e=n.listOfTemporaryReports.filter(function(e){return!n.isReportCompleted(e)});e&&1===e.length&&l.getReportCompletionStatus(e[0])};this.getReportCompletionStatus=function(e){s=!0;i.when(a.CheckReportCompletionStatus(e)).then(function(t){var o=n.listOfTemporaryReports.indexOf(e);n.listOfTemporaryReports.splice(o,1);n.listOfTemporaryReports.unshift(t);n.isReportCompleted(t)&&n.showMessage(d,r.messages.types.success);s=!1},function(){l.stopStatusChecking();n.$emit("showRedlineToolError")})};n.isReportCompleted=function(e){return!e.completionStatus||"completed"===e.completionStatus};n.isReportCancelled=function(e){return"error"===e.completionStatus}}]);var Al=n("7EyuijQN"),Rl=n.n(Al),Pl=n("u1DA422/"),Bl=n.n(Pl),Ll=n("tiX7E9IU"),Ol=n.n(Ll);kl.directive("comparisonItemsTab",["$rootScope","$q","$filter","RedlineProvider","RedlineConfig",function(e,t,n,o,i){return{restrict:"EA",template:Rl.a,scope:!0,replace:!0,controller:"comparisonItemsTabController",link:function(r){var s=0;t.when(i.getSettings()).then(function(e){s=e.comparisonItemsCountLimit});r.listOfComparisonItems=[];r.compareButtonEnable=!1;r.comparisonProcessInProgress=!1;r.comparisonItemsLoaded=!1;r.markAsOriginalText=I["default"].lookup("SC.Document.Redline.ComparisonTool.MarkAsOriginalLabel","Mark as original");r.markAsRevisedText=I["default"].lookup("SC.Document.Redline.ComparisonTool.MarkAsRevisedLabel","Mark as revised");r.startCompareButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.StartCompareAction","Start Compare");r.closeButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.RemoveLightboxButton","Close");r.selectTwoSnippetsToCompareMessageText=I["default"].lookup("SC.Document.Redline.ComparisonTool.SelectTwoSnippetsToCompareMessage","Select 2 items to compare");r.invalidFieldWarningMessageText=I["default"].lookup("SC.Document.Redline.ComparisonTool.RequiredFieldMessage","This field is required");r.noSelectionsMessageText=I["default"].lookup("SC.Document.Redline.Widget.NoItemsAddedMessage","No selections have been added. Add at least 2 items from Agreements, Filings or your own text to compare.");r.addOneMoreItemMessageText=I["default"].lookup("SC.Document.Redline.Widget.OneItemAddedMessage","Note: Add one more item from Agreements, Filings or your own text to compare.");r.getSnippetInfo=function(e){var t=n("renderDate")(e.modifiedDate);if(e.textType===El["default"].snippetTextType.plain)return I["default"].format("SC.Document.Redline.SavedAsPlainSnippet",{date:t},t+" as Text");if(e.textType===El["default"].snippetTextType.tabular)return I["default"].format("SC.Document.Redline.SavedAsTabularSnippet",{date:t},t+" as Tabular");return""};var l=function(e,t){r.showInformationMessage=!0;r.informationMessage={text:e,type:t}};r.$on("addedNewComparisonItem",function(e,t){r.setTab(1);f(t)});r.$on("tabChanged",function(e,n){1!==n||r.comparisonItemsLoaded||t.when(o.GetComparisonItems()).then(function(e){r.listOfComparisonItems=e;d(r.options);v();r.$emit("hideRedlineToolError")},function(){r.$emit("showRedlineToolError")}).finally(function(){r.comparisonItemsLoaded=!0})});var d=function(e){if(e&&e.status==i.statuses.notAdded){var t=I["default"].format("SC.Document.Redline.ComparisonTool.NotAllowedAddingItemMessage",{limitCount:s},"There are "+s+" items in the list. Delete at least one in order to add a new item.");l(t,i.messages.types.error);r.notAddedComparisonItem=e}else e&&e.status==i.statuses.added&&l(i.messages.texts.itemAdded,i.messages.types.success)};r.deleteComparisonItem=function(e){h(e,!0);t.when(o.DeleteItem(e)).then(function(){e.selected&&m(e);var t=r.listOfComparisonItems.indexOf(e);r.listOfComparisonItems.splice(t,1);u();v();l(i.messages.texts.itemDeleted,i.messages.types.success);r.$emit("hideRedlineToolError")},function(){r.$emit("showRedlineToolError")}).finally(function(){h(e,!1)})};var c=!1,u=function(){if(r.notAddedComparisonItem&&!c){c=!0;h(r.notAddedComparisonItem,!0);t.when(o.AddComparisonItem(r.notAddedComparisonItem)).then(function(e){f(e);r.notAddedComparisonItem=null;r.$emit("hideRedlineToolError")},function(){r.$emit("showRedlineToolError")}).finally(function(){c=!1;h(r.notAddedComparisonItem,!1)})}},f=function(e){d(e);if(e&&e.status==i.statuses.added){r.listOfComparisonItems.unshift(e);v()}C()};r.editComparisonItem=function(e){e.newItemName=e.itemName;e.editMode=!0};r.radioButtonClicked=function(e){for(var t in r.listOfComparisonItems){var n=r.listOfComparisonItems[t];n.selected&&e!=n&&("original"==n.markAs?n.markAs="revised":n.markAs="original")}};r.updateComparisonItem=function(e){if(e.itemName!=e.newItemName){if(e.newItemName){h(e,!0);e.itemName=e.newItemName;t.when(o.UpdateComparisonItem(e)).then(function(){e.editMode=!1;(function(e){var t=r.listOfComparisonItems.indexOf(e);r.listOfComparisonItems.splice(t,1);r.listOfComparisonItems.unshift(e);C()})(e);e.modifiedDate=(new Date).toISOString();l(i.messages.texts.itemUpdated,i.messages.types.success);r.$emit("hideRedlineToolError")},function(){r.$emit("showRedlineToolError")}).finally(function(){h(e,!1)})}}else e.editMode=!1}
;var h=function(e,t){e&&(e.isProcessed=t)};r.exitFromEditMode=function(e){e.editMode=!1};r.selectItem=function(e){r.showInformationMessage=!1;var t=r.getSelectedItems(r.listOfComparisonItems);if(a.a.inArray(e,t.itemList)>=0){var n=t.itemList.length<=2;p(t,n,e);t.itemList.length>1&&(r.compareButtonEnable=!0)}else m(e)};var p=function(e,t,n){if(t){n.selected=!0;g(e,n)}else{m(n);l(i.messages.texts.canSelectedOnlyTwoItems,i.messages.types.error);r.selectedMoreThanTwoItems=!0}},m=function(e){e.selected=!1;r.compareButtonEnable=!1;e.markAs=null},g=function(e,t){void 0!==e.originalItem?t.markAs="revised":t.markAs="original"},v=function(){r.countOfComparisonItemsText=I["default"].format("SC.Document.Redline.ComparisonTool.CountOfComparisonItemsMessage",{currentCount:r.listOfComparisonItems.length,limitCount:s},r.listOfComparisonItems.length+" out of "+s+" items added");e.$broadcast("comparisonItemsCount",r.listOfComparisonItems.length)},C=function(){a()(".co_redlineLightbox_tabItemsList").animate({scrollTop:0},200)};r.redlineToolLightbox.AddEventListener("close",function(){if(r.comparisonItemsLoaded&&r.options.updateItemsAfterClosingRTC){var e=r.options.openedReport,t=n("filter")(r.listOfComparisonItems,{itemGuid:e.originalComparisonItemGuid}),o=n("filter")(r.listOfComparisonItems,{itemGuid:e.revisedComparisonItemGuid});t.length||(e.originalComparisonItemGuid=null);o.length||(e.revisedComparisonItemGuid=null);r.options.updateItemsAfterClosingRTC(e)}})}}}]).directive("comparisonItem",[function(){return{template:Bl.a,restrict:"EA",replace:!0}}]).directive("notAddedComparisonItem",[function(){return{template:Ol.a,restrict:"EA",replace:!0}}]);var Ml=n("3YR3iXos"),Wl=n.n(Ml),Fl=n("POx4U1CN"),Hl=n.n(Fl);kl.directive("newSnippetForm",[function(){return{template:Wl.a,scope:!0,controller:"newSnippetFormController"}}]).directive("textEditor",function(){return{scope:{options:"=",interactionEvent:"=",parentElement:"="},link:function(e,t){var n=new Hl.a.Editor(t[0],e.options);n.on("interaction",e.interactionEvent);var o="";n.on("paste",function(e){var t;if(e.clipboardData){var n=(t=e.clipboardData.getData("text/html")).indexOf("</html>")+"</html>".length;o=t.substring(n).trim()}});n.on("interaction",function(e){if(e.clipboardData&&o){n.setValue(n.getValue().replace(o,""),!1);o=""}});n.on("change_view",function(t){e.$emit("textEditorViewChanged",t)});e.$on("clearNewSnippetForm",function(){n.clear()});var i=a()("iframe.wysihtml5-sandbox, input[name='_wysihtml5_mode']");e.parentElement.AddEventListener("close",function(){n.fire("destroy:composer");i.remove();a()("body").removeClass("wysihtml5-supported")})}}});var Gl=n("aDHXaPCs"),Ul=n("s3//kXy6");kl.directive("redlineTool",["$rootScope",function(){return{restrict:"EA",templateUrl:"templates/redlineModal.html",replace:!0,scope:{redlineToolLightbox:"=lightbox",options:"=options"},link:function(e,t){e.saveButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.SaveAction","Save");e.editButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.EditAction","Edit");e.deleteButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.DeleteAction","Delete");e.cancelButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.CancelAction","Cancel");e.closeButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.CloseAction","Close");e.notAddedStatusText=I["default"].lookup("SC.Document.Redline.ComparisonTool.NotAddedStatus","[NOT ADDED]");e.notSavedStatusText=I["default"].lookup("SC.Document.Redline.ComparisonTool.NotSavedStatus","[NOT SAVED]");e.loadingMessageReportIsGenerated=I["default"].lookup("SC.Document.Redline.ComparisonTool.LoadingMessageReportIsGenerated","Your report is being generated, please wait");e.reportsTabText=I["default"].lookup("SC.Document.Redline.ComparisonTool.ReportsTabName","View Saved Comparisons");e.comparisonItemsTabText=I["default"].lookup("SC.Document.Redline.ComparisonTool.ComparisonItemsTabName","Select To Compare");e.errorMessage=Ul["DeliveryFailure"];e.spinnerSrc=window.location.protocol+"//"+h["default"].GetHost(h["default"].Images)+"/css/v2/images/co_loading_small.gif";e.showSnippetForm=!1;var n=I["default"].lookup("SC.Document.Redline.ComparisonTool.RemoveLightbox","Close the Redline Comparison Tool"),o=new Gl["default"],i=t.find("#co_redlineLightbox_addNewSnippet_linkContainer");o.SetParentDiv(i[0]);o.SetLinkText(I["default"].lookup("SC.Document.Redline.ComparisonTool.AddOwnSnippetLink","Add your own snippet"));o.OnClick(function(){e.showSnippetForm=!0;e.$apply()});o.OnSelectedValueChanged(function(){e.$broadcast("snippetTextTypeChanged",o.GetSelectedValue())});o.Draw();e.setTab=function(t){t&&(e.selectedTab=t)};e.setComparisonProcessInProgress=function(t,o){t?e.redlineToolLightbox.RedrawCloseLinkObject({id:"coid_closeLightbox",alt:n,onclick:function(){e.redlineToolLightbox.Remove()},className:"co_overlayBox_closeButton co_notVisible"}):e.redlineToolLightbox.RedrawCloseLinkObject({id:"coid_closeLightbox",alt:n,onclick:function(){e.redlineToolLightbox.Remove()},className:"co_overlayBox_closeButton"});e.comparisonProcessInProgress=t;Da.a.isUndefined(o)||(e.loadingMessageReportIsGenerated=o)};e.options||(e.options={});"Error"==e.options.Status&&(e.redlineToolError=!0);e.setTab(e.options.selectedTab);e.$on("closeRedlineToolLightbox",function(){e.redlineToolLightbox.Remove()});e.$on("showRedlineToolError",function(){e.redlineToolError=!0});e.$on("hideRedlineToolError",function(){e.redlineToolError=!1});e.$on("cancelNewSnippetForm",function(){e.showSnippetForm=!1;e.setTab(1)});e.$watch("showSnippetForm",function(){e.showSnippetForm&&e.$broadcast("newSnippetFormOpened")});e.$watch("selectedTab",function(t){e.$broadcast("tabChanged",t)});e.$on("showBlockedMessage",function(){e.addReportBlocked=!0});e.$on("hideBlockedMessage",function(){e.addReportBlocked=!1});e.$on("showWarningMessage",function(){e.addReportWarning=!0});e.$on("hideWarningMessage",function(){e.addReportWarning=!1});e.$on("notCompletedReportCreated",function(t,n){e.$broadcast("reportCreated",n);e.setTab(2)})}}}]);var Vl=n("xNSvv6Hy"),jl=n.n(Vl),ql=n("Ewrjn0pW"),Kl=n.n(ql),zl=n("ZG0vd9jd"),Ql=n.n(zl);kl.directive("reportsTab",["$q","$filter","RedlineProvider","RedlineConfig",function(e,t,n,o){return{template:jl.a,replace:!0,scope:!0,controller:"reportsTabController",link:function(i){var r=0;e.when(o.getSettings()).then(function(e){r=e.reportsCountLimit});i.temporaryReportInfo=I["default"].lookup("SC.Document.Redline.ComparisonTool.TemporaryReportInfo","This report has not been saved in the Redline Comparison Tool. To save this report for future access, please click Save. Please note, only your most recent unsaved report will be available from this page.");i.invalidFieldWarningMessageText=I["default"].lookup("SC.Document.Redline.ComparisonTool.RequiredFieldMessage","This field is required");i.listOfReports=[];i.listOfTemporaryReports=[];i.notAddedStatus=o.statuses.notAdded;i.inProgressStatus=I["default"].lookup("SC.Document.Redline.ComparisonTool.ReportInProgressMessage","In progress");i.errorStatus=I["default"].lookup("SC.Document.Redline.ComparisonTool.ReportCancelledMessage","Canceled");i.processingText=I["default"].lookup("SC.Document.Redline.ComparisonTool.ProgressIndicator.ProcessingText","Processing...");var s=function(){i.countOfReportsText=I["default"].format("SC.Document.Redline.ComparisonTool.CountOfComparisonItemsMessage",{currentCount:i.listOfReports.length,limitCount:r},i.listOfReports.length+" out of "+r+" items added")};i.$on("tabChanged",function(t,a){2!==a||i.reportsLoaded||e.when(n.GetReports()).then(function(e){for(var t=0;t<e.length;t++)e[t].itemType===o.reportTypes.temporary?i.listOfTemporaryReports.push(e[t]):e[t].itemType===o.reportTypes.permanent&&i.listOfReports.push(e[t]);s();i.reportsLoaded=!0;d();i.startStatusChecking();i.$emit("hideRedlineToolError")},function(){i.reportsLoaded=!0;i.$emit("showRedlineToolError")})});i.saveReport=function(t){f(t,!0);t.itemType=o.reportTypes.permanent;e.when(n.UpdateReport(t)).then(function(e){if(e&&e.status===o.statuses.notAdded){var n=I["default"].format("SC.Document.Redline.ComparisonTool.NotAllowedAddingItemMessage",{
limitCount:r},"There are "+r+" items in the list. Delete at least one in order to add a new item.");t.itemType=o.reportTypes.temporary;t.status=o.statuses.notAdded;i.notAddedReport=t;i.showMessage(n,o.messages.types.error)}else l(t);i.$emit("hideRedlineToolError");i.options.reportForSave=null},function(){i.$emit("showRedlineToolError")}).finally(function(){f(t,!1)})};var l=function(e){var t=i.listOfTemporaryReports.indexOf(e);i.listOfTemporaryReports.splice(t,1);i.listOfReports.unshift(e);e.modifiedDate=(new Date).toISOString();s();i.showMessage(o.messages.texts.itemAdded,o.messages.types.success)},d=function(){if(i.options.reportForSave)for(var e=0;e<i.listOfTemporaryReports.length;e++)i.listOfTemporaryReports[e].itemGuid===i.options.reportForSave&&i.saveReport(i.listOfTemporaryReports[e])};i.editReport=function(e){e.newItemName=e.itemName;e.editMode=!0};i.exitFromEditMode=function(e){e.editMode=!1};i.updateReport=function(t){if(t.itemName!==t.newItemName){if(t.newItemName){f(t,!0);t.itemName=t.newItemName;e.when(n.UpdateReport(t)).then(function(){t.editMode=!1;c(t);t.modifiedDate=(new Date).toISOString();i.showMessage(o.messages.texts.itemUpdated,o.messages.types.success);i.$emit("hideRedlineToolError")},function(){i.$emit("showRedlineToolError")}).finally(function(){f(t,!1)})}}else t.editMode=!1};var c=function(e){var t=i.listOfReports.indexOf(e);i.listOfReports.splice(t,1);i.listOfReports.unshift(e);a()(".co_redlineLightbox_tabItemsList").animate({scrollTop:0},200)},u=!1;i.deleteReport=function(t){f(t,!0);e.when(n.DeleteReport(t)).then(function(){var a=i.listOfReports.indexOf(t);i.listOfReports.splice(a,1);(function(){if(i.notAddedReport&&!u){u=!0;f(i.notAddedReport,!0);i.notAddedReport.itemType=o.reportTypes.permanent;e.when(n.UpdateReport(i.notAddedReport)).then(function(){l(i.notAddedReport);f(i.notAddedReport,!1);i.notAddedReport=null;i.$emit("hideRedlineToolError")},function(){f(i.notAddedReport,!1);i.$emit("showRedlineToolError")}).finally(function(){u=!1})}})();s();i.showMessage(o.messages.texts.itemDeleted,o.messages.types.success);i.$emit("hideRedlineToolError")},function(){i.$emit("showRedlineToolError")}).finally(function(){f(t,!1)})};var f=function(e,t){e&&(e.isProcessed=t)};i.getReportUrl=function(e){return window.location.protocol+"//"+window.location.host+"/Redline/Report/"+e+"/FullText.html?transitionType=Default&contextData=(sc.Default)"};i.redlineToolLightbox.AddEventListener("close",function(){if(i.options.updateReportAfterClosingRTC){var e=i.options.openedReport,n=t("filter")(i.listOfReports,{itemGuid:e.itemGuid}),a=t("filter")(i.listOfTemporaryReports,{itemGuid:e.itemGuid});if(n.length){e.itemName=n[0].itemName;e.itemType=n[0].itemType}else a.length||(e.status=o.statuses.deleted);i.options.updateReportAfterClosingRTC(e)}})}}}]).directive("reportItem",[function(){return{template:Kl.a,replace:!0}}]).directive("temporaryReportItem",[function(){return{template:Ql.a,replace:!0}}]);var $l=n("ulcy7Jqj"),Jl=n.n($l);kl.directive("addReportBlockedMessage",[function(){return{template:Jl.a,scope:!0,link:function(e){e.blockedMessageText=I["default"].lookup("SC.Document.Redline.ComparisonTool.BlockedMessage","You do not have access to Redline Comparison Tool because it is not authorized under your subscription agreement.");e.cancelMessage=function(){e.$emit("hideBlockedMessage")}}}}]);var Yl=n("QDyDm29T"),Xl=n("kAkfKw4M"),Zl=n.n(Xl);kl.directive("addReportWarningMessage",["$rootScope","$q","RedlineProvider","$sce",function(e,t,n,o){return{template:Zl.a,scope:!0,link:function(e,i){e.acceptButtonText=I["default"].lookup("SC.Document.Redline.ComparisonTool.AcceptChargesAction","Generate Report");e.outOfPlanMessage=I["default"].lookup("SC.Document.Redline.ComparisonTool.OutOfPlanMessage","The Redline Comparison Tool is Out of Plan");e.additionalChargesMessage=I["default"].lookup("SC.Document.Redline.ComparisonTool.AdditionalChargesMessage","Generating this report will incur additional charges.");e.pricingInfoMessage=I["default"].lookup("SC.Document.Redline.ComparisonTool.PricingInfoMessage",'To learn more about Westlaw Charges, view our <a target="_blank" href="/Subscriber.html?transitionType=Default&amp;contextData=(sc.Default)" id="co_pricingGuideLink"> Pricing Guide.</a>');e.trustHtml=function(e){return o.trustAsHtml(e)};e.acceptCharges=function(){e.setComparisonProcessInProgress(!0);t.when(n.AcceptCharges(e.createReportResponse)).then(a,function(){e.setComparisonProcessInProgress(!1);e.$emit("showRedlineToolError")})};var a=function(){t.when(n.AddReport(e.createReportResponse)).then(function(t){if(t.completionStatus&&"completed"!==t.completionStatus){e.setComparisonProcessInProgress(!1);e.$emit("hideWarningMessage");e.$emit("notCompletedReportCreated",t)}else if(t.status===El["default"].statuses.added){var n=I["default"].lookup("SC.Document.Redline.ComparisonTool.LoadingMessageRedirectingToReport","Redirecting to Report View, please wait");e.setComparisonProcessInProgress(!0,n);window.location.href="/Redline/Report/"+t.itemGuid+"/FullText.html?transitionType=Default&contextData=(sc.Default)"}},function(){e.setComparisonProcessInProgress(!1);e.$emit("showRedlineToolError")})};e.cancelMessage=function(){e.$emit("hideWarningMessage")};e.$on("showWarningMessage",function(t,n){e.createReportResponse=n});(function(){var e=new Yl["default"];e.SetParentDiv(i[0].querySelector("#co_warning_clientId"));e.SetCurrentClientMatter(Q["default"].ClientMatter);e.Setup();e.DrawInline()})()}}}]);kl.filter("renderDate",function(){return function(e){var t=I["default"].renderDate(new Date(e),"SC.Config.Date.RedlineDate","MMM d, yyyy");return I["default"].format("SC.Document.Redline.ComparisonTool.SavedDateText",{date:t},"Saved on "+t)}});var ed=n("dxKJdlWL"),td=n("z+J4VEwH"),nd=n("3Ev9oom1");function od(e){return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function id(e){if(null!=e&&"function"!=typeof e)throw new f["CobaltError"](h["default"].Website,"Invalid argument: callbackFunction must be a function");this._callbackLocation=-1;if(null!=e){this._callbackLocation=id.UserSuppliedCallback.length;id.UserSuppliedCallback.push(e)}}id.prototype={AddSerialNumberAndElement:function(e,t,n){if(null==e||"string"!=typeof e)throw new f["CobaltError"](h["default"].Website,"Error: serialNumber must be a string");if(null!=n&&"string"!=typeof n)throw new f["CobaltError"](h["default"].Website,"Error: documentGuid must be a string");if(null==t||"object"!==od(t)||null==t.appendChild)throw new f["CobaltError"](h["default"].Website,"Error: domElement must be a HTMLElement");var o={processed:!1,serialNumber:e,documentGuid:n,element:t,callbackLocation:this._callbackLocation};id.SerialNumbersAndElements.push(o)},AddElement:function(e,t){if(null!=t&&"string"!=typeof t)throw new f["CobaltError"](h["default"].Website,"Error: documentGuid must be a string");if(null==e||"object"!==od(e)||null==e.appendChild)throw new f["CobaltError"](h["default"].Website,"Error: domElement must be a HTMLElement");var n={processed:!1,documentGuid:t,element:e,callbackLocation:this._callbackLocation};id.SerialNumbersAndElements.push(n)},GetKMSplats:function(){if(""==Xr["default"].SessionId)return;for(var e='{"citelist":[',t=0;t<id.SerialNumbersAndElements.length;t++){e+='"'+id.SerialNumbersAndElements[t].serialNumber+'"';t<id.SerialNumbersAndElements.length-1&&(e+=",")}var n={cites:e+="]}",token:Xr["default"].SessionId};(new nd["default"]).keyCiteSplat(n,id.Callback)}};id.UserSuppliedCallback=[];id.SerialNumbersAndElements=[];id.Callback=function(e){for(var t=e.FirmInlineLogo.Uri,n=e.FirmInlineLogo.Name,o=0;o<e.CiteFoundResultList.length;o++)if(e.CiteFoundResultList[o].Cited)for(var i=0;i<id.SerialNumbersAndElements.length;i++){var a=id.SerialNumbersAndElements[i];if(e.CiteFoundResultList[o].DocUID==a.serialNumber&&!a.processed){if(a.callbackLocation>-1)id.UserSuppliedCallback[a.callbackLocation](a.element,a.serialNumber,a.documentGuid);else{var r=new Image;r.src=t;r.alt=n;a.element.appendChild(r)}a.processed=!0}}};var ad=id
;var rd=n("crJM0Ng0");var sd=function(){(function(){var e=this;this.SetParentDiv=function(t){e.parent=t};this.CreateFixedHeaderDocGuid=function(t,n,o,i,a,r,s,l,d){e.guidToUse=t;e.originationContext=n||"DocumentFixedHeader";e.listSource=o;e.navigationPath=i;e.list=a;e.rank=r;e.docSource=s;e.cacheScope=l;e.docVersionNumber=d;e.docVersionString="v"+d};this.WasDrawnOnServer=function(){return e.parent&&e.parent.childNodes.length>0};this.Draw=function(){e.WasDrawnOnServer()?e.DrawRemainingContent():m["default"].GetObject(r["default"].objectIds.provider).GetFixedHeader(e.guidToUse,function(t){e.DrawMainContent(t);e.DrawRemainingContent()},null,e.listSource,e.navigationPath,e.list,e.rank,e.cacheScope)};this.DrawMainContent=function(t){if(null!=t&&!e.hasDrawnMainContent&&null!==e.parent){e.parent.innerHTML=t;e.hasDrawnMainContent=!0}};this.DrawRemainingContent=function(){if(!e.hasDrawnRemainingContent){if(void 0!==e.docSource&&e.docSource.length>0){var t=document.getElementById(r["default"].ids.docHeaderTitleSpan);if(null!==t){var n=t.getElementsByTagName("a");if(null!==n&&n.length>0){var o=n[0],i=/docSource=/g;if(!o.href.match(i)){var a=o.innerHTML;i=/\?/g;o.href.match(i)?o.href+="&docSource="+e.docSource:o.href+="?docSource="+e.docSource;o.innerHTML=a}}}}e.drawVersionNumber();c["default"].EnableIpad||c["default"].EnableIphone||c["default"].IsIndigoDisplayEnabled&&!c["default"].IsIndigoDragAndDropEnabled||setTimeout(function(){var t=Object(D["default"])();t.initializeDraggables();t.AddDraggableHandlersToLinks(e.parent)},2e3);(new T["default"]).GetMetaInformation(e.guidToUse,function(t){if(!c["default"].EnableIpad&&!c["default"].EnableIphone){var n=document.getElementById(r["default"].ids.docStatusIcons);if(null==n){(n=document.createElement("ul")).id=r["default"].ids.docStatusIcons;n.className=r["default"].classes.docIndicators;var o=document.getElementById(r["default"].ids.docHeaderTitle),i=o?o.firstChild:null;i&&i.parentNode.insertBefore(n,i.nextSibling)}var a=new ad(function(e,t,n){var o=document.createElement("li"),i=document.createElement("a"),a=document.createElement("img");a.title=I["default"].lookup("SC.Document.StatusIndicators.KMCitedIconText","KM");a.alt=I["default"].lookup("SC.Document.StatusIndicators.KMCitedIconText","KM");a.src=h["default"].GetUrl(h["default"].Images,r["default"].paths.kmIcon);a.height=12;a.width=15;var s={docGuid:n,categoryType:"KMCitingReferences",originationContext:"documentTab",transitionType:"Default",contextData:"(sc.Default)"};i.href=C["default"].Absolute(C["default"].Page.RelatedInformationCategory(s));i.appendChild(a);o.appendChild(i);e.appendChild(o)}),s=t.LegacyId;null!=t.LegacyId&&t.LegacyId==t.SerialNumber&&(s=b["default"].prependPadding(s,10,"0"));if(null!=s){a.AddSerialNumberAndElement(s,n,t.DocGuid);a.GetKMSplats()}}e.metaInfoRetrieved(t)},e.metaInfoRetrieved);e.hasDrawnRemainingContent=!0}};this.drawVersionNumber=function(){if(e.docVersionNumber&&e.docVersionNumber>1){var t=document.getElementById(r["default"].ids.docHeaderVersionNumber);if(null==t){(t=document.createElement("span")).id=r["default"].ids.docHeaderVersionNumber;t.className=r["default"].classes.docHeaderVersionNumber;t.innerHTML=e.docVersionString;var n=document.getElementById(r["default"].ids.docHeaderTitle),o=n?n.firstChild:null;o&&a()(o).after(t)}}};this.metaInfoRetrieved=function(t){var n=r["default"].events.headerRenderComplete,o={guid:e.guidToUse},i=t,a=n,s=new y["default"].Message(o,i,a,"1.0.0");y["default"].Publish(n,s)}}).call(this);var e=this,t=this.DrawRemainingContent;this.DrawRemainingContent=function(){t.call(this);k["default"].ViewData?e._appendEvents():ed["default"].Subscribe("setup",function(){e._appendEvents()})};this._appendEvents=function(){this.shouldApplyEventsToPriorInteractions()&&e._getPreviousInteractionEventHandler().appendEvents()};this._getPreviousInteractionEventHandler=function(){return new rd["default"](e._getContainerElement(),function(){return e.guidToUse},[{iconSelector:"#co_document_icon_previouslyviewed_img",previousInteractionType:rd["default"].PreviousInteractionType.PreviouslyViewed},{iconSelector:"#co_document_icon_foldered_img",previousInteractionType:rd["default"].PreviousInteractionType.PreviouslyFoldered},{iconSelector:"#co_document_icon_notes_img",previousInteractionType:rd["default"].PreviousInteractionType.PreviouslyAnnotated,docLinkFinder:function(e){return e.closest("div#co_docHeaderTitle").find("#title > a").attr("href")},rtidFinder:function(){return td["default"].ResourceToken}}])};this._getContainerElement=function(){return a()(e.parent)};this.shouldApplyEventsToPriorInteractions=function(){return qr["default"].isPUIAllowed()}};g["default"].AddLoadFunction(function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.getElementById("co_docFixedHeader"),n=new sd;if(Object(u["IsNotNullOrEmpty"])(e.DocGuid)){n.SetParentDiv(t);n.CreateFixedHeaderDocGuid(e.DocGuid,"docHeaderFlag",e.ListSource,e.NavigationPath,e.List,e.Rank,e.DocSource,null,e.DocumentVersionNumber);n.Draw()}})(xe["default"].PageData.TabScripts)});var ld=n("RqNuIBnF"),dd=(n("Smkc2gbC"),n("a7kUP4zK"));t["default"]=Object(dd["default"])(function(e){var t=xe["default"].PageData.DocumentTabView;t.IsSkipOutOfPlanChecked&&_["default"]._SetInCache("Document","IsSkipOutOfPlanChecked",t.IsSkipOutOfPlanChecked);e("init");ld["default"].Setup();var n=xe["default"].WidgetDomIds;0!==a()("#coid_website_recommendedDocuments").length&&(n.RelatedDocuments="coid_website_recommendedDocuments");0!==a()("#coid_website_relatedInfoIPWidgetDiv").length&&(n.RelatedPatents="coid_website_relatedInfoIPWidgetDiv");o["default"].isUserDocument=t.IsUserDocument;o["default"].userDocumentData=t.UserDocumentData;o["default"].HasProfileSubTab=t.HasProfileSubTab;o["default"].ProfileSubTabData=t.ProfileSubTabData;o["default"].SetDisplayOptions(t.DisplayOptions);t.ToolBarMode&&o["default"].SetToolBarMode(t.ToolBarMode);var i=xe["default"].ViewModelData;o["default"].Setup(i,n);e("setup",t);c["default"].EnableIpad&&a()(document).bind("touchstart",yn["AttachClickToHandleDocumentPopups"]);ld["default"].Draw();e("draw")}).on("setup",function(){a()("#co_iPadKeyCiteMenuToggle").click(function(){a()("#co_docPrimaryTabNavigation").toggleClass("co_showState")})},function(){y["default"].Subscribe(r["default"].events.documentRenderComplete,function(){(new function(){var e=this;this.Initialize=function(){var t=document.getElementById(r["default"].ids.document);t&&b["default"].AttachClickHandler(t,e.ClickHandler)};this.ClickHandler=function(t){var n=t.srcElement?t.srcElement:t.target;if(n&&b["default"].selfOrAncestorHasId(n,r["default"].ids.tocHeader))return e.toggle(n,t);if(n&&"a"===n.tagName.toLowerCase()&&b["default"].elementHasClass(n,r["default"].classes.treeToggle))return e.toggleTreeNode(n,t)};this.toggle=function(t,n){var o=document.getElementById(r["default"].ids.tocHeader),i=document.getElementById(r["default"].ids.tocContainer);o&&i&&("none"===i.style.display?e.expand(o,i):e.collapse(o,i));n.preventDefault&&n.preventDefault();n.returnValue=!1;return!1};this.toggleTreeNode=function(e,t){var n=a()(e).parent().parent().children("fieldset")[0];if(b["default"].elementHasClass(e,r["default"].classes.treeCollapse)){e.className=r["default"].classes.treeToggle+" "+r["default"].classes.treeExpand+" ";n&&(n.className=r["default"].classes.hideState)}else{e.className=r["default"].classes.treeToggle+" "+r["default"].classes.treeCollapse;n&&(n.className="")}t.returnValue=!1;return!1};this.collapse=function(e,t){e||(e=document.getElementById(r["default"].ids.tocHeader));t||(t=document.getElementById(r["default"].ids.tocContainer));if(t&&e&&"none"!==t.style.display){e.className=r["default"].classes.expandBoxHeader+" "+r["default"].classes.expandBoxCollapsed;t.style.display="none"}var n=b["default"].GetElementById(r["default"].ids.tocExpandCollapseLink);if(n&&n.element){n.className=r["default"].classes.accessibleLink+" "+r["default"].classes.expandBoxCollapseLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;n.element.childNodes[0]
;expandCollapseLinkLinkText.nodeValue=expandCollapseLinkLinkText.nodeValue.replace(r["default"].texts.tocCollapse,r["default"].texts.tocExpand)}};this.expand=function(e,t){e||(e=document.getElementById(r["default"].ids.tocHeader));t||(t=document.getElementById(r["default"].ids.tocContainer));if(t&&e&&"none"===t.style.display){e.className=r["default"].classes.expandBoxHeader+" "+r["default"].classes.expandBoxExpanded;t.style.display="block"}var n=b["default"].GetElementById(r["default"].ids.tocExpandCollapseLink);if(n&&n.element){n.className=r["default"].classes.accessibleLink+" "+r["default"].classes.expandBoxExpandLink+" "+r["default"].classes.highlightingExcludeAnnotations+" "+r["default"].classes.disableHighlightFeatures;var o=n.element.childNodes[0];o.nodeValue=o.nodeValue.replace(r["default"].texts.tocExpand,r["default"].texts.tocCollapse)}}}).Initialize()})},function(){Qs();y["default"].Subscribe("Cobalt.RelatedInfo.BrowseItem.Clicked",lr["TransferToRelatedInfo"]);y["default"].Subscribe("Cobalt.RelatedInfo.AllTopicsFromDocument.Clicked",lr["TransferToRelatedInfoAllTopicsFromDocument"]);y["default"].Subscribe("Cobalt.Document.Widget.KeyCiteAlert.Clicked",Gs.HandleKeyciteAlertClick)},function(){try{(mt=new pt).IsUserDocument=o["default"].isUserDocument;mt.SetDocumentGuid(o["default"].ViewData.DocumentGuid);mt.SetDomId(o["default"].WidgetDomIds.DocDisplay);mt.SetView(o["default"].ViewData.ViewType);mt.SetNavigationProperties({ListSource:o["default"].ViewData.DocumentSource.ListSource,NavigationPath:o["default"].ViewData.DocumentSource.NavigationPath,List:o["default"].ViewData.DocumentSource.List,Rank:o["default"].ViewData.Rank,IsSnapSnippetLink:o["default"].ViewData.IsSnapSnippetLink});mt.SetPersistProperties({PersistedDocumentGuid:o["default"].ViewData.PersistedDocumentGuid,Checksum:o["default"].ViewData.DocumentVersion,SubContentTypeId:o["default"].ViewData.SubContentTypeId,PersistedState:o["default"].ViewData.PersistedState});mt.SetWebsiteProperties({CacheScope:o["default"].ViewData.SessionScope,DocSource:o["default"].ViewData.DocumentSource.Key,ListPageSource:o["default"].ViewData.DocumentSource.ListPageSourceKey});mt.SetSearchWithinProperties({SearchWithinHandle:o["default"].ViewData.SearchWithinHandle,NeedToInjectTerms:o["default"].ViewData.NeedToInjectTerms,SearchWithinQuery:o["default"].ViewData.SearchWithinQuery});mt.SetUrmId(o["default"].ViewData.UrmId);mt.SetTermNavigationState(o["default"].ViewData.TermNavState);mt.Configure(o["default"].displayOptions);mt.SetFeatureConfigurations(k["default"].ViewData.FeatureConfigurations);mt.SetIsDocketsUpdate(o["default"].ViewData.IsDocketsUpdate);mt.SetDocumentSections(o["default"].ViewData.DocumentSections);mt.SetSecureContentHash(o["default"].ViewData.SecureContentHash);mt.SetHasDraftingNotes(o["default"].ViewData.HasDraftingNotes);mt.SetHasDocumentSections(o["default"].ViewData.HasDocumentSections);mt.SetRulebookMode(o["default"].ViewData.RulebookMode);mt.SetRulebookModeContent(o["default"].ViewData.RulebookModeContent);if(o["default"].userDocumentData){mt.ContainerId=o["default"].userDocumentData.containerId;mt.ContainerType=o["default"].userDocumentData.containerType;mt.AccountKey=o["default"].userDocumentData.accountKey}o["default"].DocDisplayWidget=mt}catch(e){_e["default"].ConsoleMessage("Error creating Cobalt.Document.DocumentDisplay widget: "+e,_e["default"].Level.Error,"Cobalt.Website.DocumentDisplay.CreationError");k["default"].WidgetFailure("Cobalt.Document.DocumentDisplay widget creation error.",!1)}},function(){try{if(o["default"].displayOptions.showMainToolbar){var e;if(o["default"].toolBarMode==sr.DocumentUnavailable)e=new Tt;else if(o["default"].toolBarMode==sr.DocumentPersisted)e=new Ft;else if(o["default"].toolBarMode!=sr.Document||o["default"].displayOptions.isNewDocumentView){if(o["default"].toolBarMode==sr.Document&&o["default"].displayOptions.isNewDocumentView){(e=new function(){rr.call(this);var e=this.SetRightToolbarSubWidgets;this.SetRightToolbarSubWidgets=function(t){this.addAlertsBellWidget(t);this.addFeedbackWidget(t);return e.call(this,t)};this.addFeedbackWidget=function(e){if(c["default"].isIacOn("IAC-PLUS-FEEDBACK")&&this.isPracticalLawDocument()){var t=new ya;e.push(t);this._viewingHeaderLocation++}};this.addAlertsBellWidget=function(e){if(this.isPracticalLawDocument()){var t=new ha;t.SetDocumentData(this.documentData);e.push(t);this._viewingHeaderLocation++}};var t=this.HasDownloadQuickDraftAccess;this.HasDownloadQuickDraftAccess=function(){var e=a()("."+r["default"].classes.standardDocumentAttachment).find("a.co_blobLink").attr("type");return t.call(this)&&(e==r["default"].texts.msdocType||e==r["default"].texts.msdocxType)};this.isPracticalLawDocument=function(){return xe["default"].PageData.DocumentTabView&&xe["default"].PageData.DocumentTabView.DisplayOptions&&xe["default"].PageData.DocumentTabView.DisplayOptions.isNewDocumentView};var n=this.createSearchWithinWidget;this.createSearchWithinWidget=function(e){b["default"].isKeyDatesDocument()||n.call(this,e)}}).SetDocumentData(o["default"].documentData);e.SetParentDivs(document.getElementById(o["default"].WidgetDomIds.DocTopToolbar),document.getElementById(o["default"].WidgetDomIds.DocRightToolbar),document.getElementById(o["default"].WidgetDomIds.DocBottomToolbar))}else if(o["default"].toolBarMode==sr.DualSearchDocument){V["default"].SetDocumentNavigation(new Ct);e=new kt}}else e=new gt["default"];o["default"].displayOptions.isNewDocumentView||e.SetParentDiv(document.getElementById(o["default"].WidgetDomIds.DocToolbar));e.setFeatureConfigurations(k["default"].ViewData.FeatureConfigurations);e.SetDocumentDisplay(o["default"].DocDisplayWidget);e.SetSearchGradingId(o["default"].ViewData.Grading);e.SetKeyCiteAlertWarning(o["default"].ViewData.KeyCiteAlertWarning);e.SetDocketTrackWarning(o["default"].ViewData.DocketTrackWarning);o["default"].DocToolbarWidget=e}}catch(e){_e["default"].ConsoleMessage("Error creating Cobalt.Document.DocumentToolbar widget: "+e,_e["default"].Level.Error,"Cobalt.Website.DocumentToolbar.CreationError");k["default"].WidgetFailure("Cobalt.Document.DocumentToolbar widget creation error.",!1)}},function(){Ys.SetViewData(o["default"].ViewData);Ys.SubscribeToDocketSingleUpdateEvent()},function(){if(o["default"].displayOptions.isNewDocumentView&&!c["default"].IsAnonymousSession){tl.assembleTocAndScrollBehavior();tl.addBookmarkSetup()}},function(){var e=o["default"].ViewData,t=e.DocumentGuid;Object(u["IsNotNullOrEmpty"])(e.BaseDocumentGuid)&&(t=e.BaseDocumentGuid);Gs.LoadRelatedInformationCounts(t,e.DocumentSource.Key,e.Rank,o["default"].HasProfileSubTab,o["default"].ProfileSubTabData,e.EntityId,e.EntityType)},function(){var e=o["default"].ViewData;if(e&&void 0!==e&&void 0!==e.BaseDocumentGuid&&null!==e.BaseDocumentGuid&&void 0!==e.DocumentLink&&null!==e.DocumentLink){var t=C["default"].Parse(e.DocumentLink),n=C["default"].Relative(C["default"].Page.Document({guid:e.DocumentGuid,viewType:"FullText",originationContext:t.QueryString.originationContext,transitionType:t.QueryString.transitionType,contextData:t.QueryString.contextData})),i=document.createElement("span"),r=document.createElement("a");r.innerHTML="View relationships to this document";r.id="co_document_fullTextLink";r.setAttribute("class","co_blobLink");r.setAttribute("href",n);var s=document.createElement("img");s.setAttribute("class","co_pdfIcon");s.setAttribute("src",h["default"].GetUrl(h["default"].Images,"/images/v1/co_relationship-icon.gif"));a()(r).prepend(s);a()(i).append(r);a()("#co_documentLinksContainer").append(i)}},function(){a()("a.co_link").each(function(e,t){if(t.href){var n=C["default"].Parse(t.href),o=n.QueryString["refType"];if(!o||!["a2","aJ","ap","ew","jp","mc","me","pi","rq","wk"].includes(o.toLowerCase()))return;xe["default"].PageData.DocumentTabView&&xe["default"].PageData.DocumentTabView.UserDocumentData&&(n.QueryString.analyticGuid=xe["default"].PageData.DocumentTabView.UserDocumentData.documentGuid);t.href=C["default"].Absolute(n)}})},function(){if(o["default"].ViewData.FullTocOnDoc){var e=new Pa["default"];e.SetParentDiv(a()("#co_leftColumn"))
;e.SetDocumentGuid(o["default"].ViewData.DocumentGuid);e.Draw()}else a()("#co_navigableDocOutline").removeClass("co_hideState")}).on("draw",function(){null!=mt&&mt.Draw()},function(){null!=o["default"].DocToolbarWidget&&o["default"].DocToolbarWidget.Draw()},function(){if(!0===m["default"].IsRegistered(r["default"].objectIds.widget$SpeedRead))try{var e=m["default"].GetObject(r["default"].objectIds.widget$SpeedRead);e.SetParentDiv(a()("#"+r["default"].ids.document).get(0));null!==e&&e.Draw()}catch(e){_e["default"].ConsoleMessage("Error creating Cobalt.Document.DocumentToolbar widget: "+e,_e["default"].Level.Error,"Cobalt.Website.DocumentToolbar.CreationError");k["default"].WidgetFailure("Cobalt.Document.DocumentToolbar widget creation error.",!1)}},function(){var e=o["default"].ViewData;Object(u["IsNotNullOrEmpty"])(e.KMSessionToken)&&Object(u["IsNotNullOrEmpty"])(e.LegacyId)&&Gs.LoadKMRelatedInformationCounts(e.KMSessionToken,e.KMProtocol,e.LegacyId,e.FirmName,e.FirmLogoUri,e.DocumentGuid)},function(){0==(null!==document.getElementById("hideTopTopics")&&"true"===document.getElementById("hideTopTopics").value)&&null!=o["default"].documentData&&Object(u["IsNotNullOrEmpty"])(o["default"].WidgetDomIds.TopTopics)&&null!=document.getElementById(o["default"].WidgetDomIds.TopTopics)&&Gs.AddTopTopicsWidget(o["default"].WidgetDomIds.TopTopics,o["default"].ViewData.DocumentGuid,null,o["default"].ViewData.DocumentSource.Key,o["default"].ViewData.Rank,o["default"].documentData,o["default"].WidgetDomIds.RelatedDocuments)},function(){a()(document).on("click","#coid_website_documentWidgetDiv .co_glossaryTerm > a",function(e){e.preventDefault();var t=a()(e.currentTarget).parent().find("input:first").val(),n=a()(this).text();if(Object(u["IsNotNullOrEmpty"])(t)){var o=m["default"].GetObject(r["default"].objectIds.widget$GlossaryLightbox);o.SetGuid(t);o.SetGlossaryTerm(n);o.Draw()}})},function(){if(Object(u["IsNotNullOrEmpty"])(o["default"].WidgetDomIds.DocTools)&&null!=document.getElementById(o["default"].WidgetDomIds.DocTools)){var e=m["default"].GetObject(r["default"].objectIds.widget$DocumentTools);e.SetParentDiv(document.getElementById(o["default"].WidgetDomIds.DocTools));e.SetDocumentDisplay(o["default"].DocDisplayWidget);e.Draw();var t=m["default"].GetObject(r["default"].objectIds.widget$DetailsBox);t.SetParentDiv(document.getElementById(o["default"].WidgetDomIds.DocTools));t.Draw()}},function(){if(k["default"].IsInfrastructureAccessControlOn("IAC-LARGE-DOC-PERFORMANCE"))if(p["default"].Instance){var e=0;y["default"].Subscribe(r["default"].events.lastChunkAdded,function(){for(var t=0;t<R.length;t++)e+=a()(R[t]).find("*").length;o["default"].DocumentNodeCount=e})}else o["default"].DocumentNodeCount=a()("#co_document *").length},function(){if(c["default"].UseSnapshots&&!c["default"].EnableIpad&&!c["default"].EnableIphone){var e=new gl;e.initSnapshotPersonHover();"Statutes"!==o["default"].documentData.ContentType||b["default"].isNarrowTocDisplayEnabled()||e.initFamousNameSummary(ge["default"].Instance.DocumentGuid);var t=a()(".co_doc_content_extras .co_greenStatus");t&&o["default"].initMaintainedTag(t,e)}},function(){if(k["default"].IsSupportedFeature("TocReportView")){var e=C["default"].Parse(window.location.href.toString()).QueryString["researchReportScrollTo"];e&&y["default"].Subscribe(r["default"].events.notesAndHighlightsFinishedLoading,function(){var t=a()("#"+r["default"].ids.websiteHeader).height(),n=a()("#"+r["default"].ids.documentHeader).height(),o=a()("#"+r["default"].ids.documentToolbar).height(),i=0,s=a()("#co_docContentHeader");s&&(i=s.height()+30);var l=-1*(t+n+o+i+30);a.a.scrollTo("#"+r["default"].classes.highlightSelectionPrefix+e,800,{offset:l})})}},function(){var e=C["default"].Parse(window.location.href).QueryString["highlightScrollTo"];e&&y["default"].Subscribe(r["default"].events.notesAndHighlightsFinishedLoading,function(){qs();if(b["default"].isNarrowTocDisplayEnabled())y["default"].Publish("Cobalt.Document.ScrollToHighlightedText",{Data:{scrollLocation:e}});else{var t=zs(),n=a()("#co_document").find("[data-annotationid^='"+e+"']");0===n.length&&(n=a()("#co_documentNotes").find("[data-annotationid^='"+e+"']"));n.length>0&&Ks(n.first(),t)}})},function(){"Statutes"!==o["default"].documentData.ContentType&&"Regulations"!==o["default"].documentData.ContentType||(new bl).InitializeWidget()},function(){c["default"].isIacOn("IAC-USERUPLOADDOCUMENT-EXTRACTCITATION")&&"User Document"===o["default"].documentData.ContentType&&(new Sl).InitializeWidget()},function(){var e=o["default"].userDocumentData;if(e&&!Object(u["IsNullOrEmpty"])(e.uploadedFileName)){var t=new Tl(e.documentGuid,e.uploadedFileName,e.containerId,e.containerType,e.accountKey);t.SetParent("#downloadUserDocument");t.Draw()}})},gDeXh8DW:function(e,t,n){e.exports=n("kTWnU3g/")("gDeXh8DW")},gJP6i1wd:function(e,t,n){e.exports=n("jzsWUI8o")("gJP6i1wd")},gbvy8oLS:function(e,t,n){e.exports=n("jzsWUI8o")("gbvy8oLS")},h2EqtdKC:function(e,t,n){e.exports=n("kTWnU3g/")("h2EqtdKC")},hXsI0YRr:function(e,t,n){e.exports=n("jzsWUI8o")("hXsI0YRr")},hbiuscD4:function(e,t,n){e.exports=n("kTWnU3g/")("hbiuscD4")},hcrMAWpa:function(e,t,n){e.exports=n("jzsWUI8o")("hcrMAWpa")},"hkcAmB/L":function(e,t,n){e.exports=n("jzsWUI8o")("hkcAmB/L")},i3XmY87k:function(e,t,n){e.exports=n("jzsWUI8o")("i3XmY87k")},inuYPBvT:function(e,t,n){e.exports=n("kTWnU3g/")("inuYPBvT")},jOHT9XLs:function(e,t,n){e.exports=n("kTWnU3g/")("jOHT9XLs")},jcExJMi3:function(e,t,n){e.exports=n("jzsWUI8o")("jcExJMi3")},jzsWUI8o:function(e,t){e.exports=bundle_865588822ce1f9f30659e58ee4756a00},kAkfKw4M:function(e,t){e.exports='<div class="co_redlinelightbox_warningMessage">\r\n\x3c!--\r\n@file addReportWarningMessage module\r\n--\x3e\r\n\t<div id="co_docWarning_text">\r\n\t\t<p>{{outOfPlanMessage}}</p>\r\n\t\t<p class="co_bold">{{additionalChargesMessage}}</p>\r\n\t\t<p ng-bind-html="trustHtml(pricingInfoMessage)" class="co_pricingInfo"></p>\r\n\r\n\t\t<div id="co_warning_clientId">\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class="co_overlayBox_optionsBottomLeft">\r\n\t<div class="co_overlayBox_optionsBottomRight">\r\n\t\t<div class="co_overlayBox_optionsBottom">\r\n\t\t\t<div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<input type="button" class="co_primaryBtn" value="{{acceptButtonText}}" ng-click="acceptCharges()">\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href="javascript:void(0);" ng-click="cancelMessage()">{{cancelButtonText}}</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},"kGdu/eGP":function(e,t,n){e.exports=n("Hvh/Xooh")("kGdu/eGP")},"kTWnU3g/":function(e,t){e.exports=bundle_7fb4a064d6c82221e43ed5c20d03a06c},"kl6HJ+2T":function(e,t,n){e.exports=n("kTWnU3g/")("kl6HJ+2T")},lFwkHtVf:function(e,t,n){e.exports=n("kTWnU3g/")("lFwkHtVf")},lcTvwkXh:function(e,t,n){e.exports=n("kTWnU3g/")("lcTvwkXh")},lfZaYf9V:function(e,t,n){e.exports=n("jzsWUI8o")("lfZaYf9V")},mK3po4ec:function(e,t){e.exports='<div id="coid_navFooter_itemCountDiv" class="co_navFooter_itemCount">\r\n  <label for="co_RI_ResultsPerPage"><%= itemsPerPageLabel %></label>\r\n  <select id="co_RI_ResultsPerPage" class="co_RI_ResultsPerPage_CRSW">\r\n      <% _.forEach(options, function(option) { %>\r\n\t\t\t<option value="<%= option %>" <% \r\n\t\t\t   if (size == option) {\r\n\t\t\t     %>selected<%\r\n\t\t\t   } %>\r\n\t\t\t ><%= option %></option> \r\n\t  <% }); %>\r\n  </select>\r\n</div>\t\r\n'},"mUsc+9wB":function(e,t,n){e.exports=n("jzsWUI8o")("mUsc+9wB")},nJWQgxDO:function(e,t,n){e.exports=n("kTWnU3g/")("nJWQgxDO")},o2fWI1cq:function(e,t,n){e.exports=n("jzsWUI8o")("o2fWI1cq")},oBJ49ltx:function(e,t,n){e.exports=n("jzsWUI8o")("oBJ49ltx")},ojAWEKfh:function(e,t,n){e.exports=n("kTWnU3g/")("ojAWEKfh")},pRRoaVDd:function(e,t,n){e.exports=n("jzsWUI8o")("pRRoaVDd")},qC2DXFt0:function(e,t,n){e.exports=n("jzsWUI8o")("qC2DXFt0")},qPRTrp4p:function(e,t,n){e.exports=n("kTWnU3g/")("qPRTrp4p")},"qX+i1Yp3":function(e,t,n){e.exports=n("kTWnU3g/")("qX+i1Yp3")},qyx2BoG4:function(e,t,n){e.exports=n("jzsWUI8o")("qyx2BoG4")},rGhUfLoS:function(e,t,n){e.exports=n("jzsWUI8o")("rGhUfLoS")},rh0Jeja1:function(e,t,n){
e.exports=n("kTWnU3g/")("rh0Jeja1")},"s3//kXy6":function(e,t,n){e.exports=n("jzsWUI8o")("s3//kXy6")},tAjEPIkd:function(e,t,n){e.exports=n("jzsWUI8o")("tAjEPIkd")},tJOVpjCS:function(e,t,n){e.exports=n("jzsWUI8o")("tJOVpjCS")},tMgFeBcq:function(e,t,n){e.exports=n("jzsWUI8o")("tMgFeBcq")},tiX7E9IU:function(e,t){e.exports='<div class="co_redlineLightbox_notAddedTabItem">\r\n\t\x3c!--\r\n\t\t@file notAddedComparisonItem template\r\n\t\t--\x3e\r\n\t<div ng-if="!notAddedComparisonItem.isProcessed">\r\n\t\t<div class="co_floatRight">\r\n\t\t\t<span class="co_redlineLightbox_tabItem_notAddedMessage">{{notAddedStatusText}}</span>\r\n\t\t</div>\r\n\r\n\t\t<p class="co_redlineLightbox_tabItem_itemName co_bold">{{notAddedComparisonItem.itemName}}</p>\r\n\r\n\t\t<p class="co_redlineLightbox_tabItem_savedDate  co_italic">{{notAddedComparisonItem.modifiedDate | renderDate}}</p>\r\n\t</div>\r\n\t<div ng-if="notAddedComparisonItem.isProcessed" class="co_progressIndicator">\r\n\t\t<img ng-src="{{spinnerSrc}}">\r\n\t</div>\r\n</div>'},tjTFLedb:function(e,t,n){e.exports=n("kTWnU3g/")("tjTFLedb")},tozfRYP0:function(e,t,n){e.exports=n("kTWnU3g/")("tozfRYP0")},"u1DA422/":function(e,t){e.exports='<li class="co_redlineLightbox_tabItem">\r\n    \x3c!--\r\n     @file comparisonItem template\r\n    --\x3e\r\n    <form ng-if="!item.isProcessed" name="comparisonItemForm">\r\n        <div class="co_redlineLightbox_tabItem_itemCheck co_floatLeft">\r\n            <input type="checkbox" ng-model="item.selected" ng-change="selectItem(item)">\r\n        </div>\r\n\r\n        <div class="co_redlineLightbox_tabItem_itemData co_floatLeft">\r\n            <p ng-if="!item.editMode" class="co_redlineLightbox_tabItem_itemName co_bold">\r\n                <span>{{item.itemName}}</span>\r\n            </p>\r\n            <div ng-if="item.editMode">\r\n                <input type="text" name="newItemName" ng-model="item.newItemName" required />\r\n                <p ng-show="comparisonItemForm.newItemName.$invalid" class="co_redStatus">{{invalidFieldWarningMessageText}}</p>\r\n            </div>\r\n\r\n            <p class="co_redlineLightbox_tabItem_savedDate co_italic">{{getSnippetInfo(item)}}</p>\r\n        </div>\r\n\r\n        <div ng-show="item.selected" class="co_redlineLightbox_tabItem_itemSelected co_floatLeft">\r\n            <div><input type="radio" ng-model="item.markAs" value="original" ng-change="radioButtonClicked(item)" id="original-{{item.itemGuid}}" /><label for="original-{{item.itemGuid}}">{{markAsOriginalText}}</label></div>\r\n            <div><input type="radio" ng-model="item.markAs" value="revised" ng-change="radioButtonClicked(item)" id="revised-{{item.itemGuid}}" /><label for="revised-{{item.itemGuid}}">{{markAsRevisedText}}</label></div>\r\n        </div>\r\n\r\n        <div class="co_redlineLightbox_tabItem_itemEdit co_floatRight co_textRight">\r\n            <a ng-if="!item.editMode" class="co_redlineLightbox_tabItem_editButton" title="{{editButtonText}}" ng-click="editComparisonItem(item)" href="javascript:void(0);">{{editButtonText}}</a>\r\n            <a ng-if="!item.editMode" class="co_redlineLightbox_tabItem_deleteButton" title="{{deleteButtonText}}" ng-click="deleteComparisonItem(item)" href="javascript:void(0);">{{deleteButtonText}}</a>\r\n            <a ng-if="item.editMode" ng-class="{co_disabled: comparisonItemForm.$invalid}" class="co_redlineLightbox_tabItem_editSaveButton" title="{{saveButtonText}}" ng-click="updateComparisonItem(item)" href="javascript:void(0);">{{saveButtonText}}</a>\r\n            <a ng-if="item.editMode" class="co_redlineLightbox_tabItem_editCancelButton" title="{{cancelButtonText}}" ng-click="exitFromEditMode(item)" href="javascript:void(0);">{{cancelButtonText}}</a>\r\n            <p class="co_redlineLightbox_tabItem_notAddedMessage co_hideState">{{notAddedStatusText}}</p>\r\n        </div>\r\n    </form>\r\n    <div ng-if="item.isProcessed" class="co_progressIndicator">\r\n        <img ng-src="{{spinnerSrc}}">\r\n    </div>\r\n    <div class="co_clear"></div>\r\n</li>'},uFhTGM2M:function(e,t,n){e.exports=n("Hvh/Xooh")("uFhTGM2M")},ulcy7Jqj:function(e,t){e.exports='<div class="co_redlinelightbox_blockedMessage">\r\n\x3c!--\r\n@file addReportBlockedMessage module\r\n--\x3e\r\n\t<p class="co_bold">{{blockedMessageText}}</p>\r\n</div>\r\n\r\n<div class="co_overlayBox_optionsBottomLeft">\r\n\t<div class="co_overlayBox_optionsBottomRight">\r\n\t\t<div class="co_overlayBox_optionsBottom">\r\n\t\t\t<div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href="javascript:void(0);" class="co_primaryBtn" ng-click="cancelMessage()">{{cancelButtonText}}</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},uybOBmCo:function(e,t,n){e.exports=n("Hvh/Xooh")("uybOBmCo")},"vHt/AHgd":function(e,t,n){e.exports=n("jzsWUI8o")("vHt/AHgd")},vSOx2O0z:function(e,t,n){e.exports=n("kTWnU3g/")("vSOx2O0z")},vVfh62dK:function(e,t,n){e.exports=n("kTWnU3g/")("vVfh62dK")},"w6BV/ovP":function(e,t,n){e.exports=n("jzsWUI8o")("w6BV/ovP")},wYjnsfpz:function(e,t,n){e.exports=n("kTWnU3g/")("wYjnsfpz")},"wd/RKGTj":function(e,t,n){e.exports=n("jzsWUI8o")("wd/RKGTj")},wg122GJj:function(e,t,n){e.exports=n("kTWnU3g/")("wg122GJj")},xNSvv6Hy:function(e,t){e.exports='<div class="co_redlineLightbox_reportsTab">\r\n    \x3c!--\r\n     @file reportsTab template\r\n    --\x3e\r\n    <div ng-if="!reportsLoaded" class="co_loading"></div>\r\n    <div ng-if="reportsLoaded">\r\n        <h4 id="coid_redlineLightbox_countMessage" class="co_bold">\r\n            <span id="coid_redlineLightbox_itemCount">{{countOfReportsText}}</span>\r\n        </h4>\r\n\r\n        <div class="co_redlineLightbox_notifications"><span class="co_bold" ng-if="showInformationMessage" ng-class="{co_redStatus: informationMessage.type==\'error\', co_greenStatus: informationMessage.type==\'success\'}" ng-bind-html="informationMessage.text"></span></div>\r\n\r\n        <div class="co_redlineLightbox_temporaryReports">\r\n            <ul>\r\n                <li ng-repeat="temporaryReport in listOfTemporaryReports">\r\n                    <div temporary-report-item></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <ul ng-if="listOfReports.length > 0" class="co_redlineLightbox_tabItemsList">\r\n            <li ng-repeat="report in listOfReports" report-item></li>\r\n        </ul>\r\n\r\n\t\t<div class="co_overlayBox_optionsBottomLeft">\r\n\t\t\t<div class="co_overlayBox_optionsBottomRight">\r\n\t\t\t\t<div class="co_overlayBox_optionsBottom">\r\n\t\t\t\t\t<div id="coid_redlineLightbox_footer">\r\n\t\t\t\t\t\t<ul id="coid_redlineLightbox_footerButtons">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" ng-click="$emit(\'closeRedlineToolLightbox\')">{{closeButtonText}}</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n    </div>\r\n</div>'},xTTYDesR:function(e,t,n){e.exports=n("jzsWUI8o")("xTTYDesR")},xvDIEcaO:function(e,t,n){e.exports=n("jzsWUI8o")("xvDIEcaO")},xvPFx6VW:function(e,t,n){e.exports=n("Hvh/Xooh")("xvPFx6VW")},yF65NEl6:function(e,t,n){e.exports=n("kTWnU3g/")("yF65NEl6")},yLLbzwLP:function(e,t,n){e.exports=n("jzsWUI8o")("yLLbzwLP")},yMpLjSbq:function(e,t,n){e.exports=n("jzsWUI8o")("yMpLjSbq")},yRMJo2a9:function(e,t,n){e.exports=n("Hvh/Xooh")("yRMJo2a9")},yklOysvk:function(e,t,n){e.exports=n("Hvh/Xooh")("yklOysvk")},"z+J4VEwH":function(e,t,n){e.exports=n("Hvh/Xooh")("z+J4VEwH")}});
//# sourceMappingURL=bundle.ce8d2a9eee16db3f8f1d85dad30bfa64.dll.js.map